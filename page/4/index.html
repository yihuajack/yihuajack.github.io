<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|JetBrains Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yihuajack.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"appID":"81Y57S4KVS","apiKey":"f9bea3504a9ea65b4de8d63b6f6ce44b","indexName":"Ayka's Blog","hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="綴る言の葉に彩られ 紅く色めき刹那に踊る">
<meta property="og:type" content="website">
<meta property="og:title" content="Ayka&#39;s Blog">
<meta property="og:url" content="https://yihuajack.github.io/page/4/index.html">
<meta property="og:site_name" content="Ayka&#39;s Blog">
<meta property="og:description" content="綴る言の葉に彩られ 紅く色めき刹那に踊る">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Liu Yihua">
<meta property="article:tag" content="ECE">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://yihuajack.github.io/page/4/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Ayka's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Ayka's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Ayka's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Useless work</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a>

  </li>
        <li class="menu-item menu-item-links">

    <a href="/links/" rel="section"><i class="fa fa-link fa-fw"></i>友情链接</a>

  </li>
        <li class="menu-item menu-item-resume">

    <a href="/resume/" rel="section"><i class="fa fa-file-user fa-fw"></i>简历</a>

  </li>
        <li class="menu-item menu-item-prs">

    <a href="/PRs/" rel="section"><i class="fa fa-code-merge fa-fw"></i>开源贡献</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="algolia-results">
  <div id="algolia-stats"></div>
  <div id="algolia-hits"></div>
  <div id="algolia-pagination" class="algolia-pagination"></div>
</div>

      
    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/yihuajack" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yihuajack.github.io/posts/14203.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Liu Yihua">
      <meta itemprop="description" content="綴る言の葉に彩られ 紅く色めき刹那に踊る">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ayka's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/14203.html" class="post-title-link" itemprop="url">使用MAMP和Tsugi构建PY4E、XDebug调试PHP总结（以Windows环境为例）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-12 17:12:43" itemprop="dateCreated datePublished" datetime="2020-04-12T17:12:43+08:00">2020-04-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-02 12:31:49" itemprop="dateModified" datetime="2020-10-02T12:31:49+08:00">2020-10-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CSDN%E8%A1%A5%E6%A1%A3/" itemprop="url" rel="index"><span itemprop="name">CSDN补档</span></a>
                </span>
            </span>

          
            <span id="/posts/14203.html" class="post-meta-item leancloud_visitors" data-flag-title="使用MAMP和Tsugi构建PY4E、XDebug调试PHP总结（以Windows环境为例）" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/posts/14203.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/posts/14203.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ol>
<li><p>安装MAMP。</p>
</li>
<li><p>在E:\MAMP\htdocs下</p>
<figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https:<span class="regexp">//gi</span>thub.com<span class="regexp">/csev/</span>py4e.git</span><br><span class="line">cd py4e</span><br><span class="line">git clone https:<span class="regexp">//gi</span>thub.com<span class="regexp">/csev/</span>tsugi.git</span><br></pre></td></tr></tbody></table></figure>

<p>项目很大，可以考虑导入到gitee再克隆。</p>
</li>
<li><p>打开MAMP Pro，Hosts-&gt;General-&gt;Port number改为8888，在Port-&gt;MySQL改为8889，启动Apache和MySQL服务器，点击Administer MySQL with: phpMyAdmin，如果没打开查看是不是端口错误，可直接在浏览器输入<a target="_blank" rel="noopener" href="http://localhost:8888/phpMyAdmin%E6%89%93%E5%BC%80%E3%80%82">http://localhost:8888/phpMyAdmin打开。</a></p>
</li>
<li><p>确认phpMyAdmin顶部显示为Server: localhost:8889，然后点击选项卡SQL，粘贴下列内容：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> tsugi <span class="keyword">DEFAULT</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">ON</span> tsugi.* <span class="keyword">TO</span> <span class="string">'ltiuser'</span>@<span class="string">'localhost'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'ltipassword'</span>;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">ON</span> tsugi.* <span class="keyword">TO</span> <span class="string">'ltiuser'</span>@<span class="string">'127.0.0.1'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'ltipassword'</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>并执行。</p>
</li>
<li><p>将E:\MAMP\htdocs\py4e\tsugi下的config-dist.php复制一份重命名为config.php，然后编辑config：</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">$wwwroot = <span class="string">'http://localhost:8888/py4e/tsugi'</span>;   <span class="comment">// Embedded Tsugi localhost</span></span><br><span class="line"> </span><br><span class="line">...</span><br><span class="line"> </span><br><span class="line">$CFG-&gt;pdo = <span class="string">'mysql:host=127.0.0.1;port=8889;dbname=tsugi'</span>; <span class="comment">// MAMP</span></span><br><span class="line">$CFG-&gt;dbuser    = <span class="string">'ltiuser'</span>;</span><br><span class="line">$CFG-&gt;dbpass    = <span class="string">'ltipassword'</span>;</span><br><span class="line"> </span><br><span class="line">...</span><br><span class="line"> </span><br><span class="line">$CFG-&gt;adminpw = <span class="string">'short'</span>;</span><br><span class="line"> </span><br><span class="line">...</span><br><span class="line"> </span><br><span class="line">$CFG-&gt;apphome = <span class="string">'http://localhost:8888/py4e'</span>;</span><br><span class="line">$CFG-&gt;context_title = <span class="string">"Python for Everybody"</span>;</span><br><span class="line">$CFG-&gt;lessons = $CFG-&gt;dirroot.<span class="string">'/../lessons.json'</span>;</span><br><span class="line"> </span><br><span class="line">... </span><br><span class="line"> </span><br><span class="line">$CFG-&gt;tool_folders = <span class="keyword">array</span>(<span class="string">"admin"</span>, <span class="string">"../tools"</span>, <span class="string">"../mod"</span>);</span><br><span class="line">$CFG-&gt;install_folder = $CFG-&gt;dirroot.<span class="string">'./../mod'</span>; <span class="comment">// Tsugi as a store</span></span><br><span class="line"> </span><br><span class="line">...</span><br><span class="line"> </span><br><span class="line">$CFG-&gt;servicename = <span class="string">'PY4E'</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>其中$CFG-&gt;adminpw可自己设定。 </p>
</li>
<li><p>打开<a target="_blank" rel="noopener" href="http://localhost:8888/py4e/tsugi/admin/%E7%9C%8B%E5%88%B0%E6%8F%90%E7%A4%BA%E9%9C%80%E8%A6%81Upgrade">http://localhost:8888/py4e/tsugi/admin/看到提示需要Upgrade</a> database，既可以直接点击Upgrade database，也可以在E:\MAMP\htdocs\py4e\tsugi\admin下执行php upgrade.php（但这种方法没成功），刷新后显示正常。</p>
</li>
<li><p>在phpMyAdmin左边栏展开tsugi-&gt;Tables点击lti_key，点击key_key为google.com的key的Edit，找到secret列确认其值不为空，否则应创建一个十六进制值。</p>
</li>
<li><p>点击<a target="_blank" rel="noopener" href="http://localhost:8888/py4e/tsugi/admin/install">Manage Installed Modules</a>发现报错Fatal error: in E:\MAMP\htdocs\py4e\tsugi\vendor\tsugi\lib\src\Util\GitRepo.php on line 217，在MAMP -&gt;Languages-&gt;PHP-&gt;Extensions中启用XDebug (Debugger)后显示了更详细的报错信息指向E:\MAMP\htdocs\py4e\tsugi\admin\install\index.php第24行：</p>
<figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$git_version</span> = <span class="variable">$repo</span>-&gt;<span class="builtin-name">run</span>(<span class="string">'--version'</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>以及上述GitRepo.php的第217行及其前是</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$resource = proc_open($command, $descriptorspec, $pipes, $cwd, $env);</span><br><span class="line"> </span><br><span class="line">$stdout = stream_get_contents($pipes[<span class="number">1</span>]);</span><br><span class="line">$stderr = stream_get_contents($pipes[<span class="number">2</span>]);</span><br><span class="line"><span class="keyword">foreach</span> ($pipes <span class="keyword">as</span> $pipe) {</span><br><span class="line">			fclose($pipe);</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">$status = trim(proc_close($resource));</span><br><span class="line"><span class="keyword">if</span> ($status) <span class="keyword">throw</span> <span class="keyword">new</span> \<span class="built_in">Exception</span>($stderr);</span><br></pre></td></tr></tbody></table></figure>

<p>发现是之前删注册表删错了把Git for Windows的PATH删掉了，补上以后在MAMP-&gt;Settings-&gt;Hosts-&gt;Databases中发现已经找到Tsugi了，勾选好以后重启服务器后刷新恢复正常，显示：This screen is a wrapper for the git command if it is installed in your system. This screen runs git commands on your behalf. It will only handle the normal operations and assume that they work. If you log in and edit the files after they are checked out, this tool might not be able to upgrade some of these git repos.<br>Using: git version 2.26.0.windows.1</p>
</li>
<li><p>打开Available Modules选项卡发现提示Cannot be installed via this page，点击锁的图标弹出报错信息Readonly Detail<br>This server does not appear to allow the git command to make changes to the web files. So this tool will not be able to install, update, or reconfigure any of these tools. You will have to update these files some other way. Alternatively, you may be able to configure a copy of git that can update the file system - see the documentation for $CFG-&gt;git_command in the config-dist.php file.打开config.php，找到第347-358行：</p>
<figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span> On a Mac localhost, <span class="keyword">if</span> you have git installed, you should be able to</span><br><span class="line"><span class="regexp">//</span> use the auto-install with no further configuration.</span><br><span class="line"> </span><br><span class="line"><span class="regexp">//</span> On Windows, to run the automatic install of modules:</span><br><span class="line"><span class="regexp">//</span> (<span class="number">1</span>) Make sure Git is installed (https:<span class="regexp">//gi</span>t-scm.com<span class="regexp">/download/</span>win</span><br><span class="line"><span class="regexp">//</span> Maybe also install a GIT GUI https:<span class="regexp">//gi</span>t-scm.com<span class="regexp">/downloads/gui</span>s</span><br><span class="line"><span class="regexp">//</span> (<span class="number">2</span>) Open <span class="string">"cmd"</span> and type <span class="string">"git --version"</span></span><br><span class="line"><span class="regexp">//</span> this should give you the current version of git. If this fails</span><br><span class="line"><span class="regexp">//</span> then git is not setup <span class="keyword">in</span> your path</span><br><span class="line"><span class="regexp">//</span> (Control Panel &gt; System and Security &gt; System &gt; Advanced System Settings &gt; Environment Variables)</span><br><span class="line"><span class="regexp">//</span> (<span class="number">3</span>) Then here <span class="keyword">in</span> <span class="string">"config.php"</span>:</span><br><span class="line"><span class="regexp">//</span> <span class="variable">$CFG</span>-&gt;git_command = <span class="string">'git'</span></span><br></pre></td></tr></tbody></table></figure>

<p>后来Available Modules选项卡干脆显示No available modules<br>Unable to decode <a target="_blank" rel="noopener" href="https://api.github.com/users/tsugitools/repos?language=PHP%E3%80%82%E6%8A%8A%E7%AC%AC358%E8%A1%8C%E7%9A%84%E6%B3%A8%E9%87%8A%E5%8E%BB%E6%8E%89%E5%90%8E%E8%AE%B0%E5%BE%97%E5%8A%A0%E5%88%86%E5%8F%B7%E5%90%8E%E5%88%B7%E6%96%B0%E3%80%82">https://api.github.com/users/tsugitools/repos?language=PHP。把第358行的注释去掉后记得加分号后刷新。</a></p>
</li>
<li><p>为找出Cannot be installed via this page原因，重新配置git环境变量和重装git没有效果，为MAMP配置XDebug。MAMP-&gt;Languages-&gt;PHP-&gt;Default version-&gt;Open，在打开的php7.3.7.ini里的[XDebug]下添加zend_extension=”E:\MAMP\bin\php\php7.3.7\ext\php_xdebug.dll”，在E:\MAMP\conf\php7.3.7\php.ini中也这样添加。注意：MAMP无需自己创建php文件输出phpinfo或者用php -i和php -m，只需打开<a target="_blank" rel="noopener" href="http://localhost:8888/MAMP/%EF%BC%88%E6%88%96%E8%80%85%E7%9B%B8%E5%BA%94%E7%9A%84%E4%B8%BB%E6%9C%BA%E5%92%8C%E7%AB%AF%E5%8F%A3%EF%BC%89%E5%B9%B6%E7%82%B9%E5%87%BB%E9%A1%B6%E9%83%A8%E8%8F%9C%E5%8D%95%E6%A0%8F%E7%9A%84phpInfo%E5%8D%B3%E5%8F%AF%EF%BC%8C%E5%9C%A8phpInfo%E7%BD%91%E9%A1%B5%E4%B8%AD%E6%90%9C%E7%B4%A2%E6%89%BE%E5%88%B0XDebug%E3%80%82%E4%BD%BF%E7%94%A8php">http://localhost:8888/MAMP/（或者相应的主机和端口）并点击顶部菜单栏的phpInfo即可，在phpInfo网页中搜索找到XDebug。使用php</a> -i然后将输出结果复制到<a target="_blank" rel="noopener" href="https://xdebug.org/wizard%E5%88%86%E6%9E%90%E7%9A%84%E7%BB%93%E6%9E%9C%E4%B8%BA">https://xdebug.org/wizard分析的结果为</a><br>Summary<br>Xdebug installed: no<br>Server API: Command Line Interface<br>Windows: yes - Compiler: MS VC 15 - Architecture: x86<br>Zend Server: no<br>PHP Version: 7.3.7<br>Zend API nr: 320180731<br>PHP API nr: 20180731<br>Debug Build: no<br>Thread Safe Build: yes<br>OPcache Loaded: no<br>Configuration File Path: unknown<br>Configuration File: unknown<br>Extensions directory: C:\php\ext<br>Instructions<br>Download php_xdebug-2.9.4-7.3-vc15.dll<br>Move the downloaded file to C:\php\ext<br>Create php.ini in the same folder as where php.exe is and add the line<br>zend_extension = C:\php\ext\php_xdebug-2.9.4-7.3-vc15.dll</p>
</li>
<li><p>在VSCode中安装PHP Debug，配置</p>
<figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">"<span class="selector-tag">debug</span><span class="selector-class">.allowBreakpointsEverywhere</span>": <span class="selector-tag">true</span>,</span><br><span class="line">"<span class="selector-tag">php</span><span class="selector-class">.validate</span><span class="selector-class">.executablePath</span>": "<span class="selector-tag">E</span>:\\<span class="selector-tag">MAMP</span>\\<span class="selector-tag">bin</span>\\<span class="selector-tag">php</span>\\<span class="selector-tag">php7</span><span class="selector-class">.3</span><span class="selector-class">.7</span>\\<span class="selector-tag">php</span><span class="selector-class">.exe</span>"</span><br></pre></td></tr></tbody></table></figure>

<p>运行-&gt;Launch currently open script，当前脚本为E:\MAMP\htdocs\py4e\tsugi\admin\install\index.php，生成launch.json（E:\MAMP\htdocs\py4e\tsugi.vscode\launch.json）保持默认即可。打开</p>
<p><a target="_blank" rel="noopener" href="http://localhost:8888/py4e/tsugi/admin/install/">http://localhost:8888/py4e/tsugi/admin/install/</a></p>
<p>，更多工具-&gt;开发人员工具-&gt;Sources，刷新网页。调试控制台显示</p>
<figure class="highlight less"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Error</span>: spawn php ENOENT</span><br><span class="line">    at Process.ChildProcess._handle.onexit (internal/child_process.<span class="attribute">js</span>:<span class="number">264</span>:<span class="number">19</span>)</span><br><span class="line">    at onErrorNT (internal/child_process.<span class="attribute">js</span>:<span class="number">456</span>:<span class="number">16</span>)</span><br><span class="line">    at processTicksAndRejections (internal/process/task_queues.<span class="attribute">js</span>:<span class="number">77</span>:<span class="number">11</span>) {</span><br><span class="line">  <span class="attribute">errno</span>: <span class="string">'ENOENT'</span>,</span><br><span class="line">  <span class="attribute">code</span>: <span class="string">'ENOENT'</span>,</span><br><span class="line">  <span class="attribute">syscall</span>: <span class="string">'spawn php'</span>,</span><br><span class="line">  <span class="attribute">path</span>: <span class="string">'php'</span>,</span><br><span class="line">  <span class="attribute">spawnargs</span>: [ <span class="string">'e:\\MAMP\\htdocs\\py4e\\tsugi\\admin\\install\\index.php'</span> ]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>调用堆栈-&gt;Launch currently open script在{main}（E:\MAMP\htdocs\py4e\tsugi\admin\install\repos_json.php）中第58行</p>
<figure class="highlight reasonml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add<span class="constructor">RepoInfo($<span class="params">tsugi</span>, $<span class="params">repo</span>)</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>=&gt;addRepoInfo（E:\MAMP\htdocs\py4e\tsugi\admin\install\install_util.php）第146行</p>
<figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$update</span> = <span class="variable">$repo</span>-&gt;<span class="builtin-name">run</span>(<span class="string">'remote update'</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>=&gt;Tsugi\Util\GitRepo-&gt;run（E:\MAMP\htdocs\py4e\tsugi\vendor\tsugi\lib\src\Util\GitRepo.php）第232行</p>
<figure class="highlight elixir"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="variable">$this</span>-&gt;run_command(Git::get_bin().<span class="string">" "</span>.<span class="variable">$command</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>=&gt;Tsugi\Util\GitRepo-&gt;run_command（E:\MAMP\htdocs\py4e\tsugi\vendor\tsugi\lib\src\Util\GitRepo.php）第217行抛出异常：</p>
<figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">出现异常。</span><br><span class="line">Exception: Logon failed, use ctrl+c <span class="keyword">to</span> cancel basic credential prompt.</span><br><span class="line">bash: /dev/tty: <span class="literal">No</span> such device <span class="keyword">or</span> address</span><br><span class="line">error: failed <span class="keyword">to</span> execute prompt<span class="built_in"> script </span>(exit code 1)</span><br><span class="line">fatal: could <span class="keyword">not</span> read Username <span class="keyword">for</span> <span class="string">'https://gitee.com'</span>: <span class="literal">No</span> such file <span class="keyword">or</span> directory</span><br><span class="line">error: Could <span class="keyword">not</span> fetch origin</span><br></pre></td></tr></tbody></table></figure>

<p>由于GitHub克隆很慢，我的tsugi是导出到Gitee再克隆到本地的。</p>
</li>
<li><p>本机对于github.com、coding.net、gitee.com等配置了同一个SSH-key，所以只需在Git Bash输入ssh -T <a href="mailto:git@gitee.com">git@gitee.com</a>然后输入yes即可添加gitee.com到known_hosts，然后显示Hi <username>! You’ve successfully authenticated, but GITEE.COM does not provide shell access.成功。</username></p>
</li>
<li><p>重试debug发现还是同样的问题，给Gitee重新添加SSH公钥也没有用，尝试在Git Bash中执行git clone <a href="mailto:git@gitee.com">git@gitee.com</a>:<username>/<gitname>.git报错：</gitname></username></p>
<figure class="highlight gauss"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CreateProcessW failed <span class="built_in">error</span>:<span class="number">193</span></span><br><span class="line">ssh_askpass: posix_spawn: Unknown <span class="built_in">error</span></span><br><span class="line">Host <span class="built_in">key</span> verification failed.</span><br></pre></td></tr></tbody></table></figure>

<p>发现可能原因是由于HOME目录被更改过所以Git Bash使用的.ssh在另外一个目录E:\Cadence\SPB_Data，而刚刚执行的操作只更新了这个目录中的known_hosts而没有改变C:\Users&lt;username&gt;.ssh\known_hosts，于是将两个known_hosts文件手动同步。然后再次执行git clone（SSH方式）发现成功。</p>
</li>
<li><p>重试debug发现还是同样的问题，参考<a target="_blank" rel="noopener" href="https://github.com/markomarkovic/simple-php-git-deploy/issues/20">fatal: could not read Username for ‘https://github.com’: No such device or address #20</a>将tsugi目录下的.git目录下的config中URL改成git形式，使用ssh -T <a href="mailto:git@gitee.com">git@gitee.com</a>成功，确定git config user.name为账户名称，重试debug，没有抛出任何通知、警告、错误或异常。</p>
</li>
</ol>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yihuajack.github.io/posts/51259.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Liu Yihua">
      <meta itemprop="description" content="綴る言の葉に彩られ 紅く色めき刹那に踊る">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ayka's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/51259.html" class="post-title-link" itemprop="url">SQL Server 2014完全卸载与SQL Server 2019安装全记录</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-05 01:19:36" itemprop="dateCreated datePublished" datetime="2020-04-05T01:19:36+08:00">2020-04-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-02 12:31:49" itemprop="dateModified" datetime="2020-10-02T12:31:49+08:00">2020-10-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CSDN%E8%A1%A5%E6%A1%A3/" itemprop="url" rel="index"><span itemprop="name">CSDN补档</span></a>
                </span>
            </span>

          
            <span id="/posts/51259.html" class="post-meta-item leancloud_visitors" data-flag-title="SQL Server 2014完全卸载与SQL Server 2019安装全记录" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/posts/51259.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/posts/51259.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ol>
<li><p>在服务中停止所有SQL Server相关服务。</p>
</li>
<li><p>打开Visual Studio Installer，取消勾选SQL Server Express 2016 LocalDB、SQL ADAL运行时、SQL Server Data Tools、SQL Server ODBC Driver、SQL Server 命令行实用工具、SQL Server 支持的数据源、SQL Server 的 CLR 数据类型等，当然包括其连带的一大堆组件包括使用C++的桌面开发、C++核心桌面功能、体系结构和分析工具、Windows Communication Foundation、通用Windows平台开发、.NET桌面开发、通用Windows平台工具、.NET桌面开发工具，然后安装（卸载）。</p>
</li>
<li><p>打开控制面板中的卸载程序，将Microsoft SQL Server 2012 Native Client、Microsoft SQL Server 2008 Setup Support Files及其安装程序、主程序、LocalDB、Microsoft SQL Server Compact 3.5 SP2及其x64版本、Microsoft System CLR Types for SQL Server、Microsoft VSS Writer for SQL Server、Microsoft OLE DB Driver for SQL Server等尽数删去，其中先卸载主程序，按步骤卸载掉实例后虽然还在列表中，但是卸载完其他项目后再卸载主程序会显示已卸载。注意如果有SQL Server Management Studio (SSMS)还要卸载SSMS。</p>
</li>
<li><p>打开Windows Installer Clean Up，将上述各程序及其他SQL Server相关程序尽数删去。</p>
</li>
<li><p>打开注册表管理器，在HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft下删除：Microsoft ODBC Driver 11 for SQL Server、Microsoft ODBC Driver 17 for SQL Server、Microsoft OLE DB Driver for SQL Server、Microsoft OLE DB Driver Redist、Microsoft SQL Server 2012 Redist、Microsoft SQL Server 2014 Redist、Microsoft SQL Server 2017 RC0 Redist、Microsoft SQL Server 2019 CTP2.2 Redist、Microsoft SQL Server Compact Edition、Microsoft SQL Server Native Client 11.0、Microsoft SQL Server、MSODBCSQL11、MSODBCSQL17、MSOLEDBSQL、MSSQLServer、SQLNCLI11等；在HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Control\Session Manager下删除PendingFileRenameOperations；在HKEY_CLASSES_ROOT下删除MSOLEDBSQL.1、MSOLEDBSQL.AdvancedPage.1、MSOLEDBSQL.AdvancedPage、MSOLEDBSQL.AdvancedPage、MSOLEDBSQL.ConnectionPage.1、MSOLEDBSQL.ConnectionPage、MSOLEDBSQL.Enumerator.1、MSOLEDBSQL.Enumerator、MSOLEDBSQL.ErrorLookup.1、MSOLEDBSQL.ErrorLookup、MSOLEDBSQL、MSSQL.VDI.Client.2、MSSQL.VDI.Client、MSSQL.VDI.Server.2、MSSQL.VDI.Server、SQLNCLI11.1、SQLNCLI11.AdvancedPage.1、SQLNCLI11.AdvancedPage、SQLNCLI11.ConnectionPage.1、SQLNCLI11.ConnectionPage、SQLNCLI11.Enumerator.1、SQLNCLI11.Enumerator、SQLNCLI11.ErrorLookup.1、SQLNCLI11.ErrorLookup、SQLNCLI11、SQLOLEDB Enumerator.1、SQLOLEDB Enumerator、SQLOLEDB ErrorLookup.1、SQLOLEDB ErrorLookup、SQLOLEDB.1、SQLOLEDB、SQLServerProfilerTraceData、SQLServerProfilerTraceDef、SQLXMLX.1、SQLXMLX等；在HKEY_USERS\S-1-5-21-xxxxxxxxxx-xxxxxxxx-xxxxxxxxxx-xxxx\Software\Microsoft下删除Microsoft SQL Server；在HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft下删除Microsoft ODBC Driver 11 for SQL Server、Microsoft ODBC Driver 17 for SQL Server、Microsoft OLE DB Driver for SQL Server、Microsoft SQL Server Compact Edition、Microsoft SQL Server Native Client 11.0、Microsoft SQL Server、MSODBCSQL11、MSODBCSQL17、MSOLEDBSQL、MSSQLServer、SQLNCLI11；HKEY_USERS\S-1-5-18到S-1-5-8-21-…及S-1-5-80-…\Software下SQL Server相关注册表项。</p>
</li>
<li><p>删除C:\Program Files和Program Files (x86)\Common Files\System\Ole DB中的sqloledb.dll、sqloledb.rll、sqlxmlx.dll、sqlxmlx.rll、msdasql.dll、msdasqlr.dll以及en-US、ja-JP、zh-CN\sqloledb.rll.mui、msdasqlr.dll.mui、sqlxmlx.rll.mui；删除C:\WINDOWS\system32\sqlcecompact40.dll、sqlceoledb40、sqlceqp40.dll、sqlcese40.dll、sqlncli11.dll、SQLServerManager12.msc、SqlServerSpatial120.dll、SqlServerSpatial130.dll、SqlServerSpatial150.dll、sqlsrv32.dll、sqlsrv32.rll；删除C:\WINDOWS\SysWOW64\sqlcecompact40.dll、sqlceoledb40、sqlceqp40.dll、sqlcese40.dll、sqlsrv32.dll、sqlsrv32.rll、sqlunirl.dll、sqlwid.dll、sqlwoa.dll等。</p>
</li>
<li><p>使用Registrar Registry Manager搜索C:\Program Files\Microsoft SQL Server及C:\Program Files (x86)\Microsoft SQL Server，只选择数据，并选定全字匹配，搜索结果全部删除。</p>
</li>
<li><p>删除C:\Program Files\Microsoft SQL Server、C:\Program Files (x86)\Microsoft SQL Server、C:\Program Files (x86)\Microsoft Analysis Services、C:\Users&lt;username&gt;\AppData\Roaming\Microsoft\Microsoft SQL Server、C:\Users&lt;username&gt;\AppData\Local\Microsoft\Microsoft SQL Server（把C:\Program Files\Microsoft SQL Server\150\Setup Bootstrap\Log留下）。</p>
</li>
<li><p>打开SQL Server 2019安装程序，选择全新SQL Server独立安装或向现有安装添加功能，然后选择执行全新安装，指定可用版本为Developer，选择实例功能：数据库引擎服务、SQL Server复制、全文和语义提取搜索、Data Quality Services、Analysis Services和共享功能：Data Quality Client、客户端工具连接、客户端工具向后兼容性、客户端工具SDK、SQL Server客户端连接SDK（至此我们终于可以为实例功能、共享功能、共享功能（x86）都选择自己的安装目录，并且所有功能都没有变成灰色不可选或已选择的状态），选择命名实例为MSSQLSERVER，数据库引擎配置-&gt;服务器配置-&gt;身份验证模式为混合模式】设定密码并添加当前用户，再添加Administrators检查名称后的结果。</p>
</li>
<li><p>第一次报错：注册表权限问题，将提示的注册表十六进制代码在注册表中搜索定位到所在上一级Components（我的在HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Installer\UserData\S-1-5-18\Components）设置权限所有者为Administrators，启用继承，设置权限为Administrators和Users都可完全控制（记得之后改回原样，该注册表权限与Windows搜索结果菜单和开始菜单图标右键菜单高度相关）。</p>
</li>
<li><p>第二次报错：服务没有及时响应启动或控制请求。查询C:\Program Files\Microsoft SQL Server\150\Setup Bootstrap\Log下相应文件夹里的Details.txt找到这条报错信息向上溯源，发现很多feature都failed in result Result或ValidateResult，向上查找到最早的报错Result为E:\Program Files\Microsoft SQL Server\MSAS15.MSSQLSERVER\OLAP\和E:\Program Files\Microsoft SQL Server\MSAS15.MSSQLSERVER\OLAP\bin\，发现服务中的MSSQLServerOLAPService启动后迅速停止。再向上寻找发现报错信息：Slp: Sco: File ‘G:\x64\setup\x64\RsFx.msi’ does not exist、Slp: Sco: File ‘G:\2052_CHS_LP\x64\setup\x64\sql_as_loc.msi’ does not exist等，由于此时尚未安装MSSQLSERVER服务所以不能在服务上做文章，多次重试无用后取消，最后安装失败，共享功能全部成功安装，实例功能全部安装失败，最终错误代码为0x80004005。于是将ISO镜像文件解压并将其从移动硬盘复制到本地硬盘。试图使用修复但是现实修复程序没有作出更改，因为数据库引擎服务本就没有配置好，好在我们之前的安装是按照安装程序一步步安装的，我们可以在卸载程序中右键Microsoft SQL Server (64位)卸载/更改然后选择卸载所有实例功能。同时，安装还试图重装IIS，但是需要重启而未重启，总之没能解决该错误。试图通过命令行启动SQL Server返回错误信息服务没有响应控制功能。搜索报错信息Configuration action failed for feature SQL_Engine_Core_Inst during timing Startup and scenario Startup也没有得到解决办法。重启后通过本地硬盘中的安装程序重新安装。</p>
</li>
<li><p>第三次报错：服务没有及时响应启动或控制请求。这次更奇怪的是与第二次不同，没有文件does not exist，也没有Result和ValidateResult的报错信息，安装顿时陷入最艰难的情形。不过这次MSSQLSERVER已安装好，打开计算机管理（本地）-&gt;系统工具-&gt;事件查看器-&gt;Windows 日志-&gt;系统大量报错：等待……服务的连接超时(60000 毫秒)、由于下列错误，——服务启动失败: 服务没有及时响应启动或控制请求，更改MSSQLSERVER为本地系统登录后事件信息是SQL Server (MSSQLSERVER) 服务由于下列服务特定错误而终止: %%945。更改E:\Program Files\Microsoft SQL Server\MSSQL15.MSSQLSERVER\MSSQL\Log的权限后进入该目录打开ERRORLOG及ERRORLOG.x查看报错physical file “d:\dbs\sh\s19s\0924_133725\cmd\2\obj\x64retail\sql\mkmastr\databases\mkmastr.proj\MSDBData.mdf、model.mdf”. Operating system error 3: “3(系统找不到指定的路径。)”、MSDBLog.ldf不正确以及spid23s   SQL Server failed to communicate with filter daemon launch service  (OS error: 服务没有及时响应启动或控制请求等，搜索错误代码9954也没有结果。结束本次安装，发现Analysis Service成功安装。</p>
</li>
<li><p>受<a target="_blank" rel="noopener" href="https://www.cnblogs.com/woxpp/p/5607908.html">SqlServer 错误1053：服务并未及时响应启动或控制请求</a>启发，在安装到最后正在注册服务将要报错时在服务中依次将注册的SQL Server Full-text Filter Daemon Launcher (MSSQLSERVER)、SQL Server (MSSQLSERVER)、SQL Server Analysis Services (MSSQLSERVER)、SQL Server Analysis Services CEIP (MSSQLSERVER)、SQL Server Browser、SQL Server CEIP 服务 (MSSQLSERVER)、SQL Server VSS Writer、SQL Server 代理 (MSSQLSERVER)改为本地系统账户登录。安装成功。</p>
</li>
<li><p>另外一种更靠谱的方法：在安装失败后，SQL Server各服务都已经被添加好，只是无法启动而已，在计算机管理（本地）-&gt;系统工具-&gt;本地用户和组-&gt;组-&gt;Administrators-&gt;添加到组-&gt;添加NT Service\MSSQLSERVER、NT Service\MSSQLServerOLAPService、NT Service\MSSQLFDLauncher、NT Service\SQLSERVERAGENT，然后搜索本地安全策略-&gt;安全设置-&gt;本地策略-&gt;用户权限分配-&gt;允许本地登录-&gt;属性-&gt;添加用户或组中添加上述四项，然后卸载数据库引擎服务、SQL Server复制、全文和语义提取搜索、Data Quality Services、Analysis Services，然后重新安装时在数据库引擎配置-&gt;服务器配置-&gt;指定SQL Server管理员添加当前用户和Administrators，在下一步Analysis Services配置-&gt;指定哪些用户具有对Analysis Services的管理权限中也同样如此指定。顺利安装，并且服务登录为NT Service...。</p>
</li>
<li><p>为解决SQL Server配置管理器中SQL Server网络配置和SQL Native Client 11.0配置只有32位的问题重新安装，这次清理了所有SQL Server、SQLServer、MSSQL、Microsoft ODBC、Microsoft OLE DB、MSODBCSQL、SQLOLEDB、SQLNCLI、SQLXMLX、sqlboot、SqlDumper、sqlmgmprovider、svrenumapi、instapi150等注册表，教训是搜索注册表时尽量不要勾选搜索数据，只需要勾选项和值即可，否则必然会导致误删，如Autorecover MOFs、环境变量、AppCompatCache等。</p>
</li>
<li><p>第一次报错：已添加了具有相同键的项。解决方法：删除C:\Users&lt;username&gt;\AppData\Local\Microsoft_Corporation\LandingPage.exe*文件夹。</p>
</li>
<li><p>第二次报错：注册表权限问题，参考<a target="_blank" rel="noopener" href="https://blog.csdn.net/yihuajack/article/details/104395132">Windows 10无法打开注册表 由于某个错误无法打开该密钥(详细信息:拒绝访问)且无法在注册表上设置新的所有者拒绝访问的解决方案</a>更改计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Installer\UserData\S-1-5-18\Components权限。</p>
</li>
<li><p>第三次卡在SqlEngineDBStartConfigAction_install_configrc_Cpu64报错（SQLEngine: –SqlServerServiceSCM: Waiting for nt event ‘Global\sqlserverRecComplete’ to be created、SQLEngine: –SqlServerServiceSCM: Wait for creation of event handle ‘Global\sqlserverRecComplete’ has timed out）：AS或SQLEngine: –SqlEngineSetupPrivate: Failed to set register with Software Usage Metrics: System.IO.FileNotFoundException: 系统找不到指定的文件。 (异常来自 HRESULT:0x80070002)、SQLEngine: –SqlServerServiceSCM: Exception happens at start SQL Engine attempt 1. Exception: 找不到数据库引擎启动句柄之解决方法：安装时在服务器配置-&gt;服务账户-&gt;SQL Server数据库引擎-&gt;账户名称修改为NT AUTHORITY\SYSTEM，注意不用查找账户直接输入该名称确定。然后顺利安装。安装后MSSQLSERVER采用的是本地系统登录。</p>
</li>
<li><p>第四次发现SQL Server主服务启动不了，修复又报错找不到数据库引擎启动句柄，发现SQL Server服务的登录方式被改回了NT Service\MSSQLSERVER并且无法启动，报错启动失败或请求失败或服务未及时响应，解决方法是在服务中将其登录的登录身份改为本地系统账户即可。</p>
</li>
<li><p>打开SSMS，注意输入的是计算机名称，而不是MSSQLSERVER等乱七八糟的名称，否则会报错：</p>
<figure class="highlight asciidoc"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">===================================</span><br><span class="line"><span class="code"> </span></span><br><span class="line">无法连接到 MSSQLSERVER。</span><br><span class="line"><span class="code"> </span></span><br><span class="line">===================================</span><br><span class="line"><span class="code"> </span></span><br><span class="line">在与 SQL Server 建立连接时出现与网络相关的或特定于实例的错误。未找到或无法访问服务器。请验证实例名称是否正确并且 SQL Server 已配置为允许远程连接。 (provider: Named Pipes Provider, error: 40 - 无法打开到 SQL Server 的连接) (.Net SqlClient Data Provider)</span><br><span class="line"><span class="code"> </span></span><br><span class="line">------------------------------</span><br><span class="line">有关帮助信息，请单击: http://go.microsoft.com/fwlink?ProdName=Microsoft%20SQL%20Server&amp;EvtSrc=MSSQLServer&amp;EvtID=53&amp;LinkId=20476</span><br><span class="line"><span class="code"> </span></span><br><span class="line">------------------------------</span><br><span class="line">错误号: 53</span><br><span class="line">严重性: 20</span><br><span class="line">状态: 0</span><br><span class="line"><span class="code"> </span></span><br><span class="line"><span class="code"> </span></span><br><span class="line">------------------------------</span><br><span class="line">程序位置:</span><br><span class="line"><span class="code"> </span></span><br><span class="line"><span class="code">   在 System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, DbConnectionPool pool, String accessToken, Boolean applyTransientFaultHandling, SqlAuthenticationProviderManager sqlAuthProviderManager)</span></span><br><span class="line"><span class="code">   在 System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)</span></span><br><span class="line"><span class="code">   在 System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup, DbConnectionOptions userOptions)</span></span><br><span class="line"><span class="code">   在 System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal&amp; connection)</span></span><br><span class="line"><span class="code">   在 System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)</span></span><br><span class="line"><span class="code">   在 System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)</span></span><br><span class="line"><span class="code">   在 System.Data.SqlClient.SqlConnection.TryOpenInner(TaskCompletionSource`1 retry)</span></span><br><span class="line"><span class="code">   在 System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)</span></span><br><span class="line"><span class="code">   在 System.Data.SqlClient.SqlConnection.Open()</span></span><br><span class="line"><span class="code">   在 Microsoft.SqlServer.Management.SqlStudio.Explorer.ObjectExplorerService.ValidateConnection(UIConnectionInfo ci, IServerType server)</span></span><br><span class="line"><span class="code">   在 Microsoft.SqlServer.Management.UI.ConnectionDlg.Connector.ConnectionThreadUser()</span></span><br><span class="line">===================================</span><br><span class="line">找不到网络路径。</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>在SQL Server配置管理器仍然没有64位的节点的情况下，可尝试修改计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\150和计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\MSSQL15.MSSQLSERVER下的注册表，例如TCP/IP是在计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\MSSQL15.MSSQLSERVER\MSSQLServer\SuperSocketNetLib\Tcp。将其Enabled值设为1，查看其子项IP列表，如IP14的IpAddress为127.0.0.1，TcpPort为1433，那么就可以通过服务器名称为127.0.0.1,1433登录，注意如果通过Windows身份验证会报错：</p>
<figure class="highlight asciidoc"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">===================================</span><br><span class="line"><span class="code"> </span></span><br><span class="line">无法连接到 127.0.0.1,1433。</span><br><span class="line"><span class="code"> </span></span><br><span class="line">===================================</span><br><span class="line"><span class="code"> </span></span><br><span class="line">登录失败。该登录名来自不受信任的域，不能与集成身份验证一起使用。 (.Net SqlClient Data Provider)</span><br><span class="line"><span class="code"> </span></span><br><span class="line">------------------------------</span><br><span class="line">有关帮助信息，请单击: http://go.microsoft.com/fwlink?ProdName=Microsoft%20SQL%20Server&amp;EvtSrc=MSSQLServer&amp;EvtID=18452&amp;LinkId=20476</span><br><span class="line"><span class="code"> </span></span><br><span class="line">------------------------------</span><br><span class="line">服务器名称: 127.0.0.1,1433</span><br><span class="line">错误号: 18452</span><br><span class="line">严重性: 14</span><br><span class="line">状态: 1</span><br><span class="line">行号: 65536</span><br><span class="line"><span class="code"> </span></span><br><span class="line"><span class="code"> </span></span><br><span class="line">------------------------------</span><br><span class="line">程序位置:</span><br><span class="line"><span class="code"> </span></span><br><span class="line"><span class="code">   在 System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, DbConnectionPool pool, String accessToken, Boolean applyTransientFaultHandling, SqlAuthenticationProviderManager sqlAuthProviderManager)</span></span><br><span class="line"><span class="code">   在 System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)</span></span><br><span class="line"><span class="code">   在 System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup, DbConnectionOptions userOptions)</span></span><br><span class="line"><span class="code">   在 System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal&amp; connection)</span></span><br><span class="line"><span class="code">   在 System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)</span></span><br><span class="line"><span class="code">   在 System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)</span></span><br><span class="line"><span class="code">   在 System.Data.SqlClient.SqlConnection.TryOpenInner(TaskCompletionSource`1 retry)</span></span><br><span class="line"><span class="code">   在 System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)</span></span><br><span class="line"><span class="code">   在 System.Data.SqlClient.SqlConnection.Open()</span></span><br><span class="line"><span class="code">   在 Microsoft.SqlServer.Management.SqlStudio.Explorer.ObjectExplorerService.ValidateConnection(UIConnectionInfo ci, IServerType server)</span></span><br><span class="line"><span class="code">   在 Microsoft.SqlServer.Management.UI.ConnectionDlg.Connector.ConnectionThreadUser()</span></span><br></pre></td></tr></tbody></table></figure>

<p>改为通过SQL Server身份验证登录即可。</p>
</li>
</ol>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yihuajack.github.io/posts/15171.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Liu Yihua">
      <meta itemprop="description" content="綴る言の葉に彩られ 紅く色めき刹那に踊る">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ayka's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/15171.html" class="post-title-link" itemprop="url">MAMP出现HTTP 错误 404.0 - Not Found的解决方法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-02 13:20:41" itemprop="dateCreated datePublished" datetime="2020-04-02T13:20:41+08:00">2020-04-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-02 12:31:49" itemprop="dateModified" datetime="2020-10-02T12:31:49+08:00">2020-10-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CSDN%E8%A1%A5%E6%A1%A3/" itemprop="url" rel="index"><span itemprop="name">CSDN补档</span></a>
                </span>
            </span>

          
            <span id="/posts/15171.html" class="post-meta-item leancloud_visitors" data-flag-title="MAMP出现HTTP 错误 404.0 - Not Found的解决方法" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/posts/15171.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/posts/15171.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在Windows中使用MAMP新建E:\MAMP\htdocs\first文件夹和E:\MAMP\htdocs\first\index.php文件，使用Apache和Mysql服务器，然后打开<a target="_blank" rel="noopener" href="http://localhost/first/index.php%E5%87%BA%E7%8E%B0%E4%BB%A5%E4%B8%8B%E9%94%99%E8%AF%AF%E9%A1%B5%E9%9D%A2![img](D:/Documents/Programming/HexoBlog/source/_posts/CSDN%E8%A1%A5%E6%A1%A3-28/20200402131311285.png)">http://localhost/first/index.php出现以下错误页面![img](D:\Documents\Programming\HexoBlog\source\_posts\CSDN补档-28\20200402131311285.png)</a></p>
<p>首先在MAMP中的Settings-&gt;Hosts-&gt;General确认Host name为localhost，尝试在open中用浏览器打开出现页面显示：</p>
<p>The virtual host was set up successfully.</p>
<p>If you can see this page, your new virtual host was set up successfully. Now, web content can be added and this placeholder page1 should be replaced or deleted.</p>
<p>Server name: localhost<br>Document root: E:/MAMP/htdocs </p>
<p>1 Files: index.php and MAMP-PRO-Logo.png</p>
<p>检查端口，由于80已经被系统占用，所以使用的是82，于是改为打开<a target="_blank" rel="noopener" href="http://localhost:82/first/index.php%E6%88%90%E5%8A%9F%E3%80%82">http://localhost:82/first/index.php成功。</a></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yihuajack.github.io/posts/53160.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Liu Yihua">
      <meta itemprop="description" content="綴る言の葉に彩られ 紅く色めき刹那に踊る">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ayka's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/53160.html" class="post-title-link" itemprop="url">Cygwin如何更改HOME目录（MSYS2和Cygwin ZSH冲突）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-01 17:27:42" itemprop="dateCreated datePublished" datetime="2020-04-01T17:27:42+08:00">2020-04-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-02 12:31:49" itemprop="dateModified" datetime="2020-10-02T12:31:49+08:00">2020-10-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CSDN%E8%A1%A5%E6%A1%A3/" itemprop="url" rel="index"><span itemprop="name">CSDN补档</span></a>
                </span>
            </span>

          
            <span id="/posts/53160.html" class="post-meta-item leancloud_visitors" data-flag-title="Cygwin如何更改HOME目录（MSYS2和Cygwin ZSH冲突）" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/posts/53160.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/posts/53160.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>由于用户变量中的HOME由于需要使用Cadence的原因被迫改到E:\Cadence\SPB_Data下，MSYS2使用的ZSH的配置文件都自动放在这一目录下，然而想为Cygwin也配置ZSH发现产生乱码，这并不是由于字体或者编码问题导致的，其原因是MSYS2和Cygwin共用HOME目录下的.zshrc文件，而.zshrc文件中两个系统使用的路径表示不一样，Cygwin需要在盘符前面加”/cygdrive”，如在MSYS2使用的.zshrc中，ZSH的PATH配置语句为：</p>
<figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">ZSH</span>=<span class="string">"/e/Cadence/SPB_Data/.oh-my-zsh"</span></span><br></pre></td></tr></tbody></table></figure>

<p>而Cygwin中则应为：</p>
<figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">ZSH</span>=<span class="string">"/cygdrive/c/Users/&lt;userename&gt;/.oh-my-zsh"</span></span><br></pre></td></tr></tbody></table></figure>

<p>解决这个问题只能通过更改Cygwin的HOME目录的方式来解决（而不只是启动目录设置）。</p>
<p>首先，Cygwin现在已有zsh包可通过setup程序安装，不要再使用apt-cyg，它已经过时，经测验安装zsh会报错。</p>
<p>经过测验，<a target="_blank" rel="noopener" href="https://superuser.com/questions/585331/is-it-possible-to-have-cygwin-ignore-the-windows-home-environment-variable%E4%B8%8A%E6%8F%90%E5%87%BA%E7%9A%84%E5%9C%A8/etc/profile%E4%B8%AD%E6%B7%BB%E5%8A%A0">https://superuser.com/questions/585331/is-it-possible-to-have-cygwin-ignore-the-windows-home-environment-variable上提出的在/etc/profile中添加</a></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HOME=$(<span class="built_in">eval</span> <span class="built_in">echo</span> <span class="string">"~<span class="variable">$USER</span>"</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>的方法并不可行。你可以更改Cygwin的快捷方式为Cygwin.bat启动，在Cygwin.bat中可以随意更改HOME等设置，但是这样启动使用的是Windows命令提示符的Shell，并非Cygwin自带的mintty shell，这样就会出现乱码。另外经检验，<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/1494658/how-can-i-change-my-cygwin-home-folder-after-installation%E4%B8%AD%E6%8F%90%E5%87%BA%E7%9A%84%E5%9C%A8/etc/nsswitch.conf%E4%B8%AD%E5%B0%86db_home%E7%9A%84%E6%B3%A8%E9%87%8A%E5%8E%BB%E6%8E%89%E5%B9%B6%E6%94%B9%E4%B8%BA/%H%E3%80%81/%H/cygwin%E3%80%81windows%E3%80%81/home/%U%E7%AD%89%E7%AD%89%E7%BB%9F%E7%BB%9F%E6%B2%A1%E7%94%A8%EF%BC%8C%E8%80%8C%E4%B8%94%E8%AF%95%E5%9B%BE%E6%89%A7%E8%A1%8Cmkpasswd%E3%80%81mkgroup%E8%AF%AD%E5%8F%A5%E6%88%96https://superuser.com/questions/289444/how-do-i-change-my-home-folder-in-cygwin%E4%B8%AD%E6%8F%90%E5%87%BA%E7%9A%84%E6%9B%B4%E6%94%B9/etc/passwd%E6%96%87%E4%BB%B6%E7%AD%89%E6%96%B9%E6%B3%95%E5%85%A8%E9%83%A8%E6%97%A0%E6%95%88%EF%BC%8C%E8%80%8C%E7%BB%8Fhttp://mintty.github.io/mintty.1.html%E6%9F%A5mintty.exe%E7%9A%84%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E4%B9%9F%E6%97%A0%E8%AE%A1%E5%8F%AF%E6%96%BD%E3%80%82">https://stackoverflow.com/questions/1494658/how-can-i-change-my-cygwin-home-folder-after-installation中提出的在/etc/nsswitch.conf中将db_home的注释去掉并改为/%H、/%H/cygwin、windows、/home/%U等等统统没用，而且试图执行mkpasswd、mkgroup语句或https://superuser.com/questions/289444/how-do-i-change-my-home-folder-in-cygwin中提出的更改/etc/passwd文件等方法全部无效，而经http://mintty.github.io/mintty.1.html查mintty.exe的启动参数也无计可施。</a></p>
<p>正确方法是：</p>
<ol>
<li><p>在C:\Users&lt;username&gt;中另安装一个oh-my-zsh，可在该目录下执行命令（用Cygwin执行）：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh -c <span class="string">"<span class="subst">$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>"</span></span><br></pre></td></tr></tbody></table></figure>

<p>或</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh -c <span class="string">"<span class="subst">$(wget https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh -O -)</span>"</span></span><br></pre></td></tr></tbody></table></figure>

<p>等。</p>
</li>
<li><p>编辑.zshrc文件，确定语句：</p>
<figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">ZSH</span>=<span class="string">"/cygdrive/c/Users/&lt;userename&gt;/.oh-my-zsh"</span></span><br></pre></td></tr></tbody></table></figure>

<p>并将ZSH_THEME更改为你喜欢的主题，我使用的是agnoster的变种</p>
<p>zys主题</p>
<p>。</p>
</li>
<li><p>在/etc/bash.bashrc中添加：</p>
<figure class="highlight abnf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">HOME</span>=<span class="string">"C:\Users\&lt;username&gt;"</span></span><br><span class="line"><span class="attribute">PATH</span>=<span class="string">"/usr/local/bin:/usr/bin"</span></span><br><span class="line">exec zsh</span><br></pre></td></tr></tbody></table></figure>

<p>其中第一句是真正地设定了Cygwin的HOME目录，第二句是定义环境变量PATH，如没有这一句则很多命令无法执行，第三句是自动启动ZSH。</p>
</li>
<li><p>在/etc/profile中添加：</p>
<figure class="highlight ini"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">HOME</span>=<span class="string">"C:\Users\&lt;username&gt;"</span></span><br></pre></td></tr></tbody></table></figure>

<p>这一句是设定了启动目录为<del>，其中</del>为C:\Users&lt;username&gt;。</p>
</li>
<li><p>确认Cygwin快捷方式的目标为：</p>
<figure class="highlight latex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D:<span class="tag">\<span class="name">Program</span></span>_Files<span class="tag">\<span class="name">cygwin</span></span>64<span class="tag">\<span class="name">bin</span></span><span class="tag">\<span class="name">mintty</span></span>.exe -i /Cygwin-Terminal.ico -</span><br></pre></td></tr></tbody></table></figure>

<p>其中目录请按照自己的安装目录修改，最后的-也可改为-<del>，都保证启动目录为</del>，但是如果没有则启动目录变成快捷方式所在的目录。经验证，</p>
<p><a target="_blank" rel="noopener" href="https://superuser.com/questions/940529/how-to-change-the-default-shell-in-cygwin/1134672#1134672">https://superuser.com/questions/940529/how-to-change-the-default-shell-in-cygwin/1134672#1134672</a></p>
<p>和</p>
<p><a target="_blank" rel="noopener" href="https://medium.com/@alllexsm/how-to-install-z-shell-zsh-on-cygwin-dd9ee380d783">https://medium.com/@alllexsm/how-to-install-z-shell-zsh-on-cygwin-dd9ee380d783</a></p>
<p>中所提出的自动启动zsh的参数会导致闪退，原因不明。</p>
</li>
</ol>
<p>另外如果想为Windows Terminal配置Cygwin可在profiles.json的”profiles”里的”list”里添加：</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">"guid"</span>: <span class="string">"{xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}"</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"Cygwin64"</span>,</span><br><span class="line">    <span class="attr">"commandline"</span>: <span class="string">"D:\\Program_Files\\cygwin64\\bin\\bash.exe"</span>,</span><br><span class="line">    <span class="attr">"icon"</span>: <span class="string">"D:\\Program_Files\\cygwin64\\Cygwin.ico"</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>其中GUID可使用PowerShell命令</p>
<figure class="highlight ada"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">New</span>-GUID</span><br></pre></td></tr></tbody></table></figure>

<p>生成一个，其他个性化设置在此就不提供了，发现Windows Terminal可以完美运行Cygwin（Windows Terminal有自己的默认启动目录）：</p>
<p><img src="/posts/53160/Documents\Programming\HexoBlog\source_posts\CSDN补档-27\20200401172503260.png" alt="img"></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yihuajack.github.io/posts/60680.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Liu Yihua">
      <meta itemprop="description" content="綴る言の葉に彩られ 紅く色めき刹那に踊る">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ayka's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/60680.html" class="post-title-link" itemprop="url">WSL(Ubuntu)pip安装genpac后找不到命令的解决方法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-29 15:22:49" itemprop="dateCreated datePublished" datetime="2020-03-29T15:22:49+08:00">2020-03-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-02 12:31:49" itemprop="dateModified" datetime="2020-10-02T12:31:49+08:00">2020-10-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CSDN%E8%A1%A5%E6%A1%A3/" itemprop="url" rel="index"><span itemprop="name">CSDN补档</span></a>
                </span>
            </span>

          
            <span id="/posts/60680.html" class="post-meta-item leancloud_visitors" data-flag-title="WSL(Ubuntu)pip安装genpac后找不到命令的解决方法" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/posts/60680.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/posts/60680.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在WSL Ubuntu使用pip成功安装genpac后运行genpac –version却显示</p>
<figure class="highlight groovy"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">zsh:</span> command not <span class="attr">found:</span> genpac</span><br></pre></td></tr></tbody></table></figure>

<p>输入</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip list</span><br></pre></td></tr></tbody></table></figure>

<p>后发现genpac已经在列表中。解决方法是在.zshrc（如果不用ZSH则是.bashrc）文件中添加：</p>
<figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export PATH=<span class="variable">$HOME</span><span class="regexp">/bin:/u</span>sr<span class="regexp">/local/</span>bin:<span class="variable">$PATH</span></span><br><span class="line">export PATH=<span class="variable">$HOME</span><span class="regexp">/.local/</span>bin:<span class="regexp">/usr/</span>local/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></tbody></table></figure>

<p>后genpac可以成功运行。执行ls ~/.local/bin得到：</p>
<figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">genpac</span>  pip  pip<span class="number">2</span>  pip<span class="number">2</span>.<span class="number">7</span></span><br></pre></td></tr></tbody></table></figure>

<p>这个目录是pip的安装目录，对于pip安装的其他包也同样适用。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yihuajack.github.io/posts/23835.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Liu Yihua">
      <meta itemprop="description" content="綴る言の葉に彩られ 紅く色めき刹那に踊る">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ayka's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/23835.html" class="post-title-link" itemprop="url">VMware 15.5安装Ubuntu 19.10挂起不动报错squashfs和blk_update_request的解决方法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-29 12:03:38" itemprop="dateCreated datePublished" datetime="2020-03-29T12:03:38+08:00">2020-03-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-02 11:14:31" itemprop="dateModified" datetime="2020-10-02T11:14:31+08:00">2020-10-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CSDN%E8%A1%A5%E6%A1%A3/" itemprop="url" rel="index"><span itemprop="name">CSDN补档</span></a>
                </span>
            </span>

          
            <span id="/posts/23835.html" class="post-meta-item leancloud_visitors" data-flag-title="VMware 15.5安装Ubuntu 19.10挂起不动报错squashfs和blk_update_request的解决方法" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/posts/23835.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/posts/23835.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>用VMware Workstation 15 Pro 15.5.1安装Ubuntu 19.10接近完成时显示Ubuntu的启动界面，即五个点一直闪烁的界面却一直不动：</p>
<p><img src="/posts/23835/Documents\Programming\HexoBlog\source\_posts\CSDN补档-25\20200329123741712.png" alt="img"></p>
<p>检查VMware Workstation VMX进程发现其CPU使用率一直维持在1%左右的低位，而GPU使用率却一直在10%左右（使用GPU 0 - 3D），更改虚拟机设置为2个处理器后仍然没有解决，最后发现虚拟机-&gt;可移动设备-&gt;CD/DVD 2 (SATA)和CD/DVD (SATA)均未被连接，因为我是通过移动硬盘中的镜像安装Ubuntu的，所以尝试点击CD/DVD 2 (SATA)-&gt;连接后系统进入命令行界面执行一段时间，显示正在安装open-vm-tools，然后顺利启动Ubuntu，尽管发现此时CD/DVD 2 (SATA)还是处于未连接的状态。</p>
<p>还有一个问题，这样解决既然不是正常安装，那么VMware Tools就会出现问题，比如不能使用剪贴板，打开菜单栏虚拟机选项卡发现安装VMware Tools是灰色的，可尝试将虚拟机-&gt;CD/DVD (SATA)连接设置使用ISO映像文件的autoinst.iso改成vmware安装目录下的linux.exe。</p>
<p>之所以安装新版本的Ubuntu 19.10一方面是想要更新系统，另一方面是原来的Ubuntu 19.04突然出现了网络连接问题（NAT模式），有线网络和无线网络都不可用，索性直接重装，不过吸取了上次的教训，即在创建新的虚拟机的设置过程中选择将虚拟磁盘存储为单个文件。不过后来才想起来，网络适配器-&gt;网络连接一定要选桥接模式（不用选复制物理网络连接状态）即可正常使用。</p>
<p>另外，因为Ubuntu 14.04以后版本安装需要Internet连接，而一开始网络连接错误设置成了NAT模式而非桥接模式导致安装程序不能成功进行Retrieve files、Download language packs等操作及其后续Unpack等操作，导致不完全安装，即使安装成功也是英文版本，所以遇到这种情况还是<strong>重装</strong>为好，记得创建新的虚拟机时网络设置设置为<strong>桥接模式</strong>或者你能用的模式。另外推荐给虚拟机分配1/3的处理器和内核（比如6核12线程分配处理器数量为2、每个处理器的核心数量为2），这样安装会快不少。</p>
<p>使用新设置重装后却发现仍然同样的结果，于是用Ctrl+Alt+F1或Ctrl+Alt+F2调出终端：</p>
<p><img src="/posts/23835/Documents\Programming\HexoBlog\source\_posts\CSDN补档-25\20200329170400721.png" alt="img"></p>
<p>这两条信息不停地循环显示。然而经Hard Disk Sentinel检测磁盘很健康，无坏道，（Windows下进入镜像目录）用</p>
<figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">certutil</span> -hashfile ubuntu-<span class="number">19</span>.<span class="number">10</span>-desktop-amd<span class="number">64</span>.iso MD<span class="number">5</span></span><br></pre></td></tr></tbody></table></figure>

<p>MD5码校验正确，猜测可能是硬盘数据线老化的问题，仍然是执行连接CD/DVD 2 (SATA)后成功安装VMware Tools，这时打开菜单栏虚拟机选项卡：</p>
<p><img src="/posts/23835/Documents\Programming\HexoBlog\source\_posts\CSDN补档-25\20200329171032277.png" alt="img"></p>
<p>显示重新安装VMware Tools为灰色，剪贴板等VMware Tools功能正常，虚拟机正常运行。发现文件选项卡中找不到共享文件夹，可执行：</p>
<figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vmhgfs-fuse .host:<span class="regexp">/  /m</span>nt<span class="regexp">/hgfs/</span></span><br></pre></td></tr></tbody></table></figure>

<p>还可以给共享文件夹创建到HOME目录的软链接（share为共享文件夹名称）：</p>
<figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd <span class="regexp">/mnt/</span>hgfs</span><br><span class="line">ln -s <span class="regexp">/mnt/</span>hgfs<span class="regexp">/share/</span> ~/share</span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yihuajack.github.io/posts/55520.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Liu Yihua">
      <meta itemprop="description" content="綴る言の葉に彩られ 紅く色めき刹那に踊る">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ayka's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/55520.html" class="post-title-link" itemprop="url">WSL Ubuntu使用Cargo安装Starship</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-27 13:54:38" itemprop="dateCreated datePublished" datetime="2020-03-27T13:54:38+08:00">2020-03-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-02 11:15:12" itemprop="dateModified" datetime="2020-10-02T11:15:12+08:00">2020-10-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CSDN%E8%A1%A5%E6%A1%A3/" itemprop="url" rel="index"><span itemprop="name">CSDN补档</span></a>
                </span>
            </span>

          
            <span id="/posts/55520.html" class="post-meta-item leancloud_visitors" data-flag-title="WSL Ubuntu使用Cargo安装Starship" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/posts/55520.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/posts/55520.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>对于WSL，Starship官网推荐的安装方法是执行</p>
<figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https:<span class="regexp">//</span>starship.rs/install.sh | bash</span><br></pre></td></tr></tbody></table></figure>

<p>然而总是没反应，显示：</p>
<figure class="highlight livecodeserver"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">  Configuration</span><br><span class="line">&gt; Bin <span class="built_in">directory</span>: /usr/<span class="built_in">local</span>/bin</span><br><span class="line">&gt; Platform:      unknown-linux-gnu</span><br><span class="line">&gt; Arch:          x86_64</span><br><span class="line"> </span><br><span class="line">&gt; Tarball <span class="built_in">URL</span>: <span class="keyword">https</span>://github.com/starship/starship/releases/latest/download/starship-x86_64-unknown-linux-gnu.tar.gz</span><br><span class="line">? Install Starship latest <span class="built_in">to</span> /usr/<span class="built_in">local</span>/bin? [y/N] y</span><br><span class="line">! Escalated permission are required <span class="built_in">to</span> install <span class="built_in">to</span> /usr/<span class="built_in">local</span>/bin</span><br><span class="line">&gt; Installing Starship <span class="keyword">as</span> root, please <span class="built_in">wait</span>…</span><br></pre></td></tr></tbody></table></figure>

<p>然后我试图执行</p>
<figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https:<span class="regexp">//</span>starship.rs/install.sh | bash</span><br></pre></td></tr></tbody></table></figure>

<p>显示</p>
<figure class="highlight angelscript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Will <span class="keyword">not</span> apply HSTS. The HSTS database must be a regular <span class="keyword">and</span> non-world-writable file.</span><br><span class="line">ERROR: could <span class="keyword">not</span> open HSTS store at <span class="string">'/home/ayka_tsuzuki/.wget-hsts'</span>. HSTS will be disabled.</span><br><span class="line">-<span class="number">-2020</span><span class="number">-03</span><span class="number">-27</span> <span class="number">13</span>:<span class="number">06</span>:<span class="number">48</span>--  https:<span class="comment">//starship.rs/install.sh</span></span><br><span class="line">Resolving starship.rs (starship.rs)... <span class="number">104.27</span><span class="number">.178</span><span class="number">.8</span>, <span class="number">104.27</span><span class="number">.179</span><span class="number">.8</span>, <span class="number">2606</span>:<span class="number">4700</span>:<span class="number">3033</span>::<span class="number">681</span>b:b208, ...</span><br><span class="line">Connecting to starship.rs (starship.rs)|<span class="number">104.27</span><span class="number">.178</span><span class="number">.8</span>|:<span class="number">443.</span>.. connected.</span><br><span class="line">HTTP request sent, awaiting response... <span class="number">200</span> OK</span><br><span class="line">Length: unspecified [application/x-shellscript]</span><br><span class="line">Saving to: ‘install.sh’</span><br><span class="line"> </span><br><span class="line">install.sh                        [ &lt;=&gt;                                              ]   <span class="number">6.78</span>K  --.-KB/s    <span class="keyword">in</span> <span class="number">0.001</span>s</span><br><span class="line"> </span><br><span class="line"><span class="number">2020</span><span class="number">-03</span><span class="number">-27</span> <span class="number">13</span>:<span class="number">06</span>:<span class="number">51</span> (<span class="number">12.5</span> MB/s) - ‘install.sh’ saved [<span class="number">6941</span>]</span><br></pre></td></tr></tbody></table></figure>

<p>但却并未执行该.sh脚本，于是使用</p>
<figure class="highlight cmake"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash <span class="keyword">install</span>.sh</span><br></pre></td></tr></tbody></table></figure>

<p>有可能成功，也有可能不成功（我第一次就是不成功），尽管显示信息未能保存下来，关键报错信息是在</p>
<figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rc=<span class="variable">$?</span></span><br><span class="line">if [ rc -neq 0 ]</span><br></pre></td></tr></tbody></table></figure>

<p>后产生报错信息。我尝试了在PowerShell中使用scoop安装成功，说明是WSL的问题，一时未能解决，不过在Starshp官网上发现cargo可以安装Starship，于是执行</p>
<figure class="highlight vim"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl --proto <span class="string">'=https'</span> --tlsv1.<span class="number">2</span> -sSf http<span class="variable">s:</span>//<span class="keyword">sh</span>.rustup.rs | <span class="keyword">sh</span></span><br></pre></td></tr></tbody></table></figure>

<p>安装rustc，然后为cargo等components添加环境变量：</p>
<figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source <span class="variable">$HOME</span><span class="regexp">/.cargo/</span>env</span><br></pre></td></tr></tbody></table></figure>

<p>这时运行</p>
<figure class="highlight cmake"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cargo <span class="keyword">install</span> starship</span><br></pre></td></tr></tbody></table></figure>

<p>却报错</p>
<figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">the SSL certificate is invalid; <span class="attribute">class</span>=Ssl (16); <span class="attribute">code</span>=Certificate (-17)</span><br></pre></td></tr></tbody></table></figure>

<p>运行</p>
<figure class="highlight dockerfile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-<span class="keyword">add</span><span class="bash"> -L</span></span><br></pre></td></tr></tbody></table></figure>

<p>检验，发现没有启动ssh-agent，干脆在.zshrc或.bashrc中添加（确认你的ssh之前已经正确配置）：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ZSH_DISABLE_COMPFIX=<span class="string">"true"</span></span><br><span class="line"><span class="built_in">eval</span> $(ssh-agent -s)</span><br><span class="line">ssh-add ~<span class="regexp">/.ssh/i</span>d_rsa</span><br></pre></td></tr></tbody></table></figure>

<p>如果你没有添加export ZSH=”/home/yourname/.oh-my-zsh”还要再加上这一条。</p>
<p>然后重启WSL并重新配置git：</p>
<figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git<span class="built_in"> config </span>--global user.name <span class="string">"yourname"</span></span><br><span class="line">git<span class="built_in"> config </span>--global user.email <span class="string">"youremail"</span></span><br></pre></td></tr></tbody></table></figure>

<p>再次运行cargo install starship，报错：</p>
<figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">failed <span class="keyword">to</span> connect <span class="keyword">to</span> github.com:<span class="built_in"> Resource </span>temporarily unavailable; <span class="attribute">class</span>=Os</span><br></pre></td></tr></tbody></table></figure>

<p>找到GitHub中rust-lang/cargo的<a target="_blank" rel="noopener" href="https://github.com/rust-lang/cargo/issues/6513">#6513号issue</a>，你可以参考其他人的comment，也可以直接看我的comment：</p>
<p>I found that it was indeed a network problem and solved it. If you do not have alternative choice to fetch what you want, you can try using SS or SSR, just go Option Settings (选项设置)-&gt;Local Proxy (本地代理), tick “Allow connections from LAN” (允许来自局域网的连接) and set Local Port (本地端口) = 1080. Then append the following to your .zshrc or .bashrc file:</p>
<figure class="highlight monkey"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alias</span> <span class="title">proxy</span>=<span class="string">"git config --global http.proxy http://127.0.0.1:1080"</span></span><br><span class="line"><span class="keyword">alias</span> <span class="title">unproxy</span>=<span class="string">"git config --global --unset http.proxy"</span></span><br></pre></td></tr></tbody></table></figure>

<p>Then cargo starts fetching successfully.</p>
<p>就是说在SS或SSR里选项设置-&gt;本地代理勾选允许来自局域网的链接，本地端口填写1080，然后在.zshrc或.bashrc加上这两行代码，当然速度会很慢，不料compile到一半又报错：</p>
<figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">error</span>: <span class="string">failed to run custom build command for `openssl-sys v0.9.54`</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">Caused</span> <span class="string">by:</span></span><br><span class="line">  <span class="attr">process</span> <span class="string">didn't exit successfully: `/tmp/cargo-installi4HyMw/release/build/openssl-sys-2869942195258ab3/build-script-main` (exit code: 101)</span></span><br><span class="line"><span class="meta">---</span> <span class="string">stdout</span></span><br><span class="line"><span class="attr">cargo</span>:<span class="string">rustc-cfg=const_fn</span></span><br><span class="line"><span class="attr">cargo</span>:<span class="string">rerun-if-env-changed=X86_64_UNKNOWN_LINUX_GNU_OPENSSL_LIB_DIR</span></span><br><span class="line"><span class="attr">X86_64_UNKNOWN_LINUX_GNU_OPENSSL_LIB_DIR</span> <span class="string">unset</span></span><br><span class="line"><span class="attr">cargo</span>:<span class="string">rerun-if-env-changed=OPENSSL_LIB_DIR</span></span><br><span class="line"><span class="attr">OPENSSL_LIB_DIR</span> <span class="string">unset</span></span><br><span class="line"><span class="attr">cargo</span>:<span class="string">rerun-if-env-changed=X86_64_UNKNOWN_LINUX_GNU_OPENSSL_INCLUDE_DIR</span></span><br><span class="line"><span class="attr">X86_64_UNKNOWN_LINUX_GNU_OPENSSL_INCLUDE_DIR</span> <span class="string">unset</span></span><br><span class="line"><span class="attr">cargo</span>:<span class="string">rerun-if-env-changed=OPENSSL_INCLUDE_DIR</span></span><br><span class="line"><span class="attr">OPENSSL_INCLUDE_DIR</span> <span class="string">unset</span></span><br><span class="line"><span class="attr">cargo</span>:<span class="string">rerun-if-env-changed=X86_64_UNKNOWN_LINUX_GNU_OPENSSL_DIR</span></span><br><span class="line"><span class="attr">X86_64_UNKNOWN_LINUX_GNU_OPENSSL_DIR</span> <span class="string">unset</span></span><br><span class="line"><span class="attr">cargo</span>:<span class="string">rerun-if-env-changed=OPENSSL_DIR</span></span><br><span class="line"><span class="attr">OPENSSL_DIR</span> <span class="string">unset</span></span><br><span class="line"><span class="attr">run</span> <span class="string">pkg_config fail: "Failed to run `\"pkg-config\" \"--libs\" \"--cflags\" \"openssl\"`: Permission denied (os error 13)"</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">---</span> <span class="string">stderr</span></span><br><span class="line"><span class="attr">thread</span> <span class="string">'main' panicked at '</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">Could</span> <span class="string">not find directory of OpenSSL installation, and this `-sys` crate cannot</span></span><br><span class="line"><span class="attr">proceed</span> <span class="string">without this knowledge. If OpenSSL is installed and this crate had</span></span><br><span class="line"><span class="attr">trouble</span> <span class="string">finding it,  you can set the `OPENSSL_DIR` environment variable for the</span></span><br><span class="line"><span class="attr">compilation</span> <span class="string">process.</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">Make</span> <span class="string">sure you also have the development packages of openssl installed.</span></span><br><span class="line"><span class="attr">For</span> <span class="string">example, `libssl-dev` on Ubuntu or `openssl-devel` on Fedora.</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">If</span> <span class="string">you're in a situation where you think the directory *should* be found</span></span><br><span class="line"><span class="meta">automatically,</span> <span class="string">please open a bug at https://github.com/sfackler/rust-openssl</span></span><br><span class="line"><span class="attr">and</span> <span class="string">include information about your system as well as this message.</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">$HOST</span> = <span class="string">x86_64-unknown-linux-gnu</span></span><br><span class="line"><span class="meta">$TARGET</span> = <span class="string">x86_64-unknown-linux-gnu</span></span><br><span class="line"><span class="meta">openssl-sys</span> = <span class="string">0.9.54</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="attr">It</span> <span class="string">looks like you're compiling on Linux and also targeting Linux. Currently this</span></span><br><span class="line"><span class="attr">requires</span> <span class="string">the `pkg-config` utility to find OpenSSL but unfortunately `pkg-config`</span></span><br><span class="line"><span class="attr">could</span> <span class="string">not be found. If you have OpenSSL installed you can likely fix this by</span></span><br><span class="line"><span class="attr">installing</span> <span class="string">`pkg-config`.</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">',</span> <span class="string">/home/ayka_tsuzuki/.cargo/registry/src/github.com-1ecc6299db9ec823/openssl-sys-0.9.54/build/find_normal.rs:150:5</span></span><br><span class="line"><span class="attr">note</span>: <span class="string">run with `RUST_BACKTRACE=1` environment variable to display a backtrace</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">warning</span>: <span class="string">build failed, waiting for other jobs to finish...</span></span><br><span class="line"><span class="attr">error</span>: <span class="string">failed to compile `starship v0.38.1`, intermediate artifacts can be found at `/tmp/cargo-installi4HyMw`</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">Caused</span> <span class="string">by:</span></span><br><span class="line">  <span class="attr">build</span> <span class="string">failed</span></span><br></pre></td></tr></tbody></table></figure>

<p>openssl已经安装了，于是再安装上pkg-config和libssl-dev，最后终于成功安装：</p>
<figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line">  <span class="attribute">Updating</span> crates.io index</span><br><span class="line"><span class="attribute">Installing</span> starship v<span class="number">0</span>.<span class="number">38</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> libc v<span class="number">0</span>.<span class="number">2</span>.<span class="number">68</span></span><br><span class="line"> <span class="attribute">Compiling</span> autocfg v<span class="number">1</span>.<span class="number">0</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> cfg-if v<span class="number">0</span>.<span class="number">1</span>.<span class="number">9</span></span><br><span class="line"> <span class="attribute">Compiling</span> pkg-config v<span class="number">0</span>.<span class="number">3</span>.<span class="number">17</span></span><br><span class="line"> <span class="attribute">Compiling</span> lazy_static v<span class="number">1</span>.<span class="number">4</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> proc-macro<span class="number">2</span> v<span class="number">1</span>.<span class="number">0</span>.<span class="number">9</span></span><br><span class="line"> <span class="attribute">Compiling</span> unicode-xid v<span class="number">0</span>.<span class="number">2</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> syn v<span class="number">1</span>.<span class="number">0</span>.<span class="number">17</span></span><br><span class="line"> <span class="attribute">Compiling</span> bitflags v<span class="number">1</span>.<span class="number">2</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> log v<span class="number">0</span>.<span class="number">4</span>.<span class="number">8</span></span><br><span class="line"> <span class="attribute">Compiling</span> maybe-uninit v<span class="number">2</span>.<span class="number">0</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> serde v<span class="number">1</span>.<span class="number">0</span>.<span class="number">105</span></span><br><span class="line"> <span class="attribute">Compiling</span> memchr v<span class="number">2</span>.<span class="number">3</span>.<span class="number">3</span></span><br><span class="line"> <span class="attribute">Compiling</span> matches v<span class="number">0</span>.<span class="number">1</span>.<span class="number">8</span></span><br><span class="line"> <span class="attribute">Compiling</span> semver-parser v<span class="number">0</span>.<span class="number">7</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> smallvec v<span class="number">1</span>.<span class="number">2</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> scopeguard v<span class="number">1</span>.<span class="number">1</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> ryu v<span class="number">1</span>.<span class="number">0</span>.<span class="number">3</span></span><br><span class="line"> <span class="attribute">Compiling</span> arrayvec v<span class="number">0</span>.<span class="number">4</span>.<span class="number">12</span></span><br><span class="line"> <span class="attribute">Compiling</span> foreign-types-shared v<span class="number">0</span>.<span class="number">1</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> typenum v<span class="number">1</span>.<span class="number">11</span>.<span class="number">2</span></span><br><span class="line"> <span class="attribute">Compiling</span> rayon-core v<span class="number">1</span>.<span class="number">7</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> percent-encoding v<span class="number">2</span>.<span class="number">1</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> openssl v<span class="number">0</span>.<span class="number">10</span>.<span class="number">28</span></span><br><span class="line"> <span class="attribute">Compiling</span> itoa v<span class="number">0</span>.<span class="number">4</span>.<span class="number">5</span></span><br><span class="line"> <span class="attribute">Compiling</span> quick-error v<span class="number">1</span>.<span class="number">2</span>.<span class="number">3</span></span><br><span class="line"> <span class="attribute">Compiling</span> native-tls v<span class="number">0</span>.<span class="number">2</span>.<span class="number">4</span></span><br><span class="line"> <span class="attribute">Compiling</span> nodrop v<span class="number">0</span>.<span class="number">1</span>.<span class="number">14</span></span><br><span class="line"> <span class="attribute">Compiling</span> version_check v<span class="number">0</span>.<span class="number">9</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> regex-syntax v<span class="number">0</span>.<span class="number">6</span>.<span class="number">17</span></span><br><span class="line"> <span class="attribute">Compiling</span> doc-comment v<span class="number">0</span>.<span class="number">3</span>.<span class="number">3</span></span><br><span class="line"> <span class="attribute">Compiling</span> static_assertions v<span class="number">0</span>.<span class="number">3</span>.<span class="number">4</span></span><br><span class="line"> <span class="attribute">Compiling</span> fnv v<span class="number">1</span>.<span class="number">0</span>.<span class="number">6</span></span><br><span class="line"> <span class="attribute">Compiling</span> termcolor v<span class="number">1</span>.<span class="number">1</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> bytes v<span class="number">0</span>.<span class="number">5</span>.<span class="number">4</span></span><br><span class="line"> <span class="attribute">Compiling</span> battery v<span class="number">0</span>.<span class="number">7</span>.<span class="number">5</span></span><br><span class="line"> <span class="attribute">Compiling</span> unicode-width v<span class="number">0</span>.<span class="number">1</span>.<span class="number">7</span></span><br><span class="line"> <span class="attribute">Compiling</span> dtoa v<span class="number">0</span>.<span class="number">4</span>.<span class="number">5</span></span><br><span class="line"> <span class="attribute">Compiling</span> either v<span class="number">1</span>.<span class="number">5</span>.<span class="number">3</span></span><br><span class="line"> <span class="attribute">Compiling</span> openssl-probe v<span class="number">0</span>.<span class="number">1</span>.<span class="number">2</span></span><br><span class="line"> <span class="attribute">Compiling</span> sysinfo v<span class="number">0</span>.<span class="number">11</span>.<span class="number">7</span></span><br><span class="line"> <span class="attribute">Compiling</span> lazycell v<span class="number">1</span>.<span class="number">2</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> vec_map v<span class="number">0</span>.<span class="number">8</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> linked-hash-map v<span class="number">0</span>.<span class="number">5</span>.<span class="number">2</span></span><br><span class="line"> <span class="attribute">Compiling</span> strsim v<span class="number">0</span>.<span class="number">8</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> once_cell v<span class="number">1</span>.<span class="number">3</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> ansi_term v<span class="number">0</span>.<span class="number">11</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> open v<span class="number">1</span>.<span class="number">4</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> unicode-segmentation v<span class="number">1</span>.<span class="number">6</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> path-slash v<span class="number">0</span>.<span class="number">1</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> ansi_term v<span class="number">0</span>.<span class="number">12</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> urlencoding v<span class="number">1</span>.<span class="number">0</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> byte-unit v<span class="number">3</span>.<span class="number">0</span>.<span class="number">3</span></span><br><span class="line"> <span class="attribute">Compiling</span> thread_local v<span class="number">1</span>.<span class="number">0</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> unicode-bidi v<span class="number">0</span>.<span class="number">3</span>.<span class="number">4</span></span><br><span class="line"> <span class="attribute">Compiling</span> semver v<span class="number">0</span>.<span class="number">9</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> unicode-normalization v<span class="number">0</span>.<span class="number">1</span>.<span class="number">12</span></span><br><span class="line"> <span class="attribute">Compiling</span> foreign-types v<span class="number">0</span>.<span class="number">3</span>.<span class="number">2</span></span><br><span class="line"> <span class="attribute">Compiling</span> humantime v<span class="number">1</span>.<span class="number">3</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> crossbeam-utils v<span class="number">0</span>.<span class="number">7</span>.<span class="number">2</span></span><br><span class="line"> <span class="attribute">Compiling</span> memoffset v<span class="number">0</span>.<span class="number">5</span>.<span class="number">4</span></span><br><span class="line"> <span class="attribute">Compiling</span> crossbeam-epoch v<span class="number">0</span>.<span class="number">8</span>.<span class="number">2</span></span><br><span class="line"> <span class="attribute">Compiling</span> num-traits v<span class="number">0</span>.<span class="number">2</span>.<span class="number">11</span></span><br><span class="line"> <span class="attribute">Compiling</span> num-integer v<span class="number">0</span>.<span class="number">1</span>.<span class="number">42</span></span><br><span class="line"> <span class="attribute">Compiling</span> textwrap v<span class="number">0</span>.<span class="number">11</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> http v<span class="number">0</span>.<span class="number">2</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> yaml-rust v<span class="number">0</span>.<span class="number">4</span>.<span class="number">3</span></span><br><span class="line"> <span class="attribute">Compiling</span> nom v<span class="number">5</span>.<span class="number">1</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> rustc_version v<span class="number">0</span>.<span class="number">2</span>.<span class="number">3</span></span><br><span class="line"> <span class="attribute">Compiling</span> idna v<span class="number">0</span>.<span class="number">2</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> aho-corasick v<span class="number">0</span>.<span class="number">7</span>.<span class="number">10</span></span><br><span class="line"> <span class="attribute">Compiling</span> quote v<span class="number">1</span>.<span class="number">0</span>.<span class="number">3</span></span><br><span class="line"> <span class="attribute">Compiling</span> lexical-core v<span class="number">0</span>.<span class="number">6</span>.<span class="number">7</span></span><br><span class="line"> <span class="attribute">Compiling</span> url v<span class="number">2</span>.<span class="number">1</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> crossbeam-queue v<span class="number">0</span>.<span class="number">2</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> regex v<span class="number">1</span>.<span class="number">3</span>.<span class="number">6</span></span><br><span class="line"> <span class="attribute">Compiling</span> jobserver v<span class="number">0</span>.<span class="number">1</span>.<span class="number">21</span></span><br><span class="line"> <span class="attribute">Compiling</span> num_cpus v<span class="number">1</span>.<span class="number">12</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> atty v<span class="number">0</span>.<span class="number">2</span>.<span class="number">14</span></span><br><span class="line"> <span class="attribute">Compiling</span> time v<span class="number">0</span>.<span class="number">1</span>.<span class="number">42</span></span><br><span class="line"> <span class="attribute">Compiling</span> dirs-sys v<span class="number">0</span>.<span class="number">3</span>.<span class="number">4</span></span><br><span class="line"> <span class="attribute">Compiling</span> gethostname v<span class="number">0</span>.<span class="number">2</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> term_size v<span class="number">0</span>.<span class="number">3</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> uom v<span class="number">0</span>.<span class="number">26</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> crossbeam-deque v<span class="number">0</span>.<span class="number">7</span>.<span class="number">3</span></span><br><span class="line"> <span class="attribute">Compiling</span> cc v<span class="number">1</span>.<span class="number">0</span>.<span class="number">50</span></span><br><span class="line"> <span class="attribute">Compiling</span> clap v<span class="number">2</span>.<span class="number">33</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> dirs v<span class="number">2</span>.<span class="number">0</span>.<span class="number">2</span></span><br><span class="line"> <span class="attribute">Compiling</span> env_logger v<span class="number">0</span>.<span class="number">7</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> chrono v<span class="number">0</span>.<span class="number">4</span>.<span class="number">11</span></span><br><span class="line"> <span class="attribute">Compiling</span> pretty_env_logger v<span class="number">0</span>.<span class="number">4</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> rayon v<span class="number">1</span>.<span class="number">3</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> openssl-sys v<span class="number">0</span>.<span class="number">9</span>.<span class="number">54</span></span><br><span class="line"> <span class="attribute">Compiling</span> libz-sys v<span class="number">1</span>.<span class="number">0</span>.<span class="number">25</span></span><br><span class="line"> <span class="attribute">Compiling</span> libgit<span class="number">2</span>-sys v<span class="number">0</span>.<span class="number">12</span>.<span class="number">0</span>+<span class="number">0</span>.<span class="number">99</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> serde_derive v<span class="number">1</span>.<span class="number">0</span>.<span class="number">105</span></span><br><span class="line"> <span class="attribute">Compiling</span> starship_module_config_derive v<span class="number">0</span>.<span class="number">1</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> git<span class="number">2</span> v<span class="number">0</span>.<span class="number">13</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> serde_urlencoded v<span class="number">0</span>.<span class="number">6</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> serde_json v<span class="number">1</span>.<span class="number">0</span>.<span class="number">48</span></span><br><span class="line"> <span class="attribute">Compiling</span> os_info v<span class="number">2</span>.<span class="number">0</span>.<span class="number">2</span></span><br><span class="line"> <span class="attribute">Compiling</span> toml v<span class="number">0</span>.<span class="number">5</span>.<span class="number">6</span></span><br><span class="line"> <span class="attribute">Compiling</span> attohttpc v<span class="number">0</span>.<span class="number">12</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> starship v<span class="number">0</span>.<span class="number">38</span>.<span class="number">1</span></span><br><span class="line">  <span class="attribute">Finished</span> release<span class="meta"> [optimized] target(s) in 2m 24s</span></span><br><span class="line"><span class="meta">Installing /home/yourname/.cargo/bin/starship</span></span><br><span class="line"><span class="meta"> Installed package `starship v0.38.1` (executable `starship`)</span></span><br></pre></td></tr></tbody></table></figure>

<p>最后别忘了这条指示（使用sh脚本安装会有，但是cargo安装没有）：</p>
<figure class="highlight reasonml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&gt; Please follow the steps <span class="keyword">for</span> your shell <span class="keyword">to</span> complete the installation:</span><br><span class="line"> </span><br><span class="line">  Bash</span><br><span class="line">  Add the following <span class="keyword">to</span> the <span class="keyword">end</span> <span class="keyword">of</span> ~/.bashrc:</span><br><span class="line"> </span><br><span class="line">      eval <span class="string">"$(starship init bash)"</span></span><br><span class="line"> </span><br><span class="line">  Fish</span><br><span class="line">  Add the following <span class="keyword">to</span> the <span class="keyword">end</span> <span class="keyword">of</span> ~/.config/fish/config.fish:</span><br><span class="line"> </span><br><span class="line">      starship init fish <span class="pattern-match">| source</span></span><br><span class="line"><span class="pattern-match"> </span></span><br><span class="line"><span class="pattern-match">  <span class="constructor">Zsh</span></span></span><br><span class="line"><span class="pattern-match">  <span class="constructor">Add</span> the following <span class="keyword">to</span> the <span class="keyword">end</span> <span class="keyword">of</span> ~<span class="operator">/</span>.zshrc:</span></span><br><span class="line"><span class="pattern-match"> </span></span><br><span class="line"><span class="pattern-match">      eval "<span class="constructor">$(<span class="params">starship</span> <span class="params">init</span> <span class="params">zsh</span>)</span>"</span></span><br><span class="line"><span class="pattern-match"> </span></span><br><span class="line"><span class="pattern-match">  <span class="constructor">Ion</span></span></span><br><span class="line"><span class="pattern-match">  <span class="constructor">Add</span> the following <span class="keyword">to</span> the <span class="keyword">end</span> <span class="keyword">of</span> ~<span class="operator">/</span>.config<span class="operator">/</span>ion<span class="operator">/</span>initrc:</span></span><br><span class="line"><span class="pattern-match"> </span></span><br><span class="line"><span class="pattern-match">      eval eval <span class="constructor">$(<span class="operator">/</span><span class="params">home</span><span class="operator">/</span><span class="params">ayka_tsuzuki</span><span class="operator">/</span>.<span class="params">cargo</span><span class="operator">/</span><span class="params">bin</span><span class="operator">/</span><span class="params">starship</span> <span class="params">init</span> <span class="params">ion</span> --<span class="params">print</span>-<span class="params">full</span>-<span class="params">init</span>)</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>例如对于zsh，在.zshrc中添加eval “$(starship init zsh)”。效果图：</p>
<p><img src="/posts/55520/Documents\Programming\HexoBlog\source\_posts\CSDN补档-24\20200327135355358.png" alt="img"></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yihuajack.github.io/posts/43478.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Liu Yihua">
      <meta itemprop="description" content="綴る言の葉に彩られ 紅く色めき刹那に踊る">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ayka's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/43478.html" class="post-title-link" itemprop="url">Windows Terminal更改主题为iTerm2-Color-Schemes</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-25 11:39:00" itemprop="dateCreated datePublished" datetime="2020-03-25T11:39:00+08:00">2020-03-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-02 11:07:06" itemprop="dateModified" datetime="2020-10-02T11:07:06+08:00">2020-10-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CSDN%E8%A1%A5%E6%A1%A3/" itemprop="url" rel="index"><span itemprop="name">CSDN补档</span></a>
                </span>
            </span>

          
            <span id="/posts/43478.html" class="post-meta-item leancloud_visitors" data-flag-title="Windows Terminal更改主题为iTerm2-Color-Schemes" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/posts/43478.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/posts/43478.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在美化Windows Terminal的过程中，由于Windows Terminal处于preview阶段更新变化极大，导致走了一些弯路，现以0.10.781.0版本为例（到目前为止最新发布）。</p>
<p>注意：<a target="_blank" rel="noopener" href="https://andrewpla.dev/Adding-New-Color-Schemes-To-Windows-Terminal/">Adding New Color Schemes to Windows Terminal</a>中的脚本<a target="_blank" rel="noopener" href="https://gist.github.com/AndrewPla/5c302e91af5448c89a65bfab364249d8#file-add-windowsterminalschemes-ps1">Add-WindowsTerminalSchemes.ps1</a>经检验无法被Windows Terminal成功加载，该文章下的评论也显示了种种问题。一种可能的原因是其在profiles.json中错误地在最外层加入了一对方括号。如果已经执行了该脚本而不想重置，删除这些额外添加的方括号、“null”等并恢复原状。</p>
<p>从<a target="_blank" rel="noopener" href="https://github.com/mbadolato/iTerm2-Color-Schemes">iTerm2-Color-Schemes</a> clone或下载到本地，进入windowsterminal目录下找到你喜欢的主题的json文件打开，然后将其全选（包括最外层大括号）粘贴到profiles.json里的”schemes”中，然后在”profiles”里的”lists”里的你想应用于的块中添加行”colorScheme”: “<schemename>“，<schemename>为你在scheme中粘贴的主题的名字，如果想对每个shell都应用这个主题只需要在”profiles”下的”defaults”中添加这行即可。你也可以在”schemes”中粘贴多个主题。</schemename></schemename></p>
<p>可参考我的profiles.json：<a target="_blank" rel="noopener" href="https://gist.github.com/yihuajack/eebf809607e6fdb79e035c4184173de8">https://gist.github.com/yihuajack/eebf809607e6fdb79e035c4184173de8</a></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yihuajack.github.io/posts/15146.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Liu Yihua">
      <meta itemprop="description" content="綴る言の葉に彩られ 紅く色めき刹那に踊る">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ayka's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/15146.html" class="post-title-link" itemprop="url">LaTeX书写嵌套大括号、嵌套cases、嵌套array的方法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-23 10:28:39" itemprop="dateCreated datePublished" datetime="2020-03-23T10:28:39+08:00">2020-03-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-02 11:16:08" itemprop="dateModified" datetime="2020-10-02T11:16:08+08:00">2020-10-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CSDN%E8%A1%A5%E6%A1%A3/" itemprop="url" rel="index"><span itemprop="name">CSDN补档</span></a>
                </span>
            </span>

          
            <span id="/posts/15146.html" class="post-meta-item leancloud_visitors" data-flag-title="LaTeX书写嵌套大括号、嵌套cases、嵌套array的方法" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/posts/15146.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/posts/15146.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>LaTeX中书写嵌套大括号可以使用嵌套cases：</p>
<figure class="highlight latex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="formula">$$<span class="tag">\<span class="name">begin</span><span class="string">{cases}</span></span></span></span><br><span class="line"><span class="formula">    A&amp;XXX<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">    B&amp;XXX<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">    C&amp;</span></span><br><span class="line"><span class="formula">    <span class="tag">\<span class="name">begin</span><span class="string">{cases}</span></span></span></span><br><span class="line"><span class="formula">        D&amp;XXX<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">        E&amp;XXX</span></span><br><span class="line"><span class="formula">    <span class="tag">\<span class="name">end</span><span class="string">{cases}</span></span><span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">    F&amp;XXX</span></span><br><span class="line"><span class="formula"><span class="tag">\<span class="name">end</span><span class="string">{cases}</span></span>$$</span></span><br></pre></td></tr></tbody></table></figure>

<p>效果：</p>
<p><img src="/posts/15146/Documents\Programming\HexoBlog\source\_posts\CSDN补档-22\20200323100925548.png" alt="img"></p>
<p>也可以使用嵌套array：</p>
<figure class="highlight latex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="formula">$$<span class="tag">\<span class="name">left</span></span><span class="tag">\<span class="name">{</span></span><span class="tag">\<span class="name">begin</span><span class="string">{array}</span><span class="string">{ll}</span></span></span></span><br><span class="line"><span class="formula">    A&amp;XXX<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">    B&amp;XXX<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">    C&amp;<span class="tag">\<span class="name">left</span></span><span class="tag">\<span class="name">{</span></span></span></span><br><span class="line"><span class="formula">    <span class="tag">\<span class="name">begin</span><span class="string">{array}</span><span class="string">{ll}</span></span></span></span><br><span class="line"><span class="formula">        D&amp;XXX<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">        E&amp;XXX</span></span><br><span class="line"><span class="formula">	<span class="tag">\<span class="name">end</span><span class="string">{array}</span></span></span></span><br><span class="line"><span class="formula">	<span class="tag">\<span class="name">right</span></span>.<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">    F&amp;XXX</span></span><br><span class="line"><span class="formula"><span class="tag">\<span class="name">end</span><span class="string">{array}</span></span></span></span><br><span class="line"><span class="formula"><span class="tag">\<span class="name">right</span></span>.$$</span></span><br></pre></td></tr></tbody></table></figure>

<p><img src="/posts/15146/Documents\Programming\HexoBlog\source\_posts\CSDN补档-22\20200323101259762.png" alt="img"></p>
<p>也可以array嵌套cases（效果同cases嵌套cases）</p>
<figure class="highlight latex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="formula">$$<span class="tag">\<span class="name">left</span></span><span class="tag">\<span class="name">{</span></span><span class="tag">\<span class="name">begin</span><span class="string">{array}</span><span class="string">{ll}</span></span></span></span><br><span class="line"><span class="formula">    A&amp;XXX<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">    B&amp;XXX<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">    C&amp;</span></span><br><span class="line"><span class="formula">    <span class="tag">\<span class="name">begin</span><span class="string">{cases}</span></span></span></span><br><span class="line"><span class="formula">        D&amp;XXX<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">        E&amp;XXX</span></span><br><span class="line"><span class="formula">	<span class="tag">\<span class="name">end</span><span class="string">{cases}</span></span><span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">    F&amp;XXX</span></span><br><span class="line"><span class="formula"><span class="tag">\<span class="name">end</span><span class="string">{array}</span></span></span></span><br><span class="line"><span class="formula"><span class="tag">\<span class="name">right</span></span>.$$</span></span><br></pre></td></tr></tbody></table></figure>

<p>cases嵌套array（效果同array嵌套array）</p>
<figure class="highlight latex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="formula">$$<span class="tag">\<span class="name">begin</span><span class="string">{cases}</span></span></span></span><br><span class="line"><span class="formula">    A&amp;XXX<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">    B&amp;XXX<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">    C&amp;<span class="tag">\<span class="name">left</span></span><span class="tag">\<span class="name">{</span></span></span></span><br><span class="line"><span class="formula">    <span class="tag">\<span class="name">begin</span><span class="string">{array}</span><span class="string">{ll}</span></span></span></span><br><span class="line"><span class="formula">        D&amp;XXX<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">        E&amp;XXX</span></span><br><span class="line"><span class="formula">	<span class="tag">\<span class="name">end</span><span class="string">{array}</span></span></span></span><br><span class="line"><span class="formula">	<span class="tag">\<span class="name">right</span></span>.<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">    F&amp;XXX</span></span><br><span class="line"><span class="formula"><span class="tag">\<span class="name">end</span><span class="string">{cases}</span></span>$$</span></span><br></pre></td></tr></tbody></table></figure>

<p>如果想对每条cases标号只需将cases环境换成numcases即可。如果只想在内层嵌套使用大括号而外层不使用，只需要将外层确定为array并去掉</p>
<figure class="highlight latex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">\<span class="name">left</span></span><span class="tag">\<span class="name">{</span></span>...<span class="tag">\<span class="name">right</span></span>.</span><br></pre></td></tr></tbody></table></figure>

<p>即可，这种方法在等号对齐中有重要的应用。不过在array嵌套array中有一个问题，如果我们想用</p>
<figure class="highlight latex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">\<span class="name">arraycolsep</span>=<span class="number">1.4pt</span></span><span class="tag">\<span class="name">def</span></span><span class="tag">\<span class="name">arraystretch</span><span class="string">{1.2}</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>或</p>
<figure class="highlight latex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">\<span class="name">setlength</span><span class="string">{\arraycolsep}</span><span class="string">{1.4pt}</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>调整行间距和列间距时，<strong>该命令只能在一条数学公式内生效一次</strong>，如果想在嵌套的array中使用与外层array不同的行间距和列间距是无解的。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yihuajack.github.io/posts/40396.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Liu Yihua">
      <meta itemprop="description" content="綴る言の葉に彩られ 紅く色めき刹那に踊る">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ayka's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/40396.html" class="post-title-link" itemprop="url">LaTeX公式等号左边内容放在第一行的等号对齐方式的书写方法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-22 15:43:27" itemprop="dateCreated datePublished" datetime="2020-03-22T15:43:27+08:00">2020-03-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-02 11:16:55" itemprop="dateModified" datetime="2020-10-02T11:16:55+08:00">2020-10-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CSDN%E8%A1%A5%E6%A1%A3/" itemprop="url" rel="index"><span itemprop="name">CSDN补档</span></a>
                </span>
            </span>

          
            <span id="/posts/40396.html" class="post-meta-item leancloud_visitors" data-flag-title="LaTeX公式等号左边内容放在第一行的等号对齐方式的书写方法" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/posts/40396.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/posts/40396.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>有时在写LaTeX公式时过长就需要把它们用对齐方式书写，而有时公式的第一个等号左边的量也太长了，对齐方式书写不美观，于是就要把它放在第一行然后第二行另起等号对齐书写。这时我们可以采用array环境书写，如</p>
<figure class="highlight latex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="formula">$$<span class="tag">\<span class="name">begin</span><span class="string">{array}</span><span class="string">{ll}</span></span></span></span><br><span class="line"><span class="formula">    &amp;XXX<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">    &amp;=XXX</span></span><br><span class="line"><span class="formula"><span class="tag">\<span class="name">end</span><span class="string">{array}</span></span>$$</span></span><br></pre></td></tr></tbody></table></figure>

<p>然而这种方式书写出来的等号之间的间距不是过宽就是过窄，于是我们需要在公式开始前加入关键一条语句：</p>
<figure class="highlight latex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">\<span class="name">setlength</span><span class="string">{\arraycolsep}</span><span class="string">{1.4pt}</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>其中，1.4pt正是LaTeX数学公式中等号的默认间距。效果如下：</p>
<p><img src="/posts/40396/Documents\Programming\HexoBlog\source\_posts\CSDN补档-21\20200322154126169.png" alt="img"></p>
<p>对比LaTeX数学公式中默认的等号：</p>
<p><img src="/posts/40396/Documents\Programming\HexoBlog\source\_posts\CSDN补档-21\20200322154229445.png" alt="img"></p>
<p>可以看出完美一致。</p>
<p>如果还想调节行间距使其与align环境一致，则可以按如下方式书写：</p>
<figure class="highlight latex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">\<span class="name">[</span></span><span class="tag">\<span class="name">arraycolsep</span>=<span class="number">1.4pt</span></span><span class="tag">\<span class="name">def</span></span><span class="tag">\<span class="name">arraystretch</span><span class="string">{1.2}</span></span></span><br><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">{array}</span><span class="string">{ll}</span></span></span><br><span class="line">    &amp;XXX<span class="tag">\<span class="name">\</span></span></span><br><span class="line">    =&amp;XXX</span><br><span class="line"><span class="tag">\<span class="name">end</span><span class="string">{array}</span></span></span><br><span class="line"><span class="tag">\<span class="name">]</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>其中</p>
<figure class="highlight latex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">\<span class="name">[</span></span>...<span class="tag">\<span class="name">]</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>是LaTeX数学公式的另一种写法，但是比</p>
<figure class="highlight gams"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">$</span><span class="symbol">$</span>...<span class="symbol">$</span><span class="symbol">$</span></span><br></pre></td></tr></tbody></table></figure>

<p>更好；arraystretch表示的是行间距，单位是倍数。</p>
<p>这种写法有个好处就是我们只在这条公式中定义array的列间距和行间距而不会影响文档中其他array的列间距和行间距。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Liu Yihua"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Liu Yihua</p>
  <div class="site-description" itemprop="description">綴る言の葉に彩られ 紅く色めき刹那に踊る</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">61</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">86</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/yihuajack" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;yihuajack" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:yihuajack@gmail.com" title="E-Mail → mailto:yihuajack@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/1865589123" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;1865589123" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/yihuajack" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;yihuajack" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.facebook.com/yihuajack" title="FB Page → https:&#x2F;&#x2F;www.facebook.com&#x2F;yihuajack" rel="noopener" target="_blank"><i class="fab fa-facebook fa-fw"></i>FB Page</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://stackoverflow.com/users/13087142/ayka" title="StackOverflow → https:&#x2F;&#x2F;stackoverflow.com&#x2F;users&#x2F;13087142&#x2F;ayka" rel="noopener" target="_blank"><i class="fab fa-stack-overflow fa-fw"></i>StackOverflow</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.youtube.com/channel/UC-giZpNUF0oRcnQUOwxsxLA" title="YouTube → https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UC-giZpNUF0oRcnQUOwxsxLA" rel="noopener" target="_blank"><i class="fab fa-youtube fa-fw"></i>YouTube</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.instagram.com/ayka_tsuzuki" title="Instagram → https:&#x2F;&#x2F;www.instagram.com&#x2F;ayka_tsuzuki" rel="noopener" target="_blank"><i class="fab fa-instagram fa-fw"></i>Instagram</a>
      </span>
      <span class="links-of-author-item">
        <a href="skype:yihuajack?call|chat" title="Skype → skype:yihuajack?call|chat" rel="noopener" target="_blank"><i class="fab fa-skype fa-fw"></i>Skype</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://blog.csdn.net/yihuajack" title="https:&#x2F;&#x2F;blog.csdn.net&#x2F;yihuajack" rel="noopener" target="_blank">CSDN</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Liu Yihua</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

<span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>   
<script>
    var now = new Date();
    function createtime() {
      var grt= new Date("03/18/2020 13:54:00");//此处修改你的建站时间或者网站上线时间
      now.setTime(now.getTime()+250);
      days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
      hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
      if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
      mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
      seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
      snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
      document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 ";
      document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒";
  }
  setInterval("createtime()",250);  
</script>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/pjax/pjax.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  



  <script data-pjax>
  if (CONFIG.page.isPost) {
    wpac_init = window.wpac_init || [];
    wpac_init.push({
      widget: 'Rating',
      id    : 27455,
      el    : 'wpac-rating',
      color : 'fc6423'
    });
    (function() {
      if ('WIDGETPACK_LOADED' in window) return;
      WIDGETPACK_LOADED = true;
      var mc = document.createElement('script');
      mc.type = 'text/javascript';
      mc.async = true;
      mc.src = '//embed.widgetpack.com/widget.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(mc, s.nextSibling);
    })();
  }
  </script>

  
<script src="//cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
<script src="//cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script>
<script src="/js/algolia-search.js"></script>










<script data-pjax>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>




    <div id="pjax">
  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : '6pVKQMTaE6R44OanMdxlS9Ku-gzGzoHsz',
      appKey     : 'OH1sHBKKMXkM9jeXVf1NhPz5',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'en, zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

    </div>
</body>
</html>
