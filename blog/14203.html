<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/blog/images/logo.svg" color="#222">

<link rel="stylesheet" href="/blog/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|JetBrains Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/blog/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yihuajack.github.io","root":"/blog/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"appID":"81Y57S4KVS","apiKey":"f9bea3504a9ea65b4de8d63b6f6ce44b","indexName":"Ayka's Blog","hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="安装MAMP。  在E:\MAMP\htdocs下 123git clone https:&#x2F;&#x2F;github.com&#x2F;csev&#x2F;py4e.gitcd py4egit clone https:&#x2F;&#x2F;github.com&#x2F;csev&#x2F;tsugi.git  项目很大，可以考虑导入到gitee再克隆。  打开MAMP Pro，Hosts-&gt;General-&gt;Port number改为8888，在P">
<meta property="og:type" content="article">
<meta property="og:title" content="使用MAMP和Tsugi构建PY4E、XDebug调试PHP总结（以Windows环境为例）">
<meta property="og:url" content="https://yihuajack.github.io/blog/14203.html">
<meta property="og:site_name" content="Ayka&#39;s Blog">
<meta property="og:description" content="安装MAMP。  在E:\MAMP\htdocs下 123git clone https:&#x2F;&#x2F;github.com&#x2F;csev&#x2F;py4e.gitcd py4egit clone https:&#x2F;&#x2F;github.com&#x2F;csev&#x2F;tsugi.git  项目很大，可以考虑导入到gitee再克隆。  打开MAMP Pro，Hosts-&gt;General-&gt;Port number改为8888，在P">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-04-12T09:12:43.000Z">
<meta property="article:modified_time" content="2020-10-02T04:31:49.900Z">
<meta property="article:author" content="Liu Yihua">
<meta property="article:tag" content="mysql">
<meta property="article:tag" content="apache">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://yihuajack.github.io/blog/14203.html">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>使用MAMP和Tsugi构建PY4E、XDebug调试PHP总结（以Windows环境为例） | Ayka's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/blog/atom.xml" title="Ayka's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Ayka's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Useless work</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/blog/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/blog/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a>

  </li>
        <li class="menu-item menu-item-links">

    <a href="/blog/links/" rel="section"><i class="fa fa-link fa-fw"></i>友情链接</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="algolia-results">
  <div id="algolia-stats"></div>
  <div id="algolia-hits"></div>
  <div id="algolia-pagination" class="algolia-pagination"></div>
</div>

      
    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/yihuajack" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yihuajack.github.io/blog/14203.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.jpg">
      <meta itemprop="name" content="Liu Yihua">
      <meta itemprop="description" content="綴る言の葉に彩られ 紅く色めき刹那に踊る">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ayka's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          使用MAMP和Tsugi构建PY4E、XDebug调试PHP总结（以Windows环境为例）
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-12 17:12:43" itemprop="dateCreated datePublished" datetime="2020-04-12T17:12:43+08:00">2020-04-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-02 12:31:49" itemprop="dateModified" datetime="2020-10-02T12:31:49+08:00">2020-10-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/CSDN%E8%A1%A5%E6%A1%A3/" itemprop="url" rel="index"><span itemprop="name">CSDN补档</span></a>
                </span>
            </span>

          
            <span id="/blog/14203.html" class="post-meta-item leancloud_visitors" data-flag-title="使用MAMP和Tsugi构建PY4E、XDebug调试PHP总结（以Windows环境为例）" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/blog/14203.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/blog/14203.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <ol>
<li><p>安装MAMP。</p>
</li>
<li><p>在E:\MAMP\htdocs下</p>
<figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https:<span class="regexp">//gi</span>thub.com<span class="regexp">/csev/</span>py4e.git</span><br><span class="line">cd py4e</span><br><span class="line">git clone https:<span class="regexp">//gi</span>thub.com<span class="regexp">/csev/</span>tsugi.git</span><br></pre></td></tr></tbody></table></figure>

<p>项目很大，可以考虑导入到gitee再克隆。</p>
</li>
<li><p>打开MAMP Pro，Hosts-&gt;General-&gt;Port number改为8888，在Port-&gt;MySQL改为8889，启动Apache和MySQL服务器，点击Administer MySQL with: phpMyAdmin，如果没打开查看是不是端口错误，可直接在浏览器输入<a target="_blank" rel="noopener" href="http://localhost:8888/phpMyAdmin%E6%89%93%E5%BC%80%E3%80%82">http://localhost:8888/phpMyAdmin打开。</a></p>
</li>
<li><p>确认phpMyAdmin顶部显示为Server: localhost:8889，然后点击选项卡SQL，粘贴下列内容：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> tsugi <span class="keyword">DEFAULT</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">ON</span> tsugi.* <span class="keyword">TO</span> <span class="string">'ltiuser'</span>@<span class="string">'localhost'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'ltipassword'</span>;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">ON</span> tsugi.* <span class="keyword">TO</span> <span class="string">'ltiuser'</span>@<span class="string">'127.0.0.1'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'ltipassword'</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>并执行。</p>
</li>
<li><p>将E:\MAMP\htdocs\py4e\tsugi下的config-dist.php复制一份重命名为config.php，然后编辑config：</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">$wwwroot = <span class="string">'http://localhost:8888/py4e/tsugi'</span>;   <span class="comment">// Embedded Tsugi localhost</span></span><br><span class="line"> </span><br><span class="line">...</span><br><span class="line"> </span><br><span class="line">$CFG-&gt;pdo = <span class="string">'mysql:host=127.0.0.1;port=8889;dbname=tsugi'</span>; <span class="comment">// MAMP</span></span><br><span class="line">$CFG-&gt;dbuser    = <span class="string">'ltiuser'</span>;</span><br><span class="line">$CFG-&gt;dbpass    = <span class="string">'ltipassword'</span>;</span><br><span class="line"> </span><br><span class="line">...</span><br><span class="line"> </span><br><span class="line">$CFG-&gt;adminpw = <span class="string">'short'</span>;</span><br><span class="line"> </span><br><span class="line">...</span><br><span class="line"> </span><br><span class="line">$CFG-&gt;apphome = <span class="string">'http://localhost:8888/py4e'</span>;</span><br><span class="line">$CFG-&gt;context_title = <span class="string">"Python for Everybody"</span>;</span><br><span class="line">$CFG-&gt;lessons = $CFG-&gt;dirroot.<span class="string">'/../lessons.json'</span>;</span><br><span class="line"> </span><br><span class="line">... </span><br><span class="line"> </span><br><span class="line">$CFG-&gt;tool_folders = <span class="keyword">array</span>(<span class="string">"admin"</span>, <span class="string">"../tools"</span>, <span class="string">"../mod"</span>);</span><br><span class="line">$CFG-&gt;install_folder = $CFG-&gt;dirroot.<span class="string">'./../mod'</span>; <span class="comment">// Tsugi as a store</span></span><br><span class="line"> </span><br><span class="line">...</span><br><span class="line"> </span><br><span class="line">$CFG-&gt;servicename = <span class="string">'PY4E'</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>其中$CFG-&gt;adminpw可自己设定。 </p>
</li>
<li><p>打开<a target="_blank" rel="noopener" href="http://localhost:8888/py4e/tsugi/admin/%E7%9C%8B%E5%88%B0%E6%8F%90%E7%A4%BA%E9%9C%80%E8%A6%81Upgrade">http://localhost:8888/py4e/tsugi/admin/看到提示需要Upgrade</a> database，既可以直接点击Upgrade database，也可以在E:\MAMP\htdocs\py4e\tsugi\admin下执行php upgrade.php（但这种方法没成功），刷新后显示正常。</p>
</li>
<li><p>在phpMyAdmin左边栏展开tsugi-&gt;Tables点击lti_key，点击key_key为google.com的key的Edit，找到secret列确认其值不为空，否则应创建一个十六进制值。</p>
</li>
<li><p>点击<a target="_blank" rel="noopener" href="http://localhost:8888/py4e/tsugi/admin/install">Manage Installed Modules</a>发现报错Fatal error: in E:\MAMP\htdocs\py4e\tsugi\vendor\tsugi\lib\src\Util\GitRepo.php on line 217，在MAMP -&gt;Languages-&gt;PHP-&gt;Extensions中启用XDebug (Debugger)后显示了更详细的报错信息指向E:\MAMP\htdocs\py4e\tsugi\admin\install\index.php第24行：</p>
<figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$git_version</span> = <span class="variable">$repo</span>-&gt;<span class="builtin-name">run</span>(<span class="string">'--version'</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>以及上述GitRepo.php的第217行及其前是</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$resource = proc_open($command, $descriptorspec, $pipes, $cwd, $env);</span><br><span class="line"> </span><br><span class="line">$stdout = stream_get_contents($pipes[<span class="number">1</span>]);</span><br><span class="line">$stderr = stream_get_contents($pipes[<span class="number">2</span>]);</span><br><span class="line"><span class="keyword">foreach</span> ($pipes <span class="keyword">as</span> $pipe) {</span><br><span class="line">			fclose($pipe);</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">$status = trim(proc_close($resource));</span><br><span class="line"><span class="keyword">if</span> ($status) <span class="keyword">throw</span> <span class="keyword">new</span> \<span class="built_in">Exception</span>($stderr);</span><br></pre></td></tr></tbody></table></figure>

<p>发现是之前删注册表删错了把Git for Windows的PATH删掉了，补上以后在MAMP-&gt;Settings-&gt;Hosts-&gt;Databases中发现已经找到Tsugi了，勾选好以后重启服务器后刷新恢复正常，显示：This screen is a wrapper for the git command if it is installed in your system. This screen runs git commands on your behalf. It will only handle the normal operations and assume that they work. If you log in and edit the files after they are checked out, this tool might not be able to upgrade some of these git repos.<br>Using: git version 2.26.0.windows.1</p>
</li>
<li><p>打开Available Modules选项卡发现提示Cannot be installed via this page，点击锁的图标弹出报错信息Readonly Detail<br>This server does not appear to allow the git command to make changes to the web files. So this tool will not be able to install, update, or reconfigure any of these tools. You will have to update these files some other way. Alternatively, you may be able to configure a copy of git that can update the file system - see the documentation for $CFG-&gt;git_command in the config-dist.php file.打开config.php，找到第347-358行：</p>
<figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span> On a Mac localhost, <span class="keyword">if</span> you have git installed, you should be able to</span><br><span class="line"><span class="regexp">//</span> use the auto-install with no further configuration.</span><br><span class="line"> </span><br><span class="line"><span class="regexp">//</span> On Windows, to run the automatic install of modules:</span><br><span class="line"><span class="regexp">//</span> (<span class="number">1</span>) Make sure Git is installed (https:<span class="regexp">//gi</span>t-scm.com<span class="regexp">/download/</span>win</span><br><span class="line"><span class="regexp">//</span> Maybe also install a GIT GUI https:<span class="regexp">//gi</span>t-scm.com<span class="regexp">/downloads/gui</span>s</span><br><span class="line"><span class="regexp">//</span> (<span class="number">2</span>) Open <span class="string">"cmd"</span> and type <span class="string">"git --version"</span></span><br><span class="line"><span class="regexp">//</span> this should give you the current version of git. If this fails</span><br><span class="line"><span class="regexp">//</span> then git is not setup <span class="keyword">in</span> your path</span><br><span class="line"><span class="regexp">//</span> (Control Panel &gt; System and Security &gt; System &gt; Advanced System Settings &gt; Environment Variables)</span><br><span class="line"><span class="regexp">//</span> (<span class="number">3</span>) Then here <span class="keyword">in</span> <span class="string">"config.php"</span>:</span><br><span class="line"><span class="regexp">//</span> <span class="variable">$CFG</span>-&gt;git_command = <span class="string">'git'</span></span><br></pre></td></tr></tbody></table></figure>

<p>后来Available Modules选项卡干脆显示No available modules<br>Unable to decode <a target="_blank" rel="noopener" href="https://api.github.com/users/tsugitools/repos?language=PHP%E3%80%82%E6%8A%8A%E7%AC%AC358%E8%A1%8C%E7%9A%84%E6%B3%A8%E9%87%8A%E5%8E%BB%E6%8E%89%E5%90%8E%E8%AE%B0%E5%BE%97%E5%8A%A0%E5%88%86%E5%8F%B7%E5%90%8E%E5%88%B7%E6%96%B0%E3%80%82">https://api.github.com/users/tsugitools/repos?language=PHP。把第358行的注释去掉后记得加分号后刷新。</a></p>
</li>
<li><p>为找出Cannot be installed via this page原因，重新配置git环境变量和重装git没有效果，为MAMP配置XDebug。MAMP-&gt;Languages-&gt;PHP-&gt;Default version-&gt;Open，在打开的php7.3.7.ini里的[XDebug]下添加zend_extension=”E:\MAMP\bin\php\php7.3.7\ext\php_xdebug.dll”，在E:\MAMP\conf\php7.3.7\php.ini中也这样添加。注意：MAMP无需自己创建php文件输出phpinfo或者用php -i和php -m，只需打开<a target="_blank" rel="noopener" href="http://localhost:8888/MAMP/%EF%BC%88%E6%88%96%E8%80%85%E7%9B%B8%E5%BA%94%E7%9A%84%E4%B8%BB%E6%9C%BA%E5%92%8C%E7%AB%AF%E5%8F%A3%EF%BC%89%E5%B9%B6%E7%82%B9%E5%87%BB%E9%A1%B6%E9%83%A8%E8%8F%9C%E5%8D%95%E6%A0%8F%E7%9A%84phpInfo%E5%8D%B3%E5%8F%AF%EF%BC%8C%E5%9C%A8phpInfo%E7%BD%91%E9%A1%B5%E4%B8%AD%E6%90%9C%E7%B4%A2%E6%89%BE%E5%88%B0XDebug%E3%80%82%E4%BD%BF%E7%94%A8php">http://localhost:8888/MAMP/（或者相应的主机和端口）并点击顶部菜单栏的phpInfo即可，在phpInfo网页中搜索找到XDebug。使用php</a> -i然后将输出结果复制到<a target="_blank" rel="noopener" href="https://xdebug.org/wizard%E5%88%86%E6%9E%90%E7%9A%84%E7%BB%93%E6%9E%9C%E4%B8%BA">https://xdebug.org/wizard分析的结果为</a><br>Summary<br>Xdebug installed: no<br>Server API: Command Line Interface<br>Windows: yes - Compiler: MS VC 15 - Architecture: x86<br>Zend Server: no<br>PHP Version: 7.3.7<br>Zend API nr: 320180731<br>PHP API nr: 20180731<br>Debug Build: no<br>Thread Safe Build: yes<br>OPcache Loaded: no<br>Configuration File Path: unknown<br>Configuration File: unknown<br>Extensions directory: C:\php\ext<br>Instructions<br>Download php_xdebug-2.9.4-7.3-vc15.dll<br>Move the downloaded file to C:\php\ext<br>Create php.ini in the same folder as where php.exe is and add the line<br>zend_extension = C:\php\ext\php_xdebug-2.9.4-7.3-vc15.dll</p>
</li>
<li><p>在VSCode中安装PHP Debug，配置</p>
<figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">"<span class="selector-tag">debug</span><span class="selector-class">.allowBreakpointsEverywhere</span>": <span class="selector-tag">true</span>,</span><br><span class="line">"<span class="selector-tag">php</span><span class="selector-class">.validate</span><span class="selector-class">.executablePath</span>": "<span class="selector-tag">E</span>:\\<span class="selector-tag">MAMP</span>\\<span class="selector-tag">bin</span>\\<span class="selector-tag">php</span>\\<span class="selector-tag">php7</span><span class="selector-class">.3</span><span class="selector-class">.7</span>\\<span class="selector-tag">php</span><span class="selector-class">.exe</span>"</span><br></pre></td></tr></tbody></table></figure>

<p>运行-&gt;Launch currently open script，当前脚本为E:\MAMP\htdocs\py4e\tsugi\admin\install\index.php，生成launch.json（E:\MAMP\htdocs\py4e\tsugi.vscode\launch.json）保持默认即可。打开</p>
<p><a target="_blank" rel="noopener" href="http://localhost:8888/py4e/tsugi/admin/install/">http://localhost:8888/py4e/tsugi/admin/install/</a></p>
<p>，更多工具-&gt;开发人员工具-&gt;Sources，刷新网页。调试控制台显示</p>
<figure class="highlight less"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Error</span>: spawn php ENOENT</span><br><span class="line">    at Process.ChildProcess._handle.onexit (internal/child_process.<span class="attribute">js</span>:<span class="number">264</span>:<span class="number">19</span>)</span><br><span class="line">    at onErrorNT (internal/child_process.<span class="attribute">js</span>:<span class="number">456</span>:<span class="number">16</span>)</span><br><span class="line">    at processTicksAndRejections (internal/process/task_queues.<span class="attribute">js</span>:<span class="number">77</span>:<span class="number">11</span>) {</span><br><span class="line">  <span class="attribute">errno</span>: <span class="string">'ENOENT'</span>,</span><br><span class="line">  <span class="attribute">code</span>: <span class="string">'ENOENT'</span>,</span><br><span class="line">  <span class="attribute">syscall</span>: <span class="string">'spawn php'</span>,</span><br><span class="line">  <span class="attribute">path</span>: <span class="string">'php'</span>,</span><br><span class="line">  <span class="attribute">spawnargs</span>: [ <span class="string">'e:\\MAMP\\htdocs\\py4e\\tsugi\\admin\\install\\index.php'</span> ]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>调用堆栈-&gt;Launch currently open script在{main}（E:\MAMP\htdocs\py4e\tsugi\admin\install\repos_json.php）中第58行</p>
<figure class="highlight reasonml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add<span class="constructor">RepoInfo($<span class="params">tsugi</span>, $<span class="params">repo</span>)</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>=&gt;addRepoInfo（E:\MAMP\htdocs\py4e\tsugi\admin\install\install_util.php）第146行</p>
<figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$update</span> = <span class="variable">$repo</span>-&gt;<span class="builtin-name">run</span>(<span class="string">'remote update'</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>=&gt;Tsugi\Util\GitRepo-&gt;run（E:\MAMP\htdocs\py4e\tsugi\vendor\tsugi\lib\src\Util\GitRepo.php）第232行</p>
<figure class="highlight elixir"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="variable">$this</span>-&gt;run_command(Git::get_bin().<span class="string">" "</span>.<span class="variable">$command</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>=&gt;Tsugi\Util\GitRepo-&gt;run_command（E:\MAMP\htdocs\py4e\tsugi\vendor\tsugi\lib\src\Util\GitRepo.php）第217行抛出异常：</p>
<figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">出现异常。</span><br><span class="line">Exception: Logon failed, use ctrl+c <span class="keyword">to</span> cancel basic credential prompt.</span><br><span class="line">bash: /dev/tty: <span class="literal">No</span> such device <span class="keyword">or</span> address</span><br><span class="line">error: failed <span class="keyword">to</span> execute prompt<span class="built_in"> script </span>(exit code 1)</span><br><span class="line">fatal: could <span class="keyword">not</span> read Username <span class="keyword">for</span> <span class="string">'https://gitee.com'</span>: <span class="literal">No</span> such file <span class="keyword">or</span> directory</span><br><span class="line">error: Could <span class="keyword">not</span> fetch origin</span><br></pre></td></tr></tbody></table></figure>

<p>由于GitHub克隆很慢，我的tsugi是导出到Gitee再克隆到本地的。</p>
</li>
<li><p>本机对于github.com、coding.net、gitee.com等配置了同一个SSH-key，所以只需在Git Bash输入ssh -T <a href="mailto:git@gitee.com">git@gitee.com</a>然后输入yes即可添加gitee.com到known_hosts，然后显示Hi <username>! You’ve successfully authenticated, but GITEE.COM does not provide shell access.成功。</username></p>
</li>
<li><p>重试debug发现还是同样的问题，给Gitee重新添加SSH公钥也没有用，尝试在Git Bash中执行git clone <a href="mailto:git@gitee.com">git@gitee.com</a>:<username>/<gitname>.git报错：</gitname></username></p>
<figure class="highlight gauss"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CreateProcessW failed <span class="built_in">error</span>:<span class="number">193</span></span><br><span class="line">ssh_askpass: posix_spawn: Unknown <span class="built_in">error</span></span><br><span class="line">Host <span class="built_in">key</span> verification failed.</span><br></pre></td></tr></tbody></table></figure>

<p>发现可能原因是由于HOME目录被更改过所以Git Bash使用的.ssh在另外一个目录E:\Cadence\SPB_Data，而刚刚执行的操作只更新了这个目录中的known_hosts而没有改变C:\Users&lt;username&gt;.ssh\known_hosts，于是将两个known_hosts文件手动同步。然后再次执行git clone（SSH方式）发现成功。</p>
</li>
<li><p>重试debug发现还是同样的问题，参考<a target="_blank" rel="noopener" href="https://github.com/markomarkovic/simple-php-git-deploy/issues/20">fatal: could not read Username for ‘https://github.com’: No such device or address #20</a>将tsugi目录下的.git目录下的config中URL改成git形式，使用ssh -T <a href="mailto:git@gitee.com">git@gitee.com</a>成功，确定git config user.name为账户名称，重试debug，没有抛出任何通知、警告、错误或异常。</p>
</li>
</ol>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/blog/tags/mysql/" rel="tag"># mysql</a>
              <a href="/blog/tags/apache/" rel="tag"># apache</a>
          </div>

        
  <div class="post-widgets">
    <div class="wp_rating">
      <div id="wpac-rating"></div>
    </div>
  </div>


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/blog/51259.html" rel="prev" title="SQL Server 2014完全卸载与SQL Server 2019安装全记录">
      <i class="fa fa-chevron-left"></i> SQL Server 2014完全卸载与SQL Server 2019安装全记录
    </a></div>
      <div class="post-nav-item">
    <a href="/blog/26298.html" rel="next" title="使用VSCode调试C/C++（包括WSL和Windows环境）">
      使用VSCode调试C/C++（包括WSL和Windows环境） <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Liu Yihua"
      src="/blog/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Liu Yihua</p>
  <div class="site-description" itemprop="description">綴る言の葉に彩られ 紅く色めき刹那に踊る</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/blog/archives/">
        
          <span class="site-state-item-count">55</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/blog/categories/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/blog/tags/">
          
        <span class="site-state-item-count">78</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/yihuajack" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;yihuajack" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:yihuajack@gmail.com" title="E-Mail → mailto:yihuajack@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/1865589123" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;1865589123" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/yihuajack" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;yihuajack" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.facebook.com/yihuajack" title="FB Page → https:&#x2F;&#x2F;www.facebook.com&#x2F;yihuajack" rel="noopener" target="_blank"><i class="fab fa-facebook fa-fw"></i>FB Page</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://stackoverflow.com/users/13087142/ayka" title="StackOverflow → https:&#x2F;&#x2F;stackoverflow.com&#x2F;users&#x2F;13087142&#x2F;ayka" rel="noopener" target="_blank"><i class="fab fa-stack-overflow fa-fw"></i>StackOverflow</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.youtube.com/channel/UC-giZpNUF0oRcnQUOwxsxLA" title="YouTube → https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UC-giZpNUF0oRcnQUOwxsxLA" rel="noopener" target="_blank"><i class="fab fa-youtube fa-fw"></i>YouTube</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.instagram.com/ayka_tsuzuki" title="Instagram → https:&#x2F;&#x2F;www.instagram.com&#x2F;ayka_tsuzuki" rel="noopener" target="_blank"><i class="fab fa-instagram fa-fw"></i>Instagram</a>
      </span>
      <span class="links-of-author-item">
        <a href="skype:yihuajack?call|chat" title="Skype → skype:yihuajack?call|chat" rel="noopener" target="_blank"><i class="fab fa-skype fa-fw"></i>Skype</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://blog.csdn.net/yihuajack" title="https:&#x2F;&#x2F;blog.csdn.net&#x2F;yihuajack" rel="noopener" target="_blank">CSDN</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Liu Yihua</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

<span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>   
<script>
    var now = new Date();
    function createtime() {
      var grt= new Date("03/18/2020 13:54:00");//此处修改你的建站时间或者网站上线时间
      now.setTime(now.getTime()+250);
      days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
      hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
      if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
      mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
      seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
      snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
      document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 ";
      document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒";
  }
  setInterval("createtime()",250);  
</script>

        








      </div>
    </footer>
  </div>

  
  <script src="/blog/lib/anime.min.js"></script>
  <script src="/blog/lib/pjax/pjax.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/blog/lib/velocity/velocity.min.js"></script>
  <script src="/blog/lib/velocity/velocity.ui.min.js"></script>

<script src="/blog/js/utils.js"></script>

<script src="/blog/js/motion.js"></script>


<script src="/blog/js/schemes/pisces.js"></script>


<script src="/blog/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  



  <script data-pjax>
  if (CONFIG.page.isPost) {
    wpac_init = window.wpac_init || [];
    wpac_init.push({
      widget: 'Rating',
      id    : 27455,
      el    : 'wpac-rating',
      color : 'fc6423'
    });
    (function() {
      if ('WIDGETPACK_LOADED' in window) return;
      WIDGETPACK_LOADED = true;
      var mc = document.createElement('script');
      mc.type = 'text/javascript';
      mc.async = true;
      mc.src = '//embed.widgetpack.com/widget.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(mc, s.nextSibling);
    })();
  }
  </script>

  
<script src="//cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
<script src="//cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script>
<script src="/blog/js/algolia-search.js"></script>














    <div id="pjax">
  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : '6pVKQMTaE6R44OanMdxlS9Ku-gzGzoHsz',
      appKey     : 'OH1sHBKKMXkM9jeXVf1NhPz5',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'en, zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

    </div>
</body>
</html>
