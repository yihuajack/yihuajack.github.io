<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>关于Visual Studio Installer无法识别已安装的VS并报错找不到路径的问题</title>
    <url>/posts/23359.html</url>
    <content><![CDATA[<ol>
<li><p>千万不要删除下载缓存或将下载缓存或安装目录移动到其他位置，如果磁盘空间有限就在安装时将下载缓存放在移动硬盘上。安装后亲测结果当移动硬盘未连接时VS Installer在已安装界面显示为空（即无法识别已安装的VS），插入安装时放下载缓存的移动硬盘后VS Installer重新识别出已安装的VS。</p>
</li>
<li><p>更改默认下载安装路径时最好只改磁盘分区，保留默认的目录树（如D:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise）。</p>
</li>
</ol>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>Visual Studio Installer Error</tag>
      </tags>
  </entry>
  <entry>
    <title>MATLAB用plot画图使用DatetimeTickFormat设置坐标日期格式使用英文日期(月份)</title>
    <url>/posts/53871.html</url>
    <content><![CDATA[<figure class="highlight gml"><table><tbody><tr><td class="code"><pre><span class="line">plot(<span class="symbol">x</span>,<span class="symbol">y</span>,<span class="string">'DatetimeTickFormat'</span>,<span class="string">'MMM-yyyy'</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>x为日期格式（datetime）的一个向量，MMM表示月份的简写（Jan或一月），MMMM表示月份（January或一月），yyyy表示年。对于中文用户而言月份会自动写成“1月”或“一月”的格式，而如果想在坐标轴上显示英文月份则不行，即使在MATLAB预设项中更改语言为英文并重启MATLAB后也不行，解决方法是：</p>
<p>（对于Windows 10）控制面板-&gt;时钟和区域-&gt;日期和时间-&gt;更改日期和时间-&gt;更改日历设置-&gt;格式改为英语(美国)（或控制面板-&gt;时钟和区域-&gt;区域）。重启MATLAB，发现英文字体发生了改变（Monospaced），脚本中的汉字字符变为乱码。打开Preferences-&gt;General：</p>
<p><img src="/posts/53871/Documents\Programming\HexoBlog\source\_posts\CSDN补档-11\20200308095708569.png" alt="img"></p>
<p>对比原先的界面，<img src="/posts/53871/Documents\Programming\HexoBlog\source\_posts\CSDN补档-11\2020030809574621.png" alt="img"></p>
<p>少了最下方“桌面语言”的一栏，这时再执行开头的plot语句发现绘得的图像的横坐标月份变成英文：</p>
<p><img src="/posts/53871/Documents\Programming\HexoBlog\source\_posts\CSDN补档-11\20200308095916864.png" alt="img"></p>
<p>完成后将区域改回中文(简体，中国)，重启MATLAB即自动恢复到原来的中文界面。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>matlab</tag>
        <tag>plot</tag>
      </tags>
  </entry>
  <entry>
    <title>Python安装wordcloud报错error：Microsoft Visual C++ 14.0 is required的解决方法</title>
    <url>/posts/37588.html</url>
    <content><![CDATA[<p> 使用PyCharm的虚拟环境安装wordcloud时出现错误：</p>
<figure class="highlight latex"><table><tbody><tr><td class="code"><pre><span class="line">Collecting wordcloud</span><br><span class="line">  Using cached wordcloud-1.6.0.tar.gz (214 kB)</span><br><span class="line">Requirement already satisfied: numpy&gt;=1.6.1 in d:<span class="tag">\<span class="name">documents</span></span><span class="tag">\<span class="name">programming</span></span><span class="tag">\<span class="name">python</span></span><span class="tag">\<span class="name">venv</span></span><span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">site</span></span>-packages (from wordcloud) (1.18.1)</span><br><span class="line">Requirement already satisfied: pillow in d:<span class="tag">\<span class="name">documents</span></span><span class="tag">\<span class="name">programming</span></span><span class="tag">\<span class="name">python</span></span><span class="tag">\<span class="name">venv</span></span><span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">site</span></span>-packages (from wordcloud) (7.0.0)</span><br><span class="line">Requirement already satisfied: matplotlib in d:<span class="tag">\<span class="name">documents</span></span><span class="tag">\<span class="name">programming</span></span><span class="tag">\<span class="name">python</span></span><span class="tag">\<span class="name">venv</span></span><span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">site</span></span>-packages (from wordcloud) (3.2.0)</span><br><span class="line">Requirement already satisfied: kiwisolver&gt;=1.0.1 in d:<span class="tag">\<span class="name">documents</span></span><span class="tag">\<span class="name">programming</span></span><span class="tag">\<span class="name">python</span></span><span class="tag">\<span class="name">venv</span></span><span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">site</span></span>-packages (from matplotlib-&gt;wordcloud) (1.1.0)</span><br><span class="line">Requirement already satisfied: pyparsing!=2.0.4,!=2.1.2,!=2.1.6,&gt;=2.0.1 in d:<span class="tag">\<span class="name">documents</span></span><span class="tag">\<span class="name">programming</span></span><span class="tag">\<span class="name">python</span></span><span class="tag">\<span class="name">venv</span></span><span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">site</span></span>-packages (from matplotlib-&gt;wordcloud) (2.4.6)</span><br><span class="line">Requirement already satisfied: cycler&gt;=0.10 in d:<span class="tag">\<span class="name">documents</span></span><span class="tag">\<span class="name">programming</span></span><span class="tag">\<span class="name">python</span></span><span class="tag">\<span class="name">venv</span></span><span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">site</span></span>-packages (from matplotlib-&gt;wordcloud) (0.10.0)</span><br><span class="line">Requirement already satisfied: python-dateutil&gt;=2.1 in d:<span class="tag">\<span class="name">documents</span></span><span class="tag">\<span class="name">programming</span></span><span class="tag">\<span class="name">python</span></span><span class="tag">\<span class="name">venv</span></span><span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">site</span></span>-packages (from matplotlib-&gt;wordcloud) (2.8.1)</span><br><span class="line">Requirement already satisfied: setuptools in d:<span class="tag">\<span class="name">documents</span></span><span class="tag">\<span class="name">programming</span></span><span class="tag">\<span class="name">python</span></span><span class="tag">\<span class="name">venv</span></span><span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">site</span></span>-packages (from kiwisolver&gt;=1.0.1-&gt;matplotlib-&gt;wordcloud) (46.0.0)</span><br><span class="line">Requirement already satisfied: six in c:<span class="tag">\<span class="name">users</span></span><span class="tag">\<span class="name">&lt;</span></span>username&gt;<span class="tag">\<span class="name">appdata</span></span><span class="tag">\<span class="name">roaming</span></span><span class="tag">\<span class="name">python</span></span><span class="tag">\<span class="name">python</span></span>38<span class="tag">\<span class="name">site</span></span>-packages (from cycler&gt;=0.10-&gt;matplotlib-&gt;wordcloud) (1.14.0)</span><br><span class="line">Installing collected packages: wordcloud</span><br><span class="line">    Running setup.py install for wordcloud: started</span><br><span class="line">    Running setup.py install for wordcloud: finished with status 'error'</span><br><span class="line"> </span><br><span class="line">    ERROR: Command errored out with exit status 1:</span><br><span class="line">     command: 'D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">Python</span></span><span class="tag">\<span class="name">venv</span></span><span class="tag">\<span class="name">Scripts</span></span><span class="tag">\<span class="name">python</span></span>.exe' -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '"'"'C:<span class="tag">\<span class="name">\</span></span>Users<span class="tag">\<span class="name">\</span></span>&lt;username&gt;<span class="tag">\<span class="name">\</span></span>AppData<span class="tag">\<span class="name">\</span></span>Local<span class="tag">\<span class="name">\</span></span>Temp<span class="tag">\<span class="name">\</span></span>pycharm-packaging<span class="tag">\<span class="name">\</span></span>wordcloud<span class="tag">\<span class="name">\</span></span>setup.py'"'"'; __file__='"'"'C:<span class="tag">\<span class="name">\</span></span>Users<span class="tag">\<span class="name">\</span></span>&lt;username&gt;<span class="tag">\<span class="name">\</span></span>AppData<span class="tag">\<span class="name">\</span></span>Local<span class="tag">\<span class="name">\</span></span>Temp<span class="tag">\<span class="name">\</span></span>pycharm-packaging<span class="tag">\<span class="name">\</span></span>wordcloud<span class="tag">\<span class="name">\</span></span>setup.py'"'"';f=getattr(tokenize, '"'"'open'"'"', open)(__file__);code=f.read().replace('"'"'<span class="tag">\<span class="name">r</span></span><span class="tag">\<span class="name">n</span></span>'"'"', '"'"'<span class="tag">\<span class="name">n</span></span>'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' install --record 'C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">&lt;</span></span>username&gt;<span class="tag">\<span class="name">AppData</span></span><span class="tag">\<span class="name">Local</span></span><span class="tag">\<span class="name">Temp</span></span><span class="tag">\<span class="name">pip</span></span>-record-np4ix5r5<span class="tag">\<span class="name">install</span></span>-record.txt' --single-version-externally-managed --compile --install-headers 'D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">Python</span></span><span class="tag">\<span class="name">venv</span></span><span class="tag">\<span class="name">include</span></span><span class="tag">\<span class="name">site</span></span><span class="tag">\<span class="name">python</span></span>3.8<span class="tag">\<span class="name">wordcloud</span></span>'</span><br><span class="line">         cwd: C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">&lt;</span></span>username&gt;<span class="tag">\<span class="name">AppData</span></span><span class="tag">\<span class="name">Local</span></span><span class="tag">\<span class="name">Temp</span></span><span class="tag">\<span class="name">pycharm</span></span>-packaging<span class="tag">\<span class="name">wordcloud</span></span><span class="tag">\</span></span><br><span class="line">    Complete output (22 lines):</span><br><span class="line">    running install</span><br><span class="line">    running build</span><br><span class="line">    running build_py</span><br><span class="line">    creating build</span><br><span class="line">    creating build<span class="tag">\<span class="name">lib</span></span>.win-amd64-3.8</span><br><span class="line">    creating build<span class="tag">\<span class="name">lib</span></span>.win-amd64-3.8<span class="tag">\<span class="name">wordcloud</span></span></span><br><span class="line">    copying wordcloud<span class="tag">\<span class="name">color</span></span>_from_image.py -&gt; build<span class="tag">\<span class="name">lib</span></span>.win-amd64-3.8<span class="tag">\<span class="name">wordcloud</span></span></span><br><span class="line">    copying wordcloud<span class="tag">\<span class="name">tokenization</span></span>.py -&gt; build<span class="tag">\<span class="name">lib</span></span>.win-amd64-3.8<span class="tag">\<span class="name">wordcloud</span></span></span><br><span class="line">    copying wordcloud<span class="tag">\<span class="name">wordcloud</span></span>.py -&gt; build<span class="tag">\<span class="name">lib</span></span>.win-amd64-3.8<span class="tag">\<span class="name">wordcloud</span></span></span><br><span class="line">    copying wordcloud<span class="tag">\<span class="name">wordcloud</span></span>_cli.py -&gt; build<span class="tag">\<span class="name">lib</span></span>.win-amd64-3.8<span class="tag">\<span class="name">wordcloud</span></span></span><br><span class="line">    copying wordcloud<span class="tag">\<span class="name">_</span></span>version.py -&gt; build<span class="tag">\<span class="name">lib</span></span>.win-amd64-3.8<span class="tag">\<span class="name">wordcloud</span></span></span><br><span class="line">    copying wordcloud<span class="tag">\<span class="name">_</span></span>_init__.py -&gt; build<span class="tag">\<span class="name">lib</span></span>.win-amd64-3.8<span class="tag">\<span class="name">wordcloud</span></span></span><br><span class="line">    copying wordcloud<span class="tag">\<span class="name">_</span></span>_main__.py -&gt; build<span class="tag">\<span class="name">lib</span></span>.win-amd64-3.8<span class="tag">\<span class="name">wordcloud</span></span></span><br><span class="line">    copying wordcloud<span class="tag">\<span class="name">stopwords</span></span> -&gt; build<span class="tag">\<span class="name">lib</span></span>.win-amd64-3.8<span class="tag">\<span class="name">wordcloud</span></span></span><br><span class="line">    copying wordcloud<span class="tag">\<span class="name">DroidSansMono</span></span>.ttf -&gt; build<span class="tag">\<span class="name">lib</span></span>.win-amd64-3.8<span class="tag">\<span class="name">wordcloud</span></span></span><br><span class="line">    warning: cmd_build_py: byte-compiling is disabled, skipping.</span><br><span class="line">    </span><br><span class="line">    UPDATING build<span class="tag">\<span class="name">lib</span></span>.win-amd64-3.8<span class="tag">\<span class="name">wordcloud</span></span>/_version.py</span><br><span class="line">    set build<span class="tag">\<span class="name">lib</span></span>.win-amd64-3.8<span class="tag">\<span class="name">wordcloud</span></span>/_version.py to '1.6.0'</span><br><span class="line">    running build_ext</span><br><span class="line">    building 'wordcloud.query_integral_image' extension</span><br><span class="line">    error: Microsoft Visual C++ 14.0 is required. Get it with "Build Tools for Visual Studio": https://visualstudio.microsoft.com/downloads/</span><br><span class="line">    ----------------------------------------</span><br><span class="line">ERROR: Command errored out with exit status 1: 'D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">Python</span></span><span class="tag">\<span class="name">venv</span></span><span class="tag">\<span class="name">Scripts</span></span><span class="tag">\<span class="name">python</span></span>.exe' -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '"'"'C:<span class="tag">\<span class="name">\</span></span>Users<span class="tag">\<span class="name">\</span></span>&lt;username&gt;<span class="tag">\<span class="name">\</span></span>AppData<span class="tag">\<span class="name">\</span></span>Local<span class="tag">\<span class="name">\</span></span>Temp<span class="tag">\<span class="name">\</span></span>pycharm-packaging<span class="tag">\<span class="name">\</span></span>wordcloud<span class="tag">\<span class="name">\</span></span>setup.py'"'"'; __file__='"'"'C:<span class="tag">\<span class="name">\</span></span>Users<span class="tag">\<span class="name">\</span></span>&lt;username&gt;<span class="tag">\<span class="name">\</span></span>AppData<span class="tag">\<span class="name">\</span></span>Local<span class="tag">\<span class="name">\</span></span>Temp<span class="tag">\<span class="name">\</span></span>pycharm-packaging<span class="tag">\<span class="name">\</span></span>wordcloud<span class="tag">\<span class="name">\</span></span>setup.py'"'"';f=getattr(tokenize, '"'"'open'"'"', open)(__file__);code=f.read().replace('"'"'<span class="tag">\<span class="name">r</span></span><span class="tag">\<span class="name">n</span></span>'"'"', '"'"'<span class="tag">\<span class="name">n</span></span>'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' install --record 'C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">&lt;</span></span>username&gt;<span class="tag">\<span class="name">AppData</span></span><span class="tag">\<span class="name">Local</span></span><span class="tag">\<span class="name">Temp</span></span><span class="tag">\<span class="name">pip</span></span>-record-np4ix5r5<span class="tag">\<span class="name">install</span></span>-record.txt' --single-version-externally-managed --compile --install-headers 'D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">Python</span></span><span class="tag">\<span class="name">venv</span></span><span class="tag">\<span class="name">include</span></span><span class="tag">\<span class="name">site</span></span><span class="tag">\<span class="name">python</span></span>3.8<span class="tag">\<span class="name">wordcloud</span></span>' Check the logs for full command output.</span><br></pre></td></tr></tbody></table></figure>

<p>问题是，我们已经安装过了Microsoft Visual Studio并安装了其中的.NET Framework开发工具以及MSVC - VS C++ x64/x86生成工具等，不应该出现这种情况，后来发现是环境变量缺失的问题，需要在系统环境变量Path中添加X:\Program Files (x86)\Microsoft Visual Studio\201x&lt;version&gt;目录，然后在命令行中进入venv虚拟环境后输入</p>
<figure class="highlight cmake"><table><tbody><tr><td class="code"><pre><span class="line">pip <span class="keyword">install</span> wordcloud</span><br></pre></td></tr></tbody></table></figure>

<p>显示</p>
<figure class="highlight apache"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">Collecting</span> wordcloud</span><br><span class="line">  <span class="attribute">Using</span> cached wordcloud-<span class="number">1</span>.<span class="number">6</span>.<span class="number">0</span>.tar.gz (<span class="number">214</span> kB)</span><br><span class="line"><span class="attribute">Requirement</span> already satisfied: numpy&gt;=<span class="number">1</span>.<span class="number">6</span>.<span class="number">1</span> in d:\documents\programming\python\venv\lib\site-packages (from wordcloud) (<span class="number">1</span>.<span class="number">18</span>.<span class="number">1</span>)</span><br><span class="line"><span class="attribute">Requirement</span> already satisfied: pillow in d:\documents\programming\python\venv\lib\site-packages (from wordcloud) (<span class="number">7</span>.<span class="number">0</span>.<span class="number">0</span>)</span><br><span class="line"><span class="attribute">Requirement</span> already satisfied: matplotlib in d:\documents\programming\python\venv\lib\site-packages (from wordcloud) (<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>)</span><br><span class="line"><span class="attribute">Requirement</span> already satisfied: kiwisolver&gt;=<span class="number">1</span>.<span class="number">0</span>.<span class="number">1</span> in d:\documents\programming\python\venv\lib\site-packages (from matplotlib-&gt;wordcloud) (<span class="number">1</span>.<span class="number">1</span>.<span class="number">0</span>)</span><br><span class="line"><span class="attribute">Requirement</span> already satisfied: cycler&gt;=<span class="number">0</span>.<span class="number">10</span> in d:\documents\programming\python\venv\lib\site-packages (from matplotlib-&gt;wordcloud) (<span class="number">0</span>.<span class="number">10</span>.<span class="number">0</span>)</span><br><span class="line"><span class="attribute">Requirement</span> already satisfied: python-dateutil&gt;=<span class="number">2</span>.<span class="number">1</span> in d:\documents\programming\python\venv\lib\site-packages (from matplotlib-&gt;wordcloud) (<span class="number">2</span>.<span class="number">8</span>.<span class="number">1</span>)</span><br><span class="line"><span class="attribute">Requirement</span> already satisfied: pyparsing!=<span class="number">2</span>.<span class="number">0</span>.<span class="number">4</span>,!=<span class="number">2</span>.<span class="number">1</span>.<span class="number">2</span>,!=<span class="number">2</span>.<span class="number">1</span>.<span class="number">6</span>,&gt;=<span class="number">2</span>.<span class="number">0</span>.<span class="number">1</span> in d:\documents\programming\python\venv\lib\site-packages (from matplotlib-&gt;wordcloud) (<span class="number">2</span>.<span class="number">4</span>.<span class="number">6</span>)</span><br><span class="line"><span class="attribute">Requirement</span> already satisfied: setuptools in d:\documents\programming\python\venv\lib\site-packages (from kiwisolver&gt;=<span class="number">1</span>.<span class="number">0</span>.<span class="number">1</span>-&gt;matplotlib-&gt;wordcloud) (<span class="number">46</span>.<span class="number">0</span>.<span class="number">0</span>)</span><br><span class="line"><span class="attribute">Requirement</span> already satisfied: six in c:\users\&lt;username&gt;\appdata\roaming\python\python<span class="number">38</span>\site-packages (from cycler&gt;=<span class="number">0</span>.<span class="number">10</span>-&gt;matplotlib-&gt;wordcloud) (<span class="number">1</span>.<span class="number">14</span>.<span class="number">0</span>)</span><br><span class="line"><span class="attribute">Installing</span> collected packages: wordcloud</span><br><span class="line">    <span class="attribute">Running</span> setup.py install for wordcloud ... done</span><br><span class="line"><span class="attribute">Successfully</span> installed wordcloud-<span class="number">1</span>.<span class="number">6</span>.<span class="number">0</span></span><br></pre></td></tr></tbody></table></figure>

<p>成功安装。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>visual studio</tag>
        <tag>pip</tag>
        <tag>visual c++</tag>
        <tag>.net</tag>
      </tags>
  </entry>
  <entry>
    <title>PowerShell使用import-module安装oh-my-posh下载慢、卡的问题的解决方法</title>
    <url>/posts/6240.html</url>
    <content><![CDATA[<p>该方法对Windows自带Powershell（Windows 10是PowerShell 5.1）和新版的Powershell 6、7等版本均有效。</p>
<p>初体验PowerShell 7执行命令</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">Install</span>-<span class="keyword">Module</span> oh-my-posh -<span class="keyword">Scope</span> CurrentUser</span><br></pre></td></tr></tbody></table></figure>

<p>后并按A键确认后停留在Install的界面，抑或是进入Download界面下载0.03MB或0.06MB后卡住不动，在设置代理后仍然如此，在设置</p>
<figure class="highlight gams"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">Set</span>-ExecutionPolicy <span class="comment">Bypass</span></span><br></pre></td></tr></tbody></table></figure>

<p>或</p>
<figure class="highlight dsconfig"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">set-ExecutionPolicy</span> <span class="string">RemoteSigned</span></span><br></pre></td></tr></tbody></table></figure>

<p>后仍然如此。但是打开之前已经配置好的Powershell 5.1执行</p>
<figure class="highlight mathematica"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">Update</span>-<span class="keyword">Module</span></span><br></pre></td></tr></tbody></table></figure>

<p>后发现其迅速成功更新了oh-my-posh模块，发现我们只需<strong>用管理员方式启动</strong>Powershell 7再安装即可。事实上新版的PowerShell无需像旧版那样配置Set-ExecutionPolicy和NuGet即可顺利安装模块，并且预装了PSReadLine等。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>powershell</tag>
      </tags>
  </entry>
  <entry>
    <title>为PowerShell和PowerShell Core 7设置不同的profile配置文件路径</title>
    <url>/posts/33820.html</url>
    <content><![CDATA[<p>在体验PowerShell 7并配置profile文件后发现，不同于PowerShell 5.1，使用ScreenFetch命令会报错：</p>
<figure class="highlight latex"><table><tbody><tr><td class="code"><pre><span class="line">Get-WmiObject: C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">&lt;</span></span>username&gt;<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">PowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">windows</span></span>-screenfetch<span class="tag">\</span>1.0.2<span class="tag">\<span class="name">Data</span></span>.psm1:65</span><br><span class="line">Line |</span><br><span class="line">  65 |      return <span class="formula">$env:USERNAME + "@" + (Get-WmiObject Win32_OperatingSystem …</span></span><br><span class="line"><span class="formula">     |                                    ~~~~~~~~~~~~~</span></span><br><span class="line"><span class="formula">     | The term 'Get-WmiObject' is not recognized as the name of a cmdlet, function, script file, or operable</span></span><br><span class="line"><span class="formula">     | program. Check the spelling of the name, or if a path was included, verify that the path is correct</span></span><br><span class="line"><span class="formula">     | and try again.</span></span><br><span class="line"><span class="formula"> </span></span><br><span class="line"><span class="formula">Get-WmiObject: C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">&lt;</span></span>username&gt;<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">PowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">windows</span></span>-screenfetch<span class="tag">\</span>1.0.2<span class="tag">\<span class="name">Data</span></span>.psm1:70</span></span><br><span class="line"><span class="formula">Line |</span></span><br><span class="line"><span class="formula">  70 |      return (Get-WmiObject Win32_OperatingSystem).Caption + " " +</span></span><br><span class="line"><span class="formula">     |              ~~~~~~~~~~~~~</span></span><br><span class="line"><span class="formula">     | The term 'Get-WmiObject' is not recognized as the name of a cmdlet, function, script file, or operable</span></span><br><span class="line"><span class="formula">     | program. Check the spelling of the name, or if a path was included, verify that the path is correct</span></span><br><span class="line"><span class="formula">     | and try again.</span></span><br><span class="line"><span class="formula"> </span></span><br><span class="line"><span class="formula">Get-WmiObject: C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">&lt;</span></span>username&gt;<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">PowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">windows</span></span>-screenfetch<span class="tag">\</span>1.0.2<span class="tag">\<span class="name">Data</span></span>.psm1:76</span></span><br><span class="line"><span class="formula">Line |</span></span><br><span class="line"><span class="formula">  76 |      return (Get-WmiObject  Win32_OperatingSystem).Version;</span></span><br><span class="line"><span class="formula">     |              ~~~~~~~~~~~~~</span></span><br><span class="line"><span class="formula">     | The term 'Get-WmiObject' is not recognized as the name of a cmdlet, function, script file, or operable</span></span><br><span class="line"><span class="formula">     | program. Check the spelling of the name, or if a path was included, verify that the path is correct</span></span><br><span class="line"><span class="formula">     | and try again.</span></span><br><span class="line"><span class="formula"> </span></span><br><span class="line"><span class="formula">Get-WmiObject: C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">&lt;</span></span>username&gt;<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">PowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">windows</span></span>-screenfetch<span class="tag">\</span>1.0.2<span class="tag">\<span class="name">Data</span></span>.psm1:81</span></span><br><span class="line"><span class="formula">Line |</span></span><br><span class="line"><span class="formula">  81 |      $</span>Uptime = ((Get-WmiObject Win32_OperatingSystem).ConvertToDateTim …</span><br><span class="line">     |                  ~~~~~~~~~~~~~</span><br><span class="line">     | The term 'Get-WmiObject' is not recognized as the name of a cmdlet, function, script file, or operable</span><br><span class="line">     | program. Check the spelling of the name, or if a path was included, verify that the path is correct</span><br><span class="line">     | and try again.</span><br><span class="line"> </span><br><span class="line">InvalidOperation: C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">&lt;</span></span>username&gt;<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">PowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">windows</span></span>-screenfetch<span class="tag">\</span>1.0.2<span class="tag">\<span class="name">Data</span></span>.psm1:86</span><br><span class="line">Line |</span><br><span class="line">  86 |      <span class="formula">$FormattedUptime =  $</span>Uptime.Days.ToString() + "d " + <span class="formula">$Uptime.Hour …</span></span><br><span class="line"><span class="formula">     |      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></span><br><span class="line"><span class="formula">     | You cannot call a method on a null-valued expression.</span></span><br><span class="line"><span class="formula"> </span></span><br><span class="line"><span class="formula">Get-WmiObject: C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">&lt;</span></span>username&gt;<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">PowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">windows</span></span>-screenfetch<span class="tag">\</span>1.0.2<span class="tag">\<span class="name">Data</span></span>.psm1:107</span></span><br><span class="line"><span class="formula">Line |</span></span><br><span class="line"><span class="formula"> 107 |      $</span>monitors = Get-WmiObject -N "root<span class="tag">\<span class="name">wmi</span></span>" -Class WmiMonitorListedSu …</span><br><span class="line">     |                  ~~~~~~~~~~~~~</span><br><span class="line">     | The term 'Get-WmiObject' is not recognized as the name of a cmdlet, function, script file, or operable</span><br><span class="line">     | program. Check the spelling of the name, or if a path was included, verify that the path is correct</span><br><span class="line">     | and try again.</span><br><span class="line"> </span><br><span class="line">Get-WmiObject: C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">&lt;</span></span>username&gt;<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">PowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">windows</span></span>-screenfetch<span class="tag">\</span>1.0.2<span class="tag">\<span class="name">Data</span></span>.psm1:133</span><br><span class="line">Line |</span><br><span class="line"> 133 |      return (((Get-WmiObject Win32_Processor).Name) -replace '<span class="tag">\<span class="name">s</span></span>+', '  …</span><br><span class="line">     |                ~~~~~~~~~~~~~</span><br><span class="line">     | The term 'Get-WmiObject' is not recognized as the name of a cmdlet, function, script file, or operable</span><br><span class="line">     | program. Check the spelling of the name, or if a path was included, verify that the path is correct</span><br><span class="line">     | and try again.</span><br><span class="line">Get-WmiObject: C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">&lt;</span></span>username&gt;<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">PowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">windows</span></span>-screenfetch<span class="tag">\</span>1.0.2<span class="tag">\<span class="name">Data</span></span>.psm1:138</span><br><span class="line">Line |</span><br><span class="line"> 138 |      return (Get-WmiObject Win32_DisplayConfiguration).DeviceName;</span><br><span class="line">     |              ~~~~~~~~~~~~~</span><br><span class="line">     | The term 'Get-WmiObject' is not recognized as the name of a cmdlet, function, script file, or operable</span><br><span class="line">     | program. Check the spelling of the name, or if a path was included, verify that the path is correct</span><br><span class="line">     | and try again.</span><br><span class="line">Get-WmiObject: C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">&lt;</span></span>username&gt;<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">PowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">windows</span></span>-screenfetch<span class="tag">\</span>1.0.2<span class="tag">\<span class="name">Data</span></span>.psm1:143</span><br><span class="line">Line |</span><br><span class="line"> 143 |      <span class="formula">$FreeRam = ([math]::Truncate((Get-WmiObject Win32_OperatingSystem …</span></span><br><span class="line"><span class="formula">     |                                    ~~~~~~~~~~~~~</span></span><br><span class="line"><span class="formula">     | The term 'Get-WmiObject' is not recognized as the name of a cmdlet, function, script file, or operable</span></span><br><span class="line"><span class="formula">     | program. Check the spelling of the name, or if a path was included, verify that the path is correct</span></span><br><span class="line"><span class="formula">     | and try again.</span></span><br><span class="line"><span class="formula">Get-WmiObject: C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">&lt;</span></span>username&gt;<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">PowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">windows</span></span>-screenfetch<span class="tag">\</span>1.0.2<span class="tag">\<span class="name">Data</span></span>.psm1:144</span></span><br><span class="line"><span class="formula">Line |</span></span><br><span class="line"><span class="formula"> 144 |      $</span>TotalRam = ([math]::Truncate((Get-WmiObject Win32_ComputerSystem …</span><br><span class="line">     |                                     ~~~~~~~~~~~~~</span><br><span class="line">     | The term 'Get-WmiObject' is not recognized as the name of a cmdlet, function, script file, or operable</span><br><span class="line">     | program. Check the spelling of the name, or if a path was included, verify that the path is correct</span><br><span class="line">     | and try again.</span><br><span class="line">RuntimeException: C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">&lt;</span></span>username&gt;<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">PowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">windows</span></span>-screenfetch<span class="tag">\</span>1.0.2<span class="tag">\<span class="name">Data</span></span>.psm1:146</span><br><span class="line">Line |</span><br><span class="line"> 146 |      <span class="formula">$FreeRamPercent = ($</span>FreeRam / <span class="formula">$TotalRam) * 100;</span></span><br><span class="line"><span class="formula">     |      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></span><br><span class="line"><span class="formula">     | Attempted to divide by zero.</span></span><br><span class="line"><span class="formula">RuntimeException: C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">&lt;</span></span>username&gt;<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">PowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">windows</span></span>-screenfetch<span class="tag">\</span>1.0.2<span class="tag">\<span class="name">Data</span></span>.psm1:148</span></span><br><span class="line"><span class="formula">Line |</span></span><br><span class="line"><span class="formula"> 148 |      $</span>UsedRamPercent = (<span class="formula">$UsedRam / $</span>TotalRam) * 100;</span><br><span class="line">     |      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">     | Attempted to divide by zero.</span><br><span class="line">InvalidOperation: C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">&lt;</span></span>username&gt;<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">PowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">windows</span></span>-screenfetch<span class="tag">\</span>1.0.2<span class="tag">\<span class="name">Data</span></span>.psm1:151</span><br><span class="line">Line |</span><br><span class="line"> 151 |      return <span class="formula">$UsedRam.ToString() + "MB / " + $</span>TotalRam.ToString() + " M …</span><br><span class="line">     |             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">     | You cannot call a method on a null-valued expression.</span><br><span class="line">Get-WmiObject: C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">&lt;</span></span>username&gt;<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">PowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">windows</span></span>-screenfetch<span class="tag">\</span>1.0.2<span class="tag">\<span class="name">Data</span></span>.psm1:158</span><br><span class="line">Line |</span><br><span class="line"> 158 |      <span class="formula">$NumDisks = (Get-WmiObject Win32_LogicalDisk).Count;</span></span><br><span class="line"><span class="formula">     |                   ~~~~~~~~~~~~~</span></span><br><span class="line"><span class="formula">     | The term 'Get-WmiObject' is not recognized as the name of a cmdlet, function, script file, or operable</span></span><br><span class="line"><span class="formula">     | program. Check the spelling of the name, or if a path was included, verify that the path is correct</span></span><br><span class="line"><span class="formula">     | and try again.</span></span><br><span class="line"><span class="formula">Get-WmiObject: C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">&lt;</span></span>username&gt;<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">PowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">windows</span></span>-screenfetch<span class="tag">\</span>1.0.2<span class="tag">\<span class="name">Data</span></span>.psm1:189</span></span><br><span class="line"><span class="formula">Line |</span></span><br><span class="line"><span class="formula"> 189 |          $</span>DiskID = (Get-WmiObject Win32_LogicalDisk).DeviceId;</span><br><span class="line">     |                     ~~~~~~~~~~~~~</span><br><span class="line">     | The term 'Get-WmiObject' is not recognized as the name of a cmdlet, function, script file, or operable</span><br><span class="line">     | program. Check the spelling of the name, or if a path was included, verify that the path is correct</span><br><span class="line">     | and try again.</span><br><span class="line">Get-WmiObject: C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">&lt;</span></span>username&gt;<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">PowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">windows</span></span>-screenfetch<span class="tag">\</span>1.0.2<span class="tag">\<span class="name">Data</span></span>.psm1:191</span><br><span class="line">Line |</span><br><span class="line"> 191 |          <span class="formula">$FreeDiskSize = (Get-WmiObject Win32_LogicalDisk).FreeSpace</span></span><br><span class="line"><span class="formula">     |                           ~~~~~~~~~~~~~</span></span><br><span class="line"><span class="formula">     | The term 'Get-WmiObject' is not recognized as the name of a cmdlet, function, script file, or operable</span></span><br><span class="line"><span class="formula">     | program. Check the spelling of the name, or if a path was included, verify that the path is correct</span></span><br><span class="line"><span class="formula">     | and try again.</span></span><br><span class="line"><span class="formula">Get-WmiObject: C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">&lt;</span></span>username&gt;<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">PowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">windows</span></span>-screenfetch<span class="tag">\</span>1.0.2<span class="tag">\<span class="name">Data</span></span>.psm1:195</span></span><br><span class="line"><span class="formula">Line |</span></span><br><span class="line"><span class="formula"> 195 |          $</span>DiskSize = (Get-WmiObject Win32_LogicalDisk).Size;</span><br><span class="line">     |                       ~~~~~~~~~~~~~</span><br><span class="line">     | The term 'Get-WmiObject' is not recognized as the name of a cmdlet, function, script file, or operable</span><br><span class="line">     | program. Check the spelling of the name, or if a path was included, verify that the path is correct</span><br><span class="line">     | and try again.</span><br><span class="line">InvalidOperation: C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">&lt;</span></span>username&gt;<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">PowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">windows</span></span>-screenfetch<span class="tag">\</span>1.0.2<span class="tag">\<span class="name">Data</span></span>.psm1:215</span><br><span class="line">Line |</span><br><span class="line"> 215 |              <span class="formula">$FormattedDisk = "Disk " + $</span>DiskID.ToString() + " Empty";</span><br><span class="line">     |              ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">     | You cannot call a method on a null-valued expression.</span><br><span class="line">                         ....::::</span><br><span class="line">                 ....::::::::::::       OS: Dell Inc. 03RV2M</span><br><span class="line">        ....:::: ::::::::::::::::       Kernel: PowerShell 7.0.0</span><br><span class="line">....:::::::::::: ::::::::::::::::       Uptime: DWM</span><br><span class="line">:::::::::::::::: ::::::::::::::::       Motherboard: Segoe UI</span><br><span class="line">:::::::::::::::: ::::::::::::::::       Shell:</span><br><span class="line">:::::::::::::::: ::::::::::::::::       Resolution:</span><br><span class="line">:::::::::::::::: ::::::::::::::::       Window Manager:</span><br><span class="line">................ ................       Font:</span><br><span class="line">:::::::::::::::: ::::::::::::::::       CPU:</span><br><span class="line">:::::::::::::::: ::::::::::::::::       GPU</span><br><span class="line">:::::::::::::::: ::::::::::::::::       RAM:</span><br><span class="line">'''':::::::::::: ::::::::::::::::</span><br><span class="line">        '''':::: ::::::::::::::::</span><br><span class="line">                 ''''::::::::::::</span><br><span class="line">                         ''''::::</span><br><span class="line"> </span><br><span class="line"> </span><br></pre></td></tr></tbody></table></figure>

<p>所以我们想要为PowerShell和PowerShell Core设置不同的profile配置文件路径，方法如下：</p>
<p>将C:\Users&lt;username&gt;\Documents\PowerShell中的Microsoft.PowerShell_profile.ps1复制到C:\WINDOWS\System32\WindowsPowerShell\v1.0中，则现在：</p>
<p>C:\WINDOWS\System32\WindowsPowerShell\v1.0\Microsoft.PowerShell_profile.ps1是PowerShell 5.1的配置文件；</p>
<p>C:\Users&lt;username&gt;\Documents\PowerShell\Microsoft.PowerShell_profile.ps1是PowerShell 7的配置文件。</p>
<p>注意，如果你之前的配置文件名称是profile.ps1，则你需要将其文件名更改为Microsoft.PowerShell_profile.ps1。</p>
<p>这种方法有一个bug，如果你在前者的profile文件中加入ScreenFetch而后者不加入，尽管PowerShell 7不再执行ScreenFetch命令，但是PowerShell 5.1会将ScreenFetch执行两遍，我们只好将前者的profile文件中的ScreenFetch命令也删去，则PowerShell 5.1只执行一次ScreenFetch。</p>
<p>另外，更改PowerShell的profile文件的路径可使用命令</p>
<figure class="highlight arcade"><table><tbody><tr><td class="code"><pre><span class="line"><span class="symbol">$profile</span> = <span class="string">"NewLocation\profile.ps1"</span></span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>powershell</tag>
      </tags>
  </entry>
  <entry>
    <title>为Windows Terminal配置新的Shell与默认Shell（以PowerShell Core 7为例）</title>
    <url>/posts/19739.html</url>
    <content><![CDATA[<p>Windows Terminal默认打开的是系统自带的PowerShell（Windows 10是PowerShell 5.1），而如果想配置一个新的Shell如PowerShell Core 7，则可以按如下操作进行：</p>
<ol>
<li>Ctrl+,打开Settings，我们为PowerShell Core 7先生成一个GUID，比如用<a href="https://www.guidgenerator.com/online-guid-generator.aspx">Online GUID Generator</a>，然后在打开的profiles.json中的”profiles”:”list”:中新建一个大括号（与其他Shell平行）：</li>
</ol>
<figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">"guid"</span>: <span class="string">"{~}"</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"PowerShell Core"</span>,</span><br><span class="line">    <span class="attr">"commandline"</span>: <span class="string">"D:\\Program Files\\PowerShell\\7\\pwsh.exe"</span>,</span><br><span class="line">    <span class="attr">"acrylicOpacity"</span>: <span class="number">0.5</span>,</span><br><span class="line">    <span class="attr">"fontFace"</span>: <span class="string">"DejaVu Sans Mono for Powerline"</span>,</span><br><span class="line">    <span class="attr">"hidden"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"useAcrylic"</span>: <span class="literal">true</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>其中，~为你生成的GUID，name可以自己设置，commandline设置为你安装PowerShell Core的路径，此外的可选项分别为：</p>
<p>useAcrylic: True为使用亚克力效果；acrylicOpacity为亚克力效果的透明度，fontFace为字体设置，DejaVu Sans Mono for Powerline为PowerShell的一个推荐字体。</p>
<p>关于设置默认Shell，只需在profiles.json中的”defaultProfile” “<del>”中的</del>替换为PowerShell Core设定的GUID值即可。</p>
<p>Reference:</p>
<p><a href="https://msd.misuland.com/pd/3545776840385760818">如何给 Windows Terminal 增加一个新的终端（以 Bash 为例）</a></p>
<p><a href="https://briantjackett.com/2019/06/24/windows-terminal-with-powershell-v7-preview/">How To Add PowerShell v7 Preview to the New Windows Terminal</a></p>
<p><a href="https://blog.csdn.net/littlehaes/article/details/101514339">Win10 Terminal更换默认Shell</a></p>
<p><a href="https://www.cnblogs.com/lsysunbow/archive/2012/08/09/2629952.html">guid在线生成工具</a></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>powershell</tag>
      </tags>
  </entry>
  <entry>
    <title>MATLAB update出现未知错误unexpected error及Bundle#136 start failed的一种可能原因</title>
    <url>/posts/52215.html</url>
    <content><![CDATA[<p>在安装MATLAB R2019b Update 5的过程中出现未知错误unexpected error，并且找不到日志文件可供查询（如果有高手找到请指教），打开代理后仍然出现未知错误还连带了连接错误connection error。本来想暂时放弃更新，结果打开MATLAB发现命令行窗口报错：</p>
<figure class="highlight latex"><table><tbody><tr><td class="code"><pre><span class="line">Caught "std::exception" Exception message is:</span><br><span class="line">Bundle#136 start failed: Loading E:<span class="tag">\<span class="name">Program</span></span> Files<span class="tag">\<span class="name">MATLAB</span></span><span class="tag">\<span class="name">R</span></span>2019b<span class="tag">\<span class="name">bin</span></span><span class="tag">\<span class="name">win</span></span>64<span class="tag">\<span class="name">builtins</span></span><span class="tag">\<span class="name">matlab</span></span>_graphics_hg<span class="tag">\<span class="name">mwhg</span></span>_builtinimpl.dllfailed with error: 鎵句笉鍒版寚瀹氱殑妯″潡銆�</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">在后台初始化图形期间出错: Bundle#136 start failed: Loading E:<span class="tag">\<span class="name">Program</span></span></span><br><span class="line">Files<span class="tag">\<span class="name">MATLAB</span></span><span class="tag">\<span class="name">R</span></span>2019b<span class="tag">\<span class="name">bin</span></span><span class="tag">\<span class="name">win</span></span>64<span class="tag">\<span class="name">builtins</span></span><span class="tag">\<span class="name">matlab</span></span>_graphics_hg<span class="tag">\<span class="name">mwhg</span></span>_builtinimpl.dllfailed</span><br><span class="line">with error: 鎵句笉鍒版寚瀹氱殑妯″潡銆</span><br></pre></td></tr></tbody></table></figure>

<p>而试图打开一个m文件则继续报错</p>
<figure class="highlight reasonml"><table><tbody><tr><td class="code"><pre><span class="line">Exception <span class="keyword">in</span> thread <span class="string">"AWT-EventQueue-0"</span>: java.lang.NoClassDefFoundError: com/mathworks/toolbox/coder/nide/editor/StateflowStorageLocation</span><br><span class="line">	at java.lang.<span class="module-access"><span class="module"><span class="identifier">ClassLoader</span>.</span></span>define<span class="constructor">Class1(Native Method)</span></span><br><span class="line">	at java.lang.<span class="module-access"><span class="module"><span class="identifier">ClassLoader</span>.</span></span>define<span class="constructor">Class(ClassLoader.<span class="params">java</span>:763)</span></span><br><span class="line">	at java.security.<span class="module-access"><span class="module"><span class="identifier">SecureClassLoader</span>.</span></span>define<span class="constructor">Class(SecureClassLoader.<span class="params">java</span>:142)</span></span><br><span class="line">	at java.net.<span class="module-access"><span class="module"><span class="identifier">URLClassLoader</span>.</span></span>define<span class="constructor">Class(URLClassLoader.<span class="params">java</span>:468)</span></span><br><span class="line">	at java.net.<span class="module-access"><span class="module"><span class="identifier">URLClassLoader</span>.</span></span>access<span class="constructor">$100(URLClassLoader.<span class="params">java</span>:74)</span></span><br><span class="line">	at java.net.<span class="module-access"><span class="module"><span class="identifier">URLClassLoader$1</span>.</span></span>run(<span class="module-access"><span class="module"><span class="identifier">URLClassLoader</span>.</span></span>java:<span class="number">369</span>)</span><br><span class="line">	at java.net.<span class="module-access"><span class="module"><span class="identifier">URLClassLoader$1</span>.</span></span>run(<span class="module-access"><span class="module"><span class="identifier">URLClassLoader</span>.</span></span>java:<span class="number">363</span>)</span><br><span class="line">	at java.security.<span class="module-access"><span class="module"><span class="identifier">AccessController</span>.</span></span><span class="keyword">do</span><span class="constructor">Privileged(Native Method)</span></span><br><span class="line">	at java.net.<span class="module-access"><span class="module"><span class="identifier">URLClassLoader</span>.</span></span>find<span class="constructor">Class(URLClassLoader.<span class="params">java</span>:362)</span></span><br><span class="line">	at java.lang.<span class="module-access"><span class="module"><span class="identifier">ClassLoader</span>.</span></span>load<span class="constructor">Class(ClassLoader.<span class="params">java</span>:424)</span></span><br><span class="line">	at sun.misc.<span class="module-access"><span class="module"><span class="identifier">Launcher$AppClassLoader</span>.</span></span>load<span class="constructor">Class(Launcher.<span class="params">java</span>:349)</span></span><br><span class="line">	at java.lang.<span class="module-access"><span class="module"><span class="identifier">ClassLoader</span>.</span></span>load<span class="constructor">Class(ClassLoader.<span class="params">java</span>:357)</span></span><br><span class="line">	at com.mathworks.toolbox.eml.breakpoints.<span class="module-access"><span class="module"><span class="identifier">EmlMarginProvider</span>.</span></span>is<span class="constructor">Applicable(EmlMarginProvider.<span class="params">java</span>:21)</span></span><br><span class="line">	at com.mathworks.mde.editor.<span class="module-access"><span class="module"><span class="identifier">EditorView</span>.</span></span>get<span class="constructor">ApplicableMarginProviders(EditorView.<span class="params">java</span>:252)</span></span><br><span class="line">	at com.mathworks.mde.editor.<span class="module-access"><span class="module"><span class="identifier">EditorView</span>.</span></span>init<span class="constructor">SyntaxTextPane(EditorView.<span class="params">java</span>:885)</span></span><br><span class="line">	at com.mathworks.mde.editor.EditorView.&lt;init&gt;(<span class="module-access"><span class="module"><span class="identifier">EditorView</span>.</span></span>java:<span class="number">222</span>)</span><br><span class="line">	at com.mathworks.mde.editor.EditorView.&lt;init&gt;(<span class="module-access"><span class="module"><span class="identifier">EditorView</span>.</span></span>java:<span class="number">153</span>)</span><br><span class="line">	at com.mathworks.mde.editor.<span class="module-access"><span class="module"><span class="identifier">EditorViewClient</span>.</span></span>init(<span class="module-access"><span class="module"><span class="identifier">EditorViewClient</span>.</span></span>java:<span class="number">232</span>)</span><br><span class="line">	at com.mathworks.mde.editor.EditorViewClient.&lt;init&gt;(<span class="module-access"><span class="module"><span class="identifier">EditorViewClient</span>.</span></span>java:<span class="number">181</span>)</span><br><span class="line">	at com.mathworks.mde.editor.<span class="module-access"><span class="module"><span class="identifier">MatlabEditorApplication</span>.</span></span>create<span class="constructor">EditorViewClient(MatlabEditorApplication.<span class="params">java</span>:700)</span></span><br><span class="line">	at com.mathworks.mde.editor.<span class="module-access"><span class="module"><span class="identifier">MatlabEditorApplication</span>.</span></span>create<span class="constructor">EditorViewClient(MatlabEditorApplication.<span class="params">java</span>:685)</span></span><br><span class="line">	at com.mathworks.mde.editor.<span class="module-access"><span class="module"><span class="identifier">MatlabEditorApplication</span>.</span></span>create<span class="constructor">EditorViewClientFromExistingFile(MatlabEditorApplication.<span class="params">java</span>:677)</span></span><br><span class="line">	at com.mathworks.mde.editor.<span class="module-access"><span class="module"><span class="identifier">MatlabEditorApplication</span>.</span></span>access<span class="constructor">$300(MatlabEditorApplication.<span class="params">java</span>:73)</span></span><br><span class="line">	at com.mathworks.mde.editor.<span class="module-access"><span class="module"><span class="identifier">MatlabEditorApplication$4</span>.</span></span>run<span class="constructor">WithOutput(MatlabEditorApplication.<span class="params">java</span>:402)</span></span><br><span class="line">	at com.mathworks.jmi.<span class="module-access"><span class="module"><span class="identifier">AWTUtilities$Invoker$2</span>.</span></span>watched<span class="constructor">Run(AWTUtilities.<span class="params">java</span>:475)</span></span><br><span class="line">	at com.mathworks.jmi.<span class="module-access"><span class="module"><span class="identifier">AWTUtilities$WatchedRunnable</span>.</span></span>run(<span class="module-access"><span class="module"><span class="identifier">AWTUtilities</span>.</span></span>java:<span class="number">436</span>)</span><br><span class="line">	at java.awt.event.<span class="module-access"><span class="module"><span class="identifier">InvocationEvent</span>.</span></span>dispatch(<span class="module-access"><span class="module"><span class="identifier">InvocationEvent</span>.</span></span>java:<span class="number">311</span>)</span><br><span class="line">	at java.awt.<span class="module-access"><span class="module"><span class="identifier">EventQueue</span>.</span></span>dispatch<span class="constructor">EventImpl(EventQueue.<span class="params">java</span>:758)</span></span><br><span class="line">	at java.awt.<span class="module-access"><span class="module"><span class="identifier">EventQueue</span>.</span></span>access<span class="constructor">$500(EventQueue.<span class="params">java</span>:97)</span></span><br><span class="line">	at java.awt.<span class="module-access"><span class="module"><span class="identifier">EventQueue$3</span>.</span></span>run(<span class="module-access"><span class="module"><span class="identifier">EventQueue</span>.</span></span>java:<span class="number">709</span>)</span><br><span class="line">	at java.awt.<span class="module-access"><span class="module"><span class="identifier">EventQueue$3</span>.</span></span>run(<span class="module-access"><span class="module"><span class="identifier">EventQueue</span>.</span></span>java:<span class="number">703</span>)</span><br><span class="line">	at java.security.<span class="module-access"><span class="module"><span class="identifier">AccessController</span>.</span></span><span class="keyword">do</span><span class="constructor">Privileged(Native Method)</span></span><br><span class="line">	at java.security.<span class="module-access"><span class="module"><span class="identifier">ProtectionDomain$JavaSecurityAccessImpl</span>.</span></span><span class="keyword">do</span><span class="constructor">IntersectionPrivilege(ProtectionDomain.<span class="params">java</span>:74)</span></span><br><span class="line">	at java.awt.<span class="module-access"><span class="module"><span class="identifier">EventQueue</span>.</span></span>dispatch<span class="constructor">Event(EventQueue.<span class="params">java</span>:728)</span></span><br><span class="line">	at java.awt.<span class="module-access"><span class="module"><span class="identifier">EventDispatchThread</span>.</span></span>pump<span class="constructor">OneEventForFilters(EventDispatchThread.<span class="params">java</span>:205)</span></span><br><span class="line">	at java.awt.<span class="module-access"><span class="module"><span class="identifier">EventDispatchThread</span>.</span></span>pump<span class="constructor">EventsForFilter(EventDispatchThread.<span class="params">java</span>:116)</span></span><br><span class="line">	at java.awt.<span class="module-access"><span class="module"><span class="identifier">EventDispatchThread</span>.</span></span>pump<span class="constructor">EventsForHierarchy(EventDispatchThread.<span class="params">java</span>:105)</span></span><br><span class="line">	at java.awt.<span class="module-access"><span class="module"><span class="identifier">EventDispatchThread</span>.</span></span>pump<span class="constructor">Events(EventDispatchThread.<span class="params">java</span>:101)</span></span><br><span class="line">	at java.awt.<span class="module-access"><span class="module"><span class="identifier">EventDispatchThread</span>.</span></span>pump<span class="constructor">Events(EventDispatchThread.<span class="params">java</span>:93)</span></span><br><span class="line">	at java.awt.<span class="module-access"><span class="module"><span class="identifier">EventDispatchThread</span>.</span></span>run(<span class="module-access"><span class="module"><span class="identifier">EventDispatchThread</span>.</span></span>java:<span class="number">82</span>)</span><br><span class="line">Caused by: java.lang.ClassNotFoundException: com.mathworks.toolbox.coder.nide.editor.StateflowStorageLocation</span><br><span class="line">	at java.net.<span class="module-access"><span class="module"><span class="identifier">URLClassLoader</span>.</span></span>find<span class="constructor">Class(URLClassLoader.<span class="params">java</span>:382)</span></span><br><span class="line">	at java.lang.<span class="module-access"><span class="module"><span class="identifier">ClassLoader</span>.</span></span>load<span class="constructor">Class(ClassLoader.<span class="params">java</span>:424)</span></span><br><span class="line">	at sun.misc.<span class="module-access"><span class="module"><span class="identifier">Launcher$AppClassLoader</span>.</span></span>load<span class="constructor">Class(Launcher.<span class="params">java</span>:349)</span></span><br><span class="line">	at java.lang.<span class="module-access"><span class="module"><span class="identifier">ClassLoader</span>.</span></span>load<span class="constructor">Class(ClassLoader.<span class="params">java</span>:357)</span></span><br><span class="line"><span class="operator">	... </span><span class="number">40</span> more</span><br></pre></td></tr></tbody></table></figure>

<p>不禁让人联想起更新NVIDIA显卡驱动程序时MATLAB出现的临时性错误。经过回忆想起在这期间由于需要给开始菜单截图提交GitHub issue而把系统的语言更改成了英文。这时我们把系统的语言改回中文，命令行窗口仍会报错，这可能是因为更新失败无法回滚造成的，点击右上角铃铛图标显示通知中更新Update 5，无需代理即可成功安装更新。这启示如果出现类似错误，可以先检查一下系统设置是否发生了改变。</p>
<p>另外，如有需求，我们可以直接从<a href="https://ww2.mathworks.cn/downloads/web_downloads/show_updates?release=R2019b%EF%BC%88URL%E6%9C%80%E5%90%8E%E7%9A%84R2019b%E5%8F%AF%E6%8D%A2%E6%88%90%E4%BD%A0%E6%83%B3%E6%9B%B4%E6%96%B0%E7%9A%84MATLAB%E7%89%88%E6%9C%AC%E5%8F%B7%EF%BC%89%E4%B8%8B%E8%BD%BDMATLAB">https://ww2.mathworks.cn/downloads/web_downloads/show_updates?release=R2019b（URL最后的R2019b可换成你想更新的MATLAB版本号）下载MATLAB</a> Update更新包，如图所示：</p>
<p><img src="/posts/52215/Documents\Programming\HexoBlog\source\_posts\CSDN补档-16\20200315101839605.png" alt="img"></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>matlab</tag>
      </tags>
  </entry>
  <entry>
    <title>Python解决gbk、utf-8、gb2312的UnicodeEncodeError与UnicodeDecodeError乱码解码的两种方法</title>
    <url>/posts/40036.html</url>
    <content><![CDATA[<p>Python在处理文字数据时往往会面对文字中乱码的困扰，这其中往往还包含了神奇的双字节字符和多字节字符，我们只想删除这些乱码而不想去掉字符串中的任何普通符号，可以使用正则表达式处理（以MATLAB为例）：</p>
<figure class="highlight lisp"><table><tbody><tr><td class="code"><pre><span class="line">matchStr=unique(<span class="name">regexp</span>(<span class="name">str</span>{i},'[^\x00-\xff]','match'))</span><br></pre></td></tr></tbody></table></figure>

<p>然后使用strrep函数即可删除这些非双字节（非ASCII）字符，特别地，[\u4e00-\u9fa5]可以匹配中文字符。但是Python读取替换过后的字符串还是报错：</p>
<figure class="highlight ada"><table><tbody><tr><td class="code"><pre><span class="line">UnicodeDecodeError: <span class="symbol">'gbk</span>' codec can<span class="symbol">'t</span> decode byte xxxx <span class="keyword">in</span> position</span><br></pre></td></tr></tbody></table></figure>

<p>如果你设置utf-8解码或gb2312解码仍然会报错。问题在于正则表达式可以处理ASCII与Unicode编码，但<strong>不能处理GBK编码</strong>，遇上GBK编码的字符串是无解的（参考<a href="https://www.cnblogs.com/simpman/archive/2013/02/22/2921907.html">正则表达式（二）：Unicode诸问题（上）</a>），而我们收到一组数据时往往不能对数据提供方要求说你们得给Unicode编码的字符，所以我们要忽略掉这些不能被正确编码解码的字符。</p>
<p>方式一：读取文件对象时忽略错误</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="keyword">open</span>(file_path, <span class="keyword">errors</span>=<span class="string">'ignore'</span>) <span class="keyword">as</span> file_object:</span><br><span class="line">    <span class="keyword">lines</span> = file_object.readlines()</span><br></pre></td></tr></tbody></table></figure>

<p>方式二：读取表格等数据类型时使用ISO-8859-1编码（其中header默认值即为’infer’，sep相当于MATLAB中的’Delimiter’分隔符）</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line"> </span><br><span class="line">table1 = pd.read_table(file_path, <span class="attribute">sep</span>=<span class="string">'\t'</span>, <span class="attribute">header</span>=<span class="string">'infer'</span>, <span class="attribute">encoding</span>=<span class="string">'ISO-8859-1'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>成功解决。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>matlab</tag>
        <tag>python</tag>
        <tag>codec</tag>
        <tag>regex</tag>
        <tag>gbk</tag>
      </tags>
  </entry>
  <entry>
    <title>Git for Windows 2.25.1更改$HOME路径</title>
    <url>/posts/36466.html</url>
    <content><![CDATA[<p>由于之前安装Cadence更改了系统环境变量，Git for Windows的$HOME目录定位到了其他地方，新版的Git for Windows在安装目录（如D:\Program_Files\Git）下的/etc/profile中已经删除了HOME相关的设置行，但是不用担心，我们只需要在profile文件开头加入：</p>
<figure class="highlight ini"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">HOME</span>=<span class="string">"C:/Users/&lt;username&gt;"</span></span><br></pre></td></tr></tbody></table></figure>

<p>或其他你想指定的目录即可更改$HOME路径，无视环境变量中对HOME的定义。</p>
<p>Reference:</p>
<p><a href="https://www.riuson.com/blog/post/git-for-windows-custom-home-directory">Git for Windows - custom home directory</a></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>ssh-add -L出现两个ssh-rsa key的解决办法</title>
    <url>/posts/31774.html</url>
    <content><![CDATA[<p>Windows上配置Git的困难之处在于往往不知道谁动了自己的ssh key：Git for Windows、msys2/mingw-w64中的git、CMD或PowerShell中的Git、WSL中的Git、其他软件中自带的Git等，比如最近GitHub将分支推送到Origin时突然报错，然后经过一番波折发现在Windows CMD命令提示符或PowerShell中输入ssh-add -l或ssh-add -L居然显示了两个不同的ssh-rsa key，而且指向的目录都是C:\Users&lt;username&gt;.ssh\id_rsa，重启计算机仍然如此，用ssh-keygen重新生成了key仍然如此，不得不说是一个神奇的bug。事实上，到最后也没能找出原因。据说GitHub Desktop与github.com和其他站点通信使用两套不同的SSH密钥，然而理论上它使用的密钥也会显示在$USERPROFILE/.ssh中，所以排除。不过经过测试，将其中的id_rsa删除并重启CMD后运行ssh-add -L命令仍然出现两个key，原来这条命令将SSH key存入SSH-Agent的高速缓存中，所以使用语句：</p>
<figure class="highlight dockerfile"><table><tbody><tr><td class="code"><pre><span class="line">ssh-<span class="keyword">add</span><span class="bash"> -D</span></span><br></pre></td></tr></tbody></table></figure>

<p>删除所有密钥（如果报错则先运行ssh-add -d直到不能删除然后再运行ssh-add D，不用担心，这条语句并不会删除id_rsa文件），然后重新运行</p>
<figure class="highlight arcade"><table><tbody><tr><td class="code"><pre><span class="line">ssh-add C:\Users\&lt;username&gt;<span class="regexp">/.ssh/i</span>d_rsa</span><br></pre></td></tr></tbody></table></figure>

<p>再次检验ssh-add -L只剩一个密钥了。重新打开GitHub Desktop，问题成功解决。</p>
<p>不过遗留的问题是如何根本上解决Windows SSH冲突的问题，比如Git for Windows中的SSH和WSL中的SSH，留待日后讨论。</p>
<hr>
<p>2020年3月27日更新：</p>
<p>原因找到了，当我们使用JetBrains提供的CLion的WSL配置脚本后，它安装了一个SSH Server，并在WSL的~/.ssh/known_hosts末尾空一行添加了一行不同于普通ssh-rsa的代码，经过未知的操作，这段代码也在C:\Users&lt;username&gt;.ssh\known_hosts中出现。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>github</tag>
        <tag>ssh</tag>
      </tags>
  </entry>
  <entry>
    <title>关于安装Adobe CC系列Photoshop等软件时报错无法写入注册表值错误代码160问题的解决方法</title>
    <url>/posts/9336.html</url>
    <content><![CDATA[<p>几个月前在研究音频处理时试图更新Audition出错，今天更新PS和AI再度出错，于是在C:\Program Files (x86)\Common Files\Adobe\Installers下找到install.log或在C:\ProgramData\Adobe\Installer下找到Summary.htm如下（以Photoshop为例，对Adobe各软件均有效）：</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">Exit Code: 160</span><br><span class="line"><span class="comment">-------------------------------------- Summary --------------------------------------</span></span><br><span class="line"> - 2 fatal error(s), 0 error(s), 3 warnings(s) </span><br><span class="line"></span><br><span class="line">FATAL: Error (Code = 160) executing in command 'SetRegistryValueCommand' for package: 'AdobePhotoshop20-Core_x64', version:20.0.6.80</span><br><span class="line">FATAL: Error occurred in <span class="keyword">install</span> <span class="keyword">of</span> <span class="keyword">package</span> (<span class="keyword">Name</span>: AdobePhotoshop20-Core_x64 <span class="keyword">Version</span>: <span class="number">20.0</span><span class="number">.6</span><span class="number">.80</span>). <span class="keyword">Error</span> code: <span class="string">'160'</span></span><br><span class="line">WARN: Asset(versioned) <span class="keyword">File</span> <span class="keyword">in</span> target location <span class="string">'C:\Program Files (x86)\Common Files\Adobe\Color\Profiles\Recommended\JapanColor2001Coated.icc'</span> <span class="keyword">is</span> <span class="keyword">locked</span> <span class="keyword">by</span> another application. Skipping replacement</span><br><span class="line">WARN: Asset(versioned) <span class="keyword">File</span> <span class="keyword">in</span> target location <span class="string">'C:\Program Files (x86)\Common Files\Adobe\Color\Profiles\Recommended\USWebCoatedSWOP.icc'</span> <span class="keyword">is</span> <span class="keyword">locked</span> <span class="keyword">by</span> another application. Skipping replacement</span><br><span class="line">WARN: <span class="keyword">Error</span> Setting Registry - <span class="keyword">Start</span> <span class="number">64</span>-<span class="built_in">bit</span>:<span class="number">1</span> root:<span class="number">0</span> <span class="keyword">key</span>:.cin <span class="keyword">name</span>:<span class="keyword">Default</span> <span class="keyword">type</span>:REG_SZ <span class="keyword">data</span>:Photoshop.CINFile<span class="number">.130</span>. <span class="keyword">Check</span> <span class="keyword">for</span> Registry permissions. (<span class="keyword">Error</span>: <span class="keyword">Error</span> <span class="number">5</span> 鎷掔粷璁块棶銆�)</span><br><span class="line"><span class="comment">-------------------------------------------------------------------------------------</span></span><br></pre></td></tr></tbody></table></figure>

<p>其中第1、2条warning是由于文件被其他Adobe程序（如Acrobat）占用所致问题不大，看到第3条warning找到注册表值Photoshop.CINFile.130.在regedit或其他注册表管理器中找到该值发现位于HKEY_LOCAL_MACHINE\SOFTWARE\Classes下，将该项下所有关于Photoshop的注册表全部删掉（注意避开其他Adobe软件和Solidworks等软件相关联的注册表），并将Classes的Administrators的权限改为完全控制，并将所有者也改为Administrators，使用可从此对象继承的权限项目替换所有子对象的权限项目，替换子容器和对象的所有者。权限更改后Adobe CC系列各软件的此类问题全部解决，但是可能导致开始菜单桌面应用图标无法显示的问题。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>Adobe</tag>
        <tag>Adobe安装错误</tag>
      </tags>
  </entry>
  <entry>
    <title>LaTeX中align和alignat之间的区别</title>
    <url>/posts/57768.html</url>
    <content><![CDATA[<p>第一个区别是使用align不需要额外的参数：</p>
<figure class="highlight latex"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">{align}</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>而alignat需要：</p>
<figure class="highlight latex"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">{alignat}</span><span class="string">{&lt;number&gt;}</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>两种环境都创建基于rl对的列对齐，align会根据你写的内容创建足够多的列，而alignat需要你提前指定想要多少列。</p>
<p>然而，这两种环境还有更多不同。align环境会在列与列之间添加水平空格</p>
<figure class="highlight apache"><table><tbody><tr><td class="code"><pre><span class="line"><span class="section">&lt;r col&gt;</span><span class="section">&lt;l col&gt;</span> <span class="section">&lt;space&gt;</span> <span class="section">&lt;r col&gt;</span><span class="section">&lt;l col&gt;</span> <span class="section">&lt;space&gt;</span> <span class="section">&lt;...&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>而alignat不会添加水平空格。例如见<a href="https://tex.stackexchange.com/questions/200502/align-environment-align-on-the-left-side">Align-environment: Align on the left side</a>中的一个对齐</p>
<figure class="highlight apache"><table><tbody><tr><td class="code"><pre><span class="line"><span class="section">&lt;l col&gt;</span><span class="section">&lt;l col&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>可以通过使用空的右对齐列：</p>
<figure class="highlight latex"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">{alignat}</span><span class="string">{2}</span></span></span><br><span class="line">&amp;ABC  &amp;&amp;= AB</span><br><span class="line">&amp;ABCD &amp;&amp;= ABC - ABCDEFG</span><br><span class="line"><span class="tag">\<span class="name">end</span><span class="string">{alignat}</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>两种环境在cell的开始处的左对齐列都有一个隐式的{}来使得起始于关系符或运算符的cell能够有合适的间距。</p>
<p>alignat的其他用法包括当我们想要更好地控制列与列之间的水平间距时。这样的间距应当被显式地指定如下：</p>
<figure class="highlight latex"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">{alignat*}</span><span class="string">{3}</span></span></span><br><span class="line">&amp; m   <span class="tag">\<span class="name">quad</span></span> &amp;&amp; <span class="tag">\<span class="name">text</span><span class="string">{módulo}</span></span>            <span class="tag">\<span class="name">quad</span></span> &amp;&amp; m&gt;0<span class="tag">\<span class="name">\</span></span></span><br><span class="line">&amp; a   <span class="tag">\<span class="name">quad</span></span> &amp;&amp; <span class="tag">\<span class="name">text</span><span class="string">{multiplicador}</span></span>     <span class="tag">\<span class="name">quad</span></span> &amp;&amp; 0&lt;a&lt;m<span class="tag">\<span class="name">\</span></span></span><br><span class="line">&amp; c   <span class="tag">\<span class="name">quad</span></span> &amp;&amp; <span class="tag">\<span class="name">text</span><span class="string">{constante aditiva}</span></span> <span class="tag">\<span class="name">quad</span></span> &amp;&amp; 0<span class="tag">\<span class="name">leq</span></span> c&lt;m<span class="tag">\<span class="name">\</span></span></span><br><span class="line">&amp; x_0 <span class="tag">\<span class="name">quad</span></span> &amp;&amp; <span class="tag">\<span class="name">text</span><span class="string">{valor inicial}</span></span>     <span class="tag">\<span class="name">quad</span></span> &amp;&amp; 0<span class="tag">\<span class="name">leq</span></span> x_0 &lt;m</span><br><span class="line"><span class="tag">\<span class="name">end</span><span class="string">{alignat*}</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>(见<a href="https://tex.stackexchange.com/questions/49014/aligning-equations-with-text-with-alignat">Aligning equations with text with alignat</a>)这样的控制是不可能通过align完成的，因为它总是在列与列之间添加相同长度的水平间距。</p>
<p>两种环境都有*的形式并对于任意行都接受\tag或\notag。</p>
<p>此外还有“内部”版本的aligned和alignedat，在行内公式、显示公式和数学对齐等内部数学模式中它们遵循相同的规则。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>latex</tag>
      </tags>
  </entry>
  <entry>
    <title>LaTeX公式等号左边内容放在第一行的等号对齐方式的书写方法</title>
    <url>/posts/40396.html</url>
    <content><![CDATA[<p>有时在写LaTeX公式时过长就需要把它们用对齐方式书写，而有时公式的第一个等号左边的量也太长了，对齐方式书写不美观，于是就要把它放在第一行然后第二行另起等号对齐书写。这时我们可以采用array环境书写，如</p>
<figure class="highlight latex"><table><tbody><tr><td class="code"><pre><span class="line"><span class="formula">$$<span class="tag">\<span class="name">begin</span><span class="string">{array}</span><span class="string">{ll}</span></span></span></span><br><span class="line"><span class="formula">    &amp;XXX<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">    &amp;=XXX</span></span><br><span class="line"><span class="formula"><span class="tag">\<span class="name">end</span><span class="string">{array}</span></span>$$</span></span><br></pre></td></tr></tbody></table></figure>

<p>然而这种方式书写出来的等号之间的间距不是过宽就是过窄，于是我们需要在公式开始前加入关键一条语句：</p>
<figure class="highlight latex"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">\<span class="name">setlength</span><span class="string">{\arraycolsep}</span><span class="string">{1.4pt}</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>其中，1.4pt正是LaTeX数学公式中等号的默认间距。效果如下：</p>
<p><img src="/posts/40396/Documents\Programming\HexoBlog\source\_posts\CSDN补档-21\20200322154126169.png" alt="img"></p>
<p>对比LaTeX数学公式中默认的等号：</p>
<p><img src="/posts/40396/Documents\Programming\HexoBlog\source\_posts\CSDN补档-21\20200322154229445.png" alt="img"></p>
<p>可以看出完美一致。</p>
<p>如果还想调节行间距使其与align环境一致，则可以按如下方式书写：</p>
<figure class="highlight latex"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">\<span class="name">[</span></span><span class="tag">\<span class="name">arraycolsep</span>=<span class="number">1.4pt</span></span><span class="tag">\<span class="name">def</span></span><span class="tag">\<span class="name">arraystretch</span><span class="string">{1.2}</span></span></span><br><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">{array}</span><span class="string">{ll}</span></span></span><br><span class="line">    &amp;XXX<span class="tag">\<span class="name">\</span></span></span><br><span class="line">    =&amp;XXX</span><br><span class="line"><span class="tag">\<span class="name">end</span><span class="string">{array}</span></span></span><br><span class="line"><span class="tag">\<span class="name">]</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>其中</p>
<figure class="highlight latex"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">\<span class="name">[</span></span>...<span class="tag">\<span class="name">]</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>是LaTeX数学公式的另一种写法，但是比</p>
<figure class="highlight gams"><table><tbody><tr><td class="code"><pre><span class="line"><span class="symbol">$</span><span class="symbol">$</span>...<span class="symbol">$</span><span class="symbol">$</span></span><br></pre></td></tr></tbody></table></figure>

<p>更好；arraystretch表示的是行间距，单位是倍数。</p>
<p>这种写法有个好处就是我们只在这条公式中定义array的列间距和行间距而不会影响文档中其他array的列间距和行间距。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>latex</tag>
      </tags>
  </entry>
  <entry>
    <title>LaTeX书写嵌套大括号、嵌套cases、嵌套array的方法</title>
    <url>/posts/15146.html</url>
    <content><![CDATA[<p>LaTeX中书写嵌套大括号可以使用嵌套cases：</p>
<figure class="highlight latex"><table><tbody><tr><td class="code"><pre><span class="line"><span class="formula">$$<span class="tag">\<span class="name">begin</span><span class="string">{cases}</span></span></span></span><br><span class="line"><span class="formula">    A&amp;XXX<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">    B&amp;XXX<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">    C&amp;</span></span><br><span class="line"><span class="formula">    <span class="tag">\<span class="name">begin</span><span class="string">{cases}</span></span></span></span><br><span class="line"><span class="formula">        D&amp;XXX<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">        E&amp;XXX</span></span><br><span class="line"><span class="formula">    <span class="tag">\<span class="name">end</span><span class="string">{cases}</span></span><span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">    F&amp;XXX</span></span><br><span class="line"><span class="formula"><span class="tag">\<span class="name">end</span><span class="string">{cases}</span></span>$$</span></span><br></pre></td></tr></tbody></table></figure>

<p>效果：</p>
<p><img src="/posts/15146/Documents\Programming\HexoBlog\source\_posts\CSDN补档-22\20200323100925548.png" alt="img"></p>
<p>也可以使用嵌套array：</p>
<figure class="highlight latex"><table><tbody><tr><td class="code"><pre><span class="line"><span class="formula">$$<span class="tag">\<span class="name">left</span></span><span class="tag">\<span class="name">{</span></span><span class="tag">\<span class="name">begin</span><span class="string">{array}</span><span class="string">{ll}</span></span></span></span><br><span class="line"><span class="formula">    A&amp;XXX<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">    B&amp;XXX<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">    C&amp;<span class="tag">\<span class="name">left</span></span><span class="tag">\<span class="name">{</span></span></span></span><br><span class="line"><span class="formula">    <span class="tag">\<span class="name">begin</span><span class="string">{array}</span><span class="string">{ll}</span></span></span></span><br><span class="line"><span class="formula">        D&amp;XXX<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">        E&amp;XXX</span></span><br><span class="line"><span class="formula">	<span class="tag">\<span class="name">end</span><span class="string">{array}</span></span></span></span><br><span class="line"><span class="formula">	<span class="tag">\<span class="name">right</span></span>.<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">    F&amp;XXX</span></span><br><span class="line"><span class="formula"><span class="tag">\<span class="name">end</span><span class="string">{array}</span></span></span></span><br><span class="line"><span class="formula"><span class="tag">\<span class="name">right</span></span>.$$</span></span><br></pre></td></tr></tbody></table></figure>

<p><img src="/posts/15146/Documents\Programming\HexoBlog\source\_posts\CSDN补档-22\20200323101259762.png" alt="img"></p>
<p>也可以array嵌套cases（效果同cases嵌套cases）</p>
<figure class="highlight latex"><table><tbody><tr><td class="code"><pre><span class="line"><span class="formula">$$<span class="tag">\<span class="name">left</span></span><span class="tag">\<span class="name">{</span></span><span class="tag">\<span class="name">begin</span><span class="string">{array}</span><span class="string">{ll}</span></span></span></span><br><span class="line"><span class="formula">    A&amp;XXX<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">    B&amp;XXX<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">    C&amp;</span></span><br><span class="line"><span class="formula">    <span class="tag">\<span class="name">begin</span><span class="string">{cases}</span></span></span></span><br><span class="line"><span class="formula">        D&amp;XXX<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">        E&amp;XXX</span></span><br><span class="line"><span class="formula">	<span class="tag">\<span class="name">end</span><span class="string">{cases}</span></span><span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">    F&amp;XXX</span></span><br><span class="line"><span class="formula"><span class="tag">\<span class="name">end</span><span class="string">{array}</span></span></span></span><br><span class="line"><span class="formula"><span class="tag">\<span class="name">right</span></span>.$$</span></span><br></pre></td></tr></tbody></table></figure>

<p>cases嵌套array（效果同array嵌套array）</p>
<figure class="highlight latex"><table><tbody><tr><td class="code"><pre><span class="line"><span class="formula">$$<span class="tag">\<span class="name">begin</span><span class="string">{cases}</span></span></span></span><br><span class="line"><span class="formula">    A&amp;XXX<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">    B&amp;XXX<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">    C&amp;<span class="tag">\<span class="name">left</span></span><span class="tag">\<span class="name">{</span></span></span></span><br><span class="line"><span class="formula">    <span class="tag">\<span class="name">begin</span><span class="string">{array}</span><span class="string">{ll}</span></span></span></span><br><span class="line"><span class="formula">        D&amp;XXX<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">        E&amp;XXX</span></span><br><span class="line"><span class="formula">	<span class="tag">\<span class="name">end</span><span class="string">{array}</span></span></span></span><br><span class="line"><span class="formula">	<span class="tag">\<span class="name">right</span></span>.<span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">    F&amp;XXX</span></span><br><span class="line"><span class="formula"><span class="tag">\<span class="name">end</span><span class="string">{cases}</span></span>$$</span></span><br></pre></td></tr></tbody></table></figure>

<p>如果想对每条cases标号只需将cases环境换成numcases即可。如果只想在内层嵌套使用大括号而外层不使用，只需要将外层确定为array并去掉</p>
<figure class="highlight latex"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">\<span class="name">left</span></span><span class="tag">\<span class="name">{</span></span>...<span class="tag">\<span class="name">right</span></span>.</span><br></pre></td></tr></tbody></table></figure>

<p>即可，这种方法在等号对齐中有重要的应用。不过在array嵌套array中有一个问题，如果我们想用</p>
<figure class="highlight latex"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">\<span class="name">arraycolsep</span>=<span class="number">1.4pt</span></span><span class="tag">\<span class="name">def</span></span><span class="tag">\<span class="name">arraystretch</span><span class="string">{1.2}</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>或</p>
<figure class="highlight latex"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">\<span class="name">setlength</span><span class="string">{\arraycolsep}</span><span class="string">{1.4pt}</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>调整行间距和列间距时，<strong>该命令只能在一条数学公式内生效一次</strong>，如果想在嵌套的array中使用与外层array不同的行间距和列间距是无解的。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>latex</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows Terminal更改主题为iTerm2-Color-Schemes</title>
    <url>/posts/43478.html</url>
    <content><![CDATA[<p>在美化Windows Terminal的过程中，由于Windows Terminal处于preview阶段更新变化极大，导致走了一些弯路，现以0.10.781.0版本为例（到目前为止最新发布）。</p>
<p>注意：<a href="https://andrewpla.dev/Adding-New-Color-Schemes-To-Windows-Terminal/">Adding New Color Schemes to Windows Terminal</a>中的脚本<a href="https://gist.github.com/AndrewPla/5c302e91af5448c89a65bfab364249d8#file-add-windowsterminalschemes-ps1">Add-WindowsTerminalSchemes.ps1</a>经检验无法被Windows Terminal成功加载，该文章下的评论也显示了种种问题。一种可能的原因是其在profiles.json中错误地在最外层加入了一对方括号。如果已经执行了该脚本而不想重置，删除这些额外添加的方括号、“null”等并恢复原状。</p>
<p>从<a href="https://github.com/mbadolato/iTerm2-Color-Schemes">iTerm2-Color-Schemes</a> clone或下载到本地，进入windowsterminal目录下找到你喜欢的主题的json文件打开，然后将其全选（包括最外层大括号）粘贴到profiles.json里的”schemes”中，然后在”profiles”里的”lists”里的你想应用于的块中添加行”colorScheme”: “<schemename>“，<schemename>为你在scheme中粘贴的主题的名字，如果想对每个shell都应用这个主题只需要在”profiles”下的”defaults”中添加这行即可。你也可以在”schemes”中粘贴多个主题。</schemename></schemename></p>
<p>可参考我的profiles.json：<a href="https://gist.github.com/yihuajack/eebf809607e6fdb79e035c4184173de8">https://gist.github.com/yihuajack/eebf809607e6fdb79e035c4184173de8</a></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
  </entry>
  <entry>
    <title>WSL Ubuntu使用Cargo安装Starship</title>
    <url>/posts/55520.html</url>
    <content><![CDATA[<p>对于WSL，Starship官网推荐的安装方法是执行</p>
<figure class="highlight awk"><table><tbody><tr><td class="code"><pre><span class="line">curl -fsSL https:<span class="regexp">//</span>starship.rs/install.sh | bash</span><br></pre></td></tr></tbody></table></figure>

<p>然而总是没反应，显示：</p>
<figure class="highlight livecodeserver"><table><tbody><tr><td class="code"><pre><span class="line">  Configuration</span><br><span class="line">&gt; Bin <span class="built_in">directory</span>: /usr/<span class="built_in">local</span>/bin</span><br><span class="line">&gt; Platform:      unknown-linux-gnu</span><br><span class="line">&gt; Arch:          x86_64</span><br><span class="line"> </span><br><span class="line">&gt; Tarball <span class="built_in">URL</span>: <span class="keyword">https</span>://github.com/starship/starship/releases/latest/download/starship-x86_64-unknown-linux-gnu.tar.gz</span><br><span class="line">? Install Starship latest <span class="built_in">to</span> /usr/<span class="built_in">local</span>/bin? [y/N] y</span><br><span class="line">! Escalated permission are required <span class="built_in">to</span> install <span class="built_in">to</span> /usr/<span class="built_in">local</span>/bin</span><br><span class="line">&gt; Installing Starship <span class="keyword">as</span> root, please <span class="built_in">wait</span>…</span><br></pre></td></tr></tbody></table></figure>

<p>然后我试图执行</p>
<figure class="highlight awk"><table><tbody><tr><td class="code"><pre><span class="line">wget https:<span class="regexp">//</span>starship.rs/install.sh | bash</span><br></pre></td></tr></tbody></table></figure>

<p>显示</p>
<figure class="highlight angelscript"><table><tbody><tr><td class="code"><pre><span class="line">Will <span class="keyword">not</span> apply HSTS. The HSTS database must be a regular <span class="keyword">and</span> non-world-writable file.</span><br><span class="line">ERROR: could <span class="keyword">not</span> open HSTS store at <span class="string">'/home/ayka_tsuzuki/.wget-hsts'</span>. HSTS will be disabled.</span><br><span class="line">-<span class="number">-2020</span><span class="number">-03</span><span class="number">-27</span> <span class="number">13</span>:<span class="number">06</span>:<span class="number">48</span>--  https:<span class="comment">//starship.rs/install.sh</span></span><br><span class="line">Resolving starship.rs (starship.rs)... <span class="number">104.27</span><span class="number">.178</span><span class="number">.8</span>, <span class="number">104.27</span><span class="number">.179</span><span class="number">.8</span>, <span class="number">2606</span>:<span class="number">4700</span>:<span class="number">3033</span>::<span class="number">681</span>b:b208, ...</span><br><span class="line">Connecting to starship.rs (starship.rs)|<span class="number">104.27</span><span class="number">.178</span><span class="number">.8</span>|:<span class="number">443.</span>.. connected.</span><br><span class="line">HTTP request sent, awaiting response... <span class="number">200</span> OK</span><br><span class="line">Length: unspecified [application/x-shellscript]</span><br><span class="line">Saving to: ‘install.sh’</span><br><span class="line"> </span><br><span class="line">install.sh                        [ &lt;=&gt;                                              ]   <span class="number">6.78</span>K  --.-KB/s    <span class="keyword">in</span> <span class="number">0.001</span>s</span><br><span class="line"> </span><br><span class="line"><span class="number">2020</span><span class="number">-03</span><span class="number">-27</span> <span class="number">13</span>:<span class="number">06</span>:<span class="number">51</span> (<span class="number">12.5</span> MB/s) - ‘install.sh’ saved [<span class="number">6941</span>]</span><br></pre></td></tr></tbody></table></figure>

<p>但却并未执行该.sh脚本，于是使用</p>
<figure class="highlight cmake"><table><tbody><tr><td class="code"><pre><span class="line">bash <span class="keyword">install</span>.sh</span><br></pre></td></tr></tbody></table></figure>

<p>有可能成功，也有可能不成功（我第一次就是不成功），尽管显示信息未能保存下来，关键报错信息是在</p>
<figure class="highlight makefile"><table><tbody><tr><td class="code"><pre><span class="line">rc=<span class="variable">$?</span></span><br><span class="line">if [ rc -neq 0 ]</span><br></pre></td></tr></tbody></table></figure>

<p>后产生报错信息。我尝试了在PowerShell中使用scoop安装成功，说明是WSL的问题，一时未能解决，不过在Starshp官网上发现cargo可以安装Starship，于是执行</p>
<figure class="highlight vim"><table><tbody><tr><td class="code"><pre><span class="line">curl --proto <span class="string">'=https'</span> --tlsv1.<span class="number">2</span> -sSf http<span class="variable">s:</span>//<span class="keyword">sh</span>.rustup.rs | <span class="keyword">sh</span></span><br></pre></td></tr></tbody></table></figure>

<p>安装rustc，然后为cargo等components添加环境变量：</p>
<figure class="highlight awk"><table><tbody><tr><td class="code"><pre><span class="line">source <span class="variable">$HOME</span><span class="regexp">/.cargo/</span>env</span><br></pre></td></tr></tbody></table></figure>

<p>这时运行</p>
<figure class="highlight cmake"><table><tbody><tr><td class="code"><pre><span class="line">cargo <span class="keyword">install</span> starship</span><br></pre></td></tr></tbody></table></figure>

<p>却报错</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line">the SSL certificate is invalid; <span class="attribute">class</span>=Ssl (16); <span class="attribute">code</span>=Certificate (-17)</span><br></pre></td></tr></tbody></table></figure>

<p>运行</p>
<figure class="highlight dockerfile"><table><tbody><tr><td class="code"><pre><span class="line">ssh-<span class="keyword">add</span><span class="bash"> -L</span></span><br></pre></td></tr></tbody></table></figure>

<p>检验，发现没有启动ssh-agent，干脆在.zshrc或.bashrc中添加（确认你的ssh之前已经正确配置）：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line">ZSH_DISABLE_COMPFIX=<span class="string">"true"</span></span><br><span class="line"><span class="built_in">eval</span> $(ssh-agent -s)</span><br><span class="line">ssh-add ~<span class="regexp">/.ssh/i</span>d_rsa</span><br></pre></td></tr></tbody></table></figure>

<p>如果你没有添加export ZSH=”/home/yourname/.oh-my-zsh”还要再加上这一条。</p>
<p>然后重启WSL并重新配置git：</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line">git<span class="built_in"> config </span>--global user.name <span class="string">"yourname"</span></span><br><span class="line">git<span class="built_in"> config </span>--global user.email <span class="string">"youremail"</span></span><br></pre></td></tr></tbody></table></figure>

<p>再次运行cargo install starship，报错：</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line">failed <span class="keyword">to</span> connect <span class="keyword">to</span> github.com:<span class="built_in"> Resource </span>temporarily unavailable; <span class="attribute">class</span>=Os</span><br></pre></td></tr></tbody></table></figure>

<p>找到GitHub中rust-lang/cargo的<a href="https://github.com/rust-lang/cargo/issues/6513">#6513号issue</a>，你可以参考其他人的comment，也可以直接看我的comment：</p>
<p>I found that it was indeed a network problem and solved it. If you do not have alternative choice to fetch what you want, you can try using SS or SSR, just go Option Settings (选项设置)-&gt;Local Proxy (本地代理), tick “Allow connections from LAN” (允许来自局域网的连接) and set Local Port (本地端口) = 1080. Then append the following to your .zshrc or .bashrc file:</p>
<figure class="highlight monkey"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">alias</span> <span class="title">proxy</span>=<span class="string">"git config --global http.proxy http://127.0.0.1:1080"</span></span><br><span class="line"><span class="keyword">alias</span> <span class="title">unproxy</span>=<span class="string">"git config --global --unset http.proxy"</span></span><br></pre></td></tr></tbody></table></figure>

<p>Then cargo starts fetching successfully.</p>
<p>就是说在SS或SSR里选项设置-&gt;本地代理勾选允许来自局域网的链接，本地端口填写1080，然后在.zshrc或.bashrc加上这两行代码，当然速度会很慢，不料compile到一半又报错：</p>
<figure class="highlight properties"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">error</span>: <span class="string">failed to run custom build command for `openssl-sys v0.9.54`</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">Caused</span> <span class="string">by:</span></span><br><span class="line">  <span class="attr">process</span> <span class="string">didn't exit successfully: `/tmp/cargo-installi4HyMw/release/build/openssl-sys-2869942195258ab3/build-script-main` (exit code: 101)</span></span><br><span class="line"><span class="meta">---</span> <span class="string">stdout</span></span><br><span class="line"><span class="attr">cargo</span>:<span class="string">rustc-cfg=const_fn</span></span><br><span class="line"><span class="attr">cargo</span>:<span class="string">rerun-if-env-changed=X86_64_UNKNOWN_LINUX_GNU_OPENSSL_LIB_DIR</span></span><br><span class="line"><span class="attr">X86_64_UNKNOWN_LINUX_GNU_OPENSSL_LIB_DIR</span> <span class="string">unset</span></span><br><span class="line"><span class="attr">cargo</span>:<span class="string">rerun-if-env-changed=OPENSSL_LIB_DIR</span></span><br><span class="line"><span class="attr">OPENSSL_LIB_DIR</span> <span class="string">unset</span></span><br><span class="line"><span class="attr">cargo</span>:<span class="string">rerun-if-env-changed=X86_64_UNKNOWN_LINUX_GNU_OPENSSL_INCLUDE_DIR</span></span><br><span class="line"><span class="attr">X86_64_UNKNOWN_LINUX_GNU_OPENSSL_INCLUDE_DIR</span> <span class="string">unset</span></span><br><span class="line"><span class="attr">cargo</span>:<span class="string">rerun-if-env-changed=OPENSSL_INCLUDE_DIR</span></span><br><span class="line"><span class="attr">OPENSSL_INCLUDE_DIR</span> <span class="string">unset</span></span><br><span class="line"><span class="attr">cargo</span>:<span class="string">rerun-if-env-changed=X86_64_UNKNOWN_LINUX_GNU_OPENSSL_DIR</span></span><br><span class="line"><span class="attr">X86_64_UNKNOWN_LINUX_GNU_OPENSSL_DIR</span> <span class="string">unset</span></span><br><span class="line"><span class="attr">cargo</span>:<span class="string">rerun-if-env-changed=OPENSSL_DIR</span></span><br><span class="line"><span class="attr">OPENSSL_DIR</span> <span class="string">unset</span></span><br><span class="line"><span class="attr">run</span> <span class="string">pkg_config fail: "Failed to run `\"pkg-config\" \"--libs\" \"--cflags\" \"openssl\"`: Permission denied (os error 13)"</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">---</span> <span class="string">stderr</span></span><br><span class="line"><span class="attr">thread</span> <span class="string">'main' panicked at '</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">Could</span> <span class="string">not find directory of OpenSSL installation, and this `-sys` crate cannot</span></span><br><span class="line"><span class="attr">proceed</span> <span class="string">without this knowledge. If OpenSSL is installed and this crate had</span></span><br><span class="line"><span class="attr">trouble</span> <span class="string">finding it,  you can set the `OPENSSL_DIR` environment variable for the</span></span><br><span class="line"><span class="attr">compilation</span> <span class="string">process.</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">Make</span> <span class="string">sure you also have the development packages of openssl installed.</span></span><br><span class="line"><span class="attr">For</span> <span class="string">example, `libssl-dev` on Ubuntu or `openssl-devel` on Fedora.</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">If</span> <span class="string">you're in a situation where you think the directory *should* be found</span></span><br><span class="line"><span class="meta">automatically,</span> <span class="string">please open a bug at https://github.com/sfackler/rust-openssl</span></span><br><span class="line"><span class="attr">and</span> <span class="string">include information about your system as well as this message.</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">$HOST</span> = <span class="string">x86_64-unknown-linux-gnu</span></span><br><span class="line"><span class="meta">$TARGET</span> = <span class="string">x86_64-unknown-linux-gnu</span></span><br><span class="line"><span class="meta">openssl-sys</span> = <span class="string">0.9.54</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="attr">It</span> <span class="string">looks like you're compiling on Linux and also targeting Linux. Currently this</span></span><br><span class="line"><span class="attr">requires</span> <span class="string">the `pkg-config` utility to find OpenSSL but unfortunately `pkg-config`</span></span><br><span class="line"><span class="attr">could</span> <span class="string">not be found. If you have OpenSSL installed you can likely fix this by</span></span><br><span class="line"><span class="attr">installing</span> <span class="string">`pkg-config`.</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">',</span> <span class="string">/home/ayka_tsuzuki/.cargo/registry/src/github.com-1ecc6299db9ec823/openssl-sys-0.9.54/build/find_normal.rs:150:5</span></span><br><span class="line"><span class="attr">note</span>: <span class="string">run with `RUST_BACKTRACE=1` environment variable to display a backtrace</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">warning</span>: <span class="string">build failed, waiting for other jobs to finish...</span></span><br><span class="line"><span class="attr">error</span>: <span class="string">failed to compile `starship v0.38.1`, intermediate artifacts can be found at `/tmp/cargo-installi4HyMw`</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">Caused</span> <span class="string">by:</span></span><br><span class="line">  <span class="attr">build</span> <span class="string">failed</span></span><br></pre></td></tr></tbody></table></figure>

<p>openssl已经安装了，于是再安装上pkg-config和libssl-dev，最后终于成功安装：</p>
<figure class="highlight apache"><table><tbody><tr><td class="code"><pre><span class="line">  <span class="attribute">Updating</span> crates.io index</span><br><span class="line"><span class="attribute">Installing</span> starship v<span class="number">0</span>.<span class="number">38</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> libc v<span class="number">0</span>.<span class="number">2</span>.<span class="number">68</span></span><br><span class="line"> <span class="attribute">Compiling</span> autocfg v<span class="number">1</span>.<span class="number">0</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> cfg-if v<span class="number">0</span>.<span class="number">1</span>.<span class="number">9</span></span><br><span class="line"> <span class="attribute">Compiling</span> pkg-config v<span class="number">0</span>.<span class="number">3</span>.<span class="number">17</span></span><br><span class="line"> <span class="attribute">Compiling</span> lazy_static v<span class="number">1</span>.<span class="number">4</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> proc-macro<span class="number">2</span> v<span class="number">1</span>.<span class="number">0</span>.<span class="number">9</span></span><br><span class="line"> <span class="attribute">Compiling</span> unicode-xid v<span class="number">0</span>.<span class="number">2</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> syn v<span class="number">1</span>.<span class="number">0</span>.<span class="number">17</span></span><br><span class="line"> <span class="attribute">Compiling</span> bitflags v<span class="number">1</span>.<span class="number">2</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> log v<span class="number">0</span>.<span class="number">4</span>.<span class="number">8</span></span><br><span class="line"> <span class="attribute">Compiling</span> maybe-uninit v<span class="number">2</span>.<span class="number">0</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> serde v<span class="number">1</span>.<span class="number">0</span>.<span class="number">105</span></span><br><span class="line"> <span class="attribute">Compiling</span> memchr v<span class="number">2</span>.<span class="number">3</span>.<span class="number">3</span></span><br><span class="line"> <span class="attribute">Compiling</span> matches v<span class="number">0</span>.<span class="number">1</span>.<span class="number">8</span></span><br><span class="line"> <span class="attribute">Compiling</span> semver-parser v<span class="number">0</span>.<span class="number">7</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> smallvec v<span class="number">1</span>.<span class="number">2</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> scopeguard v<span class="number">1</span>.<span class="number">1</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> ryu v<span class="number">1</span>.<span class="number">0</span>.<span class="number">3</span></span><br><span class="line"> <span class="attribute">Compiling</span> arrayvec v<span class="number">0</span>.<span class="number">4</span>.<span class="number">12</span></span><br><span class="line"> <span class="attribute">Compiling</span> foreign-types-shared v<span class="number">0</span>.<span class="number">1</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> typenum v<span class="number">1</span>.<span class="number">11</span>.<span class="number">2</span></span><br><span class="line"> <span class="attribute">Compiling</span> rayon-core v<span class="number">1</span>.<span class="number">7</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> percent-encoding v<span class="number">2</span>.<span class="number">1</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> openssl v<span class="number">0</span>.<span class="number">10</span>.<span class="number">28</span></span><br><span class="line"> <span class="attribute">Compiling</span> itoa v<span class="number">0</span>.<span class="number">4</span>.<span class="number">5</span></span><br><span class="line"> <span class="attribute">Compiling</span> quick-error v<span class="number">1</span>.<span class="number">2</span>.<span class="number">3</span></span><br><span class="line"> <span class="attribute">Compiling</span> native-tls v<span class="number">0</span>.<span class="number">2</span>.<span class="number">4</span></span><br><span class="line"> <span class="attribute">Compiling</span> nodrop v<span class="number">0</span>.<span class="number">1</span>.<span class="number">14</span></span><br><span class="line"> <span class="attribute">Compiling</span> version_check v<span class="number">0</span>.<span class="number">9</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> regex-syntax v<span class="number">0</span>.<span class="number">6</span>.<span class="number">17</span></span><br><span class="line"> <span class="attribute">Compiling</span> doc-comment v<span class="number">0</span>.<span class="number">3</span>.<span class="number">3</span></span><br><span class="line"> <span class="attribute">Compiling</span> static_assertions v<span class="number">0</span>.<span class="number">3</span>.<span class="number">4</span></span><br><span class="line"> <span class="attribute">Compiling</span> fnv v<span class="number">1</span>.<span class="number">0</span>.<span class="number">6</span></span><br><span class="line"> <span class="attribute">Compiling</span> termcolor v<span class="number">1</span>.<span class="number">1</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> bytes v<span class="number">0</span>.<span class="number">5</span>.<span class="number">4</span></span><br><span class="line"> <span class="attribute">Compiling</span> battery v<span class="number">0</span>.<span class="number">7</span>.<span class="number">5</span></span><br><span class="line"> <span class="attribute">Compiling</span> unicode-width v<span class="number">0</span>.<span class="number">1</span>.<span class="number">7</span></span><br><span class="line"> <span class="attribute">Compiling</span> dtoa v<span class="number">0</span>.<span class="number">4</span>.<span class="number">5</span></span><br><span class="line"> <span class="attribute">Compiling</span> either v<span class="number">1</span>.<span class="number">5</span>.<span class="number">3</span></span><br><span class="line"> <span class="attribute">Compiling</span> openssl-probe v<span class="number">0</span>.<span class="number">1</span>.<span class="number">2</span></span><br><span class="line"> <span class="attribute">Compiling</span> sysinfo v<span class="number">0</span>.<span class="number">11</span>.<span class="number">7</span></span><br><span class="line"> <span class="attribute">Compiling</span> lazycell v<span class="number">1</span>.<span class="number">2</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> vec_map v<span class="number">0</span>.<span class="number">8</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> linked-hash-map v<span class="number">0</span>.<span class="number">5</span>.<span class="number">2</span></span><br><span class="line"> <span class="attribute">Compiling</span> strsim v<span class="number">0</span>.<span class="number">8</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> once_cell v<span class="number">1</span>.<span class="number">3</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> ansi_term v<span class="number">0</span>.<span class="number">11</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> open v<span class="number">1</span>.<span class="number">4</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> unicode-segmentation v<span class="number">1</span>.<span class="number">6</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> path-slash v<span class="number">0</span>.<span class="number">1</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> ansi_term v<span class="number">0</span>.<span class="number">12</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> urlencoding v<span class="number">1</span>.<span class="number">0</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> byte-unit v<span class="number">3</span>.<span class="number">0</span>.<span class="number">3</span></span><br><span class="line"> <span class="attribute">Compiling</span> thread_local v<span class="number">1</span>.<span class="number">0</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> unicode-bidi v<span class="number">0</span>.<span class="number">3</span>.<span class="number">4</span></span><br><span class="line"> <span class="attribute">Compiling</span> semver v<span class="number">0</span>.<span class="number">9</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> unicode-normalization v<span class="number">0</span>.<span class="number">1</span>.<span class="number">12</span></span><br><span class="line"> <span class="attribute">Compiling</span> foreign-types v<span class="number">0</span>.<span class="number">3</span>.<span class="number">2</span></span><br><span class="line"> <span class="attribute">Compiling</span> humantime v<span class="number">1</span>.<span class="number">3</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> crossbeam-utils v<span class="number">0</span>.<span class="number">7</span>.<span class="number">2</span></span><br><span class="line"> <span class="attribute">Compiling</span> memoffset v<span class="number">0</span>.<span class="number">5</span>.<span class="number">4</span></span><br><span class="line"> <span class="attribute">Compiling</span> crossbeam-epoch v<span class="number">0</span>.<span class="number">8</span>.<span class="number">2</span></span><br><span class="line"> <span class="attribute">Compiling</span> num-traits v<span class="number">0</span>.<span class="number">2</span>.<span class="number">11</span></span><br><span class="line"> <span class="attribute">Compiling</span> num-integer v<span class="number">0</span>.<span class="number">1</span>.<span class="number">42</span></span><br><span class="line"> <span class="attribute">Compiling</span> textwrap v<span class="number">0</span>.<span class="number">11</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> http v<span class="number">0</span>.<span class="number">2</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> yaml-rust v<span class="number">0</span>.<span class="number">4</span>.<span class="number">3</span></span><br><span class="line"> <span class="attribute">Compiling</span> nom v<span class="number">5</span>.<span class="number">1</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> rustc_version v<span class="number">0</span>.<span class="number">2</span>.<span class="number">3</span></span><br><span class="line"> <span class="attribute">Compiling</span> idna v<span class="number">0</span>.<span class="number">2</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> aho-corasick v<span class="number">0</span>.<span class="number">7</span>.<span class="number">10</span></span><br><span class="line"> <span class="attribute">Compiling</span> quote v<span class="number">1</span>.<span class="number">0</span>.<span class="number">3</span></span><br><span class="line"> <span class="attribute">Compiling</span> lexical-core v<span class="number">0</span>.<span class="number">6</span>.<span class="number">7</span></span><br><span class="line"> <span class="attribute">Compiling</span> url v<span class="number">2</span>.<span class="number">1</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> crossbeam-queue v<span class="number">0</span>.<span class="number">2</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> regex v<span class="number">1</span>.<span class="number">3</span>.<span class="number">6</span></span><br><span class="line"> <span class="attribute">Compiling</span> jobserver v<span class="number">0</span>.<span class="number">1</span>.<span class="number">21</span></span><br><span class="line"> <span class="attribute">Compiling</span> num_cpus v<span class="number">1</span>.<span class="number">12</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> atty v<span class="number">0</span>.<span class="number">2</span>.<span class="number">14</span></span><br><span class="line"> <span class="attribute">Compiling</span> time v<span class="number">0</span>.<span class="number">1</span>.<span class="number">42</span></span><br><span class="line"> <span class="attribute">Compiling</span> dirs-sys v<span class="number">0</span>.<span class="number">3</span>.<span class="number">4</span></span><br><span class="line"> <span class="attribute">Compiling</span> gethostname v<span class="number">0</span>.<span class="number">2</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> term_size v<span class="number">0</span>.<span class="number">3</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> uom v<span class="number">0</span>.<span class="number">26</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> crossbeam-deque v<span class="number">0</span>.<span class="number">7</span>.<span class="number">3</span></span><br><span class="line"> <span class="attribute">Compiling</span> cc v<span class="number">1</span>.<span class="number">0</span>.<span class="number">50</span></span><br><span class="line"> <span class="attribute">Compiling</span> clap v<span class="number">2</span>.<span class="number">33</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> dirs v<span class="number">2</span>.<span class="number">0</span>.<span class="number">2</span></span><br><span class="line"> <span class="attribute">Compiling</span> env_logger v<span class="number">0</span>.<span class="number">7</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> chrono v<span class="number">0</span>.<span class="number">4</span>.<span class="number">11</span></span><br><span class="line"> <span class="attribute">Compiling</span> pretty_env_logger v<span class="number">0</span>.<span class="number">4</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> rayon v<span class="number">1</span>.<span class="number">3</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> openssl-sys v<span class="number">0</span>.<span class="number">9</span>.<span class="number">54</span></span><br><span class="line"> <span class="attribute">Compiling</span> libz-sys v<span class="number">1</span>.<span class="number">0</span>.<span class="number">25</span></span><br><span class="line"> <span class="attribute">Compiling</span> libgit<span class="number">2</span>-sys v<span class="number">0</span>.<span class="number">12</span>.<span class="number">0</span>+<span class="number">0</span>.<span class="number">99</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> serde_derive v<span class="number">1</span>.<span class="number">0</span>.<span class="number">105</span></span><br><span class="line"> <span class="attribute">Compiling</span> starship_module_config_derive v<span class="number">0</span>.<span class="number">1</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> git<span class="number">2</span> v<span class="number">0</span>.<span class="number">13</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> serde_urlencoded v<span class="number">0</span>.<span class="number">6</span>.<span class="number">1</span></span><br><span class="line"> <span class="attribute">Compiling</span> serde_json v<span class="number">1</span>.<span class="number">0</span>.<span class="number">48</span></span><br><span class="line"> <span class="attribute">Compiling</span> os_info v<span class="number">2</span>.<span class="number">0</span>.<span class="number">2</span></span><br><span class="line"> <span class="attribute">Compiling</span> toml v<span class="number">0</span>.<span class="number">5</span>.<span class="number">6</span></span><br><span class="line"> <span class="attribute">Compiling</span> attohttpc v<span class="number">0</span>.<span class="number">12</span>.<span class="number">0</span></span><br><span class="line"> <span class="attribute">Compiling</span> starship v<span class="number">0</span>.<span class="number">38</span>.<span class="number">1</span></span><br><span class="line">  <span class="attribute">Finished</span> release<span class="meta"> [optimized] target(s) in 2m 24s</span></span><br><span class="line"><span class="meta">Installing /home/yourname/.cargo/bin/starship</span></span><br><span class="line"><span class="meta"> Installed package `starship v0.38.1` (executable `starship`)</span></span><br></pre></td></tr></tbody></table></figure>

<p>最后别忘了这条指示（使用sh脚本安装会有，但是cargo安装没有）：</p>
<figure class="highlight reasonml"><table><tbody><tr><td class="code"><pre><span class="line">&gt; Please follow the steps <span class="keyword">for</span> your shell <span class="keyword">to</span> complete the installation:</span><br><span class="line"> </span><br><span class="line">  Bash</span><br><span class="line">  Add the following <span class="keyword">to</span> the <span class="keyword">end</span> <span class="keyword">of</span> ~/.bashrc:</span><br><span class="line"> </span><br><span class="line">      eval <span class="string">"$(starship init bash)"</span></span><br><span class="line"> </span><br><span class="line">  Fish</span><br><span class="line">  Add the following <span class="keyword">to</span> the <span class="keyword">end</span> <span class="keyword">of</span> ~/.config/fish/config.fish:</span><br><span class="line"> </span><br><span class="line">      starship init fish <span class="pattern-match">| source</span></span><br><span class="line"><span class="pattern-match"> </span></span><br><span class="line"><span class="pattern-match">  <span class="constructor">Zsh</span></span></span><br><span class="line"><span class="pattern-match">  <span class="constructor">Add</span> the following <span class="keyword">to</span> the <span class="keyword">end</span> <span class="keyword">of</span> ~<span class="operator">/</span>.zshrc:</span></span><br><span class="line"><span class="pattern-match"> </span></span><br><span class="line"><span class="pattern-match">      eval "<span class="constructor">$(<span class="params">starship</span> <span class="params">init</span> <span class="params">zsh</span>)</span>"</span></span><br><span class="line"><span class="pattern-match"> </span></span><br><span class="line"><span class="pattern-match">  <span class="constructor">Ion</span></span></span><br><span class="line"><span class="pattern-match">  <span class="constructor">Add</span> the following <span class="keyword">to</span> the <span class="keyword">end</span> <span class="keyword">of</span> ~<span class="operator">/</span>.config<span class="operator">/</span>ion<span class="operator">/</span>initrc:</span></span><br><span class="line"><span class="pattern-match"> </span></span><br><span class="line"><span class="pattern-match">      eval eval <span class="constructor">$(<span class="operator">/</span><span class="params">home</span><span class="operator">/</span><span class="params">ayka_tsuzuki</span><span class="operator">/</span>.<span class="params">cargo</span><span class="operator">/</span><span class="params">bin</span><span class="operator">/</span><span class="params">starship</span> <span class="params">init</span> <span class="params">ion</span> --<span class="params">print</span>-<span class="params">full</span>-<span class="params">init</span>)</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>例如对于zsh，在.zshrc中添加eval “$(starship init zsh)”。效果图：</p>
<p><img src="/posts/55520/Documents\Programming\HexoBlog\source\_posts\CSDN补档-24\20200327135355358.png" alt="img"></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>bash</tag>
        <tag>ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title>VMware 15.5安装Ubuntu 19.10挂起不动报错squashfs和blk_update_request的解决方法</title>
    <url>/posts/23835.html</url>
    <content><![CDATA[<p>用VMware Workstation 15 Pro 15.5.1安装Ubuntu 19.10接近完成时显示Ubuntu的启动界面，即五个点一直闪烁的界面却一直不动：</p>
<p><img src="/posts/23835/Documents\Programming\HexoBlog\source\_posts\CSDN补档-25\20200329123741712.png" alt="img"></p>
<p>检查VMware Workstation VMX进程发现其CPU使用率一直维持在1%左右的低位，而GPU使用率却一直在10%左右（使用GPU 0 - 3D），更改虚拟机设置为2个处理器后仍然没有解决，最后发现虚拟机-&gt;可移动设备-&gt;CD/DVD 2 (SATA)和CD/DVD (SATA)均未被连接，因为我是通过移动硬盘中的镜像安装Ubuntu的，所以尝试点击CD/DVD 2 (SATA)-&gt;连接后系统进入命令行界面执行一段时间，显示正在安装open-vm-tools，然后顺利启动Ubuntu，尽管发现此时CD/DVD 2 (SATA)还是处于未连接的状态。</p>
<p>还有一个问题，这样解决既然不是正常安装，那么VMware Tools就会出现问题，比如不能使用剪贴板，打开菜单栏虚拟机选项卡发现安装VMware Tools是灰色的，可尝试将虚拟机-&gt;CD/DVD (SATA)连接设置使用ISO映像文件的autoinst.iso改成vmware安装目录下的linux.exe。</p>
<p>之所以安装新版本的Ubuntu 19.10一方面是想要更新系统，另一方面是原来的Ubuntu 19.04突然出现了网络连接问题（NAT模式），有线网络和无线网络都不可用，索性直接重装，不过吸取了上次的教训，即在创建新的虚拟机的设置过程中选择将虚拟磁盘存储为单个文件。不过后来才想起来，网络适配器-&gt;网络连接一定要选桥接模式（不用选复制物理网络连接状态）即可正常使用。</p>
<p>另外，因为Ubuntu 14.04以后版本安装需要Internet连接，而一开始网络连接错误设置成了NAT模式而非桥接模式导致安装程序不能成功进行Retrieve files、Download language packs等操作及其后续Unpack等操作，导致不完全安装，即使安装成功也是英文版本，所以遇到这种情况还是<strong>重装</strong>为好，记得创建新的虚拟机时网络设置设置为<strong>桥接模式</strong>或者你能用的模式。另外推荐给虚拟机分配1/3的处理器和内核（比如6核12线程分配处理器数量为2、每个处理器的核心数量为2），这样安装会快不少。</p>
<p>使用新设置重装后却发现仍然同样的结果，于是用Ctrl+Alt+F1或Ctrl+Alt+F2调出终端：</p>
<p><img src="/posts/23835/Documents\Programming\HexoBlog\source\_posts\CSDN补档-25\20200329170400721.png" alt="img"></p>
<p>这两条信息不停地循环显示。然而经Hard Disk Sentinel检测磁盘很健康，无坏道，（Windows下进入镜像目录）用</p>
<figure class="highlight apache"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">certutil</span> -hashfile ubuntu-<span class="number">19</span>.<span class="number">10</span>-desktop-amd<span class="number">64</span>.iso MD<span class="number">5</span></span><br></pre></td></tr></tbody></table></figure>

<p>MD5码校验正确，猜测可能是硬盘数据线老化的问题，仍然是执行连接CD/DVD 2 (SATA)后成功安装VMware Tools，这时打开菜单栏虚拟机选项卡：</p>
<p><img src="/posts/23835/Documents\Programming\HexoBlog\source\_posts\CSDN补档-25\20200329171032277.png" alt="img"></p>
<p>显示重新安装VMware Tools为灰色，剪贴板等VMware Tools功能正常，虚拟机正常运行。发现文件选项卡中找不到共享文件夹，可执行：</p>
<figure class="highlight awk"><table><tbody><tr><td class="code"><pre><span class="line">vmhgfs-fuse .host:<span class="regexp">/  /m</span>nt<span class="regexp">/hgfs/</span></span><br></pre></td></tr></tbody></table></figure>

<p>还可以给共享文件夹创建到HOME目录的软链接（share为共享文件夹名称）：</p>
<figure class="highlight awk"><table><tbody><tr><td class="code"><pre><span class="line">cd <span class="regexp">/mnt/</span>hgfs</span><br><span class="line">ln -s <span class="regexp">/mnt/</span>hgfs<span class="regexp">/share/</span> ~/share</span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
        <tag>vmware</tag>
      </tags>
  </entry>
  <entry>
    <title>WSL(Ubuntu)pip安装genpac后找不到命令的解决方法</title>
    <url>/posts/60680.html</url>
    <content><![CDATA[<p>在WSL Ubuntu使用pip成功安装genpac后运行genpac –version却显示</p>
<figure class="highlight groovy"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">zsh:</span> command not <span class="attr">found:</span> genpac</span><br></pre></td></tr></tbody></table></figure>

<p>输入</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">pip list</span><br></pre></td></tr></tbody></table></figure>

<p>后发现genpac已经在列表中。解决方法是在.zshrc（如果不用ZSH则是.bashrc）文件中添加：</p>
<figure class="highlight awk"><table><tbody><tr><td class="code"><pre><span class="line">export PATH=<span class="variable">$HOME</span><span class="regexp">/bin:/u</span>sr<span class="regexp">/local/</span>bin:<span class="variable">$PATH</span></span><br><span class="line">export PATH=<span class="variable">$HOME</span><span class="regexp">/.local/</span>bin:<span class="regexp">/usr/</span>local/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></tbody></table></figure>

<p>后genpac可以成功运行。执行ls ~/.local/bin得到：</p>
<figure class="highlight apache"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">genpac</span>  pip  pip<span class="number">2</span>  pip<span class="number">2</span>.<span class="number">7</span></span><br></pre></td></tr></tbody></table></figure>

<p>这个目录是pip的安装目录，对于pip安装的其他包也同样适用。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>pip</tag>
        <tag>ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title>Cygwin如何更改HOME目录（MSYS2和Cygwin ZSH冲突）</title>
    <url>/posts/53160.html</url>
    <content><![CDATA[<p>由于用户变量中的HOME由于需要使用Cadence的原因被迫改到E:\Cadence\SPB_Data下，MSYS2使用的ZSH的配置文件都自动放在这一目录下，然而想为Cygwin也配置ZSH发现产生乱码，这并不是由于字体或者编码问题导致的，其原因是MSYS2和Cygwin共用HOME目录下的.zshrc文件，而.zshrc文件中两个系统使用的路径表示不一样，Cygwin需要在盘符前面加”/cygdrive”，如在MSYS2使用的.zshrc中，ZSH的PATH配置语句为：</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">ZSH</span>=<span class="string">"/e/Cadence/SPB_Data/.oh-my-zsh"</span></span><br></pre></td></tr></tbody></table></figure>

<p>而Cygwin中则应为：</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">ZSH</span>=<span class="string">"/cygdrive/c/Users/&lt;userename&gt;/.oh-my-zsh"</span></span><br></pre></td></tr></tbody></table></figure>

<p>解决这个问题只能通过更改Cygwin的HOME目录的方式来解决（而不只是启动目录设置）。</p>
<p>首先，Cygwin现在已有zsh包可通过setup程序安装，不要再使用apt-cyg，它已经过时，经测验安装zsh会报错。</p>
<p>经过测验，<a href="https://superuser.com/questions/585331/is-it-possible-to-have-cygwin-ignore-the-windows-home-environment-variable%E4%B8%8A%E6%8F%90%E5%87%BA%E7%9A%84%E5%9C%A8/etc/profile%E4%B8%AD%E6%B7%BB%E5%8A%A0">https://superuser.com/questions/585331/is-it-possible-to-have-cygwin-ignore-the-windows-home-environment-variable上提出的在/etc/profile中添加</a></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">HOME=$(<span class="built_in">eval</span> <span class="built_in">echo</span> <span class="string">"~<span class="variable">$USER</span>"</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>的方法并不可行。你可以更改Cygwin的快捷方式为Cygwin.bat启动，在Cygwin.bat中可以随意更改HOME等设置，但是这样启动使用的是Windows命令提示符的Shell，并非Cygwin自带的mintty shell，这样就会出现乱码。另外经检验，<a href="https://stackoverflow.com/questions/1494658/how-can-i-change-my-cygwin-home-folder-after-installation%E4%B8%AD%E6%8F%90%E5%87%BA%E7%9A%84%E5%9C%A8/etc/nsswitch.conf%E4%B8%AD%E5%B0%86db_home%E7%9A%84%E6%B3%A8%E9%87%8A%E5%8E%BB%E6%8E%89%E5%B9%B6%E6%94%B9%E4%B8%BA/%H%E3%80%81/%H/cygwin%E3%80%81windows%E3%80%81/home/%U%E7%AD%89%E7%AD%89%E7%BB%9F%E7%BB%9F%E6%B2%A1%E7%94%A8%EF%BC%8C%E8%80%8C%E4%B8%94%E8%AF%95%E5%9B%BE%E6%89%A7%E8%A1%8Cmkpasswd%E3%80%81mkgroup%E8%AF%AD%E5%8F%A5%E6%88%96https://superuser.com/questions/289444/how-do-i-change-my-home-folder-in-cygwin%E4%B8%AD%E6%8F%90%E5%87%BA%E7%9A%84%E6%9B%B4%E6%94%B9/etc/passwd%E6%96%87%E4%BB%B6%E7%AD%89%E6%96%B9%E6%B3%95%E5%85%A8%E9%83%A8%E6%97%A0%E6%95%88%EF%BC%8C%E8%80%8C%E7%BB%8Fhttp://mintty.github.io/mintty.1.html%E6%9F%A5mintty.exe%E7%9A%84%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E4%B9%9F%E6%97%A0%E8%AE%A1%E5%8F%AF%E6%96%BD%E3%80%82">https://stackoverflow.com/questions/1494658/how-can-i-change-my-cygwin-home-folder-after-installation中提出的在/etc/nsswitch.conf中将db_home的注释去掉并改为/%H、/%H/cygwin、windows、/home/%U等等统统没用，而且试图执行mkpasswd、mkgroup语句或https://superuser.com/questions/289444/how-do-i-change-my-home-folder-in-cygwin中提出的更改/etc/passwd文件等方法全部无效，而经http://mintty.github.io/mintty.1.html查mintty.exe的启动参数也无计可施。</a></p>
<p>正确方法是：</p>
<ol>
<li><p>在C:\Users&lt;username&gt;中另安装一个oh-my-zsh，可在该目录下执行命令（用Cygwin执行）：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sh -c <span class="string">"<span class="subst">$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>"</span></span><br></pre></td></tr></tbody></table></figure>

<p>或</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sh -c <span class="string">"<span class="subst">$(wget https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh -O -)</span>"</span></span><br></pre></td></tr></tbody></table></figure>

<p>等。</p>
</li>
<li><p>编辑.zshrc文件，确定语句：</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">ZSH</span>=<span class="string">"/cygdrive/c/Users/&lt;userename&gt;/.oh-my-zsh"</span></span><br></pre></td></tr></tbody></table></figure>

<p>并将ZSH_THEME更改为你喜欢的主题，我使用的是agnoster的变种</p>
<p>zys主题</p>
<p>。</p>
</li>
<li><p>在/etc/bash.bashrc中添加：</p>
<figure class="highlight abnf"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">HOME</span>=<span class="string">"C:\Users\&lt;username&gt;"</span></span><br><span class="line"><span class="attribute">PATH</span>=<span class="string">"/usr/local/bin:/usr/bin"</span></span><br><span class="line">exec zsh</span><br></pre></td></tr></tbody></table></figure>

<p>其中第一句是真正地设定了Cygwin的HOME目录，第二句是定义环境变量PATH，如没有这一句则很多命令无法执行，第三句是自动启动ZSH。</p>
</li>
<li><p>在/etc/profile中添加：</p>
<figure class="highlight ini"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">HOME</span>=<span class="string">"C:\Users\&lt;username&gt;"</span></span><br></pre></td></tr></tbody></table></figure>

<p>这一句是设定了启动目录为<del>，其中</del>为C:\Users&lt;username&gt;。</p>
</li>
<li><p>确认Cygwin快捷方式的目标为：</p>
<figure class="highlight latex"><table><tbody><tr><td class="code"><pre><span class="line">D:<span class="tag">\<span class="name">Program</span></span>_Files<span class="tag">\<span class="name">cygwin</span></span>64<span class="tag">\<span class="name">bin</span></span><span class="tag">\<span class="name">mintty</span></span>.exe -i /Cygwin-Terminal.ico -</span><br></pre></td></tr></tbody></table></figure>

<p>其中目录请按照自己的安装目录修改，最后的-也可改为-<del>，都保证启动目录为</del>，但是如果没有则启动目录变成快捷方式所在的目录。经验证，</p>
<p><a href="https://superuser.com/questions/940529/how-to-change-the-default-shell-in-cygwin/1134672#1134672">https://superuser.com/questions/940529/how-to-change-the-default-shell-in-cygwin/1134672#1134672</a></p>
<p>和</p>
<p><a href="https://medium.com/@alllexsm/how-to-install-z-shell-zsh-on-cygwin-dd9ee380d783">https://medium.com/@alllexsm/how-to-install-z-shell-zsh-on-cygwin-dd9ee380d783</a></p>
<p>中所提出的自动启动zsh的参数会导致闪退，原因不明。</p>
</li>
</ol>
<p>另外如果想为Windows Terminal配置Cygwin可在profiles.json的”profiles”里的”list”里添加：</p>
<figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">"guid"</span>: <span class="string">"{xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}"</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"Cygwin64"</span>,</span><br><span class="line">    <span class="attr">"commandline"</span>: <span class="string">"D:\\Program_Files\\cygwin64\\bin\\bash.exe"</span>,</span><br><span class="line">    <span class="attr">"icon"</span>: <span class="string">"D:\\Program_Files\\cygwin64\\Cygwin.ico"</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>其中GUID可使用PowerShell命令</p>
<figure class="highlight ada"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">New</span>-GUID</span><br></pre></td></tr></tbody></table></figure>

<p>生成一个，其他个性化设置在此就不提供了，发现Windows Terminal可以完美运行Cygwin（Windows Terminal有自己的默认启动目录）：</p>
<p><img src="/posts/53160/Documents\Programming\HexoBlog\source_posts\CSDN补档-27\20200401172503260.png" alt="img"></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>cygwin</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>MAMP出现HTTP 错误 404.0 - Not Found的解决方法</title>
    <url>/posts/15171.html</url>
    <content><![CDATA[<p>在Windows中使用MAMP新建E:\MAMP\htdocs\first文件夹和E:\MAMP\htdocs\first\index.php文件，使用Apache和Mysql服务器，然后打开<a href="http://localhost/first/index.php%E5%87%BA%E7%8E%B0%E4%BB%A5%E4%B8%8B%E9%94%99%E8%AF%AF%E9%A1%B5%E9%9D%A2![img](D:/Documents/Programming/HexoBlog/source/_posts/CSDN%E8%A1%A5%E6%A1%A3-28/20200402131311285.png)">http://localhost/first/index.php出现以下错误页面![img](D:\Documents\Programming\HexoBlog\source\_posts\CSDN补档-28\20200402131311285.png)</a></p>
<p>首先在MAMP中的Settings-&gt;Hosts-&gt;General确认Host name为localhost，尝试在open中用浏览器打开出现页面显示：</p>
<p>The virtual host was set up successfully.</p>
<p>If you can see this page, your new virtual host was set up successfully. Now, web content can be added and this placeholder page1 should be replaced or deleted.</p>
<p>Server name: localhost<br>Document root: E:/MAMP/htdocs </p>
<p>1 Files: index.php and MAMP-PRO-Logo.png</p>
<p>检查端口，由于80已经被系统占用，所以使用的是82，于是改为打开<a href="http://localhost:82/first/index.php%E6%88%90%E5%8A%9F%E3%80%82">http://localhost:82/first/index.php成功。</a></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>apache</tag>
        <tag>mysql</tag>
        <tag>http</tag>
      </tags>
  </entry>
  <entry>
    <title>如何安全更改Windows 10用户文件夹名称</title>
    <url>/posts/61472.html</url>
    <content><![CDATA[<p>经查网上一些教程，用户文件夹中并没有desktop.ini文件，只得修改注册表值。进入注册表项HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\ProfileList，在其中项名为S-1-5-21-xxx的两个项中找到ProfileImagePath值更改用户文件夹名称，然后重新启动会发现无法登录到原来的Microsoft账户，这时将环境变量中所有在用户文件夹中的系统变量和用户变量的用户文件夹名称全部更改，检查文件资源管理器中用户文件夹名称是否已更改，若没有也可以发现这个文件夹名称可以直接重命名更改，然后注销账户并重新登录，黑屏一段时间后（其实是任务栏设置被重置成非锁定状态，可调出开始菜单以调出任务栏进行设置）文件资源管理器和桌面启动，这时Windows 邮件、Microsoft Outlook、AutoCAD、COMSOL Multiphysics等应用会无法正常工作，OriginLab等应用可在启动后重新设置配置文件而正常工作，而SolidWorks、Autodesk Inventor、ArcGIS、Cadence OrCAD、Gaussian、Altium Designer、NI Multisim、Office其他软件、Adobe系列、MATLAB、Mathematica、IBM SPSS等均可正常工作。这时使用Registry Toolkit或Registry Workshop批量将”Users\原用户名”全部替换为”Users\现用户名”，中间会触发反病毒软件系统注册表项被修改的提醒略过即可，再重新搜索一遍，将遗漏的”Users\原用户名”替换掉，注意把软件注册信息等注册表留下。操作后只有少数用户配置会被重置回默认值。COMSOL如果还有无法创建目录的问题，将C:\Users\现用户名\AppData.comsol文件夹中的文件夹删掉重新启动COMSOL即可</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>用户文件夹</tag>
      </tags>
  </entry>
  <entry>
    <title>使用MAMP和Tsugi构建PY4E、XDebug调试PHP总结（以Windows环境为例）</title>
    <url>/posts/14203.html</url>
    <content><![CDATA[<ol>
<li><p>安装MAMP。</p>
</li>
<li><p>在E:\MAMP\htdocs下</p>
<figure class="highlight awk"><table><tbody><tr><td class="code"><pre><span class="line">git clone https:<span class="regexp">//gi</span>thub.com<span class="regexp">/csev/</span>py4e.git</span><br><span class="line">cd py4e</span><br><span class="line">git clone https:<span class="regexp">//gi</span>thub.com<span class="regexp">/csev/</span>tsugi.git</span><br></pre></td></tr></tbody></table></figure>

<p>项目很大，可以考虑导入到gitee再克隆。</p>
</li>
<li><p>打开MAMP Pro，Hosts-&gt;General-&gt;Port number改为8888，在Port-&gt;MySQL改为8889，启动Apache和MySQL服务器，点击Administer MySQL with: phpMyAdmin，如果没打开查看是不是端口错误，可直接在浏览器输入<a href="http://localhost:8888/phpMyAdmin%E6%89%93%E5%BC%80%E3%80%82">http://localhost:8888/phpMyAdmin打开。</a></p>
</li>
<li><p>确认phpMyAdmin顶部显示为Server: localhost:8889，然后点击选项卡SQL，粘贴下列内容：</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> tsugi <span class="keyword">DEFAULT</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">ON</span> tsugi.* <span class="keyword">TO</span> <span class="string">'ltiuser'</span>@<span class="string">'localhost'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'ltipassword'</span>;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">ON</span> tsugi.* <span class="keyword">TO</span> <span class="string">'ltiuser'</span>@<span class="string">'127.0.0.1'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'ltipassword'</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>并执行。</p>
</li>
<li><p>将E:\MAMP\htdocs\py4e\tsugi下的config-dist.php复制一份重命名为config.php，然后编辑config：</p>
<figure class="highlight php"><table><tbody><tr><td class="code"><pre><span class="line">$wwwroot = <span class="string">'http://localhost:8888/py4e/tsugi'</span>;   <span class="comment">// Embedded Tsugi localhost</span></span><br><span class="line"> </span><br><span class="line">...</span><br><span class="line"> </span><br><span class="line">$CFG-&gt;pdo = <span class="string">'mysql:host=127.0.0.1;port=8889;dbname=tsugi'</span>; <span class="comment">// MAMP</span></span><br><span class="line">$CFG-&gt;dbuser    = <span class="string">'ltiuser'</span>;</span><br><span class="line">$CFG-&gt;dbpass    = <span class="string">'ltipassword'</span>;</span><br><span class="line"> </span><br><span class="line">...</span><br><span class="line"> </span><br><span class="line">$CFG-&gt;adminpw = <span class="string">'short'</span>;</span><br><span class="line"> </span><br><span class="line">...</span><br><span class="line"> </span><br><span class="line">$CFG-&gt;apphome = <span class="string">'http://localhost:8888/py4e'</span>;</span><br><span class="line">$CFG-&gt;context_title = <span class="string">"Python for Everybody"</span>;</span><br><span class="line">$CFG-&gt;lessons = $CFG-&gt;dirroot.<span class="string">'/../lessons.json'</span>;</span><br><span class="line"> </span><br><span class="line">... </span><br><span class="line"> </span><br><span class="line">$CFG-&gt;tool_folders = <span class="keyword">array</span>(<span class="string">"admin"</span>, <span class="string">"../tools"</span>, <span class="string">"../mod"</span>);</span><br><span class="line">$CFG-&gt;install_folder = $CFG-&gt;dirroot.<span class="string">'./../mod'</span>; <span class="comment">// Tsugi as a store</span></span><br><span class="line"> </span><br><span class="line">...</span><br><span class="line"> </span><br><span class="line">$CFG-&gt;servicename = <span class="string">'PY4E'</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>其中$CFG-&gt;adminpw可自己设定。 </p>
</li>
<li><p>打开<a href="http://localhost:8888/py4e/tsugi/admin/%E7%9C%8B%E5%88%B0%E6%8F%90%E7%A4%BA%E9%9C%80%E8%A6%81Upgrade">http://localhost:8888/py4e/tsugi/admin/看到提示需要Upgrade</a> database，既可以直接点击Upgrade database，也可以在E:\MAMP\htdocs\py4e\tsugi\admin下执行php upgrade.php（但这种方法没成功），刷新后显示正常。</p>
</li>
<li><p>在phpMyAdmin左边栏展开tsugi-&gt;Tables点击lti_key，点击key_key为google.com的key的Edit，找到secret列确认其值不为空，否则应创建一个十六进制值。</p>
</li>
<li><p>点击<a href="http://localhost:8888/py4e/tsugi/admin/install">Manage Installed Modules</a>发现报错Fatal error: in E:\MAMP\htdocs\py4e\tsugi\vendor\tsugi\lib\src\Util\GitRepo.php on line 217，在MAMP -&gt;Languages-&gt;PHP-&gt;Extensions中启用XDebug (Debugger)后显示了更详细的报错信息指向E:\MAMP\htdocs\py4e\tsugi\admin\install\index.php第24行：</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$git_version</span> = <span class="variable">$repo</span>-&gt;<span class="builtin-name">run</span>(<span class="string">'--version'</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>以及上述GitRepo.php的第217行及其前是</p>
<figure class="highlight php"><table><tbody><tr><td class="code"><pre><span class="line">$resource = proc_open($command, $descriptorspec, $pipes, $cwd, $env);</span><br><span class="line"> </span><br><span class="line">$stdout = stream_get_contents($pipes[<span class="number">1</span>]);</span><br><span class="line">$stderr = stream_get_contents($pipes[<span class="number">2</span>]);</span><br><span class="line"><span class="keyword">foreach</span> ($pipes <span class="keyword">as</span> $pipe) {</span><br><span class="line">			fclose($pipe);</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">$status = trim(proc_close($resource));</span><br><span class="line"><span class="keyword">if</span> ($status) <span class="keyword">throw</span> <span class="keyword">new</span> \<span class="built_in">Exception</span>($stderr);</span><br></pre></td></tr></tbody></table></figure>

<p>发现是之前删注册表删错了把Git for Windows的PATH删掉了，补上以后在MAMP-&gt;Settings-&gt;Hosts-&gt;Databases中发现已经找到Tsugi了，勾选好以后重启服务器后刷新恢复正常，显示：This screen is a wrapper for the git command if it is installed in your system. This screen runs git commands on your behalf. It will only handle the normal operations and assume that they work. If you log in and edit the files after they are checked out, this tool might not be able to upgrade some of these git repos.<br>Using: git version 2.26.0.windows.1</p>
</li>
<li><p>打开Available Modules选项卡发现提示Cannot be installed via this page，点击锁的图标弹出报错信息Readonly Detail<br>This server does not appear to allow the git command to make changes to the web files. So this tool will not be able to install, update, or reconfigure any of these tools. You will have to update these files some other way. Alternatively, you may be able to configure a copy of git that can update the file system - see the documentation for $CFG-&gt;git_command in the config-dist.php file.打开config.php，找到第347-358行：</p>
<figure class="highlight awk"><table><tbody><tr><td class="code"><pre><span class="line"><span class="regexp">//</span> On a Mac localhost, <span class="keyword">if</span> you have git installed, you should be able to</span><br><span class="line"><span class="regexp">//</span> use the auto-install with no further configuration.</span><br><span class="line"> </span><br><span class="line"><span class="regexp">//</span> On Windows, to run the automatic install of modules:</span><br><span class="line"><span class="regexp">//</span> (<span class="number">1</span>) Make sure Git is installed (https:<span class="regexp">//gi</span>t-scm.com<span class="regexp">/download/</span>win</span><br><span class="line"><span class="regexp">//</span> Maybe also install a GIT GUI https:<span class="regexp">//gi</span>t-scm.com<span class="regexp">/downloads/gui</span>s</span><br><span class="line"><span class="regexp">//</span> (<span class="number">2</span>) Open <span class="string">"cmd"</span> and type <span class="string">"git --version"</span></span><br><span class="line"><span class="regexp">//</span> this should give you the current version of git. If this fails</span><br><span class="line"><span class="regexp">//</span> then git is not setup <span class="keyword">in</span> your path</span><br><span class="line"><span class="regexp">//</span> (Control Panel &gt; System and Security &gt; System &gt; Advanced System Settings &gt; Environment Variables)</span><br><span class="line"><span class="regexp">//</span> (<span class="number">3</span>) Then here <span class="keyword">in</span> <span class="string">"config.php"</span>:</span><br><span class="line"><span class="regexp">//</span> <span class="variable">$CFG</span>-&gt;git_command = <span class="string">'git'</span></span><br></pre></td></tr></tbody></table></figure>

<p>后来Available Modules选项卡干脆显示No available modules<br>Unable to decode <a href="https://api.github.com/users/tsugitools/repos?language=PHP%E3%80%82%E6%8A%8A%E7%AC%AC358%E8%A1%8C%E7%9A%84%E6%B3%A8%E9%87%8A%E5%8E%BB%E6%8E%89%E5%90%8E%E8%AE%B0%E5%BE%97%E5%8A%A0%E5%88%86%E5%8F%B7%E5%90%8E%E5%88%B7%E6%96%B0%E3%80%82">https://api.github.com/users/tsugitools/repos?language=PHP。把第358行的注释去掉后记得加分号后刷新。</a></p>
</li>
<li><p>为找出Cannot be installed via this page原因，重新配置git环境变量和重装git没有效果，为MAMP配置XDebug。MAMP-&gt;Languages-&gt;PHP-&gt;Default version-&gt;Open，在打开的php7.3.7.ini里的[XDebug]下添加zend_extension=”E:\MAMP\bin\php\php7.3.7\ext\php_xdebug.dll”，在E:\MAMP\conf\php7.3.7\php.ini中也这样添加。注意：MAMP无需自己创建php文件输出phpinfo或者用php -i和php -m，只需打开<a href="http://localhost:8888/MAMP/%EF%BC%88%E6%88%96%E8%80%85%E7%9B%B8%E5%BA%94%E7%9A%84%E4%B8%BB%E6%9C%BA%E5%92%8C%E7%AB%AF%E5%8F%A3%EF%BC%89%E5%B9%B6%E7%82%B9%E5%87%BB%E9%A1%B6%E9%83%A8%E8%8F%9C%E5%8D%95%E6%A0%8F%E7%9A%84phpInfo%E5%8D%B3%E5%8F%AF%EF%BC%8C%E5%9C%A8phpInfo%E7%BD%91%E9%A1%B5%E4%B8%AD%E6%90%9C%E7%B4%A2%E6%89%BE%E5%88%B0XDebug%E3%80%82%E4%BD%BF%E7%94%A8php">http://localhost:8888/MAMP/（或者相应的主机和端口）并点击顶部菜单栏的phpInfo即可，在phpInfo网页中搜索找到XDebug。使用php</a> -i然后将输出结果复制到<a href="https://xdebug.org/wizard%E5%88%86%E6%9E%90%E7%9A%84%E7%BB%93%E6%9E%9C%E4%B8%BA">https://xdebug.org/wizard分析的结果为</a><br>Summary<br>Xdebug installed: no<br>Server API: Command Line Interface<br>Windows: yes - Compiler: MS VC 15 - Architecture: x86<br>Zend Server: no<br>PHP Version: 7.3.7<br>Zend API nr: 320180731<br>PHP API nr: 20180731<br>Debug Build: no<br>Thread Safe Build: yes<br>OPcache Loaded: no<br>Configuration File Path: unknown<br>Configuration File: unknown<br>Extensions directory: C:\php\ext<br>Instructions<br>Download php_xdebug-2.9.4-7.3-vc15.dll<br>Move the downloaded file to C:\php\ext<br>Create php.ini in the same folder as where php.exe is and add the line<br>zend_extension = C:\php\ext\php_xdebug-2.9.4-7.3-vc15.dll</p>
</li>
<li><p>在VSCode中安装PHP Debug，配置</p>
<figure class="highlight css"><table><tbody><tr><td class="code"><pre><span class="line">"<span class="selector-tag">debug</span><span class="selector-class">.allowBreakpointsEverywhere</span>": <span class="selector-tag">true</span>,</span><br><span class="line">"<span class="selector-tag">php</span><span class="selector-class">.validate</span><span class="selector-class">.executablePath</span>": "<span class="selector-tag">E</span>:\\<span class="selector-tag">MAMP</span>\\<span class="selector-tag">bin</span>\\<span class="selector-tag">php</span>\\<span class="selector-tag">php7</span><span class="selector-class">.3</span><span class="selector-class">.7</span>\\<span class="selector-tag">php</span><span class="selector-class">.exe</span>"</span><br></pre></td></tr></tbody></table></figure>

<p>运行-&gt;Launch currently open script，当前脚本为E:\MAMP\htdocs\py4e\tsugi\admin\install\index.php，生成launch.json（E:\MAMP\htdocs\py4e\tsugi.vscode\launch.json）保持默认即可。打开</p>
<p><a href="http://localhost:8888/py4e/tsugi/admin/install/">http://localhost:8888/py4e/tsugi/admin/install/</a></p>
<p>，更多工具-&gt;开发人员工具-&gt;Sources，刷新网页。调试控制台显示</p>
<figure class="highlight less"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">Error</span>: spawn php ENOENT</span><br><span class="line">    at Process.ChildProcess._handle.onexit (internal/child_process.<span class="attribute">js</span>:<span class="number">264</span>:<span class="number">19</span>)</span><br><span class="line">    at onErrorNT (internal/child_process.<span class="attribute">js</span>:<span class="number">456</span>:<span class="number">16</span>)</span><br><span class="line">    at processTicksAndRejections (internal/process/task_queues.<span class="attribute">js</span>:<span class="number">77</span>:<span class="number">11</span>) {</span><br><span class="line">  <span class="attribute">errno</span>: <span class="string">'ENOENT'</span>,</span><br><span class="line">  <span class="attribute">code</span>: <span class="string">'ENOENT'</span>,</span><br><span class="line">  <span class="attribute">syscall</span>: <span class="string">'spawn php'</span>,</span><br><span class="line">  <span class="attribute">path</span>: <span class="string">'php'</span>,</span><br><span class="line">  <span class="attribute">spawnargs</span>: [ <span class="string">'e:\\MAMP\\htdocs\\py4e\\tsugi\\admin\\install\\index.php'</span> ]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>调用堆栈-&gt;Launch currently open script在{main}（E:\MAMP\htdocs\py4e\tsugi\admin\install\repos_json.php）中第58行</p>
<figure class="highlight reasonml"><table><tbody><tr><td class="code"><pre><span class="line">add<span class="constructor">RepoInfo($<span class="params">tsugi</span>, $<span class="params">repo</span>)</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>=&gt;addRepoInfo（E:\MAMP\htdocs\py4e\tsugi\admin\install\install_util.php）第146行</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$update</span> = <span class="variable">$repo</span>-&gt;<span class="builtin-name">run</span>(<span class="string">'remote update'</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>=&gt;Tsugi\Util\GitRepo-&gt;run（E:\MAMP\htdocs\py4e\tsugi\vendor\tsugi\lib\src\Util\GitRepo.php）第232行</p>
<figure class="highlight elixir"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="variable">$this</span>-&gt;run_command(Git::get_bin().<span class="string">" "</span>.<span class="variable">$command</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>=&gt;Tsugi\Util\GitRepo-&gt;run_command（E:\MAMP\htdocs\py4e\tsugi\vendor\tsugi\lib\src\Util\GitRepo.php）第217行抛出异常：</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line">出现异常。</span><br><span class="line">Exception: Logon failed, use ctrl+c <span class="keyword">to</span> cancel basic credential prompt.</span><br><span class="line">bash: /dev/tty: <span class="literal">No</span> such device <span class="keyword">or</span> address</span><br><span class="line">error: failed <span class="keyword">to</span> execute prompt<span class="built_in"> script </span>(exit code 1)</span><br><span class="line">fatal: could <span class="keyword">not</span> read Username <span class="keyword">for</span> <span class="string">'https://gitee.com'</span>: <span class="literal">No</span> such file <span class="keyword">or</span> directory</span><br><span class="line">error: Could <span class="keyword">not</span> fetch origin</span><br></pre></td></tr></tbody></table></figure>

<p>由于GitHub克隆很慢，我的tsugi是导出到Gitee再克隆到本地的。</p>
</li>
<li><p>本机对于github.com、coding.net、gitee.com等配置了同一个SSH-key，所以只需在Git Bash输入ssh -T <a href="mailto:git@gitee.com">git@gitee.com</a>然后输入yes即可添加gitee.com到known_hosts，然后显示Hi <username>! You’ve successfully authenticated, but GITEE.COM does not provide shell access.成功。</username></p>
</li>
<li><p>重试debug发现还是同样的问题，给Gitee重新添加SSH公钥也没有用，尝试在Git Bash中执行git clone <a href="mailto:git@gitee.com">git@gitee.com</a>:<username>/<gitname>.git报错：</gitname></username></p>
<figure class="highlight gauss"><table><tbody><tr><td class="code"><pre><span class="line">CreateProcessW failed <span class="built_in">error</span>:<span class="number">193</span></span><br><span class="line">ssh_askpass: posix_spawn: Unknown <span class="built_in">error</span></span><br><span class="line">Host <span class="built_in">key</span> verification failed.</span><br></pre></td></tr></tbody></table></figure>

<p>发现可能原因是由于HOME目录被更改过所以Git Bash使用的.ssh在另外一个目录E:\Cadence\SPB_Data，而刚刚执行的操作只更新了这个目录中的known_hosts而没有改变C:\Users&lt;username&gt;.ssh\known_hosts，于是将两个known_hosts文件手动同步。然后再次执行git clone（SSH方式）发现成功。</p>
</li>
<li><p>重试debug发现还是同样的问题，参考<a href="https://github.com/markomarkovic/simple-php-git-deploy/issues/20">fatal: could not read Username for ‘https://github.com’: No such device or address #20</a>将tsugi目录下的.git目录下的config中URL改成git形式，使用ssh -T <a href="mailto:git@gitee.com">git@gitee.com</a>成功，确定git config user.name为账户名称，重试debug，没有抛出任何通知、警告、错误或异常。</p>
</li>
</ol>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>apache</tag>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>使用VSCode调试C/C++（包括WSL和Windows环境）</title>
    <url>/posts/26298.html</url>
    <content><![CDATA[<p>【参考Microsoft官方文档：<a href="https://code.visualstudio.com/docs/cpp/cpp-debug%E5%92%8Chttps://code.visualstudio.com/docs/cpp/config-wsl%E3%80%91">https://code.visualstudio.com/docs/cpp/cpp-debug和https://code.visualstudio.com/docs/cpp/config-wsl】</a></p>
<p>1.在VSCode中安装扩展“C/C++”和”Remote - WSL”。如果要使用WSL远程桌面，那么在第2步启动WSL远程桌面后在左边栏-&gt;扩展中搜索“C/C++”点击“在WSL: Ubuntu中安装”。</p>
<p>2.点击左下角的蓝色图标。</p>
<p><img src="/posts/26298/Documents\Programming\HexoBlog\source_posts\CSDN补档-31\2020051810074837.png" alt="img"></p>
<p>在上方弹出窗口中选择Remote-WSL: New Window。</p>
<p><img src="/posts/26298/Documents\Programming\HexoBlog\source_posts\CSDN补档-31\20200518101022983.png" alt="img"></p>
<p>如果VSCode处于打开文件夹的状态，则弹出窗口会多一个选项Remote-WSL: Reopen Folder in WSL。</p>
<p><img src="/posts/26298/Documents\Programming\HexoBlog\source_posts\CSDN补档-31\20200518101144871.png" alt="img"></p>
<p>如果VSCode远程打开文件夹会弹出窗口：</p>
<p><img src="/posts/26298/Documents\Programming\HexoBlog\source_posts\CSDN补档-31\20200518101312949.png" alt="img"></p>
<p>可以通过“显示本地”直接选取Windows文件夹。成功打开远程后左下角图标如下：</p>
<p><img src="/posts/26298/Documents\Programming\HexoBlog\source_posts\CSDN补档-31\20200518101413501.png" alt="img"></p>
<p>左边栏扩展会显示三栏：JU - 已安装、WSL: UBUNTU - 已安装、推荐。WSL: UBUNTU - 已安装的扩展图标会增加一个代表远程扩展的贴纸：</p>
<p><img src="/posts/26298/Documents\Programming\HexoBlog\source_posts\CSDN补档-31\2020051811371472.png" alt="img"></p>
<p>3.使用VSCode终端方法：远程连接WSL时，在下方终端中：</p>
<p><img src="/posts/26298/Documents\Programming\HexoBlog\source_posts\CSDN补档-31\2020051810161070.png" alt="img"></p>
<p>如果显示的并非zsh，点击“选择默认Shell”。</p>
<p><img src="/posts/26298/Documents\Programming\HexoBlog\source_posts\CSDN补档-31\20200518101728287.png" alt="img"></p>
<p>未处于远程模式时，下方终端的名称为wsl，同样“选择默认Shell”如下：</p>
<p><img src="/posts/26298/Documents\Programming\HexoBlog\source_posts\CSDN补档-31\20200518101922278.png" alt="img"></p>
<p>WSL可通过在设置”settings.json”中添加行：</p>
<figure class="highlight css"><table><tbody><tr><td class="code"><pre><span class="line">"<span class="selector-tag">terminal</span><span class="selector-class">.integrated</span><span class="selector-class">.shell</span><span class="selector-class">.windows</span>": "<span class="selector-tag">C</span>:\\<span class="selector-tag">WINDOWS</span>\\<span class="selector-tag">System32</span>\\<span class="selector-tag">wsl</span><span class="selector-class">.exe</span>"</span><br></pre></td></tr></tbody></table></figure>

<p>这样就可以在终端中运行编译命令和调试命令了。</p>
<p>4.VSCode菜单栏-&gt;运行-&gt;打开配置，打开launch.json文件，在WSL远程窗口中运行参考：</p>
<figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="comment">// 使用 IntelliSense 了解相关属性。 </span></span><br><span class="line">    <span class="comment">// 悬停以查看现有属性的描述。</span></span><br><span class="line">    <span class="comment">// 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387</span></span><br><span class="line">    <span class="attr">"version"</span>: <span class="string">"0.2.0"</span>,</span><br><span class="line">    <span class="attr">"configurations"</span>: [</span><br><span class="line">        {</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"(gdb) 启动 (WSL)"</span>,</span><br><span class="line">            <span class="attr">"type"</span>: <span class="string">"cppdbg"</span>,</span><br><span class="line">            <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">            <span class="attr">"program"</span>: <span class="string">"${workspaceFolder}/${fileBasenameNoExtension}"</span>,</span><br><span class="line">            <span class="attr">"args"</span>: [],</span><br><span class="line">            <span class="attr">"stopAtEntry"</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">"cwd"</span>: <span class="string">"${workspaceFolder}"</span>,</span><br><span class="line">            <span class="attr">"environment"</span>: [],</span><br><span class="line">            <span class="attr">"externalConsole"</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">"MIMode"</span>: <span class="string">"gdb"</span>,</span><br><span class="line">            <span class="attr">"miDebuggerPath"</span>: <span class="string">"/usr/bin/gdb"</span>,</span><br><span class="line">            <span class="attr">"setupCommands"</span>: [</span><br><span class="line">                {</span><br><span class="line">                    <span class="attr">"description"</span>: <span class="string">"为 gdb 启用整齐打印"</span>,</span><br><span class="line">                    <span class="attr">"text"</span>: <span class="string">"-enable-pretty-printing"</span>,</span><br><span class="line">                    <span class="attr">"ignoreFailures"</span>: <span class="literal">false</span></span><br><span class="line">                }</span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"preLaunchTask"</span>: <span class="string">"shell: g++.exe build active file (WSL)"</span></span><br><span class="line">        }</span><br><span class="line">    ]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>在Windows（MSYS）中运行参考：</p>
<figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="comment">// 使用 IntelliSense 了解相关属性。 </span></span><br><span class="line">    <span class="comment">// 悬停以查看现有属性的描述。</span></span><br><span class="line">    <span class="comment">// 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387</span></span><br><span class="line">    <span class="attr">"version"</span>: <span class="string">"0.2.0"</span>,</span><br><span class="line">    <span class="attr">"configurations"</span>: [</span><br><span class="line">        {</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"(gdb) 启动 (MSYS)"</span>,</span><br><span class="line">            <span class="attr">"type"</span>: <span class="string">"cppdbg"</span>,</span><br><span class="line">            <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">            <span class="attr">"program"</span>: <span class="string">"${workspaceFolder}/${fileBasenameNoExtension}.exe"</span>,</span><br><span class="line">            <span class="attr">"args"</span>: [],</span><br><span class="line">            <span class="attr">"stopAtEntry"</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">"cwd"</span>: <span class="string">"${workspaceFolder}"</span>,</span><br><span class="line">            <span class="attr">"environment"</span>: [],</span><br><span class="line">            <span class="attr">"externalConsole"</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">"MIMode"</span>: <span class="string">"gdb"</span>,</span><br><span class="line">            <span class="attr">"miDebuggerPath"</span>: <span class="string">"E:/msys64/mingw64/bin/gdb"</span>,</span><br><span class="line">            <span class="attr">"setupCommands"</span>: [</span><br><span class="line">                {</span><br><span class="line">                    <span class="attr">"description"</span>: <span class="string">"为 gdb 启用整齐打印"</span>,</span><br><span class="line">                    <span class="attr">"text"</span>: <span class="string">"-enable-pretty-printing"</span>,</span><br><span class="line">                    <span class="attr">"ignoreFailures"</span>: <span class="literal">false</span></span><br><span class="line">                }</span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"preLaunchTask"</span>: <span class="string">"shell: g++.exe build active file (MSYS)"</span></span><br><span class="line">        }</span><br><span class="line">    ]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>VSCode菜单栏-&gt;终端-&gt;配置任务【若未配置，则点击终端-&gt;运行任务会显示”没有配置的任务。配置任务…“，点击后会显示：<img src="/posts/26298/Documents\Programming\HexoBlog\source_posts\CSDN补档-31\20200522134911104.png" alt="img"></p>
<p>点击第一个“shell: cl.exe build active file”会自动创建使用cl.exe编译器的运行任务如下：</p>
<figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">	<span class="attr">"version"</span>: <span class="string">"2.0.0"</span>,</span><br><span class="line">	<span class="attr">"tasks"</span>: [</span><br><span class="line">		{</span><br><span class="line">			<span class="attr">"type"</span>: <span class="string">"shell"</span>,</span><br><span class="line">			<span class="attr">"label"</span>: <span class="string">"shell: cl.exe build active file"</span>,</span><br><span class="line">			<span class="attr">"command"</span>: <span class="string">"cl.exe"</span>,</span><br><span class="line">			<span class="attr">"args"</span>: [</span><br><span class="line">				<span class="string">"/Zi"</span>,</span><br><span class="line">				<span class="string">"/EHsc"</span>,</span><br><span class="line">				<span class="string">"/Fe:"</span>,</span><br><span class="line">				<span class="string">"${fileDirname}\\${fileBasenameNoExtension}.exe"</span>,</span><br><span class="line">				<span class="string">"${file}"</span></span><br><span class="line">			],</span><br><span class="line">			<span class="attr">"problemMatcher"</span>: [</span><br><span class="line">				<span class="string">"$msCompile"</span></span><br><span class="line">			],</span><br><span class="line">			<span class="attr">"group"</span>: <span class="string">"build"</span></span><br><span class="line">		}</span><br><span class="line">	]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>cl.exe是Visual Studio使用的C/C++编译器（即MSVC）。若使用该编译器，应将X:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\VC\Tools\MSVC\14.25.28610\bin\Hostx64\x64添加到环境变量。但如果仅如此配置会报错：“fatal error C1034: iostream: 不包括路径集”，需要另行配置。】</p>
<p>打开tasks.json文件，在WSL远程窗口中参考：</p>
<figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">	<span class="attr">"version"</span>: <span class="string">"2.0.0"</span>,</span><br><span class="line">	<span class="attr">"tasks"</span>: [</span><br><span class="line">		{</span><br><span class="line">			<span class="attr">"type"</span>: <span class="string">"shell"</span>,</span><br><span class="line">			<span class="attr">"label"</span>: <span class="string">"shell: g++.exe build active file (WSL)"</span>,</span><br><span class="line">			<span class="attr">"command"</span>: <span class="string">"/usr/bin/g++"</span>,</span><br><span class="line">			<span class="attr">"args"</span>: [</span><br><span class="line">				<span class="string">"-g"</span>,</span><br><span class="line">				<span class="string">"${file}"</span>,</span><br><span class="line">				<span class="string">"-o"</span>,</span><br><span class="line">				<span class="string">"${fileDirname}/${fileBasenameNoExtension}"</span></span><br><span class="line">			],</span><br><span class="line">			<span class="attr">"options"</span>: {</span><br><span class="line">				<span class="attr">"cwd"</span>: <span class="string">"/usr/bin"</span></span><br><span class="line">			},</span><br><span class="line">			<span class="attr">"problemMatcher"</span>: [</span><br><span class="line">				<span class="string">"$gcc"</span></span><br><span class="line">			],</span><br><span class="line">			<span class="attr">"group"</span>: {</span><br><span class="line">				<span class="attr">"kind"</span>: <span class="string">"build"</span>,</span><br><span class="line">				<span class="attr">"isDefault"</span>: <span class="literal">true</span></span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line">	]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>在Windows（MSYS）中参考：</p>
<figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">	<span class="attr">"version"</span>: <span class="string">"2.0.0"</span>,</span><br><span class="line">	<span class="attr">"tasks"</span>: [</span><br><span class="line">		{</span><br><span class="line">			<span class="attr">"type"</span>: <span class="string">"shell"</span>,</span><br><span class="line">			<span class="attr">"label"</span>: <span class="string">"shell: g++.exe build active file (MSYS)"</span>,</span><br><span class="line">			<span class="attr">"command"</span>: <span class="string">"E:\\msys64\\mingw64\\bin\\g++.exe"</span>,</span><br><span class="line">			<span class="attr">"args"</span>: [</span><br><span class="line">				<span class="string">"-g"</span>,</span><br><span class="line">				<span class="string">"${file}"</span>,</span><br><span class="line">				<span class="string">"-o"</span>,</span><br><span class="line">				<span class="string">"${fileDirname}\\${fileBasenameNoExtension}.exe"</span></span><br><span class="line">			],</span><br><span class="line">			<span class="attr">"options"</span>: {</span><br><span class="line">				<span class="attr">"cwd"</span>: <span class="string">"E:\\msys64\\mingw64\\bin"</span></span><br><span class="line">			},</span><br><span class="line">			<span class="attr">"problemMatcher"</span>: [</span><br><span class="line">				<span class="string">"$gcc"</span></span><br><span class="line">			],</span><br><span class="line">			<span class="attr">"group"</span>: {</span><br><span class="line">				<span class="attr">"kind"</span>: <span class="string">"build"</span>,</span><br><span class="line">				<span class="attr">"isDefault"</span>: <span class="literal">true</span></span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line">	]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>配置好后选择菜单栏-&gt;终端-&gt;运行任务弹出窗口为：</p>
<p><img src="/posts/26298/Documents\Programming\HexoBlog\source_posts\CSDN补档-31\20200518102840162.png" alt="img"></p>
<p>5.打开要调试的代码文件。如果只想编译，选择菜单栏-&gt;运行-&gt;以非调试模式运行即可。如果要调试，编译后在行号左侧单击添加断点，菜单栏-&gt;运行-&gt;启动调试，左边栏-&gt;运行会启动一个活动会话：</p>
<p><img src="/posts/26298/Documents\Programming\HexoBlog\source_posts\CSDN补档-31\20200518113952590.png" alt="img"></p>
<p>它会自动编译后运行调试，无需先运行生成二进制文件。接下来就可以在下方使用调试控制台了。具体单步跳过、单步调试、单步跳出的调试功能与Visual Studio、JetBrains CLion等IDE并无异。注意事项：在使用Windows中的gcc、g++等调试时不要同时打开WSL远程窗口，否则在下方终端中会报错：“终端 shell CWD“\usr\bin”不存在”。参考：<a href="https://www.zhihu.com/question/380270740/answer/1229921060">The terminal shell CWD “\usr\bin” does not exist？</a>。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>vscode</tag>
        <tag>c++</tag>
        <tag>wsl</tag>
        <tag>debug</tag>
      </tags>
  </entry>
  <entry>
    <title>VSCode+WSL+CMake调试</title>
    <url>/posts/26614.html</url>
    <content><![CDATA[<ol>
<li>确定VSCode、gcc、cmake、gdb、build-essential以及VSCode的插件C/C++和CMake Tools安装正常（在远程窗口中安装）。</li>
<li>Ctrl+Shift+P，输入CMake: Quick Start：<img src="https://img-blog.csdnimg.cn/20200706091846675.png" alt="img"><br>如右下角弹出选择窗口选择是即可，然后继续到Select a kit：<img src="https://img-blog.csdnimg.cn/20200706091932745.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lpaHVhamFjaw==,size_16,color_FFFFFF,t_70" alt="img"><br>如未弹出，则在VSCode底部选择<img src="https://img-blog.csdnimg.cn/2020070609201849.png" alt="img"><br>No Kit Selected即可选择工具。再次CMake: Quick Start：<img src="https://img-blog.csdnimg.cn/20200706092122686.png" alt="img"><br>输入新项目的名称，然后选择Executable：<img src="https://img-blog.csdnimg.cn/20200706092237888.png" alt="img"><br>之后会自动创建并打开CMakeList.txt，完成后：<img src="https://img-blog.csdnimg.cn/20200706092429585.png" alt="img"><br>然后修改CMakeLists.txt，保存会自动配置并在“输出”栏输出cmake配置信息：<img src="https://img-blog.csdnimg.cn/20200706093316888.png" alt="img">选择CMake: Select Variant：<img src="https://img-blog.csdnimg.cn/20200706092854435.png" alt="img"><br>然后选择Debug：<br><img src="https://img-blog.csdnimg.cn/2020070609281220.png" alt="img"></li>
<li>Build project：<br><img src="https://img-blog.csdnimg.cn/20200706093428887.png" alt="img"><br>成功后在输出栏显示[build] Build finished with exit code 0。</li>
<li>像使用launch.json和tasks.json调试一样，设置断点后Debug project：<br><img src="/posts/26614/Documents\Programming\HexoBlog\source_posts\CSDN补档-33\20200706093559349.png" alt="img"></li>
</ol>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>vscode</tag>
        <tag>wsl</tag>
        <tag>debug</tag>
        <tag>cmake</tag>
      </tags>
  </entry>
  <entry>
    <title>VSCode调试出现无法打开glibc库的“raise.c“或“abort.c“等文件的错误</title>
    <url>/posts/46016.html</url>
    <content><![CDATA[<p><img src="/posts/46016/Documents\Programming\HexoBlog\source_posts\CSDN补档-34\20200706103736830.png" alt="img"><img src="/posts/46016/Documents\Programming\HexoBlog\source_posts\CSDN补档-34\20200706103816667.png" alt="img"></p>
<p>终端则会显示</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line">terminate called after throwing an<span class="built_in"> instance </span>of <span class="string">'std::logic_error'</span></span><br><span class="line">  what():  basic_string::_M_construct <span class="literal">null</span> <span class="keyword">not</span> valid</span><br></pre></td></tr></tbody></table></figure>

<p>参考Github库<a href="https://github.com/microsoft/vscode-cpptools">vscode-cpptools</a>的issue #1738: <a href="https://github.com/Microsoft/vscode-cpptools/issues/1738">Error on WSL: unable to open raise.c</a>和#4686: <a href="https://github.com/microsoft/vscode-cpptools/issues/4686">Debugging Error:Unable to open ‘raise.c’</a>，根据gdb的skip功能：<a href="https://sourceware.org/gdb/onlinedocs/gdb/Skipping-Over-Functions-and-Files.html#Skipping-Over-Functions-and-Files%E5%8F%AF%E4%BB%A5%E5%9C%A8launch.json%E4%B8%AD%E7%9A%84&quot;configurations&quot;%E4%B8%8B%E7%9A%84&quot;setupCommands&quot;%E4%B8%8B%E6%B7%BB%E5%8A%A0%EF%BC%9A">https://sourceware.org/gdb/onlinedocs/gdb/Skipping-Over-Functions-and-Files.html#Skipping-Over-Functions-and-Files可以在launch.json中的"configurations"下的"setupCommands"下添加：</a></p>
<figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">"description"</span>: <span class="string">"Skip glibc files"</span>,</span><br><span class="line">    <span class="attr">"text"</span>: <span class="string">"-interpreter-exec console \"skip -gfi build/glibc-YYA7BZ/glibc-2.31//**/*\""</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>但是并没有解决问题，将忽略的路径添加wsl+ubuntu/或vscode-remote://wsl+ubuntu也没有解决问题，该种方法可能对其他环境有效，但在VSCode使用远程连接情况下则无效。根据issue #811: <a href="https://github.com/microsoft/vscode-cpptools/issues/811">Disable “Unable to open file” during debug</a>，开发者表示使用”skip”命令也是他网上搜出来的，目前（2019年1月27日）不知道有什么其他办法。但是该issue下还有其他解决方法，无需编译安装glibc库：</p>
<p>在WSL中执行</p>
<figure class="highlight powershell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$</span> sudo apt install glibc<span class="literal">-source</span></span><br><span class="line"><span class="variable">$</span> <span class="built_in">cd</span> /usr/src/glibc</span><br><span class="line"><span class="variable">$</span> sudo tar xvf glibc<span class="literal">-2</span>.<span class="number">31</span>.tar.xz</span><br></pre></td></tr></tbody></table></figure>

<p>其中“2.31”应改为实际安装的source的版本号，可通过”ls”命令查看。然后在launch.json中的”configurations”下添加</p>
<figure class="highlight 1c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="string">"sourceFileMap"</span>: {</span><br><span class="line">    <span class="string">"/build/glibc-YYA7BZ"</span>: <span class="string">"/usr/src/glibc"</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>其中”YYA7BZ”要改为报错信息中显示的glibc后缀。如该方法无效则可将路径<target-path>改为：C:\Users\<username>\AppData\Local\Packages\CanonicalGroupLimited.UbuntuonWindows_79rhkp1fndgsc\LocalState\rootfs\usr\src\glibc，其中79rhkp1fndgsc应改为自己系统上的文件夹名称。</username></target-path></p>
<p>现在搜索出现终端报错信息的原因：</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line">[1] + Done                       <span class="string">"/usr/bin/gdb"</span> <span class="attribute">--interpreter</span>=mi <span class="attribute">--tty</span>=<span class="variable">${DbgTerm}</span> 0&lt;<span class="string">"/tmp/Microsoft-MIEngine-In-p3q623bu.gbr"</span> 1&gt;<span class="string">"/tmp/Microsoft-MIEngine-Out-s4xm3p6g.lqk"</span></span><br></pre></td></tr></tbody></table></figure>

<p><img src="/posts/46016/Documents\Programming\HexoBlog\source_posts\CSDN补档-34\20200706120129296.png" alt="img"></p>
<p>根据<a href="https://blog.csdn.net/judgejames/article/details/84666468">运行时错误：terminate called after throwing an instance of ‘std::logic_error’</a>，这是对一个空指针进行操作导致的。出现这一问题的可能原因之一是忘记在launch.json中的”configurations”下的”args”列表中添加运行程序所必要的参数。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>vscode</tag>
        <tag>wsl</tag>
        <tag>glibc</tag>
      </tags>
  </entry>
  <entry>
    <title>pip升级会导致Could not install packages due to an EnvironmentError：[WinError 5]拒绝访问错误的原因</title>
    <url>/posts/17887.html</url>
    <content><![CDATA[<p>Python安装时可勾选安装pip，安装完成后执行</p>
<figure class="highlight ebnf"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">pip -v</span></span><br></pre></td></tr></tbody></table></figure>

<p>或</p>
<figure class="highlight ada"><table><tbody><tr><td class="code"><pre><span class="line">pip <span class="comment">--version</span></span><br></pre></td></tr></tbody></table></figure>

<p>可成功显示版本号（以Python 3.8.5为例）</p>
<figure class="highlight crystal"><table><tbody><tr><td class="code"><pre><span class="line">pip <span class="number">20.1</span>.<span class="number">1</span> from <span class="symbol">d:</span>\program_files\python38\<span class="class"><span class="keyword">lib</span>\<span class="title">site</span>-<span class="title">packages</span>\<span class="title">pip</span> (<span class="title">python</span> 3.8)</span></span><br></pre></td></tr></tbody></table></figure>

<p>然而，如果执行</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">pip <span class="keyword">install</span> <span class="comment">--upgrade pip</span></span><br></pre></td></tr></tbody></table></figure>

<p>会报错</p>
<figure class="highlight apache"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">Collecting</span> pip</span><br><span class="line">  <span class="attribute">Using</span> cached pip-<span class="number">20</span>.<span class="number">2</span>.<span class="number">2</span>-py<span class="number">2</span>.py<span class="number">3</span>-none-any.whl (<span class="number">1</span>.<span class="number">5</span> MB)</span><br><span class="line"><span class="attribute">Installing</span> collected packages: pip</span><br><span class="line">  <span class="attribute">Attempting</span> uninstall: pip</span><br><span class="line">    <span class="attribute">Found</span> existing installation: pip <span class="number">20</span>.<span class="number">1</span>.<span class="number">1</span></span><br><span class="line">    <span class="attribute">Uninstalling</span> pip-<span class="number">20</span>.<span class="number">1</span>.<span class="number">1</span>:</span><br><span class="line"><span class="attribute">ERROR</span>: Could not install packages due to an EnvironmentError:<span class="meta"> [WinError 5] 拒绝访问。: 'd:\\program_files\\python38\\scripts\\pip.exe'</span></span><br><span class="line"><span class="meta">Consider using the `--user` option or check the permissions.</span></span><br></pre></td></tr></tbody></table></figure>

<p>该操作会导致原有的pip模块被破坏，再执行获取版本号命令会显示</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">Traceback (most recent <span class="keyword">call</span> <span class="keyword">last</span>):</span><br><span class="line">  <span class="keyword">File</span> <span class="string">"d:\program_files\python38\lib\runpy.py"</span>, line <span class="number">194</span>, <span class="keyword">in</span> _run_module_as_main</span><br><span class="line">    <span class="keyword">return</span> _run_code(code, main_globals, <span class="keyword">None</span>,</span><br><span class="line">  <span class="keyword">File</span> <span class="string">"d:\program_files\python38\lib\runpy.py"</span>, line <span class="number">87</span>, <span class="keyword">in</span> _run_code</span><br><span class="line">    exec(code, run_globals)</span><br><span class="line">  <span class="keyword">File</span> <span class="string">"D:\Program_Files\Python38\Scripts\pip.exe\__main__.py"</span>, line <span class="number">4</span>, <span class="keyword">in</span> &lt;<span class="keyword">module</span>&gt;</span><br><span class="line">ModuleNotFoundError: <span class="keyword">No</span> <span class="keyword">module</span> named <span class="string">'pip'</span></span><br></pre></td></tr></tbody></table></figure>

<p>如执行</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">python -m pip <span class="keyword">install</span> <span class="comment">--upgrade pip</span></span><br></pre></td></tr></tbody></table></figure>

<p>会显示</p>
<figure class="highlight latex"><table><tbody><tr><td class="code"><pre><span class="line">D:<span class="tag">\<span class="name">Program</span></span>_Files<span class="tag">\<span class="name">Python</span></span>38<span class="tag">\<span class="name">python</span></span>.exe: No module named pip</span><br></pre></td></tr></tbody></table></figure>

<p>只能重装pip或Python，所以切勿执行非–user选项的升级命令。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>pip</tag>
      </tags>
  </entry>
  <entry>
    <title>git错误unable to create symlink ssl...Could not reset index file to revision ‘HEAD‘的解决方法</title>
    <url>/posts/57803.html</url>
    <content><![CDATA[<p>执行</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">git reset --hard</span><br></pre></td></tr></tbody></table></figure>

<p>时报错：</p>
<figure class="highlight subunit"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">error: </span>unable to create symlink ssl: Permission denied</span><br><span class="line">fatal: Could not reset index file to revision 'HEAD'</span><br></pre></td></tr></tbody></table></figure>

<p>解决方法是以管理员身份运行Terminal或Shell。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>WSL1安装rust报错thread ‘main‘ panicked的解决方法</title>
    <url>/posts/10972.html</url>
    <content><![CDATA[<p>根据<a href="https://www.rust-lang.org/tools/install%EF%BC%8CWSL%E5%AE%89%E8%A3%85rust%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4">https://www.rust-lang.org/tools/install，WSL安装rust使用命令</a></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">curl --proto <span class="string">'=https'</span> --tlsv1.2 -sSf https://sh.rustup.rs | sh</span><br></pre></td></tr></tbody></table></figure>

<p>报错</p>
<figure class="highlight rust"><table><tbody><tr><td class="code"><pre><span class="line">info: downloading installer</span><br><span class="line"> </span><br><span class="line">Welcome to Rust!</span><br><span class="line"> </span><br><span class="line">This will download and install the official compiler <span class="keyword">for</span> the Rust</span><br><span class="line">programming language, and its package manager, Cargo.</span><br><span class="line"> </span><br><span class="line">Rustup metadata and toolchains will be installed into the Rustup</span><br><span class="line">home directory, located at:</span><br><span class="line"> </span><br><span class="line">  /home/ayka_tsuzuki/.rustup</span><br><span class="line"> </span><br><span class="line">This can be modified with the RUSTUP_HOME environment variable.</span><br><span class="line"> </span><br><span class="line">The Cargo home directory located at:</span><br><span class="line"> </span><br><span class="line">  /home/ayka_tsuzuki/.cargo</span><br><span class="line"> </span><br><span class="line">This can be modified with the CARGO_HOME environment variable.</span><br><span class="line"> </span><br><span class="line">The cargo, rustc, rustup and other commands will be added to</span><br><span class="line">Cargo<span class="symbol">'s</span> bin directory, located at:</span><br><span class="line"> </span><br><span class="line">  /home/ayka_tsuzuki/.cargo/bin</span><br><span class="line"> </span><br><span class="line">This path will then be added to your PATH environment variable by</span><br><span class="line">modifying the profile files located at:</span><br><span class="line"> </span><br><span class="line">  /home/ayka_tsuzuki/.profile</span><br><span class="line">  /home/ayka_tsuzuki/.zprofile</span><br><span class="line"> </span><br><span class="line">You can uninstall at any time with rustup <span class="keyword">self</span> uninstall and</span><br><span class="line">these changes will be reverted.</span><br><span class="line"> </span><br><span class="line">Current installation options:</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">   default host triple: x86_64-unknown-linux-gnu</span><br><span class="line">     default toolchain: stable (default)</span><br><span class="line">               profile: default</span><br><span class="line">  modify PATH variable: yes</span><br><span class="line"> </span><br><span class="line"><span class="number">1</span>) Proceed with installation (default)</span><br><span class="line"><span class="number">2</span>) Customize installation</span><br><span class="line"><span class="number">3</span>) Cancel installation</span><br><span class="line">&gt;<span class="number">1</span></span><br><span class="line"> </span><br><span class="line">info: profile set to <span class="symbol">'default</span>'</span><br><span class="line">info: default host triple is x86_64-unknown-linux-gnu</span><br><span class="line">info: syncing channel updates <span class="keyword">for</span> <span class="symbol">'stable</span>-x86_64-unknown-linux-gnu'</span><br><span class="line"><span class="number">462.8</span> KiB / <span class="number">462.8</span> KiB (<span class="number">100</span> %) <span class="number">108.0</span> KiB/s <span class="keyword">in</span>  <span class="number">4</span>s ETA:  <span class="number">0</span>s</span><br><span class="line">info: latest update on <span class="number">2020</span>-<span class="number">08</span>-<span class="number">03</span>, rust version <span class="number">1.45</span>.<span class="number">2</span> (d3fb005a3 <span class="number">2020</span>-<span class="number">07</span>-<span class="number">31</span>)</span><br><span class="line">info: downloading component <span class="symbol">'cargo</span>'</span><br><span class="line">info: downloading component <span class="symbol">'clippy</span>'</span><br><span class="line">info: downloading component <span class="symbol">'rust</span>-docs'</span><br><span class="line">info: downloading component <span class="symbol">'rust</span>-std'</span><br><span class="line">info: downloading component <span class="symbol">'rustc</span>'</span><br><span class="line">info: downloading component <span class="symbol">'rustfmt</span>'</span><br><span class="line">info: installing component <span class="symbol">'cargo</span>'</span><br><span class="line">info: Defaulting to <span class="number">500.0</span> MiB unpack ram</span><br><span class="line">thread <span class="symbol">'main</span>' panicked at <span class="symbol">'assertion</span> failed: `(left == right)`</span><br><span class="line">  left: `<span class="number">22</span>`,</span><br><span class="line"> right: `<span class="number">4</span>`', src/libstd/sys/unix/thread.rs:<span class="number">179</span>:<span class="number">21</span></span><br><span class="line">note: run with `RUST_BACKTRACE=<span class="number">1</span>` environment variable to display a backtrace</span><br><span class="line">thread <span class="symbol">'main</span>' panicked at <span class="symbol">'assertion</span> failed: `(left == right)`</span><br><span class="line">  left: `<span class="number">22</span>`,</span><br><span class="line"> right: `<span class="number">4</span>`', src/libstd/sys/unix/thread.rs:<span class="number">179</span>:<span class="number">21</span></span><br><span class="line">stack backtrace:</span><br><span class="line">   <span class="number">0</span>:     <span class="number">0x7f0f95edaffd</span> - backtrace::backtrace::libunwind::trace::h812748238d609e46</span><br><span class="line">                               at /cargo/registry/src/github.com-<span class="number">1</span>ecc6299db9ec823/backtrace-<span class="number">0.3</span>.<span class="number">46</span>/src/backtrace/libunwind.rs:<span class="number">86</span></span><br><span class="line">   <span class="number">1</span>:     <span class="number">0x7f0f95edaffd</span> - backtrace::backtrace::trace_unsynchronized::h7c97e818aebf09c8</span><br><span class="line">                               at /cargo/registry/src/github.com-<span class="number">1</span>ecc6299db9ec823/backtrace-<span class="number">0.3</span>.<span class="number">46</span>/src/backtrace/<span class="keyword">mod</span>.rs:<span class="number">66</span></span><br><span class="line">   <span class="number">2</span>:     <span class="number">0x7f0f95edaffd</span> - std::sys_common::backtrace::_print_fmt::h60d914263b0ccd71</span><br><span class="line">                               at src/libstd/sys_common/backtrace.rs:<span class="number">78</span></span><br><span class="line">   <span class="number">3</span>:     <span class="number">0x7f0f95edaffd</span> - &lt;std::sys_common::backtrace::_print::DisplayBacktrace <span class="keyword">as</span> core::fmt::Display&gt;::fmt::hf78227137afc7565</span><br><span class="line">                               at src/libstd/sys_common/backtrace.rs:<span class="number">59</span></span><br><span class="line">   <span class="number">4</span>:     <span class="number">0x7f0f95b6524c</span> - core::fmt::write::h543cdf60775f89bf</span><br><span class="line">                               at src/libcore/fmt/<span class="keyword">mod</span>.rs:<span class="number">1069</span></span><br><span class="line">   <span class="number">5</span>:     <span class="number">0x7f0f95eda904</span> - std::io::Write::write_fmt::h0c7f3ce24c679426</span><br><span class="line">                               at src/libstd/io/<span class="keyword">mod</span>.rs:<span class="number">1504</span></span><br><span class="line">   <span class="number">6</span>:     <span class="number">0x7f0f95eda105</span> - std::sys_common::backtrace::_print::h80e55e24be231368</span><br><span class="line">                               at src/libstd/sys_common/backtrace.rs:<span class="number">62</span></span><br><span class="line">   <span class="number">7</span>:     <span class="number">0x7f0f95eda105</span> - std::sys_common::backtrace::print::h3b197b9c1261c865</span><br><span class="line">                               at src/libstd/sys_common/backtrace.rs:<span class="number">49</span></span><br><span class="line">   <span class="number">8</span>:     <span class="number">0x7f0f95eda105</span> - std::panicking::default_hook::{{closure}}::ha6c807149ce20f8f</span><br><span class="line">                               at src/libstd/panicking.rs:<span class="number">198</span></span><br><span class="line">   <span class="number">9</span>:     <span class="number">0x7f0f95ed98f4</span> - std::panicking::default_hook::he49a9c12e358cc45</span><br><span class="line">                               at src/libstd/panicking.rs:<span class="number">218</span></span><br><span class="line">  <span class="number">10</span>:     <span class="number">0x7f0f95ed93b6</span> - std::panicking::rust_panic_with_hook::h93f74f5ef2f71f31</span><br><span class="line">                               at src/libstd/panicking.rs:<span class="number">515</span></span><br><span class="line">  <span class="number">11</span>:     <span class="number">0x7f0f95ed9198</span> - rust_begin_unwind</span><br><span class="line">                               at src/libstd/panicking.rs:<span class="number">419</span></span><br><span class="line">  <span class="number">12</span>:     <span class="number">0x7f0f95ed9140</span> - std::panicking::begin_panic_fmt::hfa6ef29ba81f400e</span><br><span class="line">                               at src/libstd/panicking.rs:<span class="number">373</span></span><br><span class="line">  <span class="number">13</span>:     <span class="number">0x7f0f95e11671</span> - &lt;rustup::diskio::threaded::Threaded <span class="keyword">as</span> rustup::diskio::Executor&gt;::join::habf6ee901a47a8a4</span><br><span class="line">  <span class="number">14</span>:     <span class="number">0x7f0f95e10c78</span> - core::ptr::drop_in_place::h0b1b0dcb4b07c267</span><br><span class="line">  <span class="number">15</span>:     <span class="number">0x7f0f95d76c40</span> - core::ptr::drop_in_place::h09572fbec04e583f</span><br><span class="line">  <span class="number">16</span>:     <span class="number">0x7f0f95e2842e</span> - rustup::dist::component::package::unpack_without_first_dir::h99f4b0c2cae349ff</span><br><span class="line">  <span class="number">17</span>:     <span class="number">0x7f0f95de559f</span> - rustup::dist::manifestation::Manifestation::update::hacf67fad3b44f03a</span><br><span class="line">  <span class="number">18</span>:     <span class="number">0x7f0f95dd563c</span> - rustup::dist::dist::update_from_dist_::h1462627f9c58c494</span><br><span class="line">  <span class="number">19</span>:     <span class="number">0x7f0f95dd227a</span> - rustup::install::InstallMethod::install::hbb6430b2dfaf5792</span><br><span class="line">  <span class="number">20</span>:     <span class="number">0x7f0f95dd0d21</span> - rustup::toolchain::DistributableToolchain::install_from_dist::h7b9bf9317c9aa2c5</span><br><span class="line">  <span class="number">21</span>:     <span class="number">0x7f0f95ec5aa2</span> - rustup::cli::self_update::install::h8ca0f61a773526a9</span><br><span class="line">  <span class="number">22</span>:     <span class="number">0x7f0f95ecbd3d</span> - rustup::cli::setup_mode::main::h4d335e1871435d70</span><br><span class="line">  <span class="number">23</span>:     <span class="number">0x7f0f95adf42a</span> - rustup_init::main::h22da971c634937a2</span><br><span class="line">  <span class="number">24</span>:     <span class="number">0x7f0f95ef3e83</span> - std::rt::lang_start_internal::{{closure}}::{{closure}}::h4ed4ab1fb893cc93</span><br><span class="line">                               at src/libstd/rt.rs:<span class="number">52</span></span><br><span class="line">  <span class="number">25</span>:     <span class="number">0x7f0f95ef3e83</span> - std::sys_common::backtrace::__rust_begin_short_backtrace::h1f01c818c00c4f70</span><br><span class="line">                               at src/libstd/sys_common/backtrace.rs:<span class="number">130</span></span><br><span class="line">  <span class="number">26</span>:     <span class="number">0x7f0f95ae053f</span> - main</span><br><span class="line">  <span class="number">27</span>:     <span class="number">0x7f0f956a70b3</span> - __libc_start_main</span><br><span class="line">  <span class="number">28</span>:     <span class="number">0x7f0f95adb029</span> - &lt;unknown&gt;</span><br><span class="line">thread panicked <span class="keyword">while</span> panicking. aborting.</span><br><span class="line">Illegal instruction (core dumped)</span><br></pre></td></tr></tbody></table></figure>

<p>参考GitHub库rust-lang/rustup的issue #2245：<a href="https://github.com/rust-lang/rustup/issues/2245">rustup panic with WSLv1 + glibc 2.31</a>，一种办法是将WSL1升级到WSL2：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">wsl --set-default-version 2</span><br><span class="line">wsl --list --verbose</span><br><span class="line">wsl --set-version Ubuntu-20.04 2</span><br></pre></td></tr></tbody></table></figure>

<p>然后再执行安装命令；另一种办法是在.bashrc或.bash_profile（如果用的Shell是ZSH则在.zshrc）中插入</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">RUSTUP_IO_THREADS</span>=1</span><br></pre></td></tr></tbody></table></figure>

<p>然后source .zshrc，或直接在命令行中输入该命令执行，然后再执行安装rust命令，即可成功安装：</p>
<figure class="highlight yaml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">info:</span> <span class="string">downloading</span> <span class="string">installer</span></span><br><span class="line"> </span><br><span class="line"><span class="string">Welcome</span> <span class="string">to</span> <span class="string">Rust!</span></span><br><span class="line"> </span><br><span class="line"><span class="string">This</span> <span class="string">will</span> <span class="string">download</span> <span class="string">and</span> <span class="string">install</span> <span class="string">the</span> <span class="string">official</span> <span class="string">compiler</span> <span class="string">for</span> <span class="string">the</span> <span class="string">Rust</span></span><br><span class="line"><span class="string">programming</span> <span class="string">language,</span> <span class="string">and</span> <span class="string">its</span> <span class="string">package</span> <span class="string">manager,</span> <span class="string">Cargo.</span></span><br><span class="line"> </span><br><span class="line"><span class="string">Rustup</span> <span class="string">metadata</span> <span class="string">and</span> <span class="string">toolchains</span> <span class="string">will</span> <span class="string">be</span> <span class="string">installed</span> <span class="string">into</span> <span class="string">the</span> <span class="string">Rustup</span></span><br><span class="line"><span class="string">home</span> <span class="string">directory,</span> <span class="attr">located at:</span></span><br><span class="line"> </span><br><span class="line">  <span class="string">/home/ayka_tsuzuki/.rustup</span></span><br><span class="line"> </span><br><span class="line"><span class="string">This</span> <span class="string">can</span> <span class="string">be</span> <span class="string">modified</span> <span class="string">with</span> <span class="string">the</span> <span class="string">RUSTUP_HOME</span> <span class="string">environment</span> <span class="string">variable.</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">The Cargo home directory located at:</span></span><br><span class="line"> </span><br><span class="line">  <span class="string">/home/ayka_tsuzuki/.cargo</span></span><br><span class="line"> </span><br><span class="line"><span class="string">This</span> <span class="string">can</span> <span class="string">be</span> <span class="string">modified</span> <span class="string">with</span> <span class="string">the</span> <span class="string">CARGO_HOME</span> <span class="string">environment</span> <span class="string">variable.</span></span><br><span class="line"> </span><br><span class="line"><span class="string">The</span> <span class="string">cargo,</span> <span class="string">rustc,</span> <span class="string">rustup</span> <span class="string">and</span> <span class="string">other</span> <span class="string">commands</span> <span class="string">will</span> <span class="string">be</span> <span class="string">added</span> <span class="string">to</span></span><br><span class="line"><span class="string">Cargo's</span> <span class="string">bin</span> <span class="string">directory,</span> <span class="attr">located at:</span></span><br><span class="line"> </span><br><span class="line">  <span class="string">/home/ayka_tsuzuki/.cargo/bin</span></span><br><span class="line"> </span><br><span class="line"><span class="string">This</span> <span class="string">path</span> <span class="string">will</span> <span class="string">then</span> <span class="string">be</span> <span class="string">added</span> <span class="string">to</span> <span class="string">your</span> <span class="string">PATH</span> <span class="string">environment</span> <span class="string">variable</span> <span class="string">by</span></span><br><span class="line"><span class="attr">modifying the profile files located at:</span></span><br><span class="line"> </span><br><span class="line">  <span class="string">/home/ayka_tsuzuki/.profile</span></span><br><span class="line">  <span class="string">/home/ayka_tsuzuki/.zprofile</span></span><br><span class="line"> </span><br><span class="line"><span class="string">You</span> <span class="string">can</span> <span class="string">uninstall</span> <span class="string">at</span> <span class="string">any</span> <span class="string">time</span> <span class="string">with</span> <span class="string">rustup</span> <span class="string">self</span> <span class="string">uninstall</span> <span class="string">and</span></span><br><span class="line"><span class="string">these</span> <span class="string">changes</span> <span class="string">will</span> <span class="string">be</span> <span class="string">reverted.</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">Current installation options:</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">   <span class="attr">default host triple:</span> <span class="string">x86_64-unknown-linux-gnu</span></span><br><span class="line">     <span class="attr">default toolchain:</span> <span class="string">stable</span> <span class="string">(default)</span></span><br><span class="line">               <span class="attr">profile:</span> <span class="string">default</span></span><br><span class="line">  <span class="attr">modify PATH variable:</span> <span class="literal">yes</span></span><br><span class="line"> </span><br><span class="line"><span class="number">1</span><span class="string">)</span> <span class="string">Proceed</span> <span class="string">with</span> <span class="string">installation</span> <span class="string">(default)</span></span><br><span class="line"><span class="number">2</span><span class="string">)</span> <span class="string">Customize</span> <span class="string">installation</span></span><br><span class="line"><span class="number">3</span><span class="string">)</span> <span class="string">Cancel</span> <span class="string">installation</span></span><br><span class="line"><span class="string">&gt;1</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">info:</span> <span class="string">profile</span> <span class="string">set</span> <span class="string">to</span> <span class="string">'default'</span></span><br><span class="line"><span class="attr">info:</span> <span class="string">default</span> <span class="string">host</span> <span class="string">triple</span> <span class="string">is</span> <span class="string">x86_64-unknown-linux-gnu</span></span><br><span class="line"><span class="attr">info:</span> <span class="string">syncing</span> <span class="string">channel</span> <span class="string">updates</span> <span class="string">for</span> <span class="string">'stable-x86_64-unknown-linux-gnu'</span></span><br><span class="line"><span class="number">462.8</span> <span class="string">KiB</span> <span class="string">/</span> <span class="number">462.8</span> <span class="string">KiB</span> <span class="string">(100</span> <span class="string">%)</span> <span class="attr">416.0 KiB/s in  1s ETA:</span>  <span class="string">0s</span></span><br><span class="line"><span class="attr">info:</span> <span class="string">latest</span> <span class="string">update</span> <span class="string">on</span> <span class="number">2020-08-03</span><span class="string">,</span> <span class="string">rust</span> <span class="string">version</span> <span class="number">1.45</span><span class="number">.2</span> <span class="string">(d3fb005a3</span> <span class="number">2020-07-31</span><span class="string">)</span></span><br><span class="line"><span class="attr">info:</span> <span class="string">downloading</span> <span class="string">component</span> <span class="string">'cargo'</span></span><br><span class="line"><span class="attr">info:</span> <span class="string">downloading</span> <span class="string">component</span> <span class="string">'clippy'</span></span><br><span class="line"><span class="attr">info:</span> <span class="string">downloading</span> <span class="string">component</span> <span class="string">'rust-docs'</span></span><br><span class="line"><span class="attr">info:</span> <span class="string">downloading</span> <span class="string">component</span> <span class="string">'rust-std'</span></span><br><span class="line"><span class="attr">info:</span> <span class="string">downloading</span> <span class="string">component</span> <span class="string">'rustc'</span></span><br><span class="line"><span class="attr">info:</span> <span class="string">downloading</span> <span class="string">component</span> <span class="string">'rustfmt'</span></span><br><span class="line"><span class="attr">info:</span> <span class="string">installing</span> <span class="string">component</span> <span class="string">'cargo'</span></span><br><span class="line"><span class="attr">info:</span> <span class="string">Defaulting</span> <span class="string">to</span> <span class="number">500.0</span> <span class="string">MiB</span> <span class="string">unpack</span> <span class="string">ram</span></span><br><span class="line"><span class="attr">info:</span> <span class="string">installing</span> <span class="string">component</span> <span class="string">'clippy'</span></span><br><span class="line"><span class="attr">info:</span> <span class="string">installing</span> <span class="string">component</span> <span class="string">'rust-docs'</span></span><br><span class="line"> <span class="number">12.2</span> <span class="string">MiB</span> <span class="string">/</span>  <span class="number">12.2</span> <span class="string">MiB</span> <span class="string">(100</span> <span class="string">%)</span> <span class="attr">459.2 KiB/s in 16s ETA:</span>  <span class="string">0s</span></span><br><span class="line"><span class="attr">info:</span> <span class="string">installing</span> <span class="string">component</span> <span class="string">'rust-std'</span></span><br><span class="line"> <span class="number">15.9</span> <span class="string">MiB</span> <span class="string">/</span>  <span class="number">15.9</span> <span class="string">MiB</span> <span class="string">(100</span> <span class="string">%)</span>  <span class="attr">11.8 MiB/s in  1s ETA:</span>  <span class="string">0s</span></span><br><span class="line"><span class="attr">info:</span> <span class="string">installing</span> <span class="string">component</span> <span class="string">'rustc'</span></span><br><span class="line"> <span class="number">47.1</span> <span class="string">MiB</span> <span class="string">/</span>  <span class="number">47.1</span> <span class="string">MiB</span> <span class="string">(100</span> <span class="string">%)</span>  <span class="attr">11.6 MiB/s in  4s ETA:</span>  <span class="string">0s</span></span><br><span class="line"><span class="attr">info:</span> <span class="string">installing</span> <span class="string">component</span> <span class="string">'rustfmt'</span></span><br><span class="line"><span class="attr">info:</span> <span class="string">default</span> <span class="string">toolchain</span> <span class="string">set</span> <span class="string">to</span> <span class="string">'stable'</span></span><br><span class="line"> </span><br><span class="line">  <span class="string">stable</span> <span class="string">installed</span> <span class="bullet">-</span> <span class="string">rustc</span> <span class="number">1.45</span><span class="number">.2</span> <span class="string">(d3fb005a3</span> <span class="number">2020-07-31</span><span class="string">)</span></span><br></pre></td></tr></tbody></table></figure>

<p>【注意：使用Vundle安装vim插件YCM（YouCompleteMe）时需要使用Rust编译安装会自动安装Rust也会出现该问题，也需使用该方法解决】</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>wsl</tag>
        <tag>rust</tag>
        <tag>vundle</tag>
        <tag>vim</tag>
      </tags>
  </entry>
  <entry>
    <title>go get golang.org包失败的解决方法（Windows Terminal设置proxy）</title>
    <url>/posts/33918.html</url>
    <content><![CDATA[<p>Windows在编译安装YCM时在下载安装Omnisharp结束后报错：</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line"><span class="builtin-name">Get</span> <span class="string">"https://proxy.golang.org/golang.org/x/tools/gopls/@v/v0.4.2.info"</span>: dial tcp 34.64.4.17:443: connectex: A<span class="built_in"> connection </span>attempt failed because the connected party did</span><br></pre></td></tr></tbody></table></figure>

<p>而在WSL Ubuntu中则没有这个问题，其原因是WSL Ubuntu已在zshrc文件中设置了proxy，而Windows中的proxy默认并不会给Terminal，所以需要手动配置。Linux中使用命令：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> http_proxy=http://proxyAddress:port</span><br><span class="line"><span class="built_in">export</span> https_proxy=http://proxyAddress:port</span><br></pre></td></tr></tbody></table></figure>

<p>CMD中使用命令：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">set</span> http_proxy=http://proxyAddress:port</span><br><span class="line"><span class="built_in">set</span> https_proxy=http://proxyAddress:port</span><br></pre></td></tr></tbody></table></figure>

<p>而在PowerShell中则使用命令：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$env</span>:http_proxy=http://proxyAddress:port</span><br><span class="line"><span class="variable">$env</span>:https_proxy=http://proxyAddress:port</span><br></pre></td></tr></tbody></table></figure>

<p>由于部分ladder不通过ss，所以也不能本地proxy，故</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line">netsh winhttp <span class="builtin-name">set</span><span class="built_in"> proxy </span>proxyaddress:port</span><br></pre></td></tr></tbody></table></figure>

<p>无效。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>go</tag>
        <tag>proxy</tag>
      </tags>
  </entry>
  <entry>
    <title>MSYS2快速配置C++环境+ZSH</title>
    <url>/posts/9923.html</url>
    <content><![CDATA[<ol>
<li><p>在<a href="https://www.msys2.org/">MSYS2官网</a>下载MSYS2并安装</p>
</li>
<li><p>换源。根据<a href="https://mirror.tuna.tsinghua.edu.cn/help/msys2/">清华大学开源软件镜像站MSYS2 镜像使用帮助</a>操作。</p>
</li>
<li><p>完成后运行</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">pacman -Syu</span><br></pre></td></tr></tbody></table></figure>



</li>
</ol>
<p>   会提示关闭MSYS2窗口。关闭后再次启动MSYS2并运行</p>
   <figure class="highlight ebnf"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">pacman -Su</span></span><br></pre></td></tr></tbody></table></figure>

<ol start="4">
<li><p>执行</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">pacman -S mingw-w64-x86_64-toolchain</span><br></pre></td></tr></tbody></table></figure>

<p>会安装下列软件仓库：</p>
<ol>
<li>mingw-w64-x86_64-binutils  2) mingw-w64-x86_64-crt-git</li>
<li>mingw-w64-x86_64-gcc  4) mingw-w64-x86_64-gcc-ada</li>
<li>mingw-w64-x86_64-gcc-fortran  6) mingw-w64-x86_64-gcc-libgfortran</li>
<li>mingw-w64-x86_64-gcc-libs  8) mingw-w64-x86_64-gcc-objc</li>
<li>mingw-w64-x86_64-gdb  10) mingw-w64-x86_64-headers-git</li>
<li>mingw-w64-x86_64-libmangle-git  12) mingw-w64-x86_64-libwinpthread-git</li>
<li>mingw-w64-x86_64-make  14) mingw-w64-x86_64-pkg-config</li>
<li>mingw-w64-x86_64-tools-git  16) mingw-w64-x86_64-winpthreads-git</li>
<li>mingw-w64-x86_64-winstorecompat-git<br>包括下列软件包：<br>mingw-w64-x86_64-bzip2-1.0.8-1<br>mingw-w64-x86_64-ca-certificates-20190110-1<br>mingw-w64-x86_64-expat-2.2.9-1  mingw-w64-x86_64-gettext-0.19.8.1-9<br>mingw-w64-x86_64-gmp-6.2.0-1  mingw-w64-x86_64-isl-0.22.1-1<br>mingw-w64-x86_64-libffi-3.3-1  mingw-w64-x86_64-libiconv-1.16-1<br>mingw-w64-x86_64-libsystre-1.0.1-4<br>mingw-w64-x86_64-libtasn1-4.16.0-1<br>mingw-w64-x86_64-libtre-git-r128.6fb7206-2<br>mingw-w64-x86_64-mpc-1.1.0-1  mingw-w64-x86_64-mpdecimal-2.5.0-1<br>mingw-w64-x86_64-mpfr-4.1.0-2  mingw-w64-x86_64-ncurses-6.2-1<br>mingw-w64-x86_64-openssl-1.1.1.g-1<br>mingw-w64-x86_64-p11-kit-0.23.20-2  mingw-w64-x86_64-python-3.8.5-1<br>mingw-w64-x86_64-readline-8.0.004-1<br>mingw-w64-x86_64-sqlite3-3.32.3-2  mingw-w64-x86_64-tcl-8.6.10-1<br>mingw-w64-x86_64-termcap-1.3.1-6  mingw-w64-x86_64-tk-8.6.10-1<br>mingw-w64-x86_64-windows-default-manifest-6.4-3<br>mingw-w64-x86_64-xxhash-0.7.4-1  mingw-w64-x86_64-xz-5.2.5-1<br>mingw-w64-x86_64-zlib-1.2.11-7  mingw-w64-x86_64-zstd-1.4.5-1<br>mingw-w64-x86_64-binutils-2.34-3<br>mingw-w64-x86_64-crt-git-8.0.0.5966.f5da805f-1<br>mingw-w64-x86_64-gcc-10.2.0-1  mingw-w64-x86_64-gcc-ada-10.2.0-1<br>mingw-w64-x86_64-gcc-fortran-10.2.0-1<br>mingw-w64-x86_64-gcc-libgfortran-10.2.0-1<br>mingw-w64-x86_64-gcc-libs-10.2.0-1<br>mingw-w64-x86_64-gcc-objc-10.2.0-1  mingw-w64-x86_64-gdb-9.2-1<br>mingw-w64-x86_64-headers-git-8.0.0.5966.f5da805f-1<br>mingw-w64-x86_64-libmangle-git-8.0.0.5573.a4de8df4-1<br>mingw-w64-x86_64-libwinpthread-git-8.0.0.5906.c9a21571-1<br>mingw-w64-x86_64-make-4.3-1  mingw-w64-x86_64-pkg-config-0.29.2-1<br>mingw-w64-x86_64-tools-git-8.0.0.5903.3310d459-1<br>mingw-w64-x86_64-winpthreads-git-8.0.0.5906.c9a21571-1<br>mingw-w64-x86_64-winstorecompat-git-8.0.0.5903.3310d459-1<br>下载大小：    132.55 MiB<br>全部安装大小：  897.89 MiB</li>
</ol>
</li>
<li><p>执行</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">pacman -S mingw-w64-x86_64-cmake mingw-w64-x86_64-extra-cmake-modules</span><br></pre></td></tr></tbody></table></figure>

<p>包含下列软件包：</p>
<pre><code>  mingw-w64-x86_64-brotli-1.0.7-4  mingw-w64-x86_64-c-ares-1.16.1-1
  mingw-w64-x86_64-curl-7.71.0-1  mingw-w64-x86_64-jansson-2.12-1
  mingw-w64-x86_64-jemalloc-5.2.1-1  mingw-w64-x86_64-jsoncpp-1.9.2-1
  mingw-w64-x86_64-libarchive-3.4.3-1
  mingw-w64-x86_64-libidn2-2.3.0-1
  mingw-w64-x86_64-libmetalink-0.1.3-3
  mingw-w64-x86_64-libpsl-0.21.0-2  mingw-w64-x86_64-libssh2-1.9.0-2
  mingw-w64-x86_64-libunistring-0.9.10-2
  mingw-w64-x86_64-libuv-1.38.0-1  mingw-w64-x86_64-lz4-1.9.2-1
  mingw-w64-x86_64-nettle-3.6-1  mingw-w64-x86_64-nghttp2-1.41.0-1
  mingw-w64-x86_64-png2ico-2002.12.08-2
  mingw-w64-x86_64-rhash-1.3.9-1  mingw-w64-x86_64-cmake-3.17.3-1
  mingw-w64-x86_64-extra-cmake-modules-5.68.0-1</code></pre>
<p>下载大小：    13.75 MiB<br>全部安装大小：  90.28 MiB</p>
</li>
<li><p>执行</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">pacman -S mingw-w64-x86_64-clang</span><br></pre></td></tr></tbody></table></figure>

<p>包含下列软件包：</p>
<pre><code>  mingw-w64-x86_64-llvm-10.0.1-1  mingw-w64-x86_64-z3-4.8.8-1
  mingw-w64-x86_64-clang-10.0.1-1</code></pre>
<p>下载大小：    459.23 MiB<br>全部安装大小：  2377.00 MiB</p>
</li>
<li><p>执行</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">pacman -S help2man man-db man-pages-posix</span><br></pre></td></tr></tbody></table></figure>

<p>包含下列软件包：</p>
<pre><code>  groff-1.22.4-1  libpipeline-1.5.2-1  perl-Locale-Gettext-1.07-6
  help2man-1.47.15-1  man-db-2.9.3-1  man-pages-posix-2013_a-1</code></pre>
<p>下载大小：    5.88 MiB<br>全部安装大小：  20.42 MiB</p>
</li>
<li><p>执行</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">pacman -S zsh git vim</span><br></pre></td></tr></tbody></table></figure>

<p>包含下列软件包：</p>
<pre><code>  expat-2.2.9-1  heimdal-7.7.0-1  libpcre16-8.44-1  libpcre32-8.44-1
  libpcrecpp-8.44-1  libpcreposix-8.44-1  openssh-8.3p1-1
  pcre-8.44-1  perl-Authen-SASL-2.16-2  perl-Clone-0.45-1
  perl-Convert-BinHex-1.125-1  perl-Encode-Locale-1.05-1
  perl-Error-0.17029-1  perl-File-Listing-6.04-2
  perl-HTML-Parser-3.72-6  perl-HTML-Tagset-3.20-2
  perl-HTTP-Cookies-6.08-1  perl-HTTP-Daemon-6.12-1
  perl-HTTP-Date-6.05-1  perl-HTTP-Message-6.25-2
  perl-HTTP-Negotiate-6.01-2  perl-IO-HTML-1.001-1
  perl-IO-Socket-SSL-2.068-1  perl-IO-Stringy-2.113-1
  perl-LWP-MediaTypes-6.04-1  perl-MIME-tools-5.509-1
  perl-MailTools-2.21-1  perl-Net-HTTP-6.19-1
  perl-Net-SMTP-SSL-1.04-1  perl-Net-SSLeay-1.89_01-2
  perl-TermReadKey-2.38-2  perl-TimeDate-2.33-1  perl-Try-Tiny-0.30-1
  perl-URI-1.76-1  perl-WWW-RobotRules-6.02-2  perl-libwww-6.46-1
  git-2.27.0-1  vim-8.2.0869-1  zsh-5.8-3</code></pre>
<p>下载大小：    19.44 MiB<br>全部安装大小：  102.94 MiB</p>
</li>
<li><p>（可选）在/etc/bash.bashrc中添加export http_proxy=”xxx”和export https_proxy=”xxx”。</p>
</li>
<li><p>修改/etc/nsswitch.conf中的db_home为windows或指定路径无效。在/etc/bash.bashrc中添加</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> HOME=/d/Documents/Programming/msyshome</span><br></pre></td></tr></tbody></table></figure>

<p>更改HOME目录。再添加</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span></span><br></pre></td></tr></tbody></table></figure>

<p>更改启动目录为~。参考<a href="https://stackoverflow.com/questions/33942924/how-to-change-home-directory-and-start-directory-on-msys2">How to change HOME directory and start directory on MSYS2?</a>。</p>
</li>
<li><p>在更改后的HOME目录下执行</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sh -c <span class="string">"<span class="subst">$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>"</span></span><br></pre></td></tr></tbody></table></figure>

<p>或</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sh -c <span class="string">"<span class="subst">$(wget https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh -O -)</span>"</span></span><br></pre></td></tr></tbody></table></figure>

<p>安装oh-my-zsh，然后在/etc/bash.bashrc中添加exec zsh。此时oh-my-zsh仍被安装在系统环境变量$HOME目录下。</p>
</li>
<li><p>生成passwd文件：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">/usr/bin/mkpasswd.exe &gt; /etc/passwd</span><br></pre></td></tr></tbody></table></figure>

<p>在msys2_shell.cmd中将</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">rem <span class="built_in">set</span> MSYS2_PATH_TYPE=inherit</span><br></pre></td></tr></tbody></table></figure>

<p>的rem去掉。由于Windows环境变量路径有空格，所以MSYS实际上无法使用。</p>
</li>
<li><p>（可选）将系统环境变量$HOME目录下的.oh-my-zsh文件夹移动到D:\Program_Files下，然后将.zshrc中的</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> ZSH=<span class="string">"/e/Cadence/SPB_Data/.oh-my-zsh"</span></span><br></pre></td></tr></tbody></table></figure>

<p>改为</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> ZSH=<span class="string">"/d/Program_Files/.oh-my-zsh"</span></span><br></pre></td></tr></tbody></table></figure>

<p>将MSYS Shell窗口的Options-&gt;Text-&gt;Font改为Powerline等字体，如JetBrains Mono。</p>
</li>
<li><p>将zshrc中的ZSH_THEME改为agnoster：ZSH_THEME=”agnoster”。</p>
</li>
<li><p>（可选）Windows Terminal配置：settings.json中的”profiles”下的”list”下添加</p>
<figure class="highlight 1c"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="string">"guid"</span>: <span class="string">"{957f95a7-9539-46b8-b052-df39de1f1282}"</span>,</span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"MSYS2"</span>,</span><br><span class="line">    <span class="string">"commandline"</span>: <span class="string">"D:\\Program_Files\\msys64\\msys2_shell.cmd -defterm -no-start -msys2"</span>,</span><br><span class="line">    <span class="string">"icon"</span>: <span class="string">"D:\\Program_Files\\msys64\\msys2.ico"</span></span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<p>（可选）ConEmu配置：Settings-&gt;General-&gt;Fonts更改字体；Settings-&gt;Startup-&gt;Tasks，{Bash::Msys2-64}中Commands默认为</p>
<figure class="highlight taggerscript"><table><tbody><tr><td class="code"><pre><span class="line">set CHERE_INVOKING=1 &amp; set "PATH=<span class="variable">%ConEmuDrive%</span><span class="symbol">\m</span>sys64<span class="symbol">\u</span>sr<span class="symbol">\b</span>in;<span class="variable">%PATH%</span>" &amp; <span class="variable">%ConEmuBaseDirShort%</span><span class="symbol">\c</span>onemu-msys2-64.exe -new_console:p <span class="variable">%ConEmuDrive%</span><span class="symbol">\m</span>sys64<span class="symbol">\u</span>sr<span class="symbol">\b</span>in<span class="symbol">\b</span>ash.exe --login -i -new_console:C:"<span class="variable">%ConEmuDrive%</span><span class="symbol">\m</span>sys64<span class="symbol">\m</span>sys2.ico"</span><br></pre></td></tr></tbody></table></figure>

<p>改为</p>
<figure class="highlight taggerscript"><table><tbody><tr><td class="code"><pre><span class="line">set HOME=D:<span class="symbol">\D</span>ocuments<span class="symbol">\P</span>rogramming<span class="symbol">\m</span>syshome &amp; set MSYS2_PATH_TYPE=inherit &amp; set MSYSTEM=mingw64 &amp; set "PATH=D:<span class="symbol">\P</span>rogram_Files<span class="symbol">\m</span>sys64<span class="symbol">\u</span>sr<span class="symbol">\b</span>in;<span class="variable">%PATH%</span>" &amp; <span class="variable">%ConEmuBaseDirShort%</span><span class="symbol">\c</span>onemu-msys2-64.exe -new_console:p D:<span class="symbol">\P</span>rogram_Files<span class="symbol">\m</span>sys64<span class="symbol">\u</span>sr<span class="symbol">\b</span>in<span class="symbol">\z</span>sh.exe --login -i -new_console:C:"D:<span class="symbol">\P</span>rogram_Files<span class="symbol">\m</span>sys64<span class="symbol">\m</span>sys2.ico"</span><br></pre></td></tr></tbody></table></figure>

<p>或新建{Msys2::MinGW64}，Commands为</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line"><span class="builtin-name">set</span> <span class="attribute">HOME</span>=D:\Documents\Programming\msyshome &amp; <span class="builtin-name">set</span> <span class="attribute">MSYS2_PATH_TYPE</span>=inherit &amp; <span class="builtin-name">set</span> <span class="attribute">MSYSTEM</span>=mingw64 &amp; <span class="builtin-name">set</span> <span class="string">"D=D:\Program_Files\msys64"</span> &amp; %D%\usr\bin\zsh --login -i -new_console:C:<span class="string">"%D%\msys2.ico"</span></span><br></pre></td></tr></tbody></table></figure>

<p>其中第一个set设置HOME确保使用指定HOME目录下的.zshrc（灵感来源于<a href="https://www.quora.com/How-do-I-change-HOME-directory-on-MSYS2">How do I change $HOME directory on MSYS2?</a>）；其他set命令部分参考了<a href="https://blog.csdn.net/hustlei/article/details/86688160">msys2使用conemu终端配置</a>。<br>（可选）Fluent Terminal设置：配置文件-&gt;新建。名称：MSYS2；可执行程序位置：D:\Program_Files\msys64\msys2_shell.cmd（如果点三个点选择只能选择exe文件，所以需要复制粘贴到文本框中）；工作目录：D:\Documents\Programming\msyshome；参数：-defterm -no-start -msys2；快捷键：自选。</p>
</li>
</ol>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>msys</tag>
        <tag>mingw</tag>
        <tag>pacman</tag>
        <tag>zsh</tag>
      </tags>
  </entry>
  <entry>
    <title>初配置WSL/Ubuntu时apt-get install g++等时出现依赖版本过高（Depends：but it is not going）的问题的解决方法</title>
    <url>/posts/54448.html</url>
    <content><![CDATA[<p>不要尝试一个个将依赖版本倒退回指定版本，因为根本没有用， 纯属浪费时间。不要使用网络上提供的源，该问题由于源的问题导致的（如某aliyun源的版本代号是xenial，属16.04LTS版本，在18.04LTS版本上将出现问题，18.04LTS对于的是bionic）。建议到<a href="https://mirror.tuna.tsinghua.edu.cn/help/ubuntu/%E4%B8%AD%E9%80%89%E5%AE%9A%E4%BD%A0%E6%89%80%E5%AE%89%E8%A3%85%E7%9A%84%E7%B3%BB%E7%BB%9F%E7%89%88%E6%9C%AC%E7%9A%84%E6%BA%90%E6%9B%B4%E6%8D%A2%E3%80%82%E6%8D%A2%E5%A5%BD%E5%90%8E%E8%AE%B0%E5%BE%97sudo">https://mirror.tuna.tsinghua.edu.cn/help/ubuntu/中选定你所安装的系统版本的源更换。换好后记得sudo</a> apt-get update然后sudo apt-get upgrade。这时再执行sudo apt-get install将没有问题。事实上，该问题还会导致SSL配置错误。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>WSL</tag>
        <tag>Ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title>WSL快速配置编译环境+ZSH</title>
    <url>/posts/59967.html</url>
    <content><![CDATA[<ol>
<li><p>在Microsoft Store中安装Ubuntu（为方便升级系统故不安装带版本号的Ubuntu）。控制面板\程序\程序和功能-&gt;启用或关闭Windows功能，勾选“适用于Linux的Windows子系统”。以管理员身份运行PowerShell执行</p>
<figure class="highlight ebnf"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux</span></span><br></pre></td></tr></tbody></table></figure>

<p>重启计算机。</p>
</li>
<li><p>对于WSL1，其根目录位于C:\Users&lt;username&gt;\AppData\Local\Packages\CanonicalGroupLimited.UbuntuonWindows_79rhkp1fndgsc\LocalState\rootfs。根据<a href="https://mirror.tuna.tsinghua.edu.cn/">清华大学开源软件镜像站</a>的<a href="https://mirror.tuna.tsinghua.edu.cn/help/ubuntu/">Ubuntu 镜像使用帮助</a>修改/etc/apt/sources.list，注意选择你的ubuntu版本为相应版本（如20.04 LTS）。</p>
</li>
<li><p>执行</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get upgrade</span><br></pre></td></tr></tbody></table></figure>

<p>更新。</p>
</li>
<li><p>执行</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sudo apt-get install cmake gcc clang gdb build-essential</span><br></pre></td></tr></tbody></table></figure>

<p>安装C++编译环境。</p>
</li>
<li><p>执行</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">wget https://raw.githubusercontent.com/JetBrains/clion-wsl/master/ubuntu_setup_env.sh &amp;&amp; bash ubuntu_setup_env.sh</span><br></pre></td></tr></tbody></table></figure>

<p>配置CLion。</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">ssh username@localhost -p2222</span><br></pre></td></tr></tbody></table></figure>

<p>设置SSH连接。参考<a href="https://www.jetbrains.com/help/clion/how-to-use-wsl-development-environment-in-clion.html#wsl-general%E3%80%82">https://www.jetbrains.com/help/clion/how-to-use-wsl-development-environment-in-clion.html#wsl-general。</a></p>
</li>
<li><p>WSL已预装vim、git、wget、curl、python3、perl等。执行</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sudo apt install nodejs npm</span><br></pre></td></tr></tbody></table></figure>

<p>安装node.js：<br>The following NEW packages will be installed:<br> binutils binutils-common binutils-x86-64-linux-gnu build-essential cpp cpp-9 dpkg-dev fakeroot g++ g++-9 gcc gcc-9<br> gcc-9-base gyp javascript-common libalgorithm-diff-perl libalgorithm-diff-xs-perl libalgorithm-merge-perl libasan5<br> libatomic1 libauthen-sasl-perl libbinutils libc-ares2 libc-dev-bin libc6-dev libcc1-0 libcrypt-dev libctf-nobfd0<br> libctf0 libdata-dump-perl libdpkg-perl libencode-locale-perl libfakeroot libfile-basedir-perl<br> libfile-desktopentry-perl libfile-fcntllock-perl libfile-listing-perl libfile-mimeinfo-perl libfont-afm-perl<br> libgcc-9-dev libgomp1 libhtml-form-perl libhtml-format-perl libhtml-parser-perl libhtml-tagset-perl<br> libhtml-tree-perl libhttp-cookies-perl libhttp-daemon-perl libhttp-date-perl libhttp-message-perl<br> libhttp-negotiate-perl libio-html-perl libio-socket-ssl-perl libio-stringy-perl libipc-system-simple-perl libisl22<br> libitm1 libjs-inherits libjs-is-typedarray libjs-psl libjs-typedarray-to-buffer liblsan0 liblwp-mediatypes-perl<br> liblwp-protocol-https-perl libmailtools-perl libmpc3 libnet-dbus-perl libnet-http-perl libnet-smtp-ssl-perl<br> libnet-ssleay-perl libnode-dev libnode64 libpython2-stdlib libpython2.7-minimal libpython2.7-stdlib libquadmath0<br> libssl-dev libstdc++-9-dev libtie-ixhash-perl libtimedate-perl libtry-tiny-perl libtsan0 libubsan1 liburi-perl<br> libuv1-dev libwww-perl libwww-robotrules-perl libx11-protocol-perl libxcursor1 libxml-parser-perl libxml-twig-perl<br> libxml-xpathengine-perl linux-libc-dev make manpages-dev node-abbrev node-ajv node-ansi node-ansi-align<br> node-ansi-regex node-ansi-styles node-ansistyles node-aproba node-archy node-are-we-there-yet node-asap node-asn1<br> node-assert-plus node-asynckit node-aws-sign2 node-aws4 node-balanced-match node-bcrypt-pbkdf node-bl node-bluebird<br> node-boxen node-brace-expansion node-builtin-modules node-builtins node-cacache node-call-limit node-camelcase<br> node-caseless node-chalk node-chownr node-ci-info node-cli-boxes node-cliui node-clone node-co node-color-convert<br> node-color-name node-colors node-columnify node-combined-stream node-concat-map node-concat-stream node-config-chain<br> node-configstore node-console-control-strings node-copy-concurrently node-core-util-is node-cross-spawn<br> node-crypto-random-string node-cyclist node-dashdash node-debug node-decamelize node-decompress-response<br> node-deep-extend node-defaults node-define-properties node-delayed-stream node-delegates node-detect-indent<br> node-detect-newline node-dot-prop node-duplexer3 node-duplexify node-ecc-jsbn node-editor node-encoding<br> node-end-of-stream node-err-code node-errno node-es6-promise node-escape-string-regexp node-execa node-extend<br> node-extsprintf node-fast-deep-equal node-find-up node-flush-write-stream node-forever-agent node-form-data<br> node-from2 node-fs-vacuum node-fs-write-stream-atomic node-fs.realpath node-function-bind node-gauge node-genfun<br> node-get-caller-file node-get-stream node-getpass node-glob node-got node-graceful-fs node-gyp node-har-schema<br> node-har-validator node-has-flag node-has-symbol-support-x node-has-to-string-tag-x node-has-unicode<br> node-hosted-git-info node-http-signature node-iconv-lite node-iferr node-import-lazy node-imurmurhash node-inflight<br> node-inherits node-ini node-invert-kv node-ip node-ip-regex node-is-npm node-is-obj node-is-object<br> node-is-path-inside node-is-plain-obj node-is-retry-allowed node-is-stream node-is-typedarray node-isarray<br> node-isexe node-isstream node-isurl node-jsbn node-json-parse-better-errors node-json-schema<br> node-json-schema-traverse node-json-stable-stringify node-json-stringify-safe node-jsonify node-jsonparse<br> node-jsonstream node-jsprim node-latest-version node-lazy-property node-lcid node-libnpx node-locate-path<br> node-lockfile node-lodash node-lodash-packages node-lowercase-keys node-lru-cache node-make-dir node-mem node-mime<br> node-mime-types node-mimic-fn node-mimic-response node-minimatch node-minimist node-mississippi node-mkdirp<br> node-move-concurrently node-ms node-mute-stream node-nopt node-normalize-package-data node-npm-bundled<br> node-npm-package-arg node-npm-run-path node-npmlog node-number-is-nan node-oauth-sign node-object-assign node-once<br> node-opener node-os-locale node-os-tmpdir node-osenv node-p-cancelable node-p-finally node-p-is-promise node-p-limit<br> node-p-locate node-p-timeout node-package-json node-parallel-transform node-path-exists node-path-is-absolute<br> node-path-is-inside node-performance-now node-pify node-prepend-http node-process-nextick-args node-promise-inflight<br> node-promise-retry node-promzard node-proto-list node-prr node-pseudomap node-psl node-pump node-pumpify<br> node-punycode node-qs node-qw node-rc node-read node-read-package-json node-readable-stream node-registry-auth-token<br> node-registry-url node-request node-require-directory node-require-main-filename node-resolve node-resolve-from<br> node-retry node-rimraf node-run-queue node-safe-buffer node-semver node-semver-diff node-set-blocking node-sha<br> node-shebang-command node-shebang-regex node-signal-exit node-slash node-slide node-sorted-object node-spdx-correct<br> node-spdx-exceptions node-spdx-expression-parse node-spdx-license-ids node-sshpk node-ssri node-stream-each<br> node-stream-iterate node-stream-shift node-strict-uri-encode node-string-decoder node-string-width node-strip-ansi<br> node-strip-eof node-strip-json-comments node-supports-color node-tar node-term-size node-text-table node-through<br> node-through2 node-timed-out node-tough-cookie node-tunnel-agent node-tweetnacl node-typedarray<br> node-typedarray-to-buffer node-uid-number node-unique-filename node-unique-string node-unpipe node-uri-js<br> node-url-parse-lax node-url-to-options node-util-deprecate node-uuid node-validate-npm-package-license<br> node-validate-npm-package-name node-verror node-wcwidth.js node-which node-which-module node-wide-align<br> node-widest-line node-wrap-ansi node-wrappy node-write-file-atomic node-xdg-basedir node-xtend node-y18n<br> node-yallist node-yargs node-yargs-parser nodejs nodejs-doc npm perl-openssl-defaults python-pkg-resources python2<br> python2-minimal python2.7 python2.7-minimal x11-xserver-utils xdg-utils<br>0 upgraded, 382 newly installed, 0 to remove and 23 not upgraded.<br>Need to get 59.1 MB of archives.<br>After this operation, 267 MB of additional disk space will be used.<br>使用npm config set命令</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npm.taobao.org</span><br><span class="line">npm config <span class="built_in">set</span> cache=<span class="string">"/mnt/d/Program_Files/node_cache"</span></span><br><span class="line">npm config <span class="built_in">set</span> prefix=<span class="string">"/mnt/d/Program_Files/npm/node_modules"</span></span><br></pre></td></tr></tbody></table></figure>

<p>设置registry、cache和prefix。此时metrics-registry = “<a href="https://registry.npm.taobao.org/&quot;%E3%80%82%E4%BD%BF%E7%94%A8">https://registry.npm.taobao.org/"。使用</a></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">npm install -g npm</span><br></pre></td></tr></tbody></table></figure>

<p>更新npm。</p>
</li>
<li><p>执行</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sudo apt install golang</span><br></pre></td></tr></tbody></table></figure>

<p>安装golang：<br>The following NEW packages will be installed:<br> binutils binutils-common binutils-x86-64-linux-gnu cpp cpp-9 g++ g++-9 gcc gcc-9 gcc-9-base golang golang-1.13<br> golang-1.13-doc golang-1.13-go golang-1.13-race-detector-runtime golang-1.13-src golang-doc golang-go<br> golang-race-detector-runtime golang-src libasan5 libatomic1 libbinutils libc-dev-bin libc6-dev libcc1-0 libcrypt-dev<br> libctf-nobfd0 libctf0 libdpkg-perl libfile-fcntllock-perl libgcc-9-dev libgomp1 libisl22 libitm1 liblsan0 libmpc3<br> libquadmath0 libstdc++-9-dev libtsan0 libubsan1 linux-libc-dev manpages-dev pkg-config<br>0 upgraded, 44 newly installed, 0 to remove and 23 not upgraded.<br>Need to get 102 MB of archives.<br>After this operation, 501 MB of additional disk space will be used.</p>
</li>
<li><p>执行</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">curl --proto <span class="string">'=https'</span> --tlsv1.2 -sSf https://sh.rustup.rs | sh</span><br></pre></td></tr></tbody></table></figure>

<p>安装Rust。</p>
</li>
<li><p>执行</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sudo apt install zsh</span><br></pre></td></tr></tbody></table></figure>

<p>安装ZSH。然后根据<a href="https://ohmyz.sh/%E5%AE%89%E8%A3%85oh-my-zsh%E3%80%82">https://ohmyz.sh/安装oh-my-zsh。</a></p>
</li>
<li><p>配置.zshrc：</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">ZSH</span>=<span class="string">"/home/ayka_tsuzuki/.oh-my-zsh"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$HOME</span>/bin:/usr/local/bin:$PATH</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$HOME</span>/.local/bin:/usr/local/bin:$PATH</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">RUSTUP_IO_THREADS</span>=1</span><br><span class="line"><span class="attribute">ZSH_THEME</span>=<span class="string">"agnoster_wsl"</span></span><br><span class="line"><span class="attribute">ZSH_DISABLE_COMPFIX</span>=<span class="string">"true</span></span><br><span class="line"><span class="string">plugins=(git zsh-syntax-highlighting zsh-autosuggestions)</span></span><br><span class="line"><span class="string">source <span class="variable">$ZSH</span>/oh-my-zsh.sh</span></span><br><span class="line"><span class="string">. "</span>/home/ayka_tsuzuki/.local/share/lscolors.sh"</span><br><span class="line"><span class="attribute">DEFAULT_USER</span>=<span class="string">"ayka_tsuzuki"</span></span><br><span class="line">eval `dircolors ~/dircolors.256dark</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">http_proxy</span>=http://127.0.0.1:11000</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">https_proxy</span>=http://127.0.0.1:11000</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">ftp_proxy</span>=http://127.0.0.1:11000</span><br><span class="line"><span class="comment"># eval "$(starship init zsh)"</span></span><br><span class="line"><span class="attribute">SSH_ENV</span>=<span class="string">"<span class="variable">$HOME</span>/.ssh/environment"</span></span><br><span class="line">function start_agent {</span><br><span class="line">        echo <span class="string">"Initialising new SSH agent..."</span></span><br><span class="line">        /usr/bin/ssh-agent | sed <span class="string">'s/^echo/#echo/'</span> &gt; <span class="string">"<span class="variable">${SSH_ENV}</span>"</span></span><br><span class="line">        echo succeeded</span><br><span class="line">        chmod 600 <span class="string">"<span class="variable">${SSH_ENV}</span>"</span></span><br><span class="line">        . <span class="string">"<span class="variable">${SSH_ENV}</span>"</span> &gt; /dev/<span class="literal">null</span></span><br><span class="line">        /usr/bin/ssh-add;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">if</span> [ -f <span class="string">"<span class="variable">${SSH_ENV}</span>"</span> ]; then</span><br><span class="line">        . <span class="string">"<span class="variable">${SSH_ENV}</span>"</span> &gt; /dev/<span class="literal">null</span></span><br><span class="line">        ps -ef | grep <span class="variable">${SSH_AGENT_PID}</span> | grep ssh-agent$ &gt; /dev/<span class="literal">null</span> || {</span><br><span class="line">        start_agent;</span><br><span class="line">        }</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">        start_agent;</span><br><span class="line">fi</span><br><span class="line">trap <span class="string">'test -n "$SSH_AGENT_PID" &amp;&amp; eval `/usr/bin/ssh-agent -k`'</span> 0</span><br></pre></td></tr></tbody></table></figure>

<p>其中安装插件<a href="https://github.com/zsh-users/zsh-autosuggestions">zsh-autosuggestions</a>步骤参考<a href="https://github.com/zsh-users/zsh-autosuggestions/blob/master/INSTALL.md%EF%BC%9A%E5%9C%A8$ZSH_CUSTOM/plugins%EF%BC%88%E9%BB%98%E8%AE%A4%E4%B8%BA~/.oh-my-zsh/custom/plugins%EF%BC%89%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%89%A7%E8%A1%8C">https://github.com/zsh-users/zsh-autosuggestions/blob/master/INSTALL.md：在$ZSH_CUSTOM/plugins（默认为~/.oh-my-zsh/custom/plugins）目录下执行</a></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-autosuggestions <span class="variable">${ZSH_CUSTOM:-~/.oh-my-zsh/custom}</span>/plugins/zsh-autosuggestions</span><br></pre></td></tr></tbody></table></figure>

<p>安装插件<a href="https://github.com/zsh-users/zsh-syntax-highlighting">zsh-syntax-highlighting</a>步骤参考<a href="https://github.com/zsh-users/zsh-syntax-highlighting/blob/master/INSTALL.md%EF%BC%9A%E5%9C%A8$ZSH_CUSTOM/plugins%EF%BC%88%E9%BB%98%E8%AE%A4%E4%B8%BA~/.oh-my-zsh/custom/plugins%EF%BC%89%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%89%A7%E8%A1%8C">https://github.com/zsh-users/zsh-syntax-highlighting/blob/master/INSTALL.md：在$ZSH_CUSTOM/plugins（默认为~/.oh-my-zsh/custom/plugins）目录下执行</a></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-syntax-highlighting.git <span class="variable">${ZSH_CUSTOM:-~/.oh-my-zsh/custom}</span>/plugins/zsh-syntax-highlighting</span><br></pre></td></tr></tbody></table></figure>

<p>安装Starship参考<a href="https://blog.csdn.net/yihuajack/article/details/105139067">WSL Ubuntu使用Cargo安装Starship</a>。<br>使用自定义主题：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">cp ~/.oh-my-zsh/theme/agnoster.zsh-theme ~/.oh-my-zsh/custom/theme/agnoster_wsl.zsh-theme</span><br><span class="line">vim ~/.oh-my-zsh/custom/theme/agnoster_wsl.zsh-theme</span><br></pre></td></tr></tbody></table></figure>

<p>将</p>
<figure class="highlight stylus"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">prompt_dir</span><span class="params">()</span></span> {</span><br><span class="line">  prompt_segment blue <span class="variable">$CURRENT_FG</span> <span class="string">'%~'</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>blue改为0.75。参考<a href="https://www.jianshu.com/p/37f392355af1">WSL 使用 oh-my-zsh 让终端更美 Edwinpanzzz</a>。</p>
</li>
<li><p>（可选）Windows Terminal配置：settings.json中的”profiles”下的”list”下添加</p>
<figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">"guid"</span>: <span class="string">"{2c4de342-38b7-51cf-b940-2309a097f518}"</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"Ubuntu"</span>,</span><br><span class="line">    <span class="attr">"source"</span>: <span class="string">"Windows.Terminal.Wsl"</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>（可选）Fluent Terminal设置：配置文件-&gt;新建。名称：WSL；可执行程序位置：C:\windows\system32\wsl.exe；环境变量：TERM xterm-256color。该设置为默认设置。<br>（可选）ConEmu配置：参考GitHub <a href="https://github.com/ConEmu">ConEmu</a>/<a href="https://github.com/ConEmu/ConEmu.github.io">ConEmu.github.io</a>库Issue #45 <a href="https://github.com/ConEmu/ConEmu.github.io/issues/45">Failed to run WSL on ConEmu</a>。</p>
</li>
</ol>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
        <tag>wsl</tag>
        <tag>zsh</tag>
      </tags>
  </entry>
  <entry>
    <title>Cygwin快速配置C++环境+ZSH</title>
    <url>/posts/1017.html</url>
    <content><![CDATA[<ol>
<li><p><a href="http://www.cygwin.com/">Cygwin官网</a>下载<a href="http://www.cygwin.com/setup-x86_64.exe">setup-x86_64.exe</a>并安装。选择Install from Internet、Use System Proxy Settings，在User URL中Add <a href="http://mirrors.aliyun.com/cygwin/%E3%80%82">http://mirrors.aliyun.com/cygwin/。</a></p>
</li>
<li><p>安装gcc-core、gcc-g++、make、gdb、binutils、python38、cmake、man-db、nano、openssl、libssl1.1、libstdc++6、vim、wget、xz、curl、git、perl、openssh、mintty、zsh等。</p>
</li>
<li><p>/etc/bash.bashrc添加</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">HOME=<span class="string">"/cygdrive/d/Documents/Programming/cygwinhome"</span></span><br><span class="line">PATH=<span class="string">"/usr/local/bin:/usr/bin"</span></span><br><span class="line"><span class="built_in">cd</span></span><br><span class="line"><span class="built_in">exec</span> zsh</span><br></pre></td></tr></tbody></table></figure>

<p>/etc/nsswitch.conf取消db_home注释并改为</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">db_home:  /cygdrive/d/Documents/Programming/cygwinhome</span><br></pre></td></tr></tbody></table></figure>

<p>/etc/profile添加</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">HOME=<span class="string">"/cygdrive/d/Documents/Programming/cygwinhome"</span></span><br></pre></td></tr></tbody></table></figure>

<p>将.zshrc放在D:\Documents\Programming\cygwinhome中，改为</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> ZSH=<span class="string">"/cygdrive/d/Program_Files/.oh-my-zsh"</span></span><br><span class="line">ZSH_THEME=<span class="string">"agnoster"</span></span><br></pre></td></tr></tbody></table></figure>

<p>参考<a href="https://stackoverflow.com/questions/1494658/how-can-i-change-my-cygwin-home-folder-after-installation">How can I change my Cygwin home folder after installation?</a>、<a href="https://cygwin.com/cygwin-ug-net/ntsec.html#ntsec-mapping-nsswitch-syntax%E5%8F%8A[Cygwin%E5%A6%82%E4%BD%95%E6%9B%B4%E6%94%B9HOME%E7%9B%AE%E5%BD%95%EF%BC%88MSYS2%E5%92%8CCygwin">https://cygwin.com/cygwin-ug-net/ntsec.html#ntsec-mapping-nsswitch-syntax及[Cygwin如何更改HOME目录（MSYS2和Cygwin</a> ZSH冲突）](<a href="https://blog.csdn.net/yihuajack/article/details/105249209)%E3%80%82">https://blog.csdn.net/yihuajack/article/details/105249209)。</a></p>
</li>
<li><p>Cygwin Terminal窗口Options-&gt;Text-&gt;Font更改字体。</p>
</li>
<li><p>（可选）Windows Terminal配置：settings.json中的”profiles”下的”list”下添加</p>
<figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">"guid"</span>: <span class="string">"{3bf9cb4f-ac0a-49ee-8002-f11a648c0ea2}"</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"Cygwin64"</span>,</span><br><span class="line">    <span class="attr">"commandline"</span>: <span class="string">"D:\\Program_Files\\cygwin64\\bin\\bash.exe"</span>,</span><br><span class="line">    <span class="attr">"icon"</span>: <span class="string">"D:\\Program_Files\\cygwin64\\Cygwin.ico"</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>（可选）ConEmu配置：Settings-&gt;General-&gt;Fonts更改字体；Settings-&gt;Startup-&gt;Tasks，{Bash:CygWin bash}中Commands默认为</p>
<figure class="highlight taggerscript"><table><tbody><tr><td class="code"><pre><span class="line">set CHERE_INVOKING=1 &amp; set "PATH=<span class="variable">%ConEmuDrive%</span><span class="symbol">\P</span>rogram_Files<span class="symbol">\c</span>ygwin64<span class="symbol">\b</span>in;<span class="variable">%PATH%</span>" &amp; <span class="variable">%ConEmuBaseDirShort%</span><span class="symbol">\c</span>onemu-cyg-64.exe -new_console:p <span class="variable">%ConEmuDrive%</span><span class="symbol">\P</span>rogram_Files<span class="symbol">\c</span>ygwin64<span class="symbol">\b</span>in<span class="symbol">\b</span>ash.exe --login -i -new_console:C:"<span class="variable">%ConEmuDrive%</span><span class="symbol">\P</span>rogram_Files<span class="symbol">\c</span>ygwin64<span class="symbol">\C</span>ygwin.ico"</span><br></pre></td></tr></tbody></table></figure>

<p>（可选）Fluent Terminal设置：配置文件-&gt;新建。名称：Cygwin；可执行程序位置：D:\Program_Files\cygwin64\bin\bash.exe；工作目录：D:\Documents\Programming\cygwinhome；快捷键：自选。</p>
</li>
</ol>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>cygwin</tag>
        <tag>zsh</tag>
      </tags>
  </entry>
  <entry>
    <title>Python3 venv没反应或错误的原因</title>
    <url>/posts/7210.html</url>
    <content><![CDATA[<p>进入venv文件夹，执行</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">.\bin\activate</span><br></pre></td></tr></tbody></table></figure>

<p>后出现错误或没有反应，zsh效果中venv目录显示为红色及叉号，发现Python 3.8中创建的venv与之前版本的venv有所不同，之前版本的venv下python.exe等文件在Scripts下，且使用activate.bat激活，但是在该venv中有新文件夹bin包括python.exe等文件，而取代了原来的Scripts。</p>
<p>参考<a href="https://docs.python.org/3.8/library/venv.html">venv — Creation of virtual environments</a>，<br><img src="/posts/7210/Documents\Programming\HexoBlog\source_posts\CSDN补档-42\20200910165229454.png" alt="img"><br>如果在PowerShell或PowerShell Core环境中使用Python venv，应执行Activate.ps1文件。激活venv后依旧显示错误，查看venv目录下的pyvenv.cfg：</p>
<figure class="highlight ini"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">home</span> = D:\Program_Files\msys64\mingw\bin</span><br><span class="line"><span class="attr">include-system-site-packages</span> = <span class="literal">false</span></span><br><span class="line"><span class="attr">version</span> = <span class="number">3.8</span>.<span class="number">5</span></span><br></pre></td></tr></tbody></table></figure>

<p>这是由于使用了msys2中的mingw64中的python和Windows的python环境变量混淆所致，需删除msys2的环境变量并重新生成venv，发现使用PowerShell Core生成的venv亦为原先的Include、Libs、Scripts三文件夹，在没有该路径的环境变量的情况下重新生成venv环境，查看pyvenv.cfg为：</p>
<figure class="highlight ini"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">home</span> = D:\Program_Files\Python38</span><br><span class="line"><span class="attr">include-system-site-packages</span> = <span class="literal">false</span></span><br><span class="line"><span class="attr">version</span> = <span class="number">3.8</span>.<span class="number">5</span></span><br></pre></td></tr></tbody></table></figure>

<p>进入venv目录下使用</p>
<figure class="highlight reasonml"><table><tbody><tr><td class="code"><pre><span class="line">Scripts\<span class="module-access"><span class="module"><span class="identifier">Activate</span>.</span></span>ps1</span><br></pre></td></tr></tbody></table></figure>

<p>命令激活该venv，尽管仍有叉号，但可正常运行。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>powershell</tag>
        <tag>venv</tag>
      </tags>
  </entry>
  <entry>
    <title>pyinstaller报错FileNotFoundError：[WinError 3] 系统找不到指定的路径的解决方法</title>
    <url>/posts/21491.html</url>
    <content><![CDATA[<p>进入python venv环境，返回python项目所在路径，执行</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">pyinstaller setup.py</span><br></pre></td></tr></tbody></table></figure>

<p>或</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">pyinstaller -F setup.py</span><br></pre></td></tr></tbody></table></figure>

<p>给出以下信息：（不同环境运行会略有不同）</p>
<figure class="highlight latex"><table><tbody><tr><td class="code"><pre><span class="line">331 INFO: PyInstaller: 4.0</span><br><span class="line">333 INFO: Python: 3.8.5</span><br><span class="line">334 INFO: Platform: Windows-10-10.0.19041-SP0</span><br><span class="line">360 INFO: wrote D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">Python</span></span><span class="tag">\<span class="name">Canvas</span></span>-Syncer-Test<span class="tag">\<span class="name">setup</span></span>.spec</span><br><span class="line">396 INFO: UPX is not available.</span><br><span class="line">401 INFO: Extending PYTHONPATH with paths</span><br><span class="line">['D:<span class="tag">\<span class="name">\</span></span>Documents<span class="tag">\<span class="name">\</span></span>Programming<span class="tag">\<span class="name">\</span></span>Python<span class="tag">\<span class="name">\</span></span>Canvas-Syncer-Test',</span><br><span class="line"> 'D:<span class="tag">\<span class="name">\</span></span>Documents<span class="tag">\<span class="name">\</span></span>Programming<span class="tag">\<span class="name">\</span></span>Python<span class="tag">\<span class="name">\</span></span>Canvas-Syncer-Test']</span><br><span class="line">452 INFO: checking Analysis</span><br><span class="line">455 INFO: Building Analysis because Analysis-00.toc is non existent</span><br><span class="line">456 INFO: Initializing module dependency graph...</span><br><span class="line">475 INFO: Caching module graph hooks...</span><br><span class="line">526 INFO: Analyzing base_library.zip ...</span><br><span class="line">5147 INFO: Processing pre-find module path hook distutils from 'D:<span class="tag">\<span class="name">\</span></span>program_files<span class="tag">\<span class="name">\</span></span>venv<span class="tag">\<span class="name">\</span></span>lib<span class="tag">\<span class="name">\</span></span>python3.8<span class="tag">\<span class="name">\</span></span>site-packages<span class="tag">\<span class="name">\</span></span>PyInstaller<span class="tag">\<span class="name">\</span></span>hooks<span class="tag">\<span class="name">\</span></span>pre_fin</span><br><span class="line">d_module_path<span class="tag">\<span class="name">\</span></span>hook-distutils.py'.</span><br><span class="line">5152 INFO: distutils: retargeting to non-venv dir 'D:<span class="tag">\<span class="name">\</span></span>Program_Files<span class="tag">\<span class="name">\</span></span>msys64<span class="tag">\<span class="name">\</span></span>mingw64<span class="tag">\<span class="name">\</span></span>lib<span class="tag">\<span class="name">\</span></span>python3.8'</span><br><span class="line">9536 INFO: Caching module dependency graph...</span><br><span class="line">9765 INFO: running Analysis Analysis-00.toc</span><br><span class="line">9769 INFO: Adding Microsoft.Windows.Common-Controls to dependent assemblies of final executable</span><br><span class="line">  required by d:<span class="tag">\<span class="name">program</span></span>_files<span class="tag">\<span class="name">venv</span></span><span class="tag">\<span class="name">bin</span></span><span class="tag">\<span class="name">python</span></span>3.exe</span><br><span class="line">9879 INFO: Analyzing D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">Python</span></span><span class="tag">\<span class="name">Canvas</span></span>-Syncer-Test<span class="tag">\<span class="name">setup</span></span>.py</span><br><span class="line">10262 INFO: Processing pre-find module path hook site from 'D:<span class="tag">\<span class="name">\</span></span>program_files<span class="tag">\<span class="name">\</span></span>venv<span class="tag">\<span class="name">\</span></span>lib<span class="tag">\<span class="name">\</span></span>python3.8<span class="tag">\<span class="name">\</span></span>site-packages<span class="tag">\<span class="name">\</span></span>PyInstaller<span class="tag">\<span class="name">\</span></span>hooks<span class="tag">\<span class="name">\</span></span>pre_find_mo</span><br><span class="line">dule_path<span class="tag">\<span class="name">\</span></span>hook-site.py'.</span><br><span class="line">10264 INFO: site: retargeting to fake-dir 'D:<span class="tag">\<span class="name">\</span></span>program_files<span class="tag">\<span class="name">\</span></span>venv<span class="tag">\<span class="name">\</span></span>lib<span class="tag">\<span class="name">\</span></span>python3.8<span class="tag">\<span class="name">\</span></span>site-packages<span class="tag">\<span class="name">\</span></span>PyInstaller<span class="tag">\<span class="name">\</span></span>fake-modules'</span><br><span class="line">11513 INFO: Processing pre-safe import module hook setuptools.extern.six.moves from 'D:<span class="tag">\<span class="name">\</span></span>program_files<span class="tag">\<span class="name">\</span></span>venv<span class="tag">\<span class="name">\</span></span>lib<span class="tag">\<span class="name">\</span></span>python3.8<span class="tag">\<span class="name">\</span></span>site-packages<span class="tag">\<span class="name">\</span></span>PyInst</span><br><span class="line">aller<span class="tag">\<span class="name">\</span></span>hooks<span class="tag">\<span class="name">\</span></span>pre_safe_import_module<span class="tag">\<span class="name">\</span></span>hook-setuptools.extern.six.moves.py'.</span><br><span class="line">12981 INFO: Processing module hooks...</span><br><span class="line">12985 INFO: Loading module hook 'hook-distutils.py' from 'D:<span class="tag">\<span class="name">\</span></span>program_files<span class="tag">\<span class="name">\</span></span>venv<span class="tag">\<span class="name">\</span></span>lib<span class="tag">\<span class="name">\</span></span>python3.8<span class="tag">\<span class="name">\</span></span>site-packages<span class="tag">\<span class="name">\</span></span>PyInstaller<span class="tag">\<span class="name">\</span></span>hooks'...</span><br><span class="line">12994 INFO: Loading module hook 'hook-encodings.py' from 'D:<span class="tag">\<span class="name">\</span></span>program_files<span class="tag">\<span class="name">\</span></span>venv<span class="tag">\<span class="name">\</span></span>lib<span class="tag">\<span class="name">\</span></span>python3.8<span class="tag">\<span class="name">\</span></span>site-packages<span class="tag">\<span class="name">\</span></span>PyInstaller<span class="tag">\<span class="name">\</span></span>hooks'...</span><br><span class="line">13438 INFO: Loading module hook 'hook-lib2to3.py' from 'D:<span class="tag">\<span class="name">\</span></span>program_files<span class="tag">\<span class="name">\</span></span>venv<span class="tag">\<span class="name">\</span></span>lib<span class="tag">\<span class="name">\</span></span>python3.8<span class="tag">\<span class="name">\</span></span>site-packages<span class="tag">\<span class="name">\</span></span>PyInstaller<span class="tag">\<span class="name">\</span></span>hooks'...</span><br><span class="line">14037 INFO: Loading module hook 'hook-pkg_resources.py' from 'D:<span class="tag">\<span class="name">\</span></span>program_files<span class="tag">\<span class="name">\</span></span>venv<span class="tag">\<span class="name">\</span></span>lib<span class="tag">\<span class="name">\</span></span>python3.8<span class="tag">\<span class="name">\</span></span>site-packages<span class="tag">\<span class="name">\</span></span>PyInstaller<span class="tag">\<span class="name">\</span></span>hooks'...</span><br><span class="line">15096 INFO: Processing pre-safe import module hook win32com from 'D:<span class="tag">\<span class="name">\</span></span>program_files<span class="tag">\<span class="name">\</span></span>venv<span class="tag">\<span class="name">\</span></span>lib<span class="tag">\<span class="name">\</span></span>python3.8<span class="tag">\<span class="name">\</span></span>site-packages<span class="tag">\<span class="name">\</span></span>_pyinstaller_hooks_contri</span><br><span class="line">b<span class="tag">\<span class="name">\</span></span>hooks<span class="tag">\<span class="name">\</span></span>pre_safe_import_module<span class="tag">\<span class="name">\</span></span>hook-win32com.py'.</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File "&lt;string&gt;", line 2, in &lt;module&gt;</span><br><span class="line">ModuleNotFoundError: No module named 'win32com'</span><br><span class="line">15216 INFO: Processing pre-safe import module hook win32com from 'D:<span class="tag">\<span class="name">\</span></span>program_files<span class="tag">\<span class="name">\</span></span>venv<span class="tag">\<span class="name">\</span></span>lib<span class="tag">\<span class="name">\</span></span>python3.8<span class="tag">\<span class="name">\</span></span>site-packages<span class="tag">\<span class="name">\</span></span>_pyinstaller_hooks_contri</span><br><span class="line">b<span class="tag">\<span class="name">\</span></span>hooks<span class="tag">\<span class="name">\</span></span>pre_safe_import_module<span class="tag">\<span class="name">\</span></span>hook-win32com.py'.</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File "&lt;string&gt;", line 2, in &lt;module&gt;</span><br><span class="line">ModuleNotFoundError: No module named 'win32com'</span><br><span class="line">15407 WARNING: Hidden import "pkg_resources.markers" not found!</span><br><span class="line">15410 INFO: Excluding import '__main__'</span><br><span class="line">15416 INFO:   Removing import of __main__ from module pkg_resources</span><br><span class="line">15422 INFO: Loading module hook 'hook-setuptools.py' from 'D:<span class="tag">\<span class="name">\</span></span>program_files<span class="tag">\<span class="name">\</span></span>venv<span class="tag">\<span class="name">\</span></span>lib<span class="tag">\<span class="name">\</span></span>python3.8<span class="tag">\<span class="name">\</span></span>site-packages<span class="tag">\<span class="name">\</span></span>PyInstaller<span class="tag">\<span class="name">\</span></span>hooks'...</span><br><span class="line">16977 INFO: Loading module hook 'hook-sysconfig.py' from 'D:<span class="tag">\<span class="name">\</span></span>program_files<span class="tag">\<span class="name">\</span></span>venv<span class="tag">\<span class="name">\</span></span>lib<span class="tag">\<span class="name">\</span></span>python3.8<span class="tag">\<span class="name">\</span></span>site-packages<span class="tag">\<span class="name">\</span></span>PyInstaller<span class="tag">\<span class="name">\</span></span>hooks'...</span><br><span class="line">16981 INFO: Loading module hook 'hook-xml.dom.domreg.py' from 'D:<span class="tag">\<span class="name">\</span></span>program_files<span class="tag">\<span class="name">\</span></span>venv<span class="tag">\<span class="name">\</span></span>lib<span class="tag">\<span class="name">\</span></span>python3.8<span class="tag">\<span class="name">\</span></span>site-packages<span class="tag">\<span class="name">\</span></span>PyInstaller<span class="tag">\<span class="name">\</span></span>hooks'...</span><br><span class="line">16984 INFO: Loading module hook 'hook-xml.etree.cElementTree.py' from 'D:<span class="tag">\<span class="name">\</span></span>program_files<span class="tag">\<span class="name">\</span></span>venv<span class="tag">\<span class="name">\</span></span>lib<span class="tag">\<span class="name">\</span></span>python3.8<span class="tag">\<span class="name">\</span></span>site-packages<span class="tag">\<span class="name">\</span></span>PyInstaller<span class="tag">\<span class="name">\</span></span>hooks'.</span><br><span class="line">..</span><br><span class="line">16986 INFO: Loading module hook 'hook-xml.py' from 'D:<span class="tag">\<span class="name">\</span></span>program_files<span class="tag">\<span class="name">\</span></span>venv<span class="tag">\<span class="name">\</span></span>lib<span class="tag">\<span class="name">\</span></span>python3.8<span class="tag">\<span class="name">\</span></span>site-packages<span class="tag">\<span class="name">\</span></span>PyInstaller<span class="tag">\<span class="name">\</span></span>hooks'...</span><br><span class="line">16996 INFO: Loading module hook 'hook-_tkinter.py' from 'D:<span class="tag">\<span class="name">\</span></span>program_files<span class="tag">\<span class="name">\</span></span>venv<span class="tag">\<span class="name">\</span></span>lib<span class="tag">\<span class="name">\</span></span>python3.8<span class="tag">\<span class="name">\</span></span>site-packages<span class="tag">\<span class="name">\</span></span>PyInstaller<span class="tag">\<span class="name">\</span></span>hooks'...</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File "D:<span class="tag">\<span class="name">Program</span></span>_Files<span class="tag">\<span class="name">msys</span></span>64<span class="tag">\<span class="name">mingw</span></span>64<span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">python</span></span>3.8<span class="tag">\<span class="name">runpy</span></span>.py", line 194, in _run_module_as_main</span><br><span class="line">    return _run_code(code, main_globals, None,</span><br><span class="line">  File "D:<span class="tag">\<span class="name">Program</span></span>_Files<span class="tag">\<span class="name">msys</span></span>64<span class="tag">\<span class="name">mingw</span></span>64<span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">python</span></span>3.8<span class="tag">\<span class="name">runpy</span></span>.py", line 87, in _run_code</span><br><span class="line">    exec(code, run_globals)</span><br><span class="line">  File "D:<span class="tag">\<span class="name">Program</span></span>_Files<span class="tag">\<span class="name">venv</span></span><span class="tag">\<span class="name">bin</span></span><span class="tag">\<span class="name">pyinstaller</span></span>.exe<span class="tag">\<span class="name">_</span></span>_main__.py", line 7, in &lt;module&gt;</span><br><span class="line">  File "D:<span class="tag">\<span class="name">program</span></span>_files<span class="tag">\<span class="name">venv</span></span><span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">python</span></span>3.8<span class="tag">\<span class="name">site</span></span>-packages<span class="tag">\<span class="name">PyInstaller</span></span><span class="tag">\<span class="name">_</span></span>_main__.py", line 114, in run</span><br><span class="line">    run_build(pyi_config, spec_file, **vars(args))</span><br><span class="line">  File "D:<span class="tag">\<span class="name">program</span></span>_files<span class="tag">\<span class="name">venv</span></span><span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">python</span></span>3.8<span class="tag">\<span class="name">site</span></span>-packages<span class="tag">\<span class="name">PyInstaller</span></span><span class="tag">\<span class="name">_</span></span>_main__.py", line 65, in run_build</span><br><span class="line">    PyInstaller.building.build_main.main(pyi_config, spec_file, **kwargs)</span><br><span class="line">  File "D:<span class="tag">\<span class="name">program</span></span>_files<span class="tag">\<span class="name">venv</span></span><span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">python</span></span>3.8<span class="tag">\<span class="name">site</span></span>-packages<span class="tag">\<span class="name">PyInstaller</span></span><span class="tag">\<span class="name">building</span></span><span class="tag">\<span class="name">build</span></span>_main.py", line 720, in main</span><br><span class="line">    build(specfile, kw.get('distpath'), kw.get('workpath'), kw.get('clean_build'))</span><br><span class="line">  File "D:<span class="tag">\<span class="name">program</span></span>_files<span class="tag">\<span class="name">venv</span></span><span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">python</span></span>3.8<span class="tag">\<span class="name">site</span></span>-packages<span class="tag">\<span class="name">PyInstaller</span></span><span class="tag">\<span class="name">building</span></span><span class="tag">\<span class="name">build</span></span>_main.py", line 667, in build</span><br><span class="line">    exec(code, spec_namespace)</span><br><span class="line">  File "D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">Python</span></span><span class="tag">\<span class="name">Canvas</span></span>-Syncer-Test<span class="tag">\<span class="name">setup</span></span>.spec", line 6, in &lt;module&gt;</span><br><span class="line">    a = Analysis(['setup.py'],</span><br><span class="line">  File "D:<span class="tag">\<span class="name">program</span></span>_files<span class="tag">\<span class="name">venv</span></span><span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">python</span></span>3.8<span class="tag">\<span class="name">site</span></span>-packages<span class="tag">\<span class="name">PyInstaller</span></span><span class="tag">\<span class="name">building</span></span><span class="tag">\<span class="name">build</span></span>_main.py", line 242, in __init__</span><br><span class="line">    self.__postinit__()</span><br><span class="line">  File "D:<span class="tag">\<span class="name">program</span></span>_files<span class="tag">\<span class="name">venv</span></span><span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">python</span></span>3.8<span class="tag">\<span class="name">site</span></span>-packages<span class="tag">\<span class="name">PyInstaller</span></span><span class="tag">\<span class="name">building</span></span><span class="tag">\<span class="name">datastruct</span></span>.py", line 160, in __postinit__</span><br><span class="line">    self.assemble()</span><br><span class="line">  File "D:<span class="tag">\<span class="name">program</span></span>_files<span class="tag">\<span class="name">venv</span></span><span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">python</span></span>3.8<span class="tag">\<span class="name">site</span></span>-packages<span class="tag">\<span class="name">PyInstaller</span></span><span class="tag">\<span class="name">building</span></span><span class="tag">\<span class="name">build</span></span>_main.py", line 419, in assemble</span><br><span class="line">    self.graph.process_post_graph_hooks()</span><br><span class="line">  File "D:<span class="tag">\<span class="name">program</span></span>_files<span class="tag">\<span class="name">venv</span></span><span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">python</span></span>3.8<span class="tag">\<span class="name">site</span></span>-packages<span class="tag">\<span class="name">PyInstaller</span></span><span class="tag">\<span class="name">depend</span></span><span class="tag">\<span class="name">analysis</span></span>.py", line 365, in process_post_graph_hooks</span><br><span class="line">    module_hook.post_graph()</span><br><span class="line">  File "D:<span class="tag">\<span class="name">program</span></span>_files<span class="tag">\<span class="name">venv</span></span><span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">python</span></span>3.8<span class="tag">\<span class="name">site</span></span>-packages<span class="tag">\<span class="name">PyInstaller</span></span><span class="tag">\<span class="name">depend</span></span><span class="tag">\<span class="name">imphook</span></span>.py", line 444, in post_graph</span><br><span class="line">    self._process_hook_func()</span><br><span class="line">  File "D:<span class="tag">\<span class="name">program</span></span>_files<span class="tag">\<span class="name">venv</span></span><span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">python</span></span>3.8<span class="tag">\<span class="name">site</span></span>-packages<span class="tag">\<span class="name">PyInstaller</span></span><span class="tag">\<span class="name">depend</span></span><span class="tag">\<span class="name">imphook</span></span>.py", line 463, in _process_hook_func</span><br><span class="line">    self._hook_module.hook(hook_api)</span><br><span class="line">  File "D:<span class="tag">\<span class="name">program</span></span>_files<span class="tag">\<span class="name">venv</span></span><span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">python</span></span>3.8<span class="tag">\<span class="name">site</span></span>-packages<span class="tag">\<span class="name">PyInstaller</span></span><span class="tag">\<span class="name">hooks</span></span><span class="tag">\<span class="name">hook</span></span>-_tkinter.py", line 251, in hook</span><br><span class="line">    hook_api.add_datas(_collect_tcl_tk_files(hook_api))</span><br><span class="line">  File "D:<span class="tag">\<span class="name">program</span></span>_files<span class="tag">\<span class="name">venv</span></span><span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">python</span></span>3.8<span class="tag">\<span class="name">site</span></span>-packages<span class="tag">\<span class="name">PyInstaller</span></span><span class="tag">\<span class="name">hooks</span></span><span class="tag">\<span class="name">hook</span></span>-_tkinter.py", line 212, in _collect_tcl_tk_files</span><br><span class="line">    _handle_broken_tcl_tk()</span><br><span class="line">  File "D:<span class="tag">\<span class="name">program</span></span>_files<span class="tag">\<span class="name">venv</span></span><span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">python</span></span>3.8<span class="tag">\<span class="name">site</span></span>-packages<span class="tag">\<span class="name">PyInstaller</span></span><span class="tag">\<span class="name">hooks</span></span><span class="tag">\<span class="name">hook</span></span>-_tkinter.py", line 42, in _handle_broken_tcl_tk</span><br><span class="line">    files = os.listdir(basedir)</span><br><span class="line">FileNotFoundError: [WinError 3] 系统找不到指定的路径。: 'D:<span class="tag">\<span class="name">\</span></span>Program_Files<span class="tag">\<span class="name">\</span></span>msys64<span class="tag">\<span class="name">\</span></span>mingw64<span class="tag">\<span class="name">\</span></span>tcl'</span><br></pre></td></tr></tbody></table></figure>

<p>tcl文件夹原本应处于Python38文件夹下，可见是路径错误。即使将D:\Program_Files\msys64\mingw64\bin路径从环境变量中移除后重启后问题依然存在，或者什么都不显示/执行。克隆pyinstaller库，找到PyInstaller\hooks\hook-_tkinter.py第41-42行：</p>
<figure class="highlight ini"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">basedir</span> = os.path.join(base_prefix, <span class="string">'tcl'</span>)</span><br><span class="line"><span class="attr">files</span> = os.listdir(basedir)</span><br></pre></td></tr></tbody></table></figure>

<p>此时将listdir将makedirs显然不合要求，发现base_prefix是从compat里import的，于是在PyInstaller\compat.py中找到第149-151行：</p>
<figure class="highlight lua"><table><tbody><tr><td class="code"><pre><span class="line">base_prefix = <span class="built_in">os</span>.<span class="built_in">path</span>.abspath(</span><br><span class="line">    getattr(sys, <span class="string">'real_prefix'</span>, getattr(sys, <span class="string">'base_prefix'</span>, sys.prefix))</span><br><span class="line">)</span><br></pre></td></tr></tbody></table></figure>

<p>可见其正确确认了venv的运行环境（可参考<a href="https://www.codenong.com/1871549/">确定Python是否在virtualenv中运行</a>），加之发现不管如何启动venv都有错误符号，于是根据另一篇文章<a href="https://blog.csdn.net/yihuajack/article/details/108518017">Python3 venv没反应或错误的原因</a>重新生成并激活了venv，安装最新development版本：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">pip install https://github.com/pyinstaller/pyinstaller/archive/develop.zip</span><br></pre></td></tr></tbody></table></figure>

<p>然后再执行pyinstaller命令，成功生成：</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">72 INFO: PyInstaller: 4.1.dev0</span><br><span class="line">72 INFO: Python: 3.8.5</span><br><span class="line">73 INFO: Platform: Windows-10-10.0.19041-SP0</span><br><span class="line">74 INFO: wrote D:\Documents\Programming\Python\Canvas-Syncer-Test\setup.spec</span><br><span class="line">80 INFO: UPX is not available.</span><br><span class="line">81 INFO: Extending PYTHONPATH <span class="keyword">with</span> paths</span><br><span class="line">[<span class="string">'D:\\Documents\\Programming\\Python\\Canvas-Syncer-Test'</span>,</span><br><span class="line"> <span class="string">'D:\\Documents\\Programming\\Python\\Canvas-Syncer-Test'</span>]</span><br><span class="line"><span class="number">88</span> INFO: checking Analysis</span><br><span class="line"><span class="number">88</span> INFO: Building Analysis because Analysis<span class="number">-00.</span>toc <span class="keyword">is</span> non existent</span><br><span class="line"><span class="number">89</span> INFO: Initializing <span class="keyword">module</span> dependency graph...</span><br><span class="line"><span class="number">91</span> INFO: <span class="keyword">Caching</span> <span class="keyword">module</span> graph hooks...</span><br><span class="line"><span class="number">104</span> INFO: Analyzing base_library.zip ...</span><br><span class="line"><span class="number">2120</span> INFO: Processing pre-find <span class="keyword">module</span> <span class="keyword">path</span> hook distutils <span class="keyword">from</span> <span class="string">'d:\\program_files\\venv\\lib\\site-packages\\PyInstaller\\hooks\\pre_find_module_path\\hook-distutils.py'</span>.</span><br><span class="line"><span class="number">2121</span> INFO: distutils: retargeting <span class="keyword">to</span> non-venv dir <span class="string">'D:\\Program_Files\\Python38\\lib'</span></span><br><span class="line"><span class="number">4015</span> INFO: <span class="keyword">Caching</span> <span class="keyword">module</span> dependency graph...</span><br><span class="line"><span class="number">4120</span> INFO: running Analysis Analysis<span class="number">-00.</span>toc</span><br><span class="line"><span class="number">4126</span> INFO: Adding Microsoft.Windows.Common-Controls <span class="keyword">to</span> dependent assemblies <span class="keyword">of</span> <span class="keyword">final</span> executable</span><br><span class="line">  <span class="keyword">required</span> <span class="keyword">by</span> d:\program_files\venv\scripts\python.exe</span><br><span class="line"><span class="number">4138</span> INFO: Analyzing D:\Documents\Programming\Python\Canvas-Syncer-<span class="keyword">Test</span>\setup.py</span><br><span class="line"><span class="number">4331</span> INFO: Processing pre-find <span class="keyword">module</span> <span class="keyword">path</span> hook site <span class="keyword">from</span> <span class="string">'d:\\program_files\\venv\\lib\\site-packages\\PyInstaller\\hooks\\pre_find_module_path\\hook-site.py'</span>.</span><br><span class="line"><span class="number">4332</span> INFO: site: retargeting <span class="keyword">to</span> fake-dir <span class="string">'d:\\program_files\\venv\\lib\\site-packages\\PyInstaller\\fake-modules'</span></span><br><span class="line"><span class="number">5043</span> INFO: Processing pre-<span class="keyword">safe</span> <span class="keyword">import</span> <span class="keyword">module</span> hook setuptools.extern.six.moves <span class="keyword">from</span> <span class="string">'d:\\program_files\\venv\\lib\\site-packages\\PyInstaller\\hooks\\pre_safe_import_module\\hook-setuptools.extern.six.moves.py'</span>.</span><br><span class="line"><span class="number">5569</span> INFO: Processing <span class="keyword">module</span> hooks...</span><br><span class="line"><span class="number">5570</span> INFO: Loading <span class="keyword">module</span> hook <span class="string">'hook-difflib.py'</span> <span class="keyword">from</span> <span class="string">'d:\\program_files\\venv\\lib\\site-packages\\PyInstaller\\hooks'</span>...</span><br><span class="line"><span class="number">5571</span> INFO: <span class="keyword">Excluding</span> <span class="keyword">import</span> <span class="string">'doctest'</span></span><br><span class="line"><span class="number">5572</span> INFO:   Removing <span class="keyword">import</span> <span class="keyword">of</span> doctest <span class="keyword">from</span> <span class="keyword">module</span> difflib</span><br><span class="line"><span class="number">5572</span> INFO: Loading <span class="keyword">module</span> hook <span class="string">'hook-distutils.py'</span> <span class="keyword">from</span> <span class="string">'d:\\program_files\\venv\\lib\\site-packages\\PyInstaller\\hooks'</span>...</span><br><span class="line"><span class="number">5574</span> INFO: Loading <span class="keyword">module</span> hook <span class="string">'hook-distutils.util.py'</span> <span class="keyword">from</span> <span class="string">'d:\\program_files\\venv\\lib\\site-packages\\PyInstaller\\hooks'</span>...</span><br><span class="line"><span class="number">5575</span> INFO: <span class="keyword">Excluding</span> <span class="keyword">import</span> <span class="string">'lib2to3.refactor'</span></span><br><span class="line"><span class="number">5576</span> INFO:   Removing <span class="keyword">import</span> <span class="keyword">of</span> lib2to3.refactor <span class="keyword">from</span> <span class="keyword">module</span> distutils.util</span><br><span class="line"><span class="number">5576</span> INFO: Loading <span class="keyword">module</span> hook <span class="string">'hook-encodings.py'</span> <span class="keyword">from</span> <span class="string">'d:\\program_files\\venv\\lib\\site-packages\\PyInstaller\\hooks'</span>...</span><br><span class="line"><span class="number">5671</span> INFO: Loading <span class="keyword">module</span> hook <span class="string">'hook-heapq.py'</span> <span class="keyword">from</span> <span class="string">'d:\\program_files\\venv\\lib\\site-packages\\PyInstaller\\hooks'</span>...</span><br><span class="line"><span class="number">5672</span> INFO: <span class="keyword">Excluding</span> <span class="keyword">import</span> <span class="string">'doctest'</span></span><br><span class="line"><span class="number">5673</span> INFO:   Removing <span class="keyword">import</span> <span class="keyword">of</span> doctest <span class="keyword">from</span> <span class="keyword">module</span> heapq</span><br><span class="line"><span class="number">5673</span> INFO: Loading <span class="keyword">module</span> hook <span class="string">'hook-lib2to3.py'</span> <span class="keyword">from</span> <span class="string">'d:\\program_files\\venv\\lib\\site-packages\\PyInstaller\\hooks'</span>...</span><br><span class="line"><span class="number">5838</span> INFO: Loading <span class="keyword">module</span> hook <span class="string">'hook-multiprocessing.util.py'</span> <span class="keyword">from</span> <span class="string">'d:\\program_files\\venv\\lib\\site-packages\\PyInstaller\\hooks'</span>...</span><br><span class="line"><span class="number">5839</span> INFO: <span class="keyword">Excluding</span> <span class="keyword">import</span> <span class="string">'test'</span></span><br><span class="line"><span class="number">5840</span> INFO:   Removing <span class="keyword">import</span> <span class="keyword">of</span> test.support <span class="keyword">from</span> <span class="keyword">module</span> multiprocessing.util</span><br><span class="line"><span class="number">5840</span> INFO:   Removing <span class="keyword">import</span> <span class="keyword">of</span> <span class="keyword">test</span> <span class="keyword">from</span> <span class="keyword">module</span> multiprocessing.util</span><br><span class="line"><span class="number">5840</span> INFO: Loading <span class="keyword">module</span> hook <span class="string">'hook-pickle.py'</span> <span class="keyword">from</span> <span class="string">'d:\\program_files\\venv\\lib\\site-packages\\PyInstaller\\hooks'</span>...</span><br><span class="line"><span class="number">5841</span> INFO: <span class="keyword">Excluding</span> <span class="keyword">import</span> <span class="string">'argparse'</span></span><br><span class="line"><span class="number">5842</span> INFO:   Removing <span class="keyword">import</span> <span class="keyword">of</span> argparse <span class="keyword">from</span> <span class="keyword">module</span> pickle</span><br><span class="line"><span class="number">5842</span> INFO: Loading <span class="keyword">module</span> hook <span class="string">'hook-pkg_resources.py'</span> <span class="keyword">from</span> <span class="string">'d:\\program_files\\venv\\lib\\site-packages\\PyInstaller\\hooks'</span>...</span><br><span class="line"><span class="number">6260</span> INFO: Processing pre-<span class="keyword">safe</span> <span class="keyword">import</span> <span class="keyword">module</span> hook win32com <span class="keyword">from</span> <span class="string">'d:\\program_files\\venv\\lib\\site-packages\\_pyinstaller_hooks_contrib\\hooks\\pre_safe_import_module\\hook-win32com.py'</span>.</span><br><span class="line">Traceback (most recent <span class="keyword">call</span> <span class="keyword">last</span>):</span><br><span class="line">  <span class="keyword">File</span> <span class="string">"&lt;string&gt;"</span>, line <span class="number">2</span>, <span class="keyword">in</span> &lt;<span class="keyword">module</span>&gt;</span><br><span class="line">ModuleNotFoundError: <span class="keyword">No</span> <span class="keyword">module</span> named <span class="string">'win32com'</span></span><br><span class="line"><span class="number">6326</span> INFO: Processing pre-<span class="keyword">safe</span> <span class="keyword">import</span> <span class="keyword">module</span> hook win32com <span class="keyword">from</span> <span class="string">'d:\\program_files\\venv\\lib\\site-packages\\_pyinstaller_hooks_contrib\\hooks\\pre_safe_import_module\\hook-win32com.py'</span>.</span><br><span class="line">Traceback (most recent <span class="keyword">call</span> <span class="keyword">last</span>):</span><br><span class="line">  <span class="keyword">File</span> <span class="string">"&lt;string&gt;"</span>, line <span class="number">2</span>, <span class="keyword">in</span> &lt;<span class="keyword">module</span>&gt;</span><br><span class="line">ModuleNotFoundError: <span class="keyword">No</span> <span class="keyword">module</span> named <span class="string">'win32com'</span></span><br><span class="line"><span class="number">6395</span> <span class="keyword">WARNING</span>: Hidden <span class="keyword">import</span> <span class="string">"pkg_resources.markers"</span> <span class="keyword">not</span> <span class="keyword">found</span>!</span><br><span class="line"><span class="number">6396</span> INFO: <span class="keyword">Excluding</span> <span class="keyword">import</span> <span class="string">'__main__'</span></span><br><span class="line"><span class="number">6397</span> INFO:   Removing <span class="keyword">import</span> <span class="keyword">of</span> __main__ <span class="keyword">from</span> <span class="keyword">module</span> pkg_resources</span><br><span class="line"><span class="number">6397</span> INFO: Loading <span class="keyword">module</span> hook <span class="string">'hook-setuptools.py'</span> <span class="keyword">from</span> <span class="string">'d:\\program_files\\venv\\lib\\site-packages\\PyInstaller\\hooks'</span>...</span><br><span class="line"><span class="number">6924</span> INFO: <span class="keyword">Excluding</span> <span class="keyword">import</span> <span class="string">'setuptools.py33compat'</span></span><br><span class="line"><span class="number">6925</span> INFO:   Removing <span class="keyword">import</span> <span class="keyword">of</span> setuptools.py33compat <span class="keyword">from</span> <span class="keyword">module</span> setuptools.package_index</span><br><span class="line"><span class="number">6925</span> INFO:   Removing <span class="keyword">import</span> <span class="keyword">of</span> setuptools.py33compat <span class="keyword">from</span> <span class="keyword">module</span> setuptools.depends</span><br><span class="line"><span class="number">6926</span> INFO: <span class="keyword">Excluding</span> <span class="keyword">import</span> <span class="string">'setuptools.py27compat'</span></span><br><span class="line"><span class="number">6926</span> INFO:   Removing <span class="keyword">import</span> <span class="keyword">of</span> setuptools.py27compat <span class="keyword">from</span> <span class="keyword">module</span> setuptools.command.easy_install</span><br><span class="line"><span class="number">6927</span> INFO:   Removing <span class="keyword">import</span> <span class="keyword">of</span> setuptools.py27compat <span class="keyword">from</span> <span class="keyword">module</span> setuptools.package_index</span><br><span class="line"><span class="number">6927</span> INFO:   Removing <span class="keyword">import</span> <span class="keyword">of</span> setuptools.py27compat <span class="keyword">from</span> <span class="keyword">module</span> setuptools.depends</span><br><span class="line"><span class="number">6928</span> INFO: Loading <span class="keyword">module</span> hook <span class="string">'hook-sysconfig.py'</span> <span class="keyword">from</span> <span class="string">'d:\\program_files\\venv\\lib\\site-packages\\PyInstaller\\hooks'</span>...</span><br><span class="line"><span class="number">6929</span> INFO: Loading <span class="keyword">module</span> hook <span class="string">'hook-xml.dom.domreg.py'</span> <span class="keyword">from</span> <span class="string">'d:\\program_files\\venv\\lib\\site-packages\\PyInstaller\\hooks'</span>...</span><br><span class="line"><span class="number">6929</span> INFO: Loading <span class="keyword">module</span> hook <span class="string">'hook-xml.etree.cElementTree.py'</span> <span class="keyword">from</span> <span class="string">'d:\\program_files\\venv\\lib\\site-packages\\PyInstaller\\hooks'</span>...</span><br><span class="line"><span class="number">6930</span> INFO: Loading <span class="keyword">module</span> hook <span class="string">'hook-xml.py'</span> <span class="keyword">from</span> <span class="string">'d:\\program_files\\venv\\lib\\site-packages\\PyInstaller\\hooks'</span>...</span><br><span class="line"><span class="number">6930</span> INFO: Loading <span class="keyword">module</span> hook <span class="string">'hook-_tkinter.py'</span> <span class="keyword">from</span> <span class="string">'d:\\program_files\\venv\\lib\\site-packages\\PyInstaller\\hooks'</span>...</span><br><span class="line"><span class="number">7179</span> INFO: checking Tree</span><br><span class="line"><span class="number">7179</span> INFO: Building Tree because Tree<span class="number">-00.</span>toc <span class="keyword">is</span> non existent</span><br><span class="line"><span class="number">7179</span> INFO: Building Tree Tree<span class="number">-00.</span>toc</span><br><span class="line"><span class="number">7319</span> INFO: checking Tree</span><br><span class="line"><span class="number">7320</span> INFO: Building Tree because Tree<span class="number">-01.</span>toc <span class="keyword">is</span> non existent</span><br><span class="line"><span class="number">7320</span> INFO: Building Tree Tree<span class="number">-01.</span>toc</span><br><span class="line"><span class="number">7338</span> INFO: Loading <span class="keyword">module</span> hook <span class="string">'hook-setuptools.msvc.py'</span> <span class="keyword">from</span> <span class="string">'d:\\program_files\\venv\\lib\\site-packages\\PyInstaller\\hooks'</span>...</span><br><span class="line"><span class="number">7340</span> INFO: <span class="keyword">Excluding</span> <span class="keyword">import</span> <span class="string">'numpy'</span></span><br><span class="line"><span class="number">7340</span> INFO:   Removing <span class="keyword">import</span> <span class="keyword">of</span> numpy <span class="keyword">from</span> <span class="keyword">module</span> setuptools.msvc</span><br><span class="line"><span class="number">7352</span> INFO: Looking <span class="keyword">for</span> ctypes DLLs</span><br><span class="line"><span class="number">7392</span> INFO: Analyzing run-<span class="built_in">time</span> hooks ...</span><br><span class="line"><span class="number">7395</span> INFO: <span class="keyword">Including</span> run-<span class="built_in">time</span> hook <span class="string">'d:\\program_files\\venv\\lib\\site-packages\\PyInstaller\\hooks\\rthooks\\pyi_rth_multiprocessing.py'</span></span><br><span class="line"><span class="number">7398</span> INFO: <span class="keyword">Including</span> run-<span class="built_in">time</span> hook <span class="string">'d:\\program_files\\venv\\lib\\site-packages\\PyInstaller\\hooks\\rthooks\\pyi_rth_pkgres.py'</span></span><br><span class="line"><span class="number">7404</span> INFO: Looking <span class="keyword">for</span> dynamic libraries</span><br><span class="line"><span class="number">7961</span> INFO: Looking <span class="keyword">for</span> eggs</span><br><span class="line"><span class="number">7962</span> INFO: <span class="keyword">Using</span> Python <span class="keyword">library</span> D:\Program_Files\Python38\python38.dll</span><br><span class="line"><span class="number">7962</span> INFO: <span class="keyword">Found</span> binding redirects:</span><br><span class="line">[]</span><br><span class="line"><span class="number">7965</span> INFO: <span class="keyword">Warnings</span> written <span class="keyword">to</span> D:\Documents\Programming\Python\Canvas-Syncer-<span class="keyword">Test</span>\<span class="keyword">build</span>\setup\warn-setup.txt</span><br><span class="line"><span class="number">8011</span> INFO: Graph <span class="keyword">cross</span>-<span class="keyword">reference</span> written <span class="keyword">to</span> D:\Documents\Programming\Python\Canvas-Syncer-<span class="keyword">Test</span>\<span class="keyword">build</span>\setup\xref-setup.html</span><br><span class="line"><span class="number">8031</span> INFO: checking PYZ</span><br><span class="line"><span class="number">8031</span> INFO: Building PYZ because PYZ<span class="number">-00.</span>toc <span class="keyword">is</span> non existent</span><br><span class="line"><span class="number">8031</span> INFO: Building PYZ (ZlibArchive) D:\Documents\Programming\Python\Canvas-Syncer-<span class="keyword">Test</span>\<span class="keyword">build</span>\setup\PYZ<span class="number">-00.</span>pyz</span><br><span class="line"><span class="number">8648</span> INFO: Building PYZ (ZlibArchive) D:\Documents\Programming\Python\Canvas-Syncer-<span class="keyword">Test</span>\<span class="keyword">build</span>\setup\PYZ<span class="number">-00.</span>pyz completed successfully.</span><br><span class="line"><span class="number">8656</span> INFO: checking PKG</span><br><span class="line"><span class="number">8657</span> INFO: Building PKG because PKG<span class="number">-00.</span>toc <span class="keyword">is</span> non existent</span><br><span class="line"><span class="number">8657</span> INFO: Building PKG (CArchive) PKG<span class="number">-00.</span>pkg</span><br><span class="line"><span class="number">8672</span> INFO: Building PKG (CArchive) PKG<span class="number">-00.</span>pkg completed successfully.</span><br><span class="line"><span class="number">8673</span> INFO: Bootloader d:\program_files\venv\lib\site-packages\PyInstaller\bootloader\Windows<span class="number">-64</span><span class="built_in">bit</span>\run.exe</span><br><span class="line"><span class="number">8673</span> INFO: checking EXE</span><br><span class="line"><span class="number">8674</span> INFO: Building EXE because EXE<span class="number">-00.</span>toc <span class="keyword">is</span> non existent</span><br><span class="line"><span class="number">8674</span> INFO: Building EXE <span class="keyword">from</span> EXE<span class="number">-00.</span>toc</span><br><span class="line"><span class="number">8674</span> INFO: Appending <span class="keyword">archive</span> <span class="keyword">to</span> EXE D:\Documents\Programming\Python\Canvas-Syncer-<span class="keyword">Test</span>\<span class="keyword">build</span>\setup\setup.exe</span><br><span class="line"><span class="number">8677</span> INFO: Building EXE <span class="keyword">from</span> EXE<span class="number">-00.</span>toc completed successfully.</span><br><span class="line"><span class="number">8680</span> INFO: checking <span class="keyword">COLLECT</span></span><br><span class="line"><span class="number">8681</span> INFO: Building <span class="keyword">COLLECT</span> because <span class="keyword">COLLECT</span><span class="number">-00.</span>toc <span class="keyword">is</span> non existent</span><br><span class="line"><span class="number">8682</span> INFO: Building <span class="keyword">COLLECT</span> <span class="keyword">COLLECT</span><span class="number">-00.</span>toc</span><br><span class="line"><span class="number">9016</span> INFO: Building <span class="keyword">COLLECT</span> <span class="keyword">COLLECT</span><span class="number">-00.</span>toc completed successfully.</span><br></pre></td></tr></tbody></table></figure>

<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>venv</tag>
        <tag>pyinstaller</tag>
      </tags>
  </entry>
  <entry>
    <title>LaTeX listings每行变量前有字母或显示不出行号的问题</title>
    <url>/posts/28420.html</url>
    <content><![CDATA[<p>问题：</p>
<p><img src="/posts/28420/Documents\Programming\HexoBlog\source_posts\CSDN补档-44\20200918132014632.png" alt="img"></p>
<p>查找\lstdefinestyle{}中缺少逗号的一行：</p>
<p><img src="/posts/28420/Documents\Programming\HexoBlog\source_posts\CSDN补档-44\20200918132123971.png" alt="img"></p>
<p>补上句尾逗号后显示正常：</p>
<p><img src="/posts/28420/Documents\Programming\HexoBlog\source_posts\CSDN补档-44\2020091813215595.png" alt="img"></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>latex</tag>
      </tags>
  </entry>
  <entry>
    <title>Vim及NeoVim插件合集</title>
    <url>/posts/8456.html</url>
    <content><![CDATA[<ol>
<li><p>“Vundle, the plug-in manager for Vim” <a href="https://github.com/VundleVim/Vundle.vim">Vundle.vim</a>：<br>Ubuntu：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim</span><br></pre></td></tr></tbody></table></figure>

<p>根据README.md的Quick Start在.vimrc中添加配置。打开vim，然后输入:PluginInstall并回车，或者直接从命令行输入</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">vim +PluginInstall +qall</span><br></pre></td></tr></tbody></table></figure>

<p>安装。<br>对于<a href="https://www.tabnine.com/">TabNine（Codota）</a>有不使用Vundle的方法：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --depth 1 https://github.com/zxqfl/tabnine-vim</span><br></pre></td></tr></tbody></table></figure>

<p>.vimrc中添加</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">set</span> rtp+=~/.vim/bundle/Vundle.vim</span><br></pre></td></tr></tbody></table></figure>

<p>.vimrc如下：</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">set</span> nocompatible              <span class="string">" be iMproved, required</span></span><br><span class="line"><span class="string">filetype off                  "</span> <span class="keyword">required</span></span><br><span class="line"><span class="keyword">set</span> rtp+=~/tabnine-vim</span><br><span class="line"><span class="keyword">call</span> vundle<span class="comment">#begin()</span></span><br><span class="line"><span class="keyword">Plugin</span> <span class="string">'VundleVim/Vundle.vim'</span></span><br><span class="line"><span class="keyword">Plugin</span> <span class="string">'tpope/vim-fugitive'</span></span><br><span class="line"><span class="keyword">Plugin</span> <span class="string">'git://git.wincent.com/command-t.git'</span></span><br><span class="line"><span class="keyword">Plugin</span> <span class="string">'rstacruz/sparkup'</span>, {<span class="string">'rtp'</span>: <span class="string">'vim/'</span>}</span><br><span class="line"><span class="keyword">Plugin</span> <span class="string">'zxqfl/tabnine-vim'</span></span><br><span class="line"><span class="keyword">call</span> vundle<span class="comment">#end()            " required</span></span><br><span class="line">filetype <span class="keyword">plugin</span> indent <span class="keyword">on</span>    <span class="string">" required</span></span><br></pre></td></tr></tbody></table></figure>

<p>Windows：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/VundleVim/Vundle.vim.git ~/vimfiles/bundle/Vundle.vim</span><br></pre></td></tr></tbody></table></figure>

<p>然后在_vimrc中添加配置如下：</p>
<figure class="highlight vim"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">set</span> encoding=utf-<span class="number">8</span></span><br><span class="line"><span class="keyword">set</span> nocompatible</span><br><span class="line"><span class="keyword">filetype</span> off</span><br><span class="line"><span class="keyword">set</span> shellslash</span><br><span class="line"><span class="keyword">set</span> rtp+=~/vimfiles/bundle/Vundle.<span class="keyword">vim</span></span><br><span class="line"><span class="keyword">call</span> vundle#begin(<span class="string">'~/vimfiles/bundle'</span>)</span><br><span class="line">Plugin <span class="string">'VundleVim/Vundle.vim'</span></span><br><span class="line">Plugin <span class="string">'tpope/vim-fugitive'</span></span><br><span class="line">Plugin <span class="string">'git://git.wincent.com/command-t.git'</span></span><br><span class="line">Plugin <span class="string">'rstacruz/sparkup'</span>, {<span class="string">'rtp'</span>: <span class="string">'vim'</span>}</span><br><span class="line">Plugin <span class="string">'ycm-core/YouCompleteMe'</span></span><br><span class="line">Plugin <span class="string">'zxqfl/tabnine-vim'</span></span><br><span class="line"><span class="keyword">call</span> vundle#end()            <span class="comment">" required</span></span><br><span class="line"><span class="keyword">filetype</span> plugin <span class="built_in">indent</span> <span class="keyword">on</span>    <span class="comment">" required</span></span><br><span class="line">removal</span><br><span class="line"><span class="keyword">source</span> $VIMRUNTIME/vimrc_example.<span class="keyword">vim</span></span><br><span class="line"><span class="keyword">source</span> $VIMRUNTIME/mswin.<span class="keyword">vim</span></span><br><span class="line"><span class="keyword">behave</span> mswin</span><br><span class="line"><span class="keyword">if</span> &amp;diffopt !~# <span class="string">'internal'</span></span><br><span class="line">  <span class="keyword">set</span> diffexpr=MyDiff()</span><br><span class="line"><span class="keyword">endif</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyDiff</span><span class="params">()</span></span></span><br><span class="line">  <span class="keyword">let</span> <span class="keyword">opt</span> = <span class="string">'-a --binary '</span></span><br><span class="line">  <span class="keyword">if</span> &amp;diffopt =~ <span class="string">'icase'</span> | <span class="keyword">let</span> <span class="keyword">opt</span> = <span class="keyword">opt</span> . <span class="string">'-i '</span> | <span class="keyword">endif</span></span><br><span class="line">  <span class="keyword">if</span> &amp;diffopt =~ <span class="string">'iwhite'</span> | <span class="keyword">let</span> <span class="keyword">opt</span> = <span class="keyword">opt</span> . <span class="string">'-b '</span> | <span class="keyword">endif</span></span><br><span class="line">  <span class="keyword">let</span> arg1 = <span class="variable">v:fname_in</span></span><br><span class="line">  <span class="keyword">if</span> arg1 =~ <span class="string">' '</span> | <span class="keyword">let</span> arg1 = <span class="string">'"'</span> . arg1 . <span class="string">'"'</span> | <span class="keyword">endif</span></span><br><span class="line">  <span class="keyword">let</span> arg1 = <span class="keyword">substitute</span>(arg1, <span class="string">'!'</span>, <span class="string">'\!'</span>, <span class="string">'g'</span>)</span><br><span class="line">  <span class="keyword">let</span> arg2 = <span class="variable">v:fname_new</span></span><br><span class="line">  <span class="keyword">if</span> arg2 =~ <span class="string">' '</span> | <span class="keyword">let</span> arg2 = <span class="string">'"'</span> . arg2 . <span class="string">'"'</span> | <span class="keyword">endif</span></span><br><span class="line">  <span class="keyword">let</span> arg2 = <span class="keyword">substitute</span>(arg2, <span class="string">'!'</span>, <span class="string">'\!'</span>, <span class="string">'g'</span>)</span><br><span class="line">  <span class="keyword">let</span> arg3 = <span class="variable">v:fname_out</span></span><br><span class="line">  <span class="keyword">if</span> arg3 =~ <span class="string">' '</span> | <span class="keyword">let</span> arg3 = <span class="string">'"'</span> . arg3 . <span class="string">'"'</span> | <span class="keyword">endif</span></span><br><span class="line">  <span class="keyword">let</span> arg3 = <span class="keyword">substitute</span>(arg3, <span class="string">'!'</span>, <span class="string">'\!'</span>, <span class="string">'g'</span>)</span><br><span class="line">  <span class="keyword">if</span> $VIMRUNTIME =~ <span class="string">' '</span></span><br><span class="line">    <span class="keyword">if</span> &amp;<span class="keyword">sh</span> =~ <span class="string">'\&lt;cmd'</span></span><br><span class="line">      <span class="keyword">if</span> <span class="built_in">empty</span>(&amp;shellxquote)</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">l:shxq_sav</span> = <span class="string">''</span></span><br><span class="line">        <span class="keyword">set</span> shellxquote&amp;</span><br><span class="line">      <span class="keyword">endif</span></span><br><span class="line">      <span class="keyword">let</span> cmd = <span class="string">'"'</span> . $VIMRUNTIME . <span class="string">'\diff"'</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="keyword">let</span> cmd = <span class="keyword">substitute</span>($VIMRUNTIME, <span class="string">' '</span>, <span class="string">'" '</span>, <span class="string">''</span>) . <span class="string">'\diff"'</span></span><br><span class="line">    <span class="keyword">endif</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">let</span> cmd = $VIMRUNTIME . <span class="string">'\diff'</span></span><br><span class="line">  <span class="keyword">endif</span></span><br><span class="line">  <span class="keyword">let</span> cmd = <span class="keyword">substitute</span>(cmd, <span class="string">'!'</span>, <span class="string">'\!'</span>, <span class="string">'g'</span>)</span><br><span class="line">  <span class="keyword">silent</span> <span class="keyword">execute</span> <span class="string">'!'</span> . cmd . <span class="string">' '</span> . <span class="keyword">opt</span> . arg1 . <span class="string">' '</span> . arg2 . <span class="string">' &gt; '</span> . arg3</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">exists</span>(<span class="string">'l:shxq_sav'</span>)</span><br><span class="line">    <span class="keyword">let</span> &amp;shellxquote=<span class="variable">l:shxq_sav</span></span><br><span class="line">  <span class="keyword">endif</span></span><br><span class="line"><span class="keyword">endfunction</span></span><br></pre></td></tr></tbody></table></figure>

<p><img src="/posts/8456/Documents\Programming\HexoBlog\source_posts\CSDN补档-45\20200918230952613.png" alt="img">“A code-completion engine for Vim” <a href="https://github.com/ycm-core/YouCompleteMe">YouCompleteMe</a>在安装Vim plugin后：<br>Ubuntu：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sudo apt install build-essential cmake vim python3-dev</span><br></pre></td></tr></tbody></table></figure>

<p>以及mono-complete、go、node和npm，然后编译：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.vim/bundle/YouCompleteMe</span><br><span class="line">python3 install.py --all</span><br></pre></td></tr></tbody></table></figure>

<p>Windows：<br>安装Visual Studio Build Tools 2017+、cmake、vim、python、go、node、npm后编译：</p>
<figure class="highlight vim"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">cd</span> YouCompleteMe</span><br><span class="line"><span class="keyword">python3</span> install.<span class="keyword">py</span> --<span class="keyword">all</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>“Minimalist Vim Plugin Manager” <a href="https://github.com/junegunn/vim-plug">vim-plug</a>：<br>Ubuntu Vim：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">curl -fLo ~/.vim/<span class="built_in">autoload</span>/plug.vim --create-dirs \</span><br><span class="line">    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim</span><br></pre></td></tr></tbody></table></figure>

<p>Ubuntu NeoVim：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sh -c <span class="string">'curl -fLo "${XDG_DATA_HOME:-$HOME/.local/share}"/nvim/site/autoload/plug.vim --create-dirs \</span></span><br><span class="line"><span class="string">       https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim'</span></span><br></pre></td></tr></tbody></table></figure>

<p>Windows Vim：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">iwr -useb https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim |`</span><br><span class="line">    ni <span class="variable">$HOME</span>/vimfiles/<span class="built_in">autoload</span>/plug.vim -Force</span><br></pre></td></tr></tbody></table></figure>

<p>Windows NeoVim：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">iwr -useb https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim |`</span><br><span class="line">    ni <span class="string">"<span class="variable">$env</span>:LOCALAPPDATA/nvim-data/site/autoload/plug.vim"</span> -Force</span><br></pre></td></tr></tbody></table></figure>

<p>PowerShell命令可能会出现“Invoke-WebRequest: 由于目标计算机积极拒绝，无法连接。”错误。<br>手动将<a href="https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim">plug.vim</a>文件保存到$HOME\vimfiles\autoload文件夹（对于Vim）|C:\Users&lt;username&gt;\AppData\Local\nvim-data\site\autoload文件夹下。参考<a href="https://jakeg.dev/neovim-in-windows/">Neovim in Windows</a>执行</p>
<figure class="highlight taggerscript"><table><tbody><tr><td class="code"><pre><span class="line">md ~<span class="symbol">\A</span>ppData<span class="symbol">\L</span>ocal<span class="symbol">\n</span>vim<span class="symbol">\a</span>utoload</span><br><span class="line"><span class="keyword">$uri = 'https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim'</span></span><br><span class="line"><span class="keyword"></span>(New-Object Net.WebClient).DownloadFile(</span><br><span class="line">  <span class="keyword">$uri,</span></span><br><span class="line"><span class="keyword">  $ExecutionContext.SessionState.Path.GetUnresolvedProviderPathFromPSPath</span>(</span><br><span class="line">    "~<span class="symbol">\A</span>ppData<span class="symbol">\L</span>ocal<span class="symbol">\n</span>vim<span class="symbol">\a</span>utoload<span class="symbol">\p</span>lug.vim"</span><br><span class="line">  )</span><br><span class="line">)</span><br></pre></td></tr></tbody></table></figure>

<p>Ubuntu：创建~/.config/nvim/init.vim（需要先mkdir ~/.config/nvim），添加</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line">call plug#begin(<span class="string">'~/.vim/plugged'</span>)</span><br><span class="line">Plug <span class="string">'junegunn/vim-easy-align'</span></span><br><span class="line">Plug <span class="string">'https://github.com/junegunn/vim-github-dashboard.git'</span></span><br><span class="line">Plug <span class="string">'SirVer/ultisnips'</span> | Plug <span class="string">'honza/vim-snippets'</span></span><br><span class="line">Plug <span class="string">'scrooloose/nerdtree'</span>, { <span class="string">'on'</span>:  <span class="string">'NERDTreeToggle'</span> }</span><br><span class="line">Plug <span class="string">'tpope/vim-fireplace'</span>, { <span class="string">'for'</span>: <span class="string">'clojure'</span> }</span><br><span class="line">Plug <span class="string">'rdnetto/YCM-Generator'</span>, { <span class="string">'branch'</span>: <span class="string">'stable'</span> }</span><br><span class="line">Plug <span class="string">'fatih/vim-go'</span>, { <span class="string">'tag'</span>: <span class="string">'*'</span> }</span><br><span class="line">Plug <span class="string">'nsf/gocode'</span>, { <span class="string">'tag'</span>: <span class="string">'v.20150303'</span>, <span class="string">'rtp'</span>: <span class="string">'vim'</span> }</span><br><span class="line">Plug <span class="string">'junegunn/fzf'</span>, { <span class="string">'dir'</span>: <span class="string">'~/.fzf'</span>, <span class="string">'do'</span>: <span class="string">'./install --all'</span> }</span><br><span class="line">Plug <span class="string">'~/my-prototype-plugin'</span></span><br><span class="line">Plug <span class="string">'tpope/vim-sensible'</span></span><br><span class="line">Plug <span class="string">'scrooloose/nerdtree'</span>, { <span class="string">'on'</span>: <span class="string">'NERDTreeToggle'</span> }</span><br><span class="line">Plug <span class="string">'junegunn/vim-github-dashboard'</span>, { <span class="string">'on'</span>: [<span class="string">'GHDashboard'</span>, <span class="string">'GHActivity'</span>] }</span><br><span class="line">Plug <span class="string">'kovisoft/paredit'</span>, { <span class="string">'for'</span>: [<span class="string">'clojure'</span>, <span class="string">'scheme'</span>] }</span><br><span class="line">Plug <span class="string">'junegunn/vader.vim'</span>,  { <span class="string">'on'</span>: <span class="string">'Vader'</span>, <span class="string">'for'</span>: <span class="string">'vader'</span> }</span><br><span class="line">Plug <span class="string">'junegunn/goyo.vim'</span>, { <span class="string">'for'</span>: <span class="string">'markdown'</span> }</span><br><span class="line">autocmd!<span class="built_in"> User </span>goyo.vim echom <span class="string">'Goyo is now loaded!'</span></span><br><span class="line">Plug <span class="string">'Shougo/vimproc.vim'</span>, { <span class="string">'do'</span>: <span class="string">'make'</span> }</span><br><span class="line">Plug <span class="string">'yuttie/inkstained-vim'</span></span><br><span class="line">call plug#end()</span><br><span class="line">syntax enable</span><br><span class="line"><span class="builtin-name">set</span> <span class="attribute">background</span>=light</span><br></pre></td></tr></tbody></table></figure>

<p>以上包括了“An experimental color scheme for Vim.” <a href="https://github.com/yuttie/inkstained-vim">inkstained-vim</a>、“Vim plugin, insert or delete brackets, parens, quotes in pair” <a href="https://github.com/jiangmiao/auto-pairs">auto-pairs</a>等。<br>其中</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">colorsheme inkstained</span><br></pre></td></tr></tbody></table></figure>

<p>命令报错”Not an editor command: colorsheme“故删去。<br>然后输入:PlugInstall回车，顶部出现“Updated. Elapsed time: 19.219560 sec.”表示安装成功。<img src="/posts/8456/Documents\Programming\HexoBlog\source_posts\CSDN补档-45\2020091900571240.png" alt="img">使用主题后的效果：<img src="/posts/8456/Documents\Programming\HexoBlog\source_posts\CSDN补档-45\20200919010245790.png" alt="img">Windows：执行</p>
<figure class="highlight taggerscript"><table><tbody><tr><td class="code"><pre><span class="line">scoop config proxy 127.0.0.1:11000</span><br><span class="line">scoop bucket add versions</span><br><span class="line">scoop install python27</span><br><span class="line">pip install virtualenv</span><br><span class="line">virtualenv -p D:<span class="symbol">\P</span>rogram_Files<span class="symbol">\s</span>coop<span class="symbol">\a</span>pps<span class="symbol">\p</span>ython27<span class="symbol">\2</span>.7.18<span class="symbol">\p</span>ython.exe E:<span class="symbol">\P</span>rogram_Files<span class="symbol">\n</span>vimpy2</span><br><span class="line">E:<span class="symbol">\P</span>rogram_Files<span class="symbol">\n</span>vimpy2<span class="symbol">\S</span>cripts<span class="symbol">\p</span>ip.exe install pynvim jedi</span><br><span class="line">E:<span class="symbol">\P</span>rogram_Files<span class="symbol">\n</span>vimpy2<span class="symbol">\S</span>cripts<span class="symbol">\p</span>ython.exe -m pip install --upgrade pip</span><br><span class="line">E:<span class="symbol">\P</span>rogram_Files<span class="symbol">\v</span>env<span class="symbol">\S</span>cripts<span class="symbol">\p</span>ip.exe install pynvim jedi</span><br></pre></td></tr></tbody></table></figure>

<p>创建C:\Users&lt;username&gt;\AppData\Local\nvim\init.vim，将init.vim填写如下：</p>
<figure class="highlight gams"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">set</span> nocompatible</span><br><span class="line">filetype <span class="comment">off</span></span><br><span class="line"><span class="keyword">set</span> <span class="comment">t_Co=256</span></span><br><span class="line">call <span class="comment">plug#begin(</span><span class="comment">'~/AppData/Local/nvim/plugged'</span><span class="comment">)</span></span><br><span class="line">Plug <span class="comment">'junegunn/vim-easy-align'</span></span><br><span class="line">Plug <span class="comment">'https://github.com/junegunn/vim-github-dashboard.git'</span></span><br><span class="line">Plug <span class="comment">'SirVer/ultisnips'</span> |<span class="comment"> Plug</span> <span class="comment">'honza/vim-snippets'</span></span><br><span class="line">Plug <span class="comment">'scrooloose/nerdtree'</span><span class="comment">, {</span> <span class="comment">'on'</span><span class="comment">:</span>  <span class="comment">'NERDTreeToggle'</span><span class="comment"> }</span></span><br><span class="line">Plug <span class="comment">'tpope/vim-fireplace'</span><span class="comment">, {</span> <span class="comment">'for'</span><span class="comment">:</span> <span class="comment">'clojure'</span><span class="comment"> }</span></span><br><span class="line">Plug <span class="comment">'rdnetto/YCM-Generator'</span><span class="comment">, {</span> <span class="comment">'branch'</span><span class="comment">:</span> <span class="comment">'stable'</span><span class="comment"> }</span></span><br><span class="line">Plug <span class="comment">'fatih/vim-go'</span><span class="comment">, {</span> <span class="comment">'tag'</span><span class="comment">:</span> <span class="comment">'*'</span><span class="comment"> }</span></span><br><span class="line">Plug <span class="comment">'nsf/gocode'</span><span class="comment">, {</span> <span class="comment">'tag'</span><span class="comment">:</span> <span class="comment">'v.20150303'</span><span class="comment">,</span> <span class="comment">'rtp'</span><span class="comment">:</span> <span class="comment">'vim'</span><span class="comment"> }</span></span><br><span class="line">Plug <span class="comment">'junegunn/fzf'</span><span class="comment">, {</span> <span class="comment">'dir'</span><span class="comment">:</span> <span class="comment">'~/.fzf'</span><span class="comment">,</span> <span class="comment">'do'</span><span class="comment">:</span> <span class="comment">'./install --all'</span><span class="comment"> }</span></span><br><span class="line">Plug <span class="comment">'junegunn/fzf.vim'</span></span><br><span class="line">Plug <span class="comment">'~/my-prototype-plugin'</span></span><br><span class="line">Plug <span class="comment">'tpope/vim-sensible'</span></span><br><span class="line">Plug <span class="comment">'junegunn/vim-github-dashboard'</span><span class="comment">, {</span> <span class="comment">'on'</span><span class="comment">: [</span><span class="comment">'GHDashboard'</span><span class="comment">,</span> <span class="comment">'GHActivity'</span><span class="comment">] }</span></span><br><span class="line">Plug <span class="comment">'kovisoft/paredit'</span><span class="comment">, {</span> <span class="comment">'for'</span><span class="comment">: [</span><span class="comment">'clojure'</span><span class="comment">,</span> <span class="comment">'scheme'</span><span class="comment">] }</span></span><br><span class="line">Plug <span class="comment">'junegunn/vader.vim'</span><span class="comment">,  {</span> <span class="comment">'on'</span><span class="comment">:</span> <span class="comment">'Vader'</span><span class="comment">,</span> <span class="comment">'for'</span><span class="comment">:</span> <span class="comment">'vader'</span><span class="comment"> }</span></span><br><span class="line">Plug <span class="comment">'junegunn/goyo.vim'</span><span class="comment">, {</span> <span class="comment">'for'</span><span class="comment">:</span> <span class="comment">'markdown'</span><span class="comment"> }</span></span><br><span class="line">autocmd! User <span class="comment">goyo.vim echom</span> <span class="comment">'Goyo is now loaded!'</span></span><br><span class="line">Plug <span class="comment">'Shougo/vimproc.vim'</span><span class="comment">, {</span> <span class="comment">'do'</span><span class="comment">:</span> <span class="comment">'make'</span><span class="comment"> }</span></span><br><span class="line">if <span class="comment">has(</span><span class="comment">'nvim'</span><span class="comment">)</span></span><br><span class="line">  Plug <span class="comment">'Shougo/deoplete.nvim'</span><span class="comment">, {</span> <span class="comment">'do'</span><span class="comment">:</span> <span class="comment">':UpdateRemotePlugins'</span><span class="comment"> }</span></span><br><span class="line">else</span><br><span class="line">  Plug <span class="comment">'Shougo/deoplete.nvim'</span></span><br><span class="line">  Plug <span class="comment">'roxma/nvim-yarp'</span></span><br><span class="line">  Plug <span class="comment">'roxma/vim-hug-neovim-rpc'</span></span><br><span class="line">endif</span><br><span class="line">Plug <span class="comment">'zchee/deoplete-jedi'</span></span><br><span class="line">Plug <span class="comment">'tpope/vim-fugitive'</span></span><br><span class="line">Plug <span class="comment">'elzr/vim-json'</span></span><br><span class="line">Plug <span class="comment">'dyng/ctrlsf.vim'</span></span><br><span class="line">Plug <span class="comment">'airblade/vim-rooter'</span></span><br><span class="line">Plug <span class="comment">'tomasiser/vim-code-dark'</span></span><br><span class="line">call <span class="comment">plug#end()</span></span><br><span class="line">colors <span class="comment">codedark</span></span><br><span class="line">let <span class="comment">g:airline_theme =</span> <span class="comment">'codedark'</span></span><br><span class="line"><span class="keyword">set</span> <span class="comment">shiftwidth=4</span></span><br><span class="line"><span class="keyword">set</span> <span class="comment">tabstop=4</span></span><br><span class="line"><span class="keyword">set</span> <span class="comment">expandtab</span></span><br><span class="line">filetype <span class="comment">plugin on</span></span><br><span class="line">filetype <span class="comment">indent on</span></span><br><span class="line">syntax <span class="comment">on</span></span><br><span class="line"><span class="keyword">set</span> <span class="comment">nu</span></span><br><span class="line"><span class="keyword">set</span> <span class="comment">autochdir</span></span><br><span class="line">nmap <span class="comment">&lt;leader&gt;l :set list!&lt;CR&gt;</span></span><br><span class="line"><span class="keyword">set</span> <span class="comment">mouse=a</span></span><br><span class="line"><span class="keyword">set</span> <span class="comment">autoread</span></span><br><span class="line">let <span class="comment">NERDTreeQuitOnOpen = 1</span></span><br><span class="line"><span class="keyword">set</span> <span class="comment">completeopt=menu</span></span><br><span class="line"><span class="keyword">set</span> <span class="comment">linebreak</span></span><br><span class="line">autocmd <span class="comment">Filetype html,ruby,javascript,yml,yaml,json,haskell,ejs,htmldjango setlocal ts=2 sts=2 sw=2</span></span><br><span class="line"><span class="keyword">set</span> <span class="comment">noswapfile</span></span><br><span class="line"><span class="keyword">set</span> <span class="comment">wildignore+=*.pyc</span></span><br><span class="line">if <span class="comment">&amp;term =</span>~ <span class="comment">'256color'</span></span><br><span class="line">  <span class="keyword">set</span> <span class="comment">t_ut=</span></span><br><span class="line">endif</span><br><span class="line">let <span class="comment">g:ycm_autoclose_preview_window_after_completion=1</span></span><br><span class="line"><span class="keyword">set</span> <span class="comment">enc=utf-8</span></span><br><span class="line"><span class="keyword">set</span> <span class="comment">fileencodings=ucs-bom,utf8,prc</span></span><br><span class="line"><span class="keyword">set</span> <span class="comment">fileencoding=utf-8</span></span><br><span class="line"><span class="keyword">set</span> <span class="comment">nofoldenable</span></span><br><span class="line">filetype <span class="comment">plugin indent on</span></span><br><span class="line">let <span class="comment">g:python2_host_prog =</span> <span class="comment">'E:\Program_Files\nvimpy2\Scripts\python.exe'</span></span><br><span class="line">let <span class="comment">g:python3_host_prog =</span> <span class="comment">'E:\Program_Files\venv\Scripts\python.exe'</span></span><br><span class="line">let <span class="comment">g:black_virtualenv =</span> <span class="comment">'E:\Program_Files\venv'</span></span><br><span class="line">let <span class="comment">g:acp_enableAtStartup = 0</span></span><br><span class="line">let <span class="comment">g:deoplete#enable_at_startup = 1</span></span><br><span class="line">inoremap <span class="comment">&lt;expr&gt;&lt;tab&gt; pumvisible() ?</span> <span class="comment">"\&lt;c-n&gt;"</span><span class="comment"> :</span> <span class="comment">"\&lt;tab&gt;"</span></span><br><span class="line">let <span class="comment">g:fzf_action = {</span></span><br><span class="line">      \ <span class="string">'ctrl-s'</span>: <span class="string">'split'</span>,</span><br><span class="line">      \ <span class="string">'ctrl-v'</span>: <span class="string">'vsplit'</span>,</span><br><span class="line">      \ <span class="string">'ctrl-t'</span>: <span class="string">'tabe'</span></span><br><span class="line">      \ }</span><br><span class="line">nnoremap <span class="comment">&lt;c-p&gt; :FZF&lt;cr&gt;</span></span><br><span class="line">nnoremap <span class="comment">&lt;c-f&gt; :Rg&lt;cr&gt;</span></span><br><span class="line">command! -bang <span class="comment">-nargs=* Rg</span></span><br><span class="line">  \ call <span class="comment">fzf#vim#grep(</span></span><br><span class="line">  \   <span class="string">'rg --column --line-number --no-heading --color=always --smart-case '</span>.shellescape(&lt;q-args&gt;), 1,</span><br><span class="line">  \   &lt;bang&gt;0 ? fzf#vim#with_preview(<span class="string">'up:60%'</span>)</span><br><span class="line">  \           : fzf#vim#with_preview(<span class="string">'right:50%:hidden'</span>, <span class="string">'?'</span>),</span><br><span class="line">  \   &lt;bang&gt;0)</span><br></pre></td></tr></tbody></table></figure>

<p>然后执行nvim命令或打开NeoVim窗口输入:PlugInstall回车。<br>若出现“fatal: out of memory, malloc failed (tried to allocate 2147483648 bytes)”问题，参考<a href="https://stackoverflow.com/questions/41120920/git-fatal-out-of-memory-malloc-failed-tried-to-allocate-889192448-bytes">GIT: fatal: Out of memory, malloc failed (tried to allocate 889192448 bytes)</a>调小postBuffer，执行</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">git config --global http.postBuffer 128m</span><br></pre></td></tr></tbody></table></figure>

<p>后错误解决，又有新错误“fatal: unable to access ‘<a href="https://github.com/honza/vim-snippets.git/'">https://github.com/honza/vim-snippets.git/'</a>: OpenSSL SSL_connect: SSL_ERROR_SYSCALL in connection to github.com:443”和“fatal: unable to access ‘<a href="https://github.com/tpope/vim-fugitive.git/'">https://github.com/tpope/vim-fugitive.git/'</a>: OpenSSL SSL_connect: SSL_ERROR_SYSCALL in connection to github.com:443”，参考<a href="https://blog.csdn.net/ljj125896/article/details/104350459">OpenSSL SSL_connect: SSL_ERROR_SYSCALL in connection to github.com:443问题解决</a>执行</p>
<figure class="highlight tcl"><table><tbody><tr><td class="code"><pre><span class="line">git config --<span class="keyword">global</span> --<span class="keyword">unset</span> <span class="keyword">http</span>.<span class="keyword">http</span>://github.com.proxy</span><br><span class="line">git config --<span class="keyword">global</span> --<span class="keyword">unset</span> https.<span class="keyword">http</span>://github.com.proxy</span><br></pre></td></tr></tbody></table></figure>

<p>后成功：<img src="/posts/8456/Documents\Programming\HexoBlog\source_posts\CSDN补档-45\20200919022832690.png" alt="img"></p>
</li>
</ol>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>vundle</tag>
        <tag>vim</tag>
        <tag>neovim</tag>
      </tags>
  </entry>
  <entry>
    <title>Shell插件合集</title>
    <url>/posts/21934.html</url>
    <content><![CDATA[<ol>
<li><p>“The next gen ls command” <a href="https://github.com/Peltoche/lsd">lsd</a>：</p>
<p>Ubuntu: 先在<a href="https://github.com/Peltoche/lsd/releases">Release页面</a>下载deb包，然后使用dpkg命令安装：</p>
<figure class="highlight apache"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">wget</span> https://github.com/Peltoche/lsd/releases/download/<span class="number">0</span>.<span class="number">18</span>.<span class="number">0</span>/lsd_<span class="number">0</span>.<span class="number">18</span>.<span class="number">0</span>_amd<span class="number">64</span>.deb</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attribute">sudo</span> dpkg -i lsd_<span class="number">0</span>.<span class="number">18</span>.<span class="number">0</span>_amd<span class="number">64</span>.deb</span><br></pre></td></tr></tbody></table></figure>

<p>Windows：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">scoop install lsd</span><br></pre></td></tr></tbody></table></figure>



</li>
</ol>
<ol start="2">
<li><p>“Easily and securely send things from one computer to another” <a href="https://github.com/schollz/croc">croc</a>：</p>
<p>Ubuntu：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">snap install croc</span><br></pre></td></tr></tbody></table></figure>

<p>（WSL无法使用snap，使用</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">curl https://getcroc.schollz.com | bash</span><br></pre></td></tr></tbody></table></figure>

<p>代替）<br>Windows：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">scoop install croc</span><br></pre></td></tr></tbody></table></figure>



</li>
</ol>
<ol start="3">
<li><p>“A faster way to navigate your filesystem”  <a href="https://github.com/ajeetdsouza/zoxide">zoxide</a>：</p>
<p>Ubuntu：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">cargo install zoxide -f</span><br></pre></td></tr></tbody></table></figure>

<p>Windows：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">scoop install zoxide</span><br></pre></td></tr></tbody></table></figure>

<p>在~/.bashrc中添加</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">eval</span> <span class="string">"<span class="subst">$(zoxide init bash)</span>"</span></span><br></pre></td></tr></tbody></table></figure>

<p>在~/.zshrc中添加</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">eval</span> <span class="string">"<span class="subst">$(zoxide init zsh)</span>"</span></span><br></pre></td></tr></tbody></table></figure>

<p>在C:\Users&lt;username&gt;\Documents\PowerShell\Microsoft.PowerShell_profile.ps1中添加</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">Invoke-Expression (&amp; {</span><br><span class="line">    <span class="variable">$hook</span> = <span class="keyword">if</span> (<span class="variable">$PSVersionTable</span>.PSVersion.Major -lt 6) { <span class="string">'prompt'</span> } <span class="keyword">else</span> { <span class="string">'pwd'</span> }</span><br><span class="line">    (zoxide init --hook <span class="variable">$hook</span> powershell) -join <span class="string">"`n"</span></span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>



</li>
</ol>
<ol start="4">
<li><p>“A command-line fuzzy finder”  <a href="https://github.com/junegunn/fzf">fzf</a>：</p>
<p>Ubuntu：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sudo apt install fzf</span><br></pre></td></tr></tbody></table></figure>

<p>Windows：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">scoop install fzf</span><br></pre></td></tr></tbody></table></figure>

<p>或</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">choco install fzf</span><br></pre></td></tr></tbody></table></figure>



</li>
</ol>
<ol start="5">
<li><p>“Vim-fork focused on extensibility and usability” <a href="https://github.com/neovim/neovim">neovim</a>：</p>
<p>Ubuntu：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sudo apt install neovim</span><br></pre></td></tr></tbody></table></figure>

<p>Windows：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">scoop install neovim</span><br></pre></td></tr></tbody></table></figure>

<p>或</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">choco install neovim</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>shell</tag>
        <tag>lsd</tag>
        <tag>croc</tag>
        <tag>zoxide</tag>
        <tag>fzf</tag>
      </tags>
  </entry>
  <entry>
    <title>QtSpim写MIPS报错spim parser syntax error等各种错误的解决方法</title>
    <url>/posts/12191.html</url>
    <content><![CDATA[<ol>
<li><p>spim: (parser) syntax error on line 2 of file xxx</p>
<p>.word 10,11,12,13,14,15,16,17,18</p>
<p>   ^</p>
<p>line 2:</p>
<figure class="highlight angelscript"><table><tbody><tr><td class="code"><pre><span class="line">A:  .word <span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">16</span>,<span class="number">17</span>,<span class="number">18</span></span><br></pre></td></tr></tbody></table></figure>

<p>改为</p>
<figure class="highlight yaml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">A:</span>  <span class="string">.word</span> <span class="number">10</span><span class="string">,</span> <span class="number">11</span><span class="string">,</span> <span class="number">12</span><span class="string">,</span> <span class="number">13</span><span class="string">,</span> <span class="number">14</span><span class="string">,</span> <span class="number">15</span><span class="string">,</span> <span class="number">16</span><span class="string">,</span> <span class="number">17</span><span class="string">,</span> <span class="number">18</span></span><br></pre></td></tr></tbody></table></figure>

<p>或</p>
<figure class="highlight angelscript"><table><tbody><tr><td class="code"><pre><span class="line">A:  .word <span class="number">10</span>:<span class="number">18</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>spim: (parser) syntax error on line 5 of file xxx</p>
<p>j: .word 0</p>
<p> ^</p>
<p>line 5:</p>
<figure class="highlight mipsasm"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">j: </span> <span class="meta">.word</span> <span class="number">0</span></span><br></pre></td></tr></tbody></table></figure>

<p>改为</p>
<figure class="highlight mipsasm"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">J: </span> <span class="meta">.word</span> <span class="number">0</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>spim: (parser) Label is defined for the second time on line 8 of file xxx<br>main:<br>  ^<br>line 8:</p>
<figure class="highlight avrasm"><table><tbody><tr><td class="code"><pre><span class="line"><span class="symbol">main:</span></span><br></pre></td></tr></tbody></table></figure>

<p>根据CS 265 George Mason University D. Nordstrom的<a href="https://cs.gmu.edu/~dnord/cs265/spim_intro.html">A Quick Introduction to SPIM</a>，在QtSpim的菜单栏File-&gt;Reinitialize and Load File后即可解决该问题。</p>
</li>
<li><p>spim: (parser) syntax error on line 14 of file xxx<br>lw $t2,$t1($s5)<br>   ^<br>line 14:</p>
<figure class="highlight mipsasm"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">lw </span>$<span class="built_in">t2</span>,$<span class="built_in">t1</span>($<span class="built_in">s5</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>改为</p>
<figure class="highlight mipsasm"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">add </span>$<span class="built_in">t1</span>,$<span class="built_in">s5</span>,$<span class="built_in">t1</span></span><br><span class="line"><span class="keyword">lw </span>$<span class="built_in">t2</span>,<span class="number">0</span>($<span class="built_in">t1</span>)</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>Attempt to execute non-instruction at 0x00400030<br>根据<a href="https://stackoverflow.com/questions/20172655/attempt-to-execute-non-instruction-in-mips-assembler">Attempt to execute non-instruction in mips assembler?</a>在.s文件代码最后一行添加</p>
<figure class="highlight mipsasm"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">jr </span>$<span class="built_in">ra</span></span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>assembler</tag>
        <tag>mips</tag>
        <tag>spim</tag>
        <tag>qtspim</tag>
      </tags>
  </entry>
  <entry>
    <title>Ghostscript已有字体报错can‘t find font file问题的原因</title>
    <url>/posts/41027.html</url>
    <content><![CDATA[<p><img src="/posts/41027/Documents\Programming\HexoBlog\source_posts\CSDN补档-48\20200920215819386.png" alt="img"></p>
<p>执行例如</p>
<figure class="highlight ebnf"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">loadallfonts</span></span><br></pre></td></tr></tbody></table></figure>

<p> 命令，报错的字体均为Ghostscript已安装字体，解决方法：</p>
<p>检查Ghostscript安装目录gs\gs9.53.1\Resource\Font，删掉非预装字体。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>ghostscript</tag>
        <tag>postscript</tag>
      </tags>
  </entry>
  <entry>
    <title>OrCAD PSpice原理图Schematic导出PDF没反应的解决方法</title>
    <url>/posts/12875.html</url>
    <content><![CDATA[<p>首先确定E:\Program Files\Adobe\Acrobat DC\Acrobat和D:\Program Files\gs\gs9.53.1\bin已被添加到环境变量。</p>
<p>选中要打印的页面：</p>
<p><img src="/posts/12875/Documents\Programming\HexoBlog\source_posts\CSDN补档-49\20200922211431160.png" alt="img"></p>
<p>点击菜单栏File-&gt;Export-&gt;PDF，修改文件名，确认Converter和Converter Path，其余选项配置保持默认即可：</p>
<p><img src="/posts/12875/Documents\Programming\HexoBlog\source_posts\CSDN补档-49\20200922211552971.png" alt="img"></p>
<p>或</p>
<p><img src="/posts/12875/Documents\Programming\HexoBlog\source_posts\CSDN补档-49\2020092221161535.png" alt="img"></p>
<p>即可成功导出。Acrobat Distiller和GhostScript的不同之处在于前者会创建一个同名的.log文件。</p>
<p>如果选中要导出的页面后仍然没反应，则点击左侧工程管理器Project名称或Design名称后再Export。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>orcad</tag>
        <tag>pspice</tag>
      </tags>
  </entry>
  <entry>
    <title>使用WSL2/Ubuntu配置CLion出现Credentials are not valid for this WSL distribution问题的解决方法</title>
    <url>/posts/1944.html</url>
    <content><![CDATA[<p>在根据JetBrains官方脚本设置好WSL2/Ubuntu的SSH后打开CLion-&gt;Settings-&gt;Build, Execution, Deployment-&gt;Toolchains将Environment设置为WSL路径为C:\Users&lt;username&gt;\AppData\Local\Microsoft\WindowsApps\ubuntu.exe可被识别，然后设置Credentials ssh://<username>@localhost:2222发现WSL CMake和WSL GDB可被正常识别，但无法找到Make、C Compiler和C++ Compiler，并出现Credentials are not valid for this WSL distribution (Ubuntu)报错。打开CLion-&gt;Help-&gt;Show Log in Explorer，然后Help-&gt;Debug Log Settings的窗口中输入#com.jetbrains.cidr.cpp.toolchains.WSL关闭CLion，删除Log文件夹中的idea.log，重新打开CLion并打开Toolchains设置直到其完成环境检测，打开Log文件发现警告</username></p>
<p>20xx-xx-xx xx:xx:xx,xxx [ xxxxxx]  WARN -   #com.intellij.execution.wsl - WSL rootfs doesn’t exist: C:\Users&lt;username&gt;\AppData\Local\Packages\CanonicalGroupLimited.UbuntuonWindows_79rhkp1fndgsc\LocalState\rootfs。</p>
<p>事实上我们知道路径C:\Users&lt;username&gt;\AppData\Local\Packages\CanonicalGroupLimited.UbuntuonWindows_79rhkp1fndgsc\LocalState中原先WSL1是显示内部各文件夹的，在WSL2中高度虚拟化，变成了一个vhdx硬盘映像文件，所以CLion无法找到内部文件夹rootfs（WSL根目录），所以会报错。到目前（CLion 2019.2版本）CLion尚不支持WSL2，解决方法是在Ubuntu中输入wsl –set-version Ubuntu&gt; 1将WSL版本倒退回1使用。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>WSL</tag>
        <tag>CLion</tag>
        <tag>WSL2</tag>
      </tags>
  </entry>
  <entry>
    <title>LaTeX xcolor使用x11names等选项无法识别报错Package xcolor Error：Undefined color的解决方法</title>
    <url>/posts/25920.html</url>
    <content><![CDATA[<p>例如在使用tikz的node时设定颜色：color=FireBrick2，报错</p>
<figure class="highlight ada"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">Package</span> <span class="title">xcolor Error: Undefined color `tikz@color'.</span></span><br><span class="line"> </span><br><span class="line">See the xcolor <span class="keyword">package</span> <span class="title">documentation for explanation.</span></span><br><span class="line"><span class="keyword">Type</span>  <span class="type">H </span>&lt;<span class="keyword">return</span>&gt;  <span class="keyword">for</span> immediate help.</span><br><span class="line"> ...                                              </span><br><span class="line">                                                  </span><br><span class="line">l.<span class="number">56</span>     \<span class="keyword">end</span>{axis}</span><br></pre></td></tr></tbody></table></figure>

<p>在tex文件开头添加</p>
<figure class="highlight latex"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">\<span class="name">usepackage</span><span class="string">[x11names]</span><span class="string">{xcolor}</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>无效。根据<a href="https://tex.stackexchange.com/questions/124636/package-xcolor-error-undefined-colors-maroon-royal-blue-when-master-has-pdf">Package xcolor Error: Undefined colors “Maroon”/“Royal Blue” when master has PDF included classicthesis 3.1</a>将x11names添加到documentsclass的选项中即可解决该问题：</p>
<figure class="highlight latex"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">\<span class="name">documentclass</span><span class="string">[a4paper,x11names]</span><span class="string">{article}</span></span></span><br><span class="line"><span class="tag">\<span class="name">usepackage</span><span class="string">{xcolor}</span></span></span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>latex</tag>
        <tag>xcolor</tag>
      </tags>
  </entry>
  <entry>
    <title>git clone大仓库(&gt;1G)时速度慢并出现RPC failed断开连接错误的真正解决方法</title>
    <url>/posts/24163.html</url>
    <content><![CDATA[<p>最近git clone一个很大的repository（git-sdk-64）时用它本身release的installer是解压出来一个小git然后用它来从远端clone但是速度极慢，并且出现错误</p>
<p>克隆远程存储库时遇到错误: Git failed with a fatal error.<br>early EOF<br>the remote end hung up unexpectedly<br>index-pack failed<br>RPC failed; curl 18 transfer closed with outstanding read data remaining</p>
<p>直接download zip用Microsoft Edge当然会断开，但是发现用Google Chrome和Internet Explorer也会断开，又试了Github Desktop也出问题，用安装了Github Extension的Visual Studio会速度慢点坚持时间长点不过仍然会报出相同的速度。考虑到网上的经验，先将github仓库用git云后台导入到gitee然后再从gitee下载zip发现同样会出现连接中断的问题，并且由于gitee下载速度较快（几个M/s）所以可以充分下载到略超过1G左右断开（其实使用offcloud下载Edge引出的zip下载链接尽管能提速但仍会在1G处断开），原来这是HTTP下载的问题(curl)，我们使用SSH clone即可（生成rsa pub那一套），注意gitee仓库和github一样对1G以上的仓库有限制，gitee会将导入的大仓库block掉，我们用掉一次解除的机会（一共3次）然后git clone ssh链接，注意到0.99/1.99/2.99处都会出现一条error，这并不影响，待其下载完resolve deltas然后update好后发现clone到的仓库完好。</p>
<p>经过试错证明，开全局模式代理、修改hosts文件并不能加快git clone的速度（导入到gitee才是正道再clone，同时期盼coding.net能从github导入），而设置git clone的深度为一 –depth 1也并不能解决克隆大仓库时断开的问题，也不要试图用各种downgit来分成一部分一部分的下载（因为下载很多后速度会极慢乃至于会出现服务器错误）。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>git clone</tag>
        <tag>rpc failed</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows 10 ttf字体文件右键菜单没有安装选项导致MATLAB预设无法识别使用已安装字体的问题的解决方法</title>
    <url>/posts/18163.html</url>
    <content><![CDATA[<p>最近试图把MATLAB预设字体改成github上的Consolas-with-Yahei字体，clone到本地解压出.ttf字体文件后将其复制到C:\Windows\Fonts自动安装后发现其预设字体下拉栏中并无该字体。在网上寻找无果，经测，在控制面板-&gt;外观和个性化-&gt;字体-&gt;字体设置中允许使用快捷方式安装字体勾选后仍然无法解决，于是打开regedit注册表编辑器进入计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Fonts(*)进行注册表操作，以Consolas-with-Yahei Bold Nerd Font.ttf字体文件为例（保险起见应先关闭MATLAB，并确定该字体文件已被复制到C:\Windows\Fonts并安装成功）：</p>
<p>在(*)目录下新建字符串值名为”Consolas-with-Yahei Bold (TrueType)”,将其值输入为”Consolas-with-Yahei Bold Nerd Font.ttf”。</p>
<p>为Consolas-with-Yahei Nerd Font.ttf, Consolas-with-Yahei Italic Nerd Font.ttf, Consolas-with-Yahei Bold Italic Nerd Font.ttf等重复上述操作。重新打开MATLAB预设-&gt;字体，发现下拉栏中已有Consolas-with-Yahei字体名字，问题成功解决。</p>
<p><strong>注意：注册表中注册字体时值的名称必须为在C:\Windows\Fonts中安装的名称！</strong>例如在Fonts目录中安装后显示的名称为：”YaHei Consolas Hybrid 常规”：</p>
<p><img src="https://img-blog.csdnimg.cn/202002190025245.png" alt="img"></p>
<p>则值名应设为”YaHei Consolas Hybrid (TrueType)”，若设为其他名称则问题依旧存在。</p>
<p>另外，在先前操作中发现右键.ttf字体文件或Windows\Fonts中的字体弹出右键菜单会弹出报错窗口提示Inventor等程序的启动问题接着显示残缺的右键菜单，将Autodesk Inventor卸载后则情况消失，怀疑该问题的出现与Inventor等程序有关，因为此前Inventor的授权被Solidworks、Cadence Allegro等软件干扰导致许可证出现问题使得Inventor等无法启动。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>matlab</tag>
        <tag>ttf</tag>
        <tag>opentype</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows 10无法打开注册表 由于某个错误无法打开该密钥(详细信息:拒绝访问)且无法在注册表上设置新的所有者拒绝访问的解决方案</title>
    <url>/posts/22235.html</url>
    <content><![CDATA[<p>在安装Solidworks是安装程序错误指向了注册表：</p>
<p>计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Installer\UserData\S-1-5-18\Components\628A……………….\3F18……………………</p>
<p>而试图使用注册表编辑器查看该注册表时提示窗口”无法打开XXX 由于某个错误无法打开该密钥 详细信息 拒绝访问”，试图更改权限设置新的所有者后收到错误”无法在XXX上设置新的所有者拒绝访问”。</p>
<p>经过试错，网上提供的写vbs脚本、js脚本、inf安装文件的方法无法执行，其他则多为Windows 7或XP的方法。实际上的解决方法为：</p>
<p>在该项的上一级，也即”628A……………..”项，发现该项无权限问题，右键-&gt;权限-&gt;高级-&gt;所有者:更改（即使该项的所有者已被设为Administrators），输入Administrators检查名称后确定，选定替换子容器和对象所有者，并勾选窗口最下方的使用可从此对象继承的权限项目替换所有子对象的权限项目，可能会弹出报错窗口（无法替换子容器和对象所有者）但是继续确定（使用可从此对象继承的权限项目替换所有子对象的权限项目），完成后发现其子项可以查看，权限也已被更改，问题成功解决。</p>
<p><strong>！注意：出现类似注册表问题时请切勿修改”Installer”项或其父项等的注册表项的权限，最高只能修改到”Components”项的权限，否则会产生开始菜单、桌面图标等种种问题，且权限很难完全更改回去，这些次生的问题也很难解决，对系统造成不可逆转的伤害。</strong></p>
<p><strong>！注意：如果更改了父项的所有者，请在安装问题解决后将它和它的子项的所有者恢复为SYSTEM并继承Administrators的权限。</strong></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>regedit</tag>
      </tags>
  </entry>
  <entry>
    <title>彻底卸载Solidworks及Electrical以避免重新安装时出现1603、注册表权限错误或Installer未按预期运行</title>
    <url>/posts/27647.html</url>
    <content><![CDATA[<p>本来Solidworks的卸载问题相对不多，但是由于一波hp操作（在卸载程序中断过程中删除文件、注册表）导致卸载程序没有清理干净，导致后续产生了巨大问题，打开Solidworks安装程序发现许多选项是灰色并且未勾选的，之后还出现了其他问题。那么在这种极限状况下该如何挽救？</p>
<p>首先研究log日志文件，这非常关键，在这种安装尚未开始进行、”为支持部门保存日志”选项的窗口尚未弹出时，以Solidworks 2020 SP1.0为例，我们可以在C:\Users&lt;username&gt;\AppData\Roaming\SOLIDWORKS\Installation Logs\2020 SP1.0中找到日志文件，我们之间进入子目录”Other Logs”中寻找“sldIMLog_xxxxx-xxxxx-xxxx_0000x.txt”文件中最近一次（或出现最大问题的那次），在子目录中的sldIMLog日志比上一级目录中的同名文件记录更详尽。此外，同样在Other Logs中我们找到GetSourceInfo_xxxxx-xxxxx-xxxx-xxx.xml文件，最好通过IE等支持XML查看的浏览器或XML查看器查看，自动缩进看的好看一点。开始工作：</p>
<p>1.对于Solidworks Electrical用户，先看结尾处的注意事项。</p>
<p>2.如果之前未在控制面板使用Solidworks自己的卸载程序卸载，请先进行此操作，即使你知道TeighaX、Bonjour等软件是它的附加组件，也无需卸载它们（除非已经安装了比Solidworks安装程序自带的更高版本），<strong>注意不要卸载Visual C++ Redistributable、.NET Framework等（除非你之后安装的安装程序已经明确指出安装问题是由它们引起）！卸载重装往往会造成非常严重、不可挽回的问题</strong>。</p>
<p>3.确认卸载操作完成后，下载并安装Windows Installer Clean Up，尽管该工具是为Windows XP设计，对于Windows 10的MSI许多地方显得捉襟见肘，但是目前尚无代替工具。用管理员打开后，找到带Solidworks字段的几个程序Remove。如果这一步骤与后续步骤顺序颠倒导致问题，请转至步骤6参考。</p>
<p>该工具会出现兼容性问题，点击Remove运行一段时间后会重启一个窗口最后一行显示Removed /Features并持续占用CPU，这种情况下只要直接关闭该窗口，再次Remove运行一段时间后重启窗口最后一行显示Removed /Patches，然后再重复关闭、Remove的操作相继remove media、net等直到不再弹出为止，发现列表中要删除的程序已经消失。如果未找到Solidworks相关程序，反而找到一些(All Users)后名称与版本号为空或名称为空的程序，很可能是已损坏的Solidworks相关程序，也需要将其Remove！事实上，即使它们与Solidworks无关，它们也已经损坏，Remove不会对软件正常运行产生影响。</p>
<p>删除X:\Program Files\SOLIDWORKS Corp(X代表盘符C/D/E等)、X:\ProgramData\SOLIDWORKS Electrical，以及C:\Program Files、C:\Program Files (x86)及其子目录Common Files中的Solidworks或Solidworks Shared文件夹，以及C:\WINDOWS\Solidworks（经常被忽略的点），以及C:\Users&lt;username&gt;\AppData的子目录Local、LocalLow、Roaming中含有Solidworks的文件夹。事实上，X:\ProgramData\SOLIDWORKS Data作为存放异孔型向导Toolbox的目录可以不必删除，在下次执行Solidworks安装程序时可以手动设置该目录，安装程序会自动更新其内容。如果你使用_SOLIDSQUAD_团队的激活工具，尽量不要删除C:\SolidWorks_Flexnet_Server，因为Cadence Allegro、Autodesk等软件激活会共用该Server的服务等，由于该团队的工具可以延续之前保留的激活状态无需激活，所以尽量不要删掉Flexnet相关文件、服务、注册表等，否则共用该服务的软件激活状态会出现异常，造成更大损失。</p>
<p>4.Win+R运行输入regedit打开注册表编辑器，删除下列注册表项：</p>
<p>* 计算机\HKEY_CURRENT_USER\Software\SolidWorks</p>
<p>* 计算机\HKEY_LOCAL_MACHINE\SOFTWARE\SolidWorks</p>
<p>* 计算机\HKEY_LOCAL_MACHINE\SOFTWARE\SolidWorks Corporation</p>
<p>* 计算机\HKEY_USERS\S-1-5-xx(-x…)\Software\SolidWorks【可能在S-1-5-21-…】</p>
<p>5.使用批量的注册表管理工具（推荐Registrar Registry Manager）搜索所以带Solidworks的注册表项，全部搜索出后，由于Solidworks会与Autodesk、ANSYS、COMSOL、Altium Designer、Microsoft Office等软件交互，删除时应避开带有这些字段的注册表项和值。然后再搜索eDrawings等字段补遗。</p>
<p>6.运行Solidworks安装程序到安装选项选择安装组件那一页，如果发现有些尚未勾选的选项变灰无法勾选，退出安装程序，检查之前找到的txt日志文件，发现最后提示</p>
<figure class="highlight angelscript"><table><tbody><tr><td class="code"><pre><span class="line">[I    <span class="number">45</span> <span class="number">1</span> entitleme..ecker.cpp(<span class="number">1934</span>) <span class="number">10</span>:<span class="number">42</span>:<span class="number">10</span>] {ID #<span class="number">55700</span>} $S10:<span class="number">42</span>:<span class="number">10</span></span><br><span class="line">Info	Entitlement	<span class="number">45</span>	<span class="number">55700</span>	<span class="string">"所隐藏的产品(无法选定):{0: SOLIDWORKS Installation Manager}"</span></span><br></pre></td></tr></tbody></table></figure>

<p>还有另外44条类似的提示，并最终汇总给出”可以选定的产品”、”用户已授权安装的产品”、”要进行新安装(不是升级)的产品”、”已安装并要保留的产品”、”要升级的产品(带有升级的版本)”、”要删除的产品”。深入查看，发现许多类似于</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line">[I     0 1 entitleme<span class="built_in">..</span>ecker.cpp(2746) 10:42:10]</span><br><span class="line">SetFeaturesEntitlement() report <span class="keyword">for</span> PlugIns [=&gt;PlugIns, <span class="attribute">p</span>=Composer, 6 of 8, <span class="attribute">children</span>=0]:</span><br><span class="line">[<span class="attribute">selected</span>=1, <span class="attribute">selectable</span>=1, <span class="attribute">mode</span>=1], [<span class="attribute">ent</span>=1], <span class="attribute">skip</span>=0, <span class="attribute">clf</span>=0, <span class="attribute">addins</span>=0, <span class="attribute">asel</span>=1</span><br></pre></td></tr></tbody></table></figure>

<p>的提示，我们发现，如果skip为1，那么selected与selectable均为0；如果asel为1，则selected, selectable, mode均为1。如果clf为1，则ent为0而asel为1。继续向上翻看，我们发现多条下列提示：</p>
<figure class="highlight nim"><table><tbody><tr><td class="code"><pre><span class="line">[I     <span class="number">0</span> <span class="number">2</span>     msiinstaller.cpp(<span class="number">2804</span>) <span class="number">10</span>:<span class="number">42</span>:<span class="number">08</span>]</span><br><span class="line"><span class="type">SKIPPING</span> <span class="type">INSTALL</span> <span class="type">CONDITION</span> - installed version <span class="type">OK</span> (productcode=<span class="meta">{......}</span></span><br></pre></td></tr></tbody></table></figure>

<p>以及</p>
<figure class="highlight angelscript"><table><tbody><tr><td class="code"><pre><span class="line">[I     <span class="number">0</span> <span class="number">2</span>     msiinstaller.cpp(<span class="number">2829</span>) <span class="number">10</span>:<span class="number">42</span>:<span class="number">08</span>]</span><br><span class="line">INSTALL CONDITION Product NOT detected (upgradecode={......}, msiversion=<span class="number">14.16</span><span class="number">.27012</span></span><br><span class="line">[I     <span class="number">0</span> <span class="number">2</span>  clientinstaller.cpp(<span class="number">3538</span>) <span class="number">10</span>:<span class="number">42</span>:<span class="number">08</span>]</span><br><span class="line">INSTALL CONDITION IS FALSE!</span><br><span class="line">[E     <span class="number">0</span> <span class="number">1</span>      projectdata.cpp(<span class="number">2485</span>) <span class="number">10</span>:<span class="number">41</span>:<span class="number">07</span>]</span><br><span class="line">WARNING! IsSelected called on product (SWKorean) with no actions - using hidden m_bSelected</span><br></pre></td></tr></tbody></table></figure>

<p>这意味着这些productcode对应的组件的Installer被detect到而被skip，而且还有Uninstall的Registry Key丢失，所以我们想到要删除它们。打开之前关于GetSourceInfo的xml日志文件，用注册表管理器打开”计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Installer\Folders”，向下找到值为”C:\WINDOWS\Installer{…}的范围内，在XML文件中搜索/ProductCode，将搜索出的SolidWorks、SWSupportedLanguages等的Product的Code在这个范围内的值对应{}括号内的值删掉，如SolidWorks对应3F4681F3打头的Code，将该值从Folders项中删去。值得注意的是，ProductCode其后的UpgradeCode有时也有用，不过这里可以忽略。此外，一些名为SWKorean之类的语言包类Product可以跳过（除了你先前安装的其他语言如Chinese、Chinese Simplified），此外，还可以跳过一些附加组件如Bonjour、TeighaX、Microsoft_VSTA、Microsoft_VBA等，<strong>不要动MSSQL相关注册表</strong>。大致清理注册表（即步骤4中的注册表），重启安装程序，发现问题解决。</p>
<p>7.目前可以勾选了，设置好后开始安装，却在安装Solidworks主程序遇到了注册表权限问题，接着出现Installer未按预期运行而中断，这是老生常谈的问题了。检查txt日志文件，跳过大段无用的[E  157 1   msiinstaller.cpp(3337) 13:33:58] $S13:33:58   Error   Status发现提示[I   0 3  clientinstaller.cpp(7093) 13:33:58] ::MsiInstallProduct returned 1603。这时网上的删除VSTA注册表等种种怪招自然是没用的，还有些给出的卸载方案根本卸载不干净，还有的则会造成破坏。我们记下安装程序给出的注册表位置在Unknown\……\……，两个省略号都是大段十六进制code，在注册表中搜索第一个code得到3个结果，其中一个定位到计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Installer\UserData\S-1-5-18\Components\，发现其子项出现严重权限问题打不开，也更改不了所有者权限，参考我的另一篇文章<a href="https://blog.csdn.net/yihuajack/article/details/104395132">Windows 10无法打开注册表 由于某个错误无法打开该密钥(详细信息:拒绝访问)且无法在注册表上设置新的所有者拒绝访问的解决方案</a>，更改”Component”项的所有者并选定替换子容器和对象所有者、勾选窗口最下方的使用可从此对象继承的权限项目替换所有子对象的权限项目。大致清理注册表（即步骤4中的注册表），重启安装程序，发现问题解决。再次提示记得成功后恢复”Component”项及其子项的所有者为”SYSTEM”并继承Administrators的权限以免对系统和其他软件造成影响。</p>
<hr>
<p><strong>针对Solidworks Electrical用户：</strong></p>
<p><strong>注意：如果使用Solidworks安装媒介自带的SQL Server Express新建实例localhost\TEW_SQLEXPRESS来安装Solidworks Electrical，切勿对该SQL Server进行删除服务、注册表或卸载软件等操作！</strong>SQL Server是一个远比其他软件复杂的系统，如果其被损坏产生安装问题大多几乎无解，且对系统造成广泛、不可逆转的损害，而且原先的安装媒介往往丢失、不兼容、失效，修复能力很有限，往往只能重装系统。</p>
<p>i)如果已经误操作而产生不可逆转的后果，只能将原先的TEW_SQLEXPRESS搁置，新建实例重命名为例如”TEW_SQLEXPRESS1”继续。注意实例名有长度限制。</p>
<p>ii)如果尚未损坏SQL Server服务、注册表、软件、实例等，就不要修改、删除它们，因为SQL Server的实例高度独立，Solidworks的修改并不对其造成多大影响。如果后续SQL Server确实报错，最好通过SSMS(SQL Server Management Studio)或SQL Server安装程序安全删除该实例，并清理服务，但是仍然不要修改SQL Server的注册表或卸载其软件。如果仍然报错，请转至选项i)。</p>
<p>事实上，如果你以安装高于2014版本（到Solidworks 2020为止）的SQL Server或高于Express的版本如Developer、Enterprise、Professional等，你可以使用自己的SQL Server新建localhost下或你的计算机名下(例如名为DESKTOP-XXXXXXX\XXX)的实例在Solidworks安装程序设定中用于Solidworks Electrical。你可以选择Windows身份验证登录方式，也可以选择SQL Server身份验证登录方式自己设定密码，二者经测均可。</p>
<p>（20200519更新：注意采用已安装的SQL Server实例用于Solidworks Electrical时，若安装的是默认实例MSSQLSERVER，则服务器名称应为你的<strong>计算机名</strong>。）</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>regedit</tag>
        <tag>solidworks</tag>
        <tag>sqlserver</tag>
        <tag>installer</tag>
      </tags>
  </entry>
  <entry>
    <title>Cadence PSpice中更改Cursor控制的曲线及打印图形Cursor信息的方法</title>
    <url>/posts/56491.html</url>
    <content><![CDATA[<p>画好原理图，Run PSpice运行仿真显示仿真曲线后在菜单栏Trace-&gt;Cursor-&gt;Display显示Cursor，在图上左键单击为Cursor 1，右键单击为Cursor 2，默认如图示：</p>
<p><img src="/posts/56491/Documents\Programming\HexoBlog\source_posts\EE-1\20201111110447360.png" alt="img"></p>
<p>单击图上的红色菱形图标，Cursor即被切换到红色菱形图标所代表的曲线上（如果单击的是图标右边的表达式，则是选中表达式所代表的曲线），在图上单击到大致位置后通过键盘左右方向键调整到合适的X Values，如图示：</p>
<p><img src="/posts/56491/Documents\Programming\HexoBlog\source_posts\EE-1\20201111110716727.png" alt="img"></p>
<p>若要在打印的PDF等图像中下方显示的Cursor信息从默认的第一条曲线改为第二条曲线，则将鼠标光标 移动至下方Probe Cursor栏的第三行第零列（CURSOR 1单元格左边的控制格）点击拖动第三行向上以至第二行（如果无法拖动，则先右键单击弹出右键菜单，然后左键点击其他地方取消右键菜单，再左键拖动即可拖动），拖动后最好不要点击任何地方（有时候会使得两个CURSOR的位置再次颠倒回原来的顺序），直接在菜单栏中File-&gt;Print…(Ctrl+P)打印图形，打印后下方的Cursor信息即被改成了第二条曲线的信息：</p>
<p><img src="/posts/56491/Documents\Programming\HexoBlog\source_posts\EE-1\20201111111704838.png" alt="img"></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>EE</category>
      </categories>
      <tags>
        <tag>orcad</tag>
        <tag>pspice</tag>
        <tag>cadence</tag>
      </tags>
  </entry>
  <entry>
    <title>从零开始的hexo与next主题配置github.io博客（进阶篇）</title>
    <url>/posts/53007.html</url>
    <content><![CDATA[<ol>
<li><p>注册并登录<a href="https://leancloud.cn/">LeanCloud</a>。参考官方文档<a href="https://valine.js.org/quickstart.html%E5%88%9B%E5%BB%BA%E5%BC%80%E5%8F%91%E7%89%88%E5%BA%94%E7%94%A8%E3%80%82">https://valine.js.org/quickstart.html创建开发版应用。</a></p>
</li>
<li><p>执行</p>
<figure class="highlight cmake"><table><tbody><tr><td class="code"><pre><span class="line">npm <span class="keyword">install</span> valine -g</span><br></pre></td></tr></tbody></table></figure>

<p>安装valine。</p>
</li>
<li><p>在<a href="https://releases.leanapp.cn/#/leancloud/lean-cli/releases">Release</a>页面下载安装lean-cli-setup-x64.msi。</p>
</li>
<li><p>如出现</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line">获取 Class 列表失败</span><br><span class="line">The app is archived, please restore <span class="keyword">in</span><span class="built_in"> console </span>before use. [400 <span class="builtin-name">GET</span> /data/6pVKQMTaE6R44OanMdxlS9Ku-gzGzoHsz/classes]</span><br></pre></td></tr></tbody></table></figure>

<p>参考<a href="https://forum.leancloud.cn/t/class/22277">获取 Class 列表失败 - 急在线等</a>激活应用，在存储服务数据恢复中：“归档应用恢复中，该操作大约需要 10-30 分钟”，但实际上很快就能恢复。</p>
</li>
<li><p>使用<a href="https://github.com/DesertsP/Valine-Admin">Valine-Admin</a>参考官方文档：<a href="https://deserts.io/valine-admin-document/%E3%80%82%E6%B3%A8%E6%84%8F%E7%AC%AC1%E6%AD%A5%E6%96%B0%E7%89%88LeanCloud%E4%BB%A5%E8%BF%81%E7%A7%BB%E5%88%B0LeanEngine->WEB->%E9%83%A8%E7%BD%B2->%E9%83%A8%E7%BD%B2->%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE->Git%E9%83%A8%E7%BD%B2%EF%BC%8C%E5%A1%AB%E5%86%99%E5%AF%B9%E5%BA%94%E5%8D%9A%E5%AE%A2%E7%9A%84GitHub%E4%BB%93%E5%BA%93%E7%9A%84HTTP%E9%93%BE%E6%8E%A5%E6%88%96SSH%E9%93%BE%E6%8E%A5%EF%BC%8C%E5%B0%86%E5%85%B6%E7%BB%99%E5%87%BA%E7%9A%84Deploy">https://deserts.io/valine-admin-document/。注意第1步新版LeanCloud以迁移到LeanEngine-&gt;WEB-&gt;部署-&gt;部署-&gt;部署项目-&gt;Git部署，填写对应博客的GitHub仓库的HTTP链接或SSH链接，将其给出的Deploy</a> Key添加到自己GitHub账号的SSH Key中。在“设置”下添加环境变量（包括ADMIN_URL）。返回“部署”，选择手动部署，选择目标环境为生产环境（也仅可选择生产环境），选择分支或提交为默认的”master”，保持hexo服务器处于开启状态，点击部署。</p>
</li>
<li><p>将设置-&gt;应用Keys中的AppID和AppKey复制到next主题的_config.yml中的valine项下，enable设置为true，language设置为en, zh-cn，visitor设置为true，recordIP设置为false。重新部署hexo评论系统即成功添加。</p>
</li>
<li><p>【deprecated】安装hexo-admin：</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">npm <span class="keyword">install</span> hexo-<span class="keyword">admin</span> <span class="comment">--save</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>安装<a href="https://github.com/crimx/hexo-filter-github-emojis">hexo-filter-github-emojis</a>以支持emoji渲染（无需卸载也切勿卸载hexo-renderer-ejs和hexo-renderer-marked，否则可能会出现“1 vulnerability requires manual review. See the full report for details.”这类无法修复的问题）</p>
<figure class="highlight livecodeserver"><table><tbody><tr><td class="code"><pre><span class="line">npm install hexo-<span class="built_in">filter</span>-github-emojis <span class="comment">--save</span></span><br></pre></td></tr></tbody></table></figure>

<p>同样切记一定要使用–save选项，不要全局安装。在Hexo _config.yml中添加</p>
<figure class="highlight yaml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">githubEmojis:</span></span><br><span class="line">     <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">className:</span> <span class="string">github-emoji</span></span><br><span class="line">     <span class="attr">inject:</span> <span class="literal">true</span></span><br><span class="line">   <span class="comment">#   unicode: true</span></span><br><span class="line">     <span class="attr">styles:</span></span><br><span class="line">   <span class="comment">#     display: inline</span></span><br><span class="line">   <span class="comment">#     vertical-align: middle </span></span><br><span class="line">   <span class="comment">#   localEmojis:</span></span><br><span class="line">     <span class="attr">customEmojis:</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>添加coding.me仓库同步托管：在Hexo _config.yml的deploy项下的repo项下新增</p>
<figure class="highlight less"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">coding</span>: git<span class="variable">@e</span>.coding.<span class="attribute">net</span>:ayka/ayka.coding.me.git,master</span><br></pre></td></tr></tbody></table></figure>

<p>参考<a href="https://www.heson10.com/posts/54971.html">Hexo在GitHub和Coding双线部署教程</a>设置coding.net项目（ps.在遇到这篇文章之前一度以为coding.net已取消了静态页面功能），如有需要自己配置域名也可参考该文章。<br>使用GitHub注册<a href="https://vercel.com/">Vercel</a>。在Import a Git Repository界面输入github.io仓库地址，FRAMEWORK PRESET选择Hexo，环境变量留空。<br>Coding新建仓库，并新建访问令牌。将Hexo _config.yml的deploy项下的repo项下更改为github: https://<github access="" token="">@github.com/<username>/<username>.github.io.git和coding: https://&lt;令牌用户名&gt;:&lt;访问令牌&gt;@e.coding.net/<username>/<reponame>/<reponame>.git。在Hexo blog目录下执行</reponame></reponame></username></username></username></github></p>
<figure class="highlight csharp"><table><tbody><tr><td class="code"><pre><span class="line">git <span class="keyword">init</span></span><br></pre></td></tr></tbody></table></figure>

<p>执行</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line">git remote add origin https://<span class="tag">&lt;<span class="name">令牌用户名</span>&gt;</span>:<span class="tag">&lt;<span class="name">访问令牌</span>&gt;</span>@e.coding.net/<span class="tag">&lt;<span class="name">username</span>&gt;</span>/<span class="tag">&lt;<span class="name">reponame</span>&gt;</span>/<span class="tag">&lt;<span class="name">reponame</span>&gt;</span>.git</span><br></pre></td></tr></tbody></table></figure>

<p>如报错</p>
<figure class="highlight vim"><table><tbody><tr><td class="code"><pre><span class="line">fata<span class="variable">l:</span> remote origin already <span class="built_in">exists</span>.</span><br></pre></td></tr></tbody></table></figure>

<p>则执行</p>
<figure class="highlight ebnf"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">git remote rm origin</span></span><br></pre></td></tr></tbody></table></figure>

<p>后重新git remote add。执行</p>
<figure class="highlight awk"><table><tbody><tr><td class="code"><pre><span class="line">git submodule add https:<span class="regexp">//gi</span>thub.com<span class="regexp">/theme-next/</span>hexo-theme-<span class="keyword">next</span> themes/<span class="keyword">next</span></span><br><span class="line">git commit -m <span class="string">'Initial commit'</span></span><br><span class="line">git push -u origin master</span><br></pre></td></tr></tbody></table></figure>

<p>打开项目设置-&gt;功能开关-&gt;持续集成，返回项目页面刷新后选择持续集成-&gt;构建计划-&gt;新建构建计划-&gt;选择构建计划模板-&gt;自定义构建过程，填写构建计划名称，构建过程-&gt;代码仓库选择之前用来存放博客源码的仓库，配置来源选择使用静态配置的Jenkinsfile确定后在流程配置-&gt;文本编辑器中添加：</p>
<figure class="highlight vim"><table><tbody><tr><td class="code"><pre><span class="line">pipeline {</span><br><span class="line">  agent any</span><br><span class="line">  stages {</span><br><span class="line">    stage(<span class="string">'克隆项目'</span>) {</span><br><span class="line">      steps {</span><br><span class="line">        <span class="keyword">sh</span> <span class="string">'git clone https://oNTAWaPDGB:49028867e0b47d1b2a19b128396b89f43cf13df2@e.coding.net/ayka/hexoblog/hexoblog.git'</span></span><br><span class="line">        <span class="keyword">sh</span> <span class="string">'ls -a'</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">    stage(<span class="string">'安装依赖'</span>) {</span><br><span class="line">      steps {</span><br><span class="line">          <span class="keyword">sh</span> <span class="string">'ls -a'</span></span><br><span class="line">          <span class="keyword">sh</span> <span class="string">'npm install -g hexo-cli'</span></span><br><span class="line">          <span class="keyword">sh</span> <span class="string">'npm install hexo --save'</span></span><br><span class="line">          <span class="keyword">sh</span> <span class="string">'npm install'</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">    stage(<span class="string">"构建发布"</span>) {</span><br><span class="line">      steps {</span><br><span class="line">          <span class="keyword">sh</span> <span class="string">'hexo clean &amp;&amp; hexo g &amp;&amp; hexo d'</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">    stage(<span class="string">'检出'</span>) {</span><br><span class="line">      steps {</span><br><span class="line">        checkout([</span><br><span class="line">          $clas<span class="variable">s:</span> <span class="string">'GitSCM'</span>,</span><br><span class="line">          branche<span class="variable">s:</span> [[name: env.GIT_BUILD_REF]],</span><br><span class="line">          userRemoteConfig<span class="variable">s:</span> [[</span><br><span class="line">            ur<span class="variable">l:</span> env.GIT_REPO_URL,</span><br><span class="line">            credentialsId: env.CREDENTIALS_ID</span><br><span class="line">          ]]])</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">      stage(<span class="string">'自定义构建过程'</span>) {</span><br><span class="line">        steps {</span><br><span class="line">          <span class="keyword">echo</span> <span class="string">'自定义构建过程开始'</span></span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<p>触发规则-&gt;代码源触发选择推送到master时触发构建保存修改。<br>注册<a href="https://cloudstudio.net/">Cloud Studio</a>（可直接使用coding.net账号登录）。新建工作空间（我自己创建），运行环境-&gt;预置环境选择Node,js，代码来源选择仓库，填写博客源码库的SSH。<br>进入工作空间，在终端中执行</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">npm <span class="keyword">install</span> -g hexo-cli</span><br><span class="line">npm <span class="keyword">install</span> hexo <span class="comment">--save</span></span><br><span class="line">npm <span class="keyword">install</span></span><br></pre></td></tr></tbody></table></figure>

<p>即可生成。</p>
</li>
<li><p>设置背景图片、半透明效果、博主头像实现圆形并旋转360°参考<a href="https://www.heson10.com/posts/52911.html">Hexo+Next7.X 博客美化教程合集</a>。</p>
</li>
<li><p>参考<a href="https://www.heson10.com/posts/51572.html">为Hexo增加algolia搜索功能</a>。其中设置环境变量时如果使用Windows环境则将export命令改为执行</p>
<figure class="highlight autohotkey"><table><tbody><tr><td class="code"><pre><span class="line">setx HEXO_ALGOLI<span class="built_in">A_INDEXING</span>_KEY your_api_key</span><br></pre></td></tr></tbody></table></figure>

<p>后重启Terminal。另可选增加本地搜索功能参考<a href="https://www.heson10.com/posts/2635.html">hexo删除algolia搜索增加本地搜索功能</a>。</p>
<p>注意：每次添加新的博文生成前都需执行</p>
<figure class="highlight ebnf"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">hexo algolia</span></span><br></pre></td></tr></tbody></table></figure>

<p>以刷新索引。</p>
</li>
<li><p>【deprecated】执行</p>
<figure class="highlight crystal"><table><tbody><tr><td class="code"><pre><span class="line">git clone <span class="symbol">https:</span>/<span class="regexp">/github.com/theme</span>-<span class="keyword">next</span>/theme-<span class="keyword">next</span>-canvas-nest source/<span class="class"><span class="keyword">lib</span>/<span class="title">canvas</span>-<span class="title">nest</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>并在Next _config.yml中添加相关配置后启动服务器会报错：</p>
<figure class="highlight latex"><table><tbody><tr><td class="code"><pre><span class="line">Unhandled rejection Template render error: (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">themes</span></span><span class="tag">\<span class="name">next</span></span><span class="tag">\<span class="name">layout</span></span><span class="tag">\<span class="name">index</span></span>.swig)</span><br><span class="line">  Template render error: (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">themes</span></span><span class="tag">\<span class="name">next</span></span><span class="tag">\<span class="name">layout</span></span><span class="tag">\<span class="name">index</span></span>.swig) [Line 36, Column 23]</span><br><span class="line">  Template render error: (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">themes</span></span><span class="tag">\<span class="name">next</span></span><span class="tag">\<span class="name">layout</span></span><span class="tag">\<span class="name">index</span></span>.swig) [Line 39, Column 18]</span><br><span class="line">  Template render error: (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">themes</span></span><span class="tag">\<span class="name">next</span></span><span class="tag">\<span class="name">layout</span></span><span class="tag">\<span class="name">index</span></span>.swig)</span><br><span class="line">  Template render error: (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">themes</span></span><span class="tag">\<span class="name">next</span></span><span class="tag">\<span class="name">layout</span></span><span class="tag">\<span class="name">_</span></span>partials<span class="tag">\<span class="name">head</span></span><span class="tag">\<span class="name">head</span></span>-unique.swig) [Line 10, Column 23]</span><br><span class="line">  Template render error: (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">themes</span></span><span class="tag">\<span class="name">next</span></span><span class="tag">\<span class="name">layout</span></span><span class="tag">\<span class="name">index</span></span>.swig) [Line 3, Column 3]</span><br><span class="line">  Template render error: (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">themes</span></span><span class="tag">\<span class="name">next</span></span><span class="tag">\<span class="name">layout</span></span><span class="tag">\<span class="name">index</span></span>.swig)</span><br><span class="line">  Template render error: (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">themes</span></span><span class="tag">\<span class="name">next</span></span><span class="tag">\<span class="name">layout</span></span><span class="tag">\<span class="name">_</span></span>partials<span class="tag">\<span class="name">header</span></span><span class="tag">\<span class="name">index</span></span>.swig) [Line 6, Column 15]</span><br><span class="line">  Template render error: (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">themes</span></span><span class="tag">\<span class="name">next</span></span><span class="tag">\<span class="name">layout</span></span><span class="tag">\<span class="name">index</span></span>.swig)</span><br><span class="line">  Template render error: (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">themes</span></span><span class="tag">\<span class="name">next</span></span><span class="tag">\<span class="name">layout</span></span><span class="tag">\<span class="name">_</span></span>partials<span class="tag">\<span class="name">header</span></span><span class="tag">\<span class="name">sub</span></span>-menu.swig) [Line 2, Column 29]</span><br><span class="line">  Template render error: (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">themes</span></span><span class="tag">\<span class="name">next</span></span><span class="tag">\<span class="name">layout</span></span><span class="tag">\<span class="name">index</span></span>.swig)</span><br><span class="line">  Template render error: (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">themes</span></span><span class="tag">\<span class="name">next</span></span><span class="tag">\<span class="name">layout</span></span><span class="tag">\<span class="name">_</span></span>partials<span class="tag">\<span class="name">header</span></span><span class="tag">\<span class="name">sub</span></span>-menu.swig)</span><br><span class="line">  Template render error: (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">themes</span></span><span class="tag">\<span class="name">next</span></span><span class="tag">\<span class="name">layout</span></span><span class="tag">\<span class="name">index</span></span>.swig) [Line 5, Column 3]</span><br><span class="line">  Template render error: (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">themes</span></span><span class="tag">\<span class="name">next</span></span><span class="tag">\<span class="name">layout</span></span><span class="tag">\<span class="name">index</span></span>.swig) [Line 10, Column 14]</span><br><span class="line">  Template render error: (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">themes</span></span><span class="tag">\<span class="name">next</span></span><span class="tag">\<span class="name">layout</span></span><span class="tag">\<span class="name">index</span></span>.swig)</span><br><span class="line">  Template render error: (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">themes</span></span><span class="tag">\<span class="name">next</span></span><span class="tag">\<span class="name">layout</span></span><span class="tag">\<span class="name">_</span></span>partials<span class="tag">\<span class="name">pagination</span></span>.swig)</span><br><span class="line">  Template render error: (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">themes</span></span><span class="tag">\<span class="name">next</span></span><span class="tag">\<span class="name">layout</span></span><span class="tag">\<span class="name">index</span></span>.swig)</span><br><span class="line">  Template render error: (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">themes</span></span><span class="tag">\<span class="name">next</span></span><span class="tag">\<span class="name">layout</span></span><span class="tag">\<span class="name">_</span></span>partials<span class="tag">\<span class="name">comments</span></span>.swig)</span><br><span class="line">  Template render error: (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">themes</span></span><span class="tag">\<span class="name">next</span></span><span class="tag">\<span class="name">layout</span></span><span class="tag">\<span class="name">index</span></span>.swig)</span><br><span class="line">  Template render error: (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">themes</span></span><span class="tag">\<span class="name">next</span></span><span class="tag">\<span class="name">layout</span></span><span class="tag">\<span class="name">_</span></span>partials<span class="tag">\<span class="name">languages</span></span>.swig)</span><br><span class="line">  Template render error: (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">themes</span></span><span class="tag">\<span class="name">next</span></span><span class="tag">\<span class="name">layout</span></span><span class="tag">\<span class="name">_</span></span>partials<span class="tag">\<span class="name">footer</span></span>.swig) [Line 63, Column 8]</span><br><span class="line">  parseAggregate: expected comma after expression</span><br><span class="line">    at Object._prettifyError (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">node</span></span>_modules<span class="tag">\<span class="name">nunjucks</span></span><span class="tag">\<span class="name">src</span></span><span class="tag">\<span class="name">lib</span></span>.js:36:11)</span><br><span class="line">    at D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">node</span></span>_modules<span class="tag">\<span class="name">nunjucks</span></span><span class="tag">\<span class="name">src</span></span><span class="tag">\<span class="name">environment</span></span>.js:561:19</span><br><span class="line">    at Template.root [as rootRenderFunc] (eval at _compile (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">node</span></span>_modules<span class="tag">\<span class="name">nunjucks</span></span><span class="tag">\<span class="name">src</span></span><span class="tag">\<span class="name">environment</span></span>.js:631:18), &lt;anonymous&gt;:43:3)</span><br><span class="line">    at Template.render (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">node</span></span>_modules<span class="tag">\<span class="name">nunjucks</span></span><span class="tag">\<span class="name">src</span></span><span class="tag">\<span class="name">environment</span></span>.js:550:10)</span><br><span class="line">    at D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">themes</span></span><span class="tag">\<span class="name">next</span></span><span class="tag">\<span class="name">scripts</span></span><span class="tag">\<span class="name">renderer</span></span>.js:32:29</span><br><span class="line">    at _View._compiled (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">node</span></span>_modules<span class="tag">\<span class="name">hexo</span></span><span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">theme</span></span><span class="tag">\<span class="name">view</span></span>.js:136:50)</span><br><span class="line">    at _View.render (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">node</span></span>_modules<span class="tag">\<span class="name">hexo</span></span><span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">theme</span></span><span class="tag">\<span class="name">view</span></span>.js:39:17)</span><br><span class="line">    at D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">node</span></span>_modules<span class="tag">\<span class="name">hexo</span></span><span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">hexo</span></span><span class="tag">\<span class="name">index</span></span>.js:64:21</span><br><span class="line">    at tryCatcher (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">node</span></span>_modules<span class="tag">\<span class="name">bluebird</span></span><span class="tag">\<span class="name">js</span></span><span class="tag">\<span class="name">release</span></span><span class="tag">\<span class="name">util</span></span>.js:16:23)</span><br><span class="line">    at D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">node</span></span>_modules<span class="tag">\<span class="name">bluebird</span></span><span class="tag">\<span class="name">js</span></span><span class="tag">\<span class="name">release</span></span><span class="tag">\<span class="name">method</span></span>.js:15:34</span><br><span class="line">    at RouteStream._read (D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">HexoBlog</span></span><span class="tag">\<span class="name">node</span></span>_modules<span class="tag">\<span class="name">hexo</span></span><span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">hexo</span></span><span class="tag">\<span class="name">router</span></span>.js:47:5)</span><br><span class="line">    at RouteStream.Readable.read (_stream_readable.js:467:10)</span><br><span class="line">    at resume_ (_stream_readable.js:981:12)</span><br><span class="line">    at processTicksAndRejections (internal/process/task_queues.js:84:21)</span><br></pre></td></tr></tbody></table></figure>

<p>Next已将canvas-nest配置废弃。</p>
</li>
<li><p>执行</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">npm <span class="keyword">install</span> hexo-related-popular-posts <span class="comment">--save</span></span><br></pre></td></tr></tbody></table></figure>

<p>配置Next _config.yml中的related_posts项如下</p>
<figure class="highlight yaml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">related_posts:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">相关文章</span> <span class="comment"># Custom header, leave empty to use the default one</span></span><br><span class="line">  <span class="attr">display_in_home:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">params:</span></span><br><span class="line">    <span class="attr">maxCount:</span> <span class="number">5</span></span><br><span class="line">    <span class="comment">#PPMixingRate: 0.0</span></span><br><span class="line">    <span class="attr">isDate:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment">#isImage: false</span></span><br><span class="line">    <span class="comment">#isExcerpt: false</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>执行</p>
<figure class="highlight crystal"><table><tbody><tr><td class="code"><pre><span class="line">git clone <span class="symbol">https:</span>/<span class="regexp">/github.com/theme</span>-<span class="keyword">next</span>/theme-<span class="keyword">next</span>-fancybox3 themes/<span class="keyword">next</span>/source/<span class="class"><span class="keyword">lib</span>/<span class="title">fancybox</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>安装fancybox。在Next _config.yml中配置fancybox项设置值为true。</p>
</li>
<li><p>参考<a href="https://www.heson10.com/posts/3243.html">Hexo+next主题自定义友情链接页面</a>。<strong>注意：如果执行hexo clean后重新生成仍然显示之前的页面，需要关闭浏览器页面重新生成后打开。</strong></p>
</li>
<li><p>参考<a href="https://www.heson10.com/posts/31426.html">SEO优化：Hexo-abbrlink插件生成永久固定链接</a>。另外可使用<a href="https://github.com/rozbo/hexo-abbrlink2">hexo-abbrlink2</a>。</p>
</li>
<li><p>使用<a href="https://github.com/Molunerfinn/PicGo">PicGo</a>图床。安装后设置GitHub图床设定仓库名为<username>/<username>.github.io，设定分支名为master，设定Token需要在GitHub Settings-&gt;Developer Settings-&gt;Personal access tokens-&gt;Generate new token，其中Select repos只需选定repo项即可，将生成的token填入设定Token中。改进：新建GitHub仓库并将仓库名填入设定仓库名中，指定存储路径为img/，设定自定义域名为<a href="https://cdn.jsdelivr.net/gh/yihuajack/pics-for-uploading@master">https://cdn.jsdelivr.net/gh//@master</a>。</username></username></p>
</li>
<li><p>执行</p>
<figure class="highlight maxima"><table><tbody><tr><td class="code"><pre><span class="line">npm install hexo-asset-<span class="built_in">image</span> --<span class="built_in">save</span></span><br></pre></td></tr></tbody></table></figure>

<p>在Hexo _config.yml中的post_asset_folder设为true。执行hexo new <postname>发现其会自动创建一个同名的文件夹。在Typora-&gt;偏好设置-&gt;图像-&gt;插入图片时输入路径为D:\Documents\Programming\HexoBlog\source\_posts${filename}，前面的路径改为你所在的博客的路径，注意source与_post直接必须加两个反斜杠，否则hexo会将其转义成source_posts导致图片显示失败。如果要将之前的博文图片添加到asset文件夹中，只需手动创建同名文件夹，并将其中插入的图片放在该文件夹里面，在Typora中修改Markdown文件中图片所在路径即可。这种修改可在服务器运行时生效：</postname></p>
<figure class="highlight taggerscript"><table><tbody><tr><td class="code"><pre><span class="line">update link as:--&gt;/posts/52215/Documents<span class="symbol">\P</span>rogramming<span class="symbol">\H</span>exoBlog<span class="symbol">\s</span>ource<span class="symbol">\_</span>posts<span class="symbol">\C</span>SDN补档-16<span class="symbol">\2</span>0200315101839605.png</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>FrontEnd</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>valine</tag>
        <tag>leancloud</tag>
        <tag>next</tag>
      </tags>
  </entry>
  <entry>
    <title>LaTeX TikZ使用usegdlibrary命令报错Undefined control sequence的原因及解决方案</title>
    <url>/posts/26450.html</url>
    <content><![CDATA[<p>原因：“usegdlibrary”命令基于Ti<em>k</em>Z库“graphdrawing”，该库需要LuaTeX/LuaLaTeX支持。</p>
<p>解决方案：如已安装Tex Live，以VS Code为例，在settings.json的“latex-workshop.latex.tools”下添加</p>
<figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"lualatex"</span>,</span><br><span class="line">    <span class="attr">"command"</span>: <span class="string">"lualatex"</span>,</span><br><span class="line">    <span class="attr">"args"</span>: [</span><br><span class="line">        <span class="string">"-shell-escape"</span>,</span><br><span class="line">        <span class="string">"-synctex=1"</span>,</span><br><span class="line">        <span class="string">"-interaction=nonstopmode"</span>,</span><br><span class="line">        <span class="string">"-file-line-error"</span>,</span><br><span class="line">        <span class="string">"%DOC%"</span></span><br><span class="line">    ]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>在“latex-workshop.latex.recipes”下添加</p>
<figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"LuaLaTeX"</span>,</span><br><span class="line">    <span class="attr">"tools"</span>: [</span><br><span class="line">        <span class="string">"lualatex"</span></span><br><span class="line">    ]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>点击COMMANDS -&gt; Build LaTeX rpoject -&gt; Recipe: LuaLaTeX编译</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>LaTeX</category>
      </categories>
      <tags>
        <tag>latex</tag>
        <tag>vscode</tag>
        <tag>tikz</tag>
      </tags>
  </entry>
  <entry>
    <title>GitHub Actions不更新Gist问题的调试方法与解决方法（以waka-box为例）</title>
    <url>/posts/37452.html</url>
    <content><![CDATA[<p>使用<a href="https://github.com/matchai/waka-box">waka-box</a>或<a href="https://github.com/YouEclipse/waka-box-go">waka-box-go</a>时根据其README配置完成后发现Gist未更新，根据<a href="https://github.com/matchai/waka-box/issues/42">Issue #42</a>需要等WakaTime中有数据后才可以更新，于是等到WakaTime有数据后再查看依旧不更新，根据<a href="https://github.com/matchai/waka-box/issues/61">Issue #61</a>，WakaTime每日更新一次，于是等过了一天Gist依旧不更新，尝试删除了GitHub Access Token、fork的Repository和创建的Gist后重新配置依旧失败，在另一个pinned-gist项目<a href="https://github.com/maxam2017/productive-box">productive-box</a>的README中找到Project Setup的第2步：Open the “Actions” tab of your fork and click the “enable” button，于是在fork的repository中的Actions中选择了启用，等待一天后依旧没有更新Gist。受到<a href="https://github.com/matchai/waka-box/issues/51">Issue #51</a>的启发，进入fork的waka-box仓库的/actions下查看All workflows显示两个results：Update gist with WakaTime stats Update gist with WakaTime stats #1: Scheduled和Update gist with WakaTime stats #2: Scheduled并都有绿色对勾，进入workflow:”Update gist with WakaTime stats”下选择任一个result进入显示1 completed job，左边栏update-gist为绿色对勾状态，点击update-gist下的Update Gist项显示httperror: bad credentials。受到<a href="https://blog.csdn.net/qq_22884761/article/details/102769390">Error: Failed to install ‘unknown package’ from GitHub: HTTP error 401. Bad credentials</a>启发检查<a href="https://github.com/settings/tokens">Personal access tokens</a>发现之前删除了token，于是重新Generate new token并修改库-&gt;Settings-&gt;Secrets Update GH_TOKEN后回到Actions下选择最新的result右上角点击Re-run jobs-&gt;Re-run all jobs：<img src="/posts/37452/Documents\Programming\HexoBlog\source_posts\Others-1\20201029190306206.png" alt="img">等待片刻后任务完成，检查Update Gists项详情：</p>
<p><img src="https://img-blog.csdnimg.cn/2020102919033828.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lpaHVhamFjaw==,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>成功运行，此时检查对应Gist发现其已被正确更新。 </p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>C/C++使用malloc为结构体数组分配内存（及free释放内存）的三种方法</title>
    <url>/posts/285.html</url>
    <content><![CDATA[<p>以</p>
<figure class="highlight cpp"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Key, <span class="keyword">typename</span> Value&gt;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span>};</span><br></pre></td></tr></tbody></table></figure>

<p>为例，试创建有n个Node类型的node的数组。</p>
<p><strong>方法一</strong>（nodes[i]为指针）：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>&lt;int, int&gt; *<span class="title">nodes</span>[<span class="title">n</span>];</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    nodes[i] = (struct Node&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(struct Node&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;) * n); </span><br></pre></td></tr></tbody></table></figure>

<p>使用</p>
<figure class="highlight cpp"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; n; i++) {</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">free</span>(nodes[i]);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>释放nodes的内存。</p>
<p><strong>方法二</strong>（nodes[i]为指针）：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>&lt;int, int&gt; **<span class="title">nodes</span> = (<span class="title">struct</span> <span class="title">Node</span>&lt;int, int&gt;**)<span class="title">malloc</span>(<span class="title">sizeof</span>(<span class="title">struct</span> <span class="title">Node</span>&lt;int, int&gt;*) * <span class="title">n</span>);</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    nodes[i] = (struct Node&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(struct Node&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;));</span><br></pre></td></tr></tbody></table></figure>

<p>使用</p>
<figure class="highlight cpp"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; n; i++) {</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">free</span>(nodes[i]);</span><br><span class="line">}</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">free</span>(nodes);</span><br></pre></td></tr></tbody></table></figure>

<p>释放nodes的内存。</p>
<p><strong>方法三</strong>（nodes[i]为结构体struct）：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>&lt;int, int&gt; *<span class="title">nodes</span> = (<span class="title">struct</span> <span class="title">Node</span>&lt;int, int&gt;*)<span class="title">std</span>:</span>:<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(struct Node&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;) * n);</span><br></pre></td></tr></tbody></table></figure>

<p> 使用</p>
<figure class="highlight cpp"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">std</span>::<span class="built_in">free</span>(nodes);</span><br></pre></td></tr></tbody></table></figure>

<p>释放nodes的内存。如果将nodes插入到类中，注意应考虑类的析构函数。</p>
<p>错误方法：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>&lt;int, int&gt; (*<span class="title">nodes</span>)[<span class="title">n</span>] = (<span class="title">struct</span> <span class="title">Node</span>&lt;int, int&gt;(*)[<span class="title">n</span>])<span class="title">std</span>:</span>:<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(struct Node&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;) * n);</span><br></pre></td></tr></tbody></table></figure>

<p>（参考<a href="https://www.geeksforgeeks.org/dynamically-allocate-2d-array-c/">How to dynamically allocate a 2D array in C?</a>及<a href="https://blog.csdn.net/weixin_43480094/article/details/83932634">malloc申请二维数组的四种方法</a>）</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>Programming</category>
      </categories>
      <tags>
        <tag>c++</tag>
        <tag>c</tag>
        <tag>malloc</tag>
        <tag>free</tag>
        <tag>struct</tag>
      </tags>
  </entry>
  <entry>
    <title>ssh-add出现Error connecting to agent：No such file or directory的解决方法</title>
    <url>/posts/63648.html</url>
    <content><![CDATA[<p>Windows环境下执行</p>
<figure class="highlight arcade"><table><tbody><tr><td class="code"><pre><span class="line">ssh-add ~<span class="regexp">/.ssh/i</span>d_rsa</span><br></pre></td></tr></tbody></table></figure>

<p>报错：</p>
<figure class="highlight subunit"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">Error </span>connecting to agent: No such file or directory</span><br></pre></td></tr></tbody></table></figure>

<p>解决方法：【<strong>以管理员身份运行</strong>】执行</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line">Set-Service ssh-agent -StartupType Manual</span><br><span class="line">Start-Service ssh-agent</span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>SuperUser</category>
      </categories>
      <tags>
        <tag>ssh</tag>
      </tags>
  </entry>
  <entry>
    <title>非一般情况下(HOME更改)git@github.com：Permission denied (publickey)的原因及解决方法</title>
    <url>/posts/28957.html</url>
    <content><![CDATA[<p>在Windows CMD或PowerShell中执行git clone命令报错：</p>
<figure class="highlight vim"><table><tbody><tr><td class="code"><pre><span class="line">git@github.<span class="keyword">com</span>: Permission denied (publickey).</span><br><span class="line">fata<span class="variable">l:</span> Could not <span class="keyword">read</span> from remote repository.</span><br><span class="line"> </span><br><span class="line">Please <span class="keyword">make</span> sure you have the correct access rights</span><br><span class="line"><span class="built_in">and</span> the repository <span class="built_in">exists</span>.</span><br></pre></td></tr></tbody></table></figure>

<p>该问题只出现在使用SSH方式克隆的情形下。</p>
<p>首先要根据GitHub官方文档<a href="https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/error-permission-denied-publickey">Error: Permission denied (publickey)</a>逐一检查排除。经检查，Windows环境中不存在sudo的问题，连接到github.com使用端口22，使用正确的</p>
<figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">ssh</span> -T git<span class="variable">@github</span>.com</span><br></pre></td></tr></tbody></table></figure>

<p>并出现成功提示：</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line">warning: agent returned different signature<span class="built_in"> type </span>ssh-rsa (expected rsa-sha2-512)</span><br><span class="line">Hi yihuajack! You<span class="string">'ve successfully authenticated, but GitHub does not provide shell access.</span></span><br></pre></td></tr></tbody></table></figure>

<p>确认ssh-agent已启动。执行</p>
<figure class="highlight dockerfile"><table><tbody><tr><td class="code"><pre><span class="line">ssh-<span class="keyword">add</span><span class="bash"> -l</span></span><br></pre></td></tr></tbody></table></figure>

<p>显示出2048 SHA256码及正确的id_rsa路径。参考<a href="https://stackoverflow.com/questions/9607295/calculate-rsa-key-fingerprint">Calculate RSA key fingerprint</a>执行</p>
<figure class="highlight awk"><table><tbody><tr><td class="code"><pre><span class="line">ssh-keygen -lf <span class="regexp">/path/</span>to<span class="regexp">/ssh/</span>key</span><br></pre></td></tr></tbody></table></figure>

<p>显示出2048 SHA256码及正确的配置邮箱，执行</p>
<figure class="highlight vim"><table><tbody><tr><td class="code"><pre><span class="line">ssh-keygen -E md5 -<span class="keyword">lf</span> <span class="symbol">&lt;fileName&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>显示出2048 MD5码及正确的配置邮箱。将SHA256码和MD5码与GitHub-&gt;Settings-&gt;SSH and GPG keys-&gt;SSH keys对应的key比较发现完全一致。执行</p>
<figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">ssh</span> -vT git<span class="variable">@github</span>.com</span><br></pre></td></tr></tbody></table></figure>

<p>（其中T可省略）显示</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line">OpenSSH_for_Windows_7.7p1, LibreSSL 2.6.5</span><br><span class="line">debug1: Reading configuration data C:\\Users\\Yihua/.ssh/config</span><br><span class="line">debug1: Connecting <span class="keyword">to</span> github.com [52.74.223.119]<span class="built_in"> port </span>22.</span><br><span class="line">debug1:<span class="built_in"> Connection </span>established.</span><br><span class="line">debug1:<span class="built_in"> identity </span>file C:\\Users\\Yihua/.ssh/id_rsa<span class="built_in"> type </span>0</span><br><span class="line">debug1: key_load_public: <span class="literal">No</span> such file <span class="keyword">or</span> directory</span><br><span class="line">debug1:<span class="built_in"> identity </span>file C:\\Users\\Yihua/.ssh/id_rsa-cert<span class="built_in"> type </span>-1</span><br><span class="line">debug1: key_load_public: <span class="literal">No</span> such file <span class="keyword">or</span> directory</span><br><span class="line">debug1:<span class="built_in"> identity </span>file C:\\Users\\Yihua/.ssh/id_dsa<span class="built_in"> type </span>-1</span><br><span class="line">debug1: key_load_public: <span class="literal">No</span> such file <span class="keyword">or</span> directory</span><br><span class="line">debug1:<span class="built_in"> identity </span>file C:\\Users\\Yihua/.ssh/id_dsa-cert<span class="built_in"> type </span>-1</span><br><span class="line">debug1: key_load_public: <span class="literal">No</span> such file <span class="keyword">or</span> directory</span><br><span class="line">debug1:<span class="built_in"> identity </span>file C:\\Users\\Yihua/.ssh/id_ecdsa<span class="built_in"> type </span>-1</span><br><span class="line">debug1: key_load_public: <span class="literal">No</span> such file <span class="keyword">or</span> directory</span><br><span class="line">debug1:<span class="built_in"> identity </span>file C:\\Users\\Yihua/.ssh/id_ecdsa-cert<span class="built_in"> type </span>-1</span><br><span class="line">debug1: key_load_public: <span class="literal">No</span> such file <span class="keyword">or</span> directory</span><br><span class="line">debug1:<span class="built_in"> identity </span>file C:\\Users\\Yihua/.ssh/id_ed25519<span class="built_in"> type </span>-1</span><br><span class="line">debug1: key_load_public: <span class="literal">No</span> such file <span class="keyword">or</span> directory</span><br><span class="line">debug1:<span class="built_in"> identity </span>file C:\\Users\\Yihua/.ssh/id_ed25519-cert<span class="built_in"> type </span>-1</span><br><span class="line">debug1: key_load_public: <span class="literal">No</span> such file <span class="keyword">or</span> directory</span><br><span class="line">debug1:<span class="built_in"> identity </span>file C:\\Users\\Yihua/.ssh/id_xmss<span class="built_in"> type </span>-1</span><br><span class="line">debug1: key_load_public: <span class="literal">No</span> such file <span class="keyword">or</span> directory</span><br><span class="line">debug1:<span class="built_in"> identity </span>file C:\\Users\\Yihua/.ssh/id_xmss-cert<span class="built_in"> type </span>-1</span><br><span class="line">debug1: Local version string SSH-2.0-OpenSSH_for_Windows_7.7</span><br><span class="line">debug1: Remote protocol version 2.0, remote software version babeld-88a6481e</span><br><span class="line">debug1: <span class="literal">no</span> match: babeld-88a6481e</span><br><span class="line">debug1: Authenticating <span class="keyword">to</span> github.com:22 as <span class="string">'git'</span></span><br><span class="line">debug1: SSH2_MSG_KEXINIT sent</span><br><span class="line">debug1: SSH2_MSG_KEXINIT received</span><br><span class="line">debug1: kex: algorithm: curve25519-sha256</span><br><span class="line">debug1: kex: host key algorithm: rsa-sha2-512</span><br><span class="line">debug1: kex: server-&gt;client cipher: chacha20-poly1305@openssh.com MAC: &lt;implicit&gt; compression: none</span><br><span class="line">debug1: kex: client-&gt;server cipher: chacha20-poly1305@openssh.com MAC: &lt;implicit&gt; compression: none</span><br><span class="line">debug1: expecting SSH2_MSG_KEX_ECDH_REPLY</span><br><span class="line"><span class="built_in">..</span>.</span><br><span class="line">debug1: Host <span class="string">'github.com'</span> is known <span class="keyword">and</span> matches the RSA host key.</span><br><span class="line">debug1: Found key <span class="keyword">in</span> C:\\Users\\Yihua/.ssh/known_hosts:1</span><br><span class="line">debug1: rekey after 134217728 blocks</span><br><span class="line">debug1: SSH2_MSG_NEWKEYS sent</span><br><span class="line">debug1: expecting SSH2_MSG_NEWKEYS</span><br><span class="line">debug1: SSH2_MSG_NEWKEYS received</span><br><span class="line">debug1: rekey after 134217728 blocks</span><br><span class="line">debug1: SSH2_MSG_EXT_INFO received</span><br><span class="line">debug1: kex_input_ext_info: <span class="attribute">server-sig-algs</span>=&lt;ssh-ed25519-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp256-cert-v01@openssh.com,rsa-sha2-512-cert-v01@openssh.com,rsa-sha2-256-cert-v01@openssh.com,ssh-rsa-cert-v01@openssh.com,ssh-dss-cert-v01@openssh.com,ssh-ed25519,ecdsa-sha2-nistp521,ecdsa-sha2-nistp384,ecdsa-sha2-nistp256,rsa-sha2-512,rsa-sha2-256,ssh-rsa,ssh-dss&gt;</span><br><span class="line">debug1: SSH2_MSG_SERVICE_ACCEPT received</span><br><span class="line">debug1: Authentications that can continue: publickey</span><br><span class="line">debug1: Next authentication method: publickey</span><br><span class="line"><span class="built_in">..</span>.</span><br><span class="line">debug1:<span class="built_in"> Server </span>accepts key: pkalg ssh-rsa blen 279</span><br><span class="line">warning: agent returned different signature<span class="built_in"> type </span>ssh-rsa (expected rsa-sha2-512)</span><br><span class="line">debug1: Authentication succeeded (publickey).</span><br><span class="line">Authenticated <span class="keyword">to</span> github.com ([52.74.223.119]:22).</span><br><span class="line">debug1: channel 0: new [client-session]</span><br><span class="line">debug1: Entering interactive session.</span><br><span class="line">debug1: pledge: network</span><br><span class="line">debug1: client_input_channel_req: channel 0 rtype exit-status reply 0</span><br><span class="line">Hi yihuajack! You<span class="string">'ve successfully authenticated, but GitHub does not provide shell access.</span></span><br><span class="line"><span class="string">debug1: channel 0: free: client-session, nchannels 1</span></span><br><span class="line"><span class="string">Transferred: sent 2560, received 2468 bytes, in 0.8 seconds</span></span><br><span class="line"><span class="string">4</span></span><br></pre></td></tr></tbody></table></figure>

<p>检查完没有错误后，在WSL Ubuntu中发现可以正常克隆，进一步发现在正确配置Git for Windows (Git Bash)、MSYS2 (MinGW-w64)、Cygwin64后在三个环境中也同样可以正常克隆。Git Bash中显示debug信息如下：</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line">OpenSSH_8.3p1, OpenSSL 1.1.1g  21 Apr 2020</span><br><span class="line">debug1: Reading configuration data /etc/ssh/ssh_config</span><br><span class="line">debug1: Connecting <span class="keyword">to</span> github.com [13.229.188.59]<span class="built_in"> port </span>22.</span><br><span class="line">debug1:<span class="built_in"> Connection </span>established.</span><br><span class="line">debug1:<span class="built_in"> identity </span>file /e/Cadence/SPB_Data/.ssh/id_rsa<span class="built_in"> type </span>-1</span><br><span class="line">debug1:<span class="built_in"> identity </span>file /e/Cadence/SPB_Data/.ssh/id_rsa-cert<span class="built_in"> type </span>-1</span><br><span class="line">debug1:<span class="built_in"> identity </span>file /e/Cadence/SPB_Data/.ssh/id_dsa<span class="built_in"> type </span>-1</span><br><span class="line">debug1:<span class="built_in"> identity </span>file /e/Cadence/SPB_Data/.ssh/id_dsa-cert<span class="built_in"> type </span>-1</span><br><span class="line">debug1:<span class="built_in"> identity </span>file /e/Cadence/SPB_Data/.ssh/id_ecdsa<span class="built_in"> type </span>-1</span><br><span class="line">debug1:<span class="built_in"> identity </span>file /e/Cadence/SPB_Data/.ssh/id_ecdsa-cert<span class="built_in"> type </span>-1</span><br><span class="line">debug1:<span class="built_in"> identity </span>file /e/Cadence/SPB_Data/.ssh/id_ecdsa_sk<span class="built_in"> type </span>-1</span><br><span class="line">debug1:<span class="built_in"> identity </span>file /e/Cadence/SPB_Data/.ssh/id_ecdsa_sk-cert<span class="built_in"> type </span>-1</span><br><span class="line">debug1:<span class="built_in"> identity </span>file /e/Cadence/SPB_Data/.ssh/id_ed25519<span class="built_in"> type </span>-1</span><br><span class="line">debug1:<span class="built_in"> identity </span>file /e/Cadence/SPB_Data/.ssh/id_ed25519-cert<span class="built_in"> type </span>-1</span><br><span class="line">debug1:<span class="built_in"> identity </span>file /e/Cadence/SPB_Data/.ssh/id_ed25519_sk<span class="built_in"> type </span>-1</span><br><span class="line">debug1:<span class="built_in"> identity </span>file /e/Cadence/SPB_Data/.ssh/id_ed25519_sk-cert<span class="built_in"> type </span>-1</span><br><span class="line">debug1:<span class="built_in"> identity </span>file /e/Cadence/SPB_Data/.ssh/id_xmss<span class="built_in"> type </span>-1</span><br><span class="line">debug1:<span class="built_in"> identity </span>file /e/Cadence/SPB_Data/.ssh/id_xmss-cert<span class="built_in"> type </span>-1</span><br><span class="line">debug1: Local version string SSH-2.0-OpenSSH_8.3</span><br><span class="line">debug1: Remote protocol version 2.0, remote software version babeld-88a6481e</span><br><span class="line">debug1: <span class="literal">no</span> match: babeld-88a6481e</span><br><span class="line">debug1: Authenticating <span class="keyword">to</span> github.com:22 as <span class="string">'git'</span></span><br><span class="line">debug1: SSH2_MSG_KEXINIT sent</span><br><span class="line">debug1: SSH2_MSG_KEXINIT received</span><br><span class="line">debug1: kex: algorithm: curve25519-sha256</span><br><span class="line">debug1: kex: host key algorithm: rsa-sha2-512</span><br><span class="line">debug1: kex: server-&gt;client cipher: chacha20-poly1305@openssh.com MAC: &lt;implicit&gt; compression: none</span><br><span class="line">debug1: kex: client-&gt;server cipher: chacha20-poly1305@openssh.com MAC: &lt;implicit&gt; compression: none</span><br><span class="line">debug1: expecting SSH2_MSG_KEX_ECDH_REPLY</span><br><span class="line"><span class="built_in">..</span>.</span><br><span class="line">debug1: Host <span class="string">'github.com'</span> is known <span class="keyword">and</span> matches the RSA host key.</span><br><span class="line">debug1: Found key <span class="keyword">in</span> /e/Cadence/SPB_Data/.ssh/known_hosts:1</span><br><span class="line">debug1: rekey out after 134217728 blocks</span><br><span class="line">debug1: SSH2_MSG_NEWKEYS sent</span><br><span class="line">debug1: expecting SSH2_MSG_NEWKEYS</span><br><span class="line">debug1: SSH2_MSG_NEWKEYS received</span><br><span class="line">debug1: rekey <span class="keyword">in</span> after 134217728 blocks</span><br><span class="line">debug1: Will attempt key: /c/Users/Yihua/.ssh/id_rsa RSA </span><br><span class="line"><span class="built_in">..</span>.</span><br><span class="line">debug1: Will attempt key: /e/Cadence/SPB_Data/.ssh/id_rsa</span><br><span class="line">debug1: Will attempt key: /e/Cadence/SPB_Data/.ssh/id_dsa</span><br><span class="line">debug1: Will attempt key: /e/Cadence/SPB_Data/.ssh/id_ecdsa</span><br><span class="line">debug1: Will attempt key: /e/Cadence/SPB_Data/.ssh/id_ecdsa_sk</span><br><span class="line">debug1: Will attempt key: /e/Cadence/SPB_Data/.ssh/id_ed25519</span><br><span class="line">debug1: Will attempt key: /e/Cadence/SPB_Data/.ssh/id_ed25519_sk</span><br><span class="line">debug1: Will attempt key: /e/Cadence/SPB_Data/.ssh/id_xmss</span><br><span class="line">debug1: SSH2_MSG_EXT_INFO received</span><br><span class="line">debug1: kex_input_ext_info: <span class="attribute">server-sig-algs</span>=&lt;ssh-ed25519-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp256-cert-v01@openssh.com,rsa-sha2-512-cert-v01@openssh.com,rsa-sha2-256-cert-v01@openssh.com,ssh-rsa-cert-v01@openssh.com,ssh-dss-cert-v01@openssh.com,ssh-ed25519,ecdsa-sha2-nistp521,ecdsa-sha2-nistp384,ecdsa-sha2-nistp256,rsa-sha2-512,rsa-sha2-256,ssh-rsa,ssh-dss&gt;</span><br><span class="line">debug1: SSH2_MSG_SERVICE_ACCEPT received</span><br><span class="line">debug1: Authentications that can continue: publickey</span><br><span class="line">debug1: Next authentication method: publickey</span><br><span class="line">debug1: Offering public key: /c/Users/Yihua/.ssh/id_rsa RSA </span><br><span class="line"><span class="built_in">..</span>.</span><br><span class="line">debug1:<span class="built_in"> Server </span>accepts key: /c/Users/Yihua/.ssh/id_rsa RSA </span><br><span class="line"><span class="built_in">..</span>.</span><br><span class="line">debug1: Authentication succeeded (publickey).</span><br><span class="line">Authenticated <span class="keyword">to</span> github.com ([13.229.188.59]:22).</span><br><span class="line">debug1: channel 0: new [client-session]</span><br><span class="line">debug1: Entering interactive session.</span><br><span class="line">debug1: pledge: network</span><br><span class="line">debug1: client_input_channel_req: channel 0 rtype exit-status reply 0</span><br><span class="line">Hi yihuajack! You<span class="string">'ve successfully authenticated, but GitHub does not provide shell access.</span></span><br><span class="line"><span class="string">debug1: channel 0: free: client-session, nchannels 1</span></span><br><span class="line"><span class="string">Transferred: sent 2832, received 2468 bytes, in 0.7 seconds</span></span><br><span class="line"><span class="string">Bytes per second: sent 4004.1, received 3489.4</span></span><br><span class="line"><span class="string">debug1: Exit status 1</span></span><br></pre></td></tr></tbody></table></figure>

<p>WSL Ubuntu显示信息如下：</p>
<figure class="highlight awk"><table><tbody><tr><td class="code"><pre><span class="line">OpenSSH_8.<span class="number">2</span>p1 Ubuntu-<span class="number">4</span>ubuntu0.<span class="number">1</span>, OpenSSL <span class="number">1.1</span>.<span class="number">1</span>f  <span class="number">31</span> Mar <span class="number">2020</span></span><br><span class="line">debug1: Reading configuration data <span class="regexp">/home/</span>ayka_tsuzuki<span class="regexp">/.ssh/</span>config</span><br><span class="line">debug1: Reading configuration data <span class="regexp">/etc/</span>ssh/ssh_config</span><br><span class="line">debug1: <span class="regexp">/etc/</span>ssh<span class="regexp">/ssh_config line 19: include /</span>etc<span class="regexp">/ssh/</span>ssh_config.d/*.conf matched no files</span><br><span class="line">debug1: <span class="regexp">/etc/</span>ssh/ssh_config line <span class="number">21</span>: Applying options <span class="keyword">for</span> *</span><br><span class="line">debug1: Connecting to github.com [<span class="number">13.250</span>.<span class="number">177.223</span>] port <span class="number">22</span>.</span><br><span class="line">debug1: Connection established.</span><br><span class="line">debug1: identity file <span class="regexp">/home/</span>ayka_tsuzuki<span class="regexp">/.ssh/i</span>d_rsa type <span class="number">0</span></span><br><span class="line">debug1: identity file <span class="regexp">/home/</span>ayka_tsuzuki<span class="regexp">/.ssh/i</span>d_rsa-cert type -<span class="number">1</span></span><br><span class="line">debug1: identity file <span class="regexp">/home/</span>ayka_tsuzuki<span class="regexp">/.ssh/i</span>d_dsa type -<span class="number">1</span></span><br><span class="line">debug1: identity file <span class="regexp">/home/</span>ayka_tsuzuki<span class="regexp">/.ssh/i</span>d_dsa-cert type -<span class="number">1</span></span><br><span class="line">debug1: identity file <span class="regexp">/home/</span>ayka_tsuzuki<span class="regexp">/.ssh/i</span>d_ecdsa type -<span class="number">1</span></span><br><span class="line">debug1: identity file <span class="regexp">/home/</span>ayka_tsuzuki<span class="regexp">/.ssh/i</span>d_ecdsa-cert type -<span class="number">1</span></span><br><span class="line">debug1: identity file <span class="regexp">/home/</span>ayka_tsuzuki<span class="regexp">/.ssh/i</span>d_ecdsa_sk type -<span class="number">1</span></span><br><span class="line">debug1: identity file <span class="regexp">/home/</span>ayka_tsuzuki<span class="regexp">/.ssh/i</span>d_ecdsa_sk-cert type -<span class="number">1</span></span><br><span class="line">debug1: identity file <span class="regexp">/home/</span>ayka_tsuzuki<span class="regexp">/.ssh/i</span>d_ed25519 type -<span class="number">1</span></span><br><span class="line">debug1: identity file <span class="regexp">/home/</span>ayka_tsuzuki<span class="regexp">/.ssh/i</span>d_ed25519-cert type -<span class="number">1</span></span><br><span class="line">debug1: identity file <span class="regexp">/home/</span>ayka_tsuzuki<span class="regexp">/.ssh/i</span>d_ed25519_sk type -<span class="number">1</span></span><br><span class="line">debug1: identity file <span class="regexp">/home/</span>ayka_tsuzuki<span class="regexp">/.ssh/i</span>d_ed25519_sk-cert type -<span class="number">1</span></span><br><span class="line">debug1: identity file <span class="regexp">/home/</span>ayka_tsuzuki<span class="regexp">/.ssh/i</span>d_xmss type -<span class="number">1</span></span><br><span class="line">debug1: identity file <span class="regexp">/home/</span>ayka_tsuzuki<span class="regexp">/.ssh/i</span>d_xmss-cert type -<span class="number">1</span></span><br><span class="line">debug1: Local version string SSH-<span class="number">2.0</span>-OpenSSH_8.<span class="number">2</span>p1 Ubuntu-<span class="number">4</span>ubuntu0.<span class="number">1</span></span><br><span class="line">debug1: Remote protocol version <span class="number">2.0</span>, remote software version babeld-<span class="number">88</span>a6481e</span><br><span class="line">debug1: no match: babeld-<span class="number">88</span>a6481e</span><br><span class="line">debug1: Authenticating to github.com:<span class="number">22</span> as <span class="string">'git'</span></span><br><span class="line">debug1: SSH2_MSG_KEXINIT sent</span><br><span class="line">debug1: SSH2_MSG_KEXINIT received</span><br><span class="line">debug1: kex: algorithm: curve25519-sha256</span><br><span class="line">debug1: kex: host key algorithm: rsa-sha2-<span class="number">512</span></span><br><span class="line">debug1: kex: server-&gt;client cipher: chacha20-poly1305@openssh.com MAC: &lt;implicit&gt; compression: none</span><br><span class="line">debug1: kex: client-&gt;server cipher: chacha20-poly1305@openssh.com MAC: &lt;implicit&gt; compression: none</span><br><span class="line">debug1: expecting SSH2_MSG_KEX_ECDH_REPLY</span><br><span class="line">...</span><br><span class="line">debug1: Host <span class="string">'github.com'</span> is known and matches the RSA host key.</span><br><span class="line">debug1: Found key <span class="keyword">in</span> <span class="regexp">/home/</span>ayka_tsuzuki<span class="regexp">/.ssh/</span>known_hosts:<span class="number">1</span></span><br><span class="line">debug1: rekey out after <span class="number">134217728</span> blocks</span><br><span class="line">debug1: SSH2_MSG_NEWKEYS sent</span><br><span class="line">debug1: expecting SSH2_MSG_NEWKEYS</span><br><span class="line">debug1: SSH2_MSG_NEWKEYS received</span><br><span class="line">debug1: rekey <span class="keyword">in</span> after <span class="number">134217728</span> blocks</span><br><span class="line">debug1: Will attempt key: <span class="regexp">/home/</span>ayka_tsuzuki<span class="regexp">/.ssh/i</span>d_rsa RSA </span><br><span class="line">...</span><br><span class="line">debug1: Will attempt key: <span class="regexp">/home/</span>ayka_tsuzuki<span class="regexp">/.ssh/i</span>d_dsa</span><br><span class="line">debug1: Will attempt key: <span class="regexp">/home/</span>ayka_tsuzuki<span class="regexp">/.ssh/i</span>d_ecdsa</span><br><span class="line">debug1: Will attempt key: <span class="regexp">/home/</span>ayka_tsuzuki<span class="regexp">/.ssh/i</span>d_ecdsa_sk</span><br><span class="line">debug1: Will attempt key: <span class="regexp">/home/</span>ayka_tsuzuki<span class="regexp">/.ssh/i</span>d_ed25519</span><br><span class="line">debug1: Will attempt key: <span class="regexp">/home/</span>ayka_tsuzuki<span class="regexp">/.ssh/i</span>d_ed25519_sk</span><br><span class="line">debug1: Will attempt key: <span class="regexp">/home/</span>ayka_tsuzuki<span class="regexp">/.ssh/i</span>d_xmss</span><br><span class="line">debug1: SSH2_MSG_EXT_INFO received</span><br><span class="line">debug1: kex_input_ext_info: server-sig-algs=&lt;ssh-ed25519-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp256-cert-v01@openssh.com,rsa-sha2-<span class="number">512</span>-cert-v01@openssh.com,rsa-sha2-<span class="number">256</span>-cert-v01@openssh.com,ssh-rsa-cert-v01@openssh.com,ssh-dss-cert-v01@openssh.com,ssh-ed25519,ecdsa-sha2-nistp521,ecdsa-sha2-nistp384,ecdsa-sha2-nistp256,rsa-sha2-<span class="number">512</span>,rsa-sha2-<span class="number">256</span>,ssh-rsa,ssh-dss&gt;</span><br><span class="line">debug1: SSH2_MSG_SERVICE_ACCEPT received</span><br><span class="line">debug1: Authentications that can <span class="keyword">continue</span>: publickey</span><br><span class="line">debug1: Next authentication method: publickey</span><br><span class="line">debug1: Offering public key: <span class="regexp">/home/</span>ayka_tsuzuki<span class="regexp">/.ssh/i</span>d_rsa RSA </span><br><span class="line">...</span><br><span class="line">debug1: Server accepts key: <span class="regexp">/home/</span>ayka_tsuzuki<span class="regexp">/.ssh/i</span>d_rsa RSA </span><br><span class="line">...</span><br><span class="line">debug1: Authentication succeeded (publickey).</span><br><span class="line">Authenticated to github.com ([<span class="number">13.250</span>.<span class="number">177.223</span>]:<span class="number">22</span>).</span><br><span class="line">debug1: channel <span class="number">0</span>: new [client-session]</span><br><span class="line">debug1: Entering interactive session.</span><br><span class="line">debug1: pledge: network</span><br><span class="line">debug1: Sending environment.</span><br><span class="line">debug1: Sending env LANG = C.UTF-<span class="number">8</span></span><br><span class="line">debug1: client_input_channel_req: channel <span class="number">0</span> rtype <span class="keyword">exit</span>-status reply <span class="number">0</span></span><br><span class="line">Hi yihuajack! Yo<span class="string">u've successfully authenticated, but GitHub does not provide shell access.</span></span><br><span class="line"><span class="string">debug1: channel 0: free: client-session, nchannels 1</span></span><br><span class="line"><span class="string">Transferred: sent 2796, received 2468 bytes, in 0.7 seconds</span></span><br><span class="line"><span class="string">Bytes per second: sent 3818.8, received 3370.8</span></span><br><span class="line"><span class="string">debug1: Exit status 1</span></span><br></pre></td></tr></tbody></table></figure>

<p>发现在git-cmd.exe（cmd）也就是Windows CMD/PowerShell使用的git中使用git clone验证RSA key fingerprint自动创建在HOME环境变量目录下也就是E:/Cadence/SPB_Data下.ssh/known_hosts，如果在git-bash.exe（bash）中配置export HOME=C:/Users/<username>则会自动完成ssh-add的工作。参考<a href="https://docs.microsoft.com/zh-cn/windows-server/administration/openssh/openssh_install_firstuse">安装适用于 Windows Server 2019 和 Windows 10 的 OpenSSH</a>使用PowerShell安装<a href="https://github.com/PowerShell/Win32-OpenSSH">Win32-OpenSSH</a>后参考<a href="https://medium.com/rkttu/set-up-ssh-key-and-git-integration-in-windows-10-native-way-c9b94952dd2c">Configure SSH Key and Git Integration WithWindows 10 Native Way</a>该问题仍然存在。由此可以确定这是由于HOME被设置成环境变量指向另一个文件夹所致，尽管执行echo $HOME命令会指向正确的个人文件夹，debug信息也均指向正确的个人文件夹。同时，即使允许其在HOME环境变量文件夹下新建.ssh/known_hosts，该问题仍然会出现。此外，使用setx命令或手动在控制面板中创建/修改HOME环境变量或删除HOME环境变量无济于事。</username></p>
<p>最终解决方案（参考<a href="https://stackoverflow.com/questions/2840871/ssh-is-looking-in-the-wrong-place-for-the-public-private-key-pair-on-windows">SSH is looking in the wrong place for the public/private key pair on Windows</a>）：</p>
<p>将Git安装目录下的/etc/nsswitch.conf中的db_home一行由</p>
<figure class="highlight avrasm"><table><tbody><tr><td class="code"><pre><span class="line"><span class="symbol">db_home:</span> env windows cygwin desc</span><br></pre></td></tr></tbody></table></figure>

<p>修改为</p>
<figure class="highlight avrasm"><table><tbody><tr><td class="code"><pre><span class="line"><span class="symbol">db_home:</span> /%H</span><br></pre></td></tr></tbody></table></figure>

<p>成功解决。</p>
<p>后记：将Win32-OpenSSH解压到C:\Program Files\下后将其环境变量添加并上移到C:\WINDOWS\System32\OpenSSH\之前，再次执行ssh -v <a href="mailto:git@github.com">git@github.com</a>，显示已使用新版的OpenSSH for Windows：</p>
<figure class="highlight apache"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">OpenSSH_for_Windows_8</span>.<span class="number">1</span>p<span class="number">1</span>, LibreSSL <span class="number">2</span>.<span class="number">9</span>.<span class="number">2</span></span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>SuperUser</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>ssh</tag>
        <tag>openssh</tag>
      </tags>
  </entry>
  <entry>
    <title>SuperUser-3</title>
    <url>/posts/61447.html</url>
    <content><![CDATA[<p>先检查是否可以裸连github.com，如果不能则可能由于DNS解析的问题，需要等待DNS服务修复。这里更换DNS解析很难解决问题，使用代理虽然可以连接，但是SSH将仍处于不可用的状态。这种情况下参考<a href="https://gist.github.com/Tamal/1cc77f88ef3e900aeae65f0e5e504794">Solution for ‘ssh: connect to host github.com port 22: Connection timed out’ error</a>、<a href="https://blog.csdn.net/s740556472/article/details/80318886">【git 端口拒绝解决方案】ssh: connect to host github.com port 22: Connection refused</a>等方式更换端口为443或设置ProxyCommand等方法自然是无效的，等到网络修复好后自然可以顺利使用SSH方式连接。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>SuperUser</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>ssh</tag>
        <tag>dns服务器</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows更改Emacs的独立HOME路径的三种方法</title>
    <url>/posts/22545.html</url>
    <content><![CDATA[<p>Emacs的HOME路径~默认为环境变量“HOME”的值（例如E:\Cadence\SPB_Data），若要为Emacs设置独立的HOME路径需要手动更改。经试验目前中文网络上所谓修改注册表值HKEY_LOCAL_MACHINE\SOFTWARE\GNU\Emacs\HOME=%emacs_dir%无效。</p>
<p>在原有HOME路径下新建.emacs文件并load file的方法经测试无效，例如把.emacs文件写入（参考<a href="https://emacs.stackexchange.com/questions/12881/how-do-i-set-a-different-location-for-the-dot-emacs-emacs-file-on-windows-7">How do I set a different location for the dot emacs .emacs file on Windows 7?</a>）：</p>
<figure class="highlight lisp"><table><tbody><tr><td class="code"><pre><span class="line">(<span class="name">setq</span> user-init-file <span class="string">"E:/Cadence/SPB_Data"</span>)</span><br><span class="line">(<span class="name">setq</span> user-emacs-directory <span class="string">"D:/Documents/Programming/emacshome"</span>)</span><br><span class="line">(<span class="name">setq</span> default-directory <span class="string">"D:/Documents/Programming/emacshome"</span>)</span><br><span class="line">(<span class="name">setenv</span> <span class="string">"HOME"</span> <span class="string">"D:/Documents/Programming/emacshome"</span>)</span><br><span class="line">(<span class="name">load</span> user-init-file)</span><br></pre></td></tr></tbody></table></figure>

<p>启动Emacs会报错：</p>
<blockquote>
<p>Warning (initialization): An error occurred while loading ‘E:/Cadence/SPB_Data’:</p>
<p>File error: Cannot open load file, Permission denied, e:/Cadence/SPB_Data</p>
<p>To ensure normal operation, you should investigate and remove the<br>cause of the error in your initialization file.  Start Emacs with<br>the ‘–debug-init’ option to view a complete error backtrace.</p>
</blockquote>
<p> （这里如果将user-init-file设置为其他路径，则该.emacs文件根本不会被使用）</p>
<p><strong>方法一（仍会在原HOME路径下创建空的.emacs.d文件夹）</strong>：在emacs\share\emacs\site-lisp文件夹下新建site-start.el，写入：</p>
<figure class="highlight lisp"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">; E:\Program_Files\Emacs\x86_64\share\emacs\site-lisp</span></span><br><span class="line">(<span class="name">defun</span> set-home-dir (<span class="name">dir</span>)</span><br><span class="line">  (<span class="name">setenv</span> <span class="string">"HOME"</span> dir)</span><br><span class="line">  (<span class="name">message</span> (<span class="name">format</span> <span class="string">"HOME location is %s"</span> (<span class="name">getenv</span> <span class="string">"HOME"</span>))))</span><br><span class="line"> </span><br><span class="line">(<span class="name">set-home-dir</span> <span class="string">"D:/Documents/Programming/emacshome/"</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>启动Emacs即发现HOME目录改为新的目录（参考<a href="https://www.reddit.com/r/emacs/comments/a6ka23/change_home_folder_location_windows/">Change ~ home folder location? (Windows)</a>）。</p>
<p><strong>方法二（仍会在原HOME路径下创建空的.emacs.d文件夹）</strong>：执行</p>
<figure class="highlight powershell"><table><tbody><tr><td class="code"><pre><span class="line">SETX EMACS_HOME <span class="string">"D:\Documents\Programming\emacshome"</span></span><br></pre></td></tr></tbody></table></figure>

<p>添加环境变量（这里是用户变量）或手动添加环境变量（系统变量也可以），这里的变量名EMACS_HOME可自己决定，在emacs\share\emacs\site-lisp文件夹下新建site-start.el，写入：</p>
<figure class="highlight lisp"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">; E:\Program_Files\Emacs\x86_64\share\emacs\site-lisp</span></span><br><span class="line">(<span class="name">setenv</span> <span class="string">"HOME"</span> (<span class="name">convert-standard-filename</span> (<span class="name">getenv</span> <span class="string">"EMACS_HOME"</span>)))</span><br></pre></td></tr></tbody></table></figure>

<p>启动Emacs即发现HOME目录改为新的目录（参考<a href="https://emacs.stackexchange.com/questions/57819/changing-home-directory-only-for-emacs-on-windows-7">Changing HOME directory only for Emacs (on Windows 7)</a>）。</p>
<p><strong>方法三（不会在原HOME路径下创建空的.emacs.d文件夹）</strong>：添加环境变量名为XDG_CONFIG_HOME，值为要更改为的路径。参考<a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Find-Init.html#Find-Init">49.4.4 How Emacs Finds Your Init File</a>，Emacs会先按顺序寻找<del>/.emacs.el、</del>/.emacs或<del>/.emacs.d/init.el，Emacs还会寻找init.el的XDG兼容位置，默认为</del>/.config/emacs，该路径可被XDG_CONFIG_HOME环境变量覆盖，其值会替换默认XDG初始化文件名中的<del>/.config，然而，Emacs仍会优先寻找</del>/.emacs.d、<del>/.emacs和</del>/.emacs.el如果它们存在的话，所以需要先删除或重命名这些文件夹或文件以使用XDG位置。如果XDG位置和<del>/.emacs.d都不存在，则Emacs会创建</del>/.emacs.d。设置了XDG_CONFIG_HOME环境变量后，启动Emacs即发现HOME目录改为新的目录。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>SuperUser</category>
      </categories>
      <tags>
        <tag>emacs</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/posts/16107.html</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></tbody></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></tbody></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></tbody></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></tbody></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>Others</category>
      </categories>
  </entry>
  <entry>
    <title>美化Windows PowerShell以及Fluent Terminal配置Posh-git、Oh-my-posh、DirColors方法</title>
    <url>/posts/28219.html</url>
    <content><![CDATA[<p>20200823更新：</p>
<p>请阅读20200520更新文章：<a href="https://blog.csdn.net/yihuajack/article/details/106234124">PowerShell Core 7配置与美化（结合Fluent Terminal/Windows Terminal）</a>。</p>
<p>-———————————————————–</p>
<p>笔者搜索了国内外网络上关于Windows PowerShell配置DirColors基本是抄“小马哥”<a href="mailto:andot@qq.com">andot@qq.com</a>博主的文章，文章中说</p>
<blockquote>
<p>其中 <code>~\dir_colors</code> 就是配置文件的路径，关于 dir_colors 的配置文件，在 github 上可以搜到不少，比如：<a href="https://github.com/seebi/dircolors-solarized">dircolors-solarized</a>。这里就不再列举更多了。</p>
</blockquote>
<p>本来打算只写写dircolors怎么配置，但后来为避免配置不全或错误，索性写了一个整套美化Windows PowerShell以及Fluent Terminal配置Posh-git、Oh-my-posh、DirColors的方法，也以备后用。</p>
<p>首先安装<a href="https://github.com/felixse/FluentTerminal">Fluent Terminal</a>，安装好后用管理员权限打开PowerShell，先执行命令：</p>
<figure class="highlight gams"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">Set</span>-ExecutionPolicy <span class="comment">-ExecutionPolicy ByPass</span></span><br></pre></td></tr></tbody></table></figure>

<p>否则会出现错误，参考微软文档<a href="https://docs.microsoft.com/zh-cn/powershell/module/microsoft.powershell.core/about/about_execution_policies?view=powershell-7">About Execution Policies</a>。</p>
<p>安装posh-git和oh-my-posh（如已安装跳过）：</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">Install</span>-<span class="keyword">Module</span> posh-git -<span class="keyword">Scope</span> CurrentUser</span><br><span class="line"><span class="keyword">Install</span>-<span class="keyword">Module</span> oh-my-posh -<span class="keyword">Scope</span> CurrentUser</span><br></pre></td></tr></tbody></table></figure>

<p>遇到提示选是或全是即可，接着执行</p>
<figure class="highlight mathematica"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">Install</span>-<span class="keyword">Module</span> DirColors</span><br><span class="line"><span class="keyword">Install</span>-<span class="keyword">Module</span> windows-screenfetch</span><br></pre></td></tr></tbody></table></figure>

<p>或</p>
<figure class="highlight mipsasm"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">Install-Module </span><span class="keyword">DirColors </span>-<span class="keyword">Scope </span>CurrentUser</span><br><span class="line"><span class="keyword">Install-Module </span>windows-<span class="keyword">screenfetch </span>-<span class="keyword">Scope </span>CurrentUser</span><br></pre></td></tr></tbody></table></figure>

<p>遇到提示选是或全是即可。ScreenFetch的效果是启动时显示系统信息（参见文末的效果图）。然后安装字体<a href="https://github.com/powerline/fonts">Source Code Pro for Powerline</a>（clone到本地然后复制相应字体文件到C:\WINDOWS\Fonts）。</p>
<p>注意，正常使用posh-git和oh-my-posh可能会git报错，建议使用Git for Windows作为Windows的Git环境。</p>
<p>接着，在C:\Users&lt;username&gt;\Documents\WindowsPowerShell中新建Microsoft.PowerShell_profile.ps1，在其中添加</p>
<figure class="highlight mathematica"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">Import</span>-<span class="keyword">Module</span> posh-git;</span><br><span class="line"><span class="keyword">Import</span>-<span class="keyword">Module</span> oh-my-posh;</span><br><span class="line"><span class="keyword">Import</span>-<span class="keyword">Module</span> DirColors;</span><br><span class="line"><span class="keyword">Update</span>-DirColors ~/dir_colors;</span><br></pre></td></tr></tbody></table></figure>

<p>然后从GitHub上clone <a href="https://github.com/seebi/dircolors-solarized">dircolors-solarized</a>，问题是该放到哪儿呢？笔者先尝试在C:\Users&lt;username&gt;中新建文件夹dir_colors或dircolors放入dircolors.256dark或者整个仓库，如果路径错误会报错：</p>
<figure class="highlight taggerscript"><table><tbody><tr><td class="code"><pre><span class="line">Get-Content : 找不到路径“C:<span class="symbol">\U</span>sers<span class="symbol">\&lt;</span>username&gt;<span class="symbol">\d</span>ir_colors”，因为该路径不存在。</span><br><span class="line">所在位置 C:<span class="symbol">\P</span>rogram Files<span class="symbol">\W</span>indowsPowerShell<span class="symbol">\M</span>odules<span class="symbol">\D</span>irColors<span class="symbol">\1</span>.1.2<span class="symbol">\D</span>irColors.psm1:121 字符: 21</span><br><span class="line">+     ForEach ($_ In (Get-Content -Path:<span class="keyword">$Path -ReadCount 0) -Split "`n" ...</span></span><br><span class="line"><span class="keyword">+                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></span><br><span class="line"><span class="keyword">    + CategoryInfo          : ObjectNotFound: </span>(C:<span class="symbol">\U</span>sers<span class="symbol">\&lt;</span>username&gt;<span class="symbol">\d</span>ir_colors:String) [Get-Content], ItemNot</span><br><span class="line">   FoundException</span><br><span class="line">    + FullyQualifiedErrorId : PathNotFound,Microsoft.PowerShell.Commands.GetContentCommand</span><br></pre></td></tr></tbody></table></figure>

<p>更正路径名称后报错：</p>
<figure class="highlight taggerscript"><table><tbody><tr><td class="code"><pre><span class="line">Get-Content : 对路径“C:<span class="symbol">\U</span>sers<span class="symbol">\&lt;</span>username&gt;<span class="symbol">\d</span>ir_colors”的访问被拒绝。</span><br><span class="line">所在位置 C:<span class="symbol">\P</span>rogram Files<span class="symbol">\W</span>indowsPowerShell<span class="symbol">\M</span>odules<span class="symbol">\D</span>irColors<span class="symbol">\1</span>.1.2<span class="symbol">\D</span>irColors.psm1:121 字符: 21</span><br><span class="line">+     ForEach ($_ In (Get-Content -Path:<span class="keyword">$Path -ReadCount 0) -Split "`n" ...</span></span><br><span class="line"><span class="keyword">+                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></span><br><span class="line"><span class="keyword">    + CategoryInfo          : PermissionDenied: </span>(C:<span class="symbol">\U</span>sers<span class="symbol">\&lt;</span>username&gt;<span class="symbol">\d</span>ir_colors:String) [Get-Content], Unaut</span><br><span class="line">   horizedAccessException</span><br><span class="line">    + FullyQualifiedErrorId : GetContentReaderUnauthorizedAccessError,Microsoft.PowerShell.Commands.Get</span><br><span class="line">   ContentCommand</span><br></pre></td></tr></tbody></table></figure>

<p>想到C#报错UnauthorizedAccessException异常与获取文件的目录与文件的不同有关，于是直接将dircolors.256dark复制到C:\Users&lt;username&gt;下（也可以选择其他主题如dircolors.ansi-dark等）下，然后将以下文本复制到Microsoft.PowerShell_profile.ps1中</p>
<figure class="highlight mathematica"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">Import</span>-<span class="keyword">Module</span> DirColors</span><br><span class="line"><span class="keyword">Update</span>-DirColors ~/dircolors<span class="number">.256</span>dark</span><br><span class="line"><span class="keyword">Import</span>-<span class="keyword">Module</span> posh-git</span><br><span class="line">if (!(<span class="keyword">Get</span>-SshAgent)) {</span><br><span class="line">    Start-SshAgent</span><br><span class="line">}</span><br><span class="line"><span class="keyword">Import</span>-<span class="keyword">Module</span> oh-my-posh</span><br><span class="line"><span class="keyword">Set</span>-Theme PowerLine</span><br><span class="line">Screenfetch</span><br></pre></td></tr></tbody></table></figure>

<p>如遇到SSH Agent启动失败，执行如下命令即可：</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">Get-Service | <span class="keyword">select</span> -property <span class="keyword">name</span>,starttype</span><br><span class="line"><span class="keyword">Set</span>-Service -<span class="keyword">Name</span> ssh-<span class="keyword">agent</span> -StartupType <span class="keyword">Manual</span></span><br></pre></td></tr></tbody></table></figure>

<p>该配置可能会出现瑕疵，用该ps1代码打开PowerShell一开始光标会和箭头空出一段距离，执行任意其他命令后光标恢复到紧贴箭头处，但是<strong>后来该问题并未复现</strong>。我们还可以复制一份改名Microsoft.VSCode_profile.ps1，可参考<a href="https://coolcode.org/2018/03/16/how-to-make-your-powershell-beautiful/">PowerShell 美化指南</a>。如果不用oh-my-posh而采用个性化自定义，可参考知乎大佬<a href="https://www.zhihu.com/people/vilicvane">vilicvane</a>的代码（已修改过路径、Project、Screenfetch和SSH Agent等）【为什么 Windows 的终端（如命令提示符、PowerShell）都这么丑？ - vilicvane的回答 - 知乎 <a href="https://www.zhihu.com/question/38752831/answer/80133586%E3%80%91%E4%B8%8B%E8%AF%84%E8%AE%BA%E9%93%BE%E6%8E%A5[https://onedrive.live.com/?authkey=!ABivZ6uPBrm68t0&amp;cid=26DFC7B235D3DFB1&amp;id=26DFC7B235D3DFB1!984614&amp;parId=26DFC7B235D3DFB1!984613&amp;o=OneUp%5D(https://onedrive.live.com/?authkey=!ABivZ6uPBrm68t0&amp;cid=26DFC7B235D3DFB1&amp;id=26DFC7B235D3DFB1!984614&amp;parId=26DFC7B235D3DFB1!984613&amp;o=OneUp)%EF%BC%9A">https://www.zhihu.com/question/38752831/answer/80133586】下评论链接[https://onedrive.live.com/?authkey=%21ABivZ6uPBrm68t0&amp;cid=26DFC7B235D3DFB1&amp;id=26DFC7B235D3DFB1%21984614&amp;parId=26DFC7B235D3DFB1%21984613&amp;o=OneUp](https://onedrive.live.com/?authkey=!ABivZ6uPBrm68t0&amp;cid=26DFC7B235D3DFB1&amp;id=26DFC7B235D3DFB1!984614&amp;parId=26DFC7B235D3DFB1!984613&amp;o=OneUp)：</a></p>
<figure class="highlight php"><table><tbody><tr><td class="code"><pre><span class="line">Set-Alias gh Get-Help;</span><br><span class="line">Set-Alias cd Push-Location -Option AllScope;</span><br><span class="line">Set-Alias cdb Pop-Location -Option AllScope;</span><br><span class="line">Set-PSReadLineOption -HistoryNoDuplicates;</span><br><span class="line">$ProjectDirectory = <span class="string">'D:\Documents\Programming\PowerShell'</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cdp</span> </span>{</span><br><span class="line">	[CmdletBinding()]</span><br><span class="line">    Param()</span><br><span class="line">    DynamicParam {</span><br><span class="line">        <span class="comment"># Set the dynamic parameters' name</span></span><br><span class="line">        $ParameterName = <span class="string">'Path'</span>;</span><br><span class="line">        <span class="comment"># Create the dictionary</span></span><br><span class="line">        $RuntimeParameterDictionary = <span class="keyword">New</span>-<span class="keyword">Object</span> System.Management.Automation.RuntimeDefinedParameterDictionary;</span><br><span class="line">        <span class="comment"># Generate and set the ValidateSet</span></span><br><span class="line">        $DirectorySet = Get-ChildItem -Path $ProjectDirectory -<span class="built_in">Directory</span> | Select-<span class="keyword">Object</span> -ExpandProperty Name;</span><br><span class="line">        $ValidateSetAttribute = <span class="keyword">New</span>-<span class="keyword">Object</span> System.Management.Automation.ValidateSetAttribute($DirectorySet);</span><br><span class="line">        <span class="comment"># Create and set the parameters' attributes</span></span><br><span class="line">        $ParameterAttribute = <span class="keyword">New</span>-<span class="keyword">Object</span> System.Management.Automation.ParameterAttribute;</span><br><span class="line">        $ParameterAttribute.Position = <span class="number">0</span>;</span><br><span class="line">        <span class="comment"># Create the collection of attributes</span></span><br><span class="line">        $AttributeCollection = <span class="keyword">New</span>-<span class="keyword">Object</span> System.Collections.ObjectModel.Collection[System.Attribute];</span><br><span class="line">		$AttributeCollection.Add($ValidateSetAttribute);</span><br><span class="line">		$AttributeCollection.Add($ParameterAttribute);</span><br><span class="line">        <span class="comment"># Create and return the dynamic parameter</span></span><br><span class="line">        $RuntimeParameter = <span class="keyword">New</span>-<span class="keyword">Object</span> System.Management.Automation.RuntimeDefinedParameter($ParameterName, [<span class="keyword">string</span>], $AttributeCollection);</span><br><span class="line">        $RuntimeParameterDictionary.Add($ParameterName, $RuntimeParameter);</span><br><span class="line">        <span class="keyword">return</span> $RuntimeParameterDictionary;</span><br><span class="line">    }</span><br><span class="line">    Begin {</span><br><span class="line">        <span class="comment"># Bind the parameter to a friendly variable</span></span><br><span class="line">        $ProjectName = $PsBoundParameters[$ParameterName];</span><br><span class="line">    }</span><br><span class="line">    Process {</span><br><span class="line">		cd $ProjectDirectory\$ProjectName;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cdh</span> </span>{</span><br><span class="line">    cd ~;</span><br><span class="line">}</span><br><span class="line">Push-Location (Split-Path -Path $MyInvocation.MyCommand.Definition -<span class="built_in">Parent</span>);</span><br><span class="line">Import-Module posh-git;</span><br><span class="line">Import-Module oh-my-posh;</span><br><span class="line">Import-Module DirColors;</span><br><span class="line">Update-DirColors ~/dircolors<span class="number">.256</span>dark;</span><br><span class="line">$Global:GitPromptSettings.BeforeText = <span class="string">' '</span>;</span><br><span class="line">$Global:GitPromptSettings.BeforeForegroundColor = [ConsoleColor]::DarkGray;</span><br><span class="line">$Global:GitPromptSettings.BeforeBackgroundColor = [ConsoleColor]::White;</span><br><span class="line">$Global:GitPromptSettings.DelimText = <span class="string">" $([char]0xb7)"</span>;</span><br><span class="line">$Global:GitPromptSettings.DelimForegroundColor = [ConsoleColor]::DarkGray;</span><br><span class="line">$Global:GitPromptSettings.DelimBackgroundColor = [ConsoleColor]::White;</span><br><span class="line">$Global:GitPromptSettings.AfterText = <span class="string">' '</span>;</span><br><span class="line">$Global:GitPromptSettings.AfterForegroundColor = [ConsoleColor]::DarkGray;</span><br><span class="line">$Global:GitPromptSettings.AfterBackgroundColor = [ConsoleColor]::White;</span><br><span class="line">$Global:GitPromptSettings.LocalStagedStatusForegroundColor = [ConsoleColor]::DarkGray;</span><br><span class="line">$Global:GitPromptSettings.LocalStagedStatusBackgroundColor = [ConsoleColor]::White;</span><br><span class="line">$Global:GitPromptSettings.BranchForegroundColor = [ConsoleColor]::DarkGray;</span><br><span class="line">$Global:GitPromptSettings.BranchBackgroundColor = [ConsoleColor]::White;</span><br><span class="line">$Global:GitPromptSettings.BranchIdenticalStatusToForegroundColor = [ConsoleColor]::DarkGray;</span><br><span class="line">$Global:GitPromptSettings.BranchIdenticalStatusToBackgroundColor = [ConsoleColor]::White;</span><br><span class="line">$Global:GitPromptSettings.BranchBehindAndAheadStatusForegroundColor = [ConsoleColor]::DarkYellow;</span><br><span class="line">$Global:GitPromptSettings.BranchBehindAndAheadStatusBackgroundColor = [ConsoleColor]::White;</span><br><span class="line">$Global:GitPromptSettings.BranchBehindStatusForegroundColor = [ConsoleColor]::DarkRed;</span><br><span class="line">$Global:GitPromptSettings.BranchBehindStatusBackgroundColor = [ConsoleColor]::White;</span><br><span class="line">$Global:GitPromptSettings.BranchAheadStatusForegroundColor = [ConsoleColor]::DarkGreen;</span><br><span class="line">$Global:GitPromptSettings.BranchAheadStatusBackgroundColor = [ConsoleColor]::White;</span><br><span class="line">$Global:GitPromptSettings.LocalWorkingStatusBackgroundColor = [ConsoleColor]::White;</span><br><span class="line">$Global:GitPromptSettings.BeforeIndexBackgroundColor = [ConsoleColor]::White;</span><br><span class="line">$Global:GitPromptSettings.IndexBackgroundColor = [ConsoleColor]::White;</span><br><span class="line">$Global:GitPromptSettings.WorkingBackgroundColor = [ConsoleColor]::White;</span><br><span class="line">$Global:GitPromptSettings.EnableWindowTitle = $false;</span><br><span class="line">$Global:GitPromptSettings.ShowStatusWhenZero = $false;</span><br><span class="line"><span class="comment"># Set up a simple prompt, adding the git prompt parts inside git repos</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">global</span>:<span class="title">prompt</span> </span>{</span><br><span class="line">    $realLASTEXITCODE = $Global:LASTEXITCODE;</span><br><span class="line">    $hostline = <span class="string">" <span class="subst">$env</span>:Username@<span class="subst">$env</span>:UserDomain "</span>;</span><br><span class="line">    Write-Host;</span><br><span class="line">    <span class="keyword">if</span> ($realLASTEXITCODE -eq <span class="number">0</span>) {</span><br><span class="line">        $hostColor = [ConsoleColor]::DarkGreen;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        $hostColor = [ConsoleColor]::DarkRed;</span><br><span class="line">        $hostline += <span class="string">"(0x$('{0:X0}' -f <span class="subst">$realLASTEXITCODE</span>)) "</span>;</span><br><span class="line">    }</span><br><span class="line">    Write-Host $hostline -ForegroundColor White -BackgroundColor $hostColor -NoNewLine;</span><br><span class="line">    Write-Host <span class="string">"$([char]0xe0b0)"</span> -ForegroundColor $hostColor -BackgroundColor DarkGray -NoNewline;</span><br><span class="line">    $realFolderName = (Get-Item $pwd.ProviderPath).Name;</span><br><span class="line">    <span class="keyword">if</span> ($pwd.ProviderPath -eq $env:UserProfile) {</span><br><span class="line">        $folderName = <span class="string">'~'</span>;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        $folderName = $realFolderName;</span><br><span class="line">    }</span><br><span class="line">    Write-Host <span class="string">" <span class="subst">$folderName</span> "</span> -ForegroundColor White -BackgroundColor DarkGray -NoNewline;</span><br><span class="line">    $gitStatus = Get-GitStatus;</span><br><span class="line">    <span class="keyword">if</span> ($gitStatus -ne $null) {</span><br><span class="line">        Write-Host <span class="string">"$([char]0xe0b0)"</span> -ForegroundColor DarkGray -BackgroundColor White -NoNewline;</span><br><span class="line">        Write-GitStatus $gitStatus;</span><br><span class="line">        Write-Host <span class="string">"$([char]0xe0b0)"</span> -ForegroundColor White;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        Write-Host <span class="string">"$([char]0xe0b0)"</span> -ForegroundColor DarkGray;</span><br><span class="line">    }</span><br><span class="line">    $Global:LASTEXITCODE = <span class="number">0</span>;</span><br><span class="line">    Write-Host <span class="string">" PS "</span> -ForegroundColor DarkGray -BackgroundColor White -NoNewline;</span><br><span class="line">    Write-Host <span class="string">"$([char]0xe0b0)"</span> -ForegroundColor White -NoNewline;</span><br><span class="line">    Write <span class="string">" "</span>;</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        &amp; <span class="string">"<span class="subst">$env</span>:ConEmuBaseDir\ConEmuC.exe"</span> <span class="string">"/GUIMACRO"</span>, <span class="string">'Rename(0,@"'</span>$realFolderName<span class="string">'")'</span> &gt; $null;</span><br><span class="line">    } <span class="keyword">catch</span> { }</span><br><span class="line">}</span><br><span class="line">Pop-Location;</span><br><span class="line"><span class="keyword">if</span> (!(Get-SshAgent)) {</span><br><span class="line">    Start-SshAgent -Quiet;</span><br><span class="line">}</span><br><span class="line">Screenfetch;</span><br></pre></td></tr></tbody></table></figure>

<p>然而使用该ps1代码启动PowerShell初始会爆红(0x1)，后续执行任意其他命令才转绿，该问题一时不清楚原因，故慎用。我们可以发现语句末尾的分号是非必需的。</p>
<p>接下来可以添加右键菜单项，在注册表：计算机\HKEY_CLASSES_ROOT\Directory\Background\shell下新建项Open PowerShell Here，新建子项command默认REG_SZ型值为C:\WINDOWS\System32\WindowsPowerShell\v1.0\powershell.exe。一般Fluent Terminal安装会自动创建右键菜单，若没有，则新建项Open Fluent Terminal Here，新建子项command默认REG_SZ型值为”%LOCALAPPDATA%\Microsoft\WindowsApps\flute.exe” new “%V”，也可以任取项名，然后将项的默认值改为想在右键菜单中显示的名称。如果想在菜单项左边显示一个小图标，可以在”Open … Here”下新建REG_SZ值名Icon，数据为图标Icon的路径。</p>
<p>最后，为避免中文乱码问题，在注册表项：计算机\HKEY_CURRENT_USER\Console%SystemRoot%_System32_WindowsPowerShell_v1.0_powershell.exe下新建REG_DWORD值名CodePage，数据为十进制65001（或十六进制0x0000fde9），FaceName值数据改为<a href="https://github.com/powerline/fonts">DejaVu Sans Mono for Powerline</a>（还可以参考<a href="https://github.com/Microsoft/BashOnWindows/files/1362006/Microsoft.YaHei.Mono.zip">Microsoft YaHei Mono</a>，还有另外一款字体来源于<a href="https://blog.walterlv.com/post/customize-fonts-of-command-window">自定义 Windows PowerShell 和 cmd 的字体</a> <a href="https://be5invis.github.io/Iosevka/inziu.html">Inziu Iosevka</a>已迁移到<a href="https://github.com/be5invis/Sarasa-Gothic">更纱黑体</a>（最新下载链接在GitHub项目页的Release里面），但是其包含的OpenType字体很多而且体积很大，如果C盘空间有限并不推荐），<strong>重启计算机后生效</strong>，否则会出现打开PowerShell窗口后无任何显示（这是最常见的问题）或报错：</p>
<figure class="highlight latex"><table><tbody><tr><td class="code"><pre><span class="line">Program 'git.exe' failed to run: Valid values are between 0 and 65535, inclusive.</span><br><span class="line">Parameter name: codepageAt C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">&lt;</span></span>username&gt;<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">WindowsPowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">posh</span></span>-git<span class="tag">\</span>0.7.3<span class="tag">\<span class="name">CheckVersion</span></span>.ps1:10 char:1</span><br><span class="line">4</span><br><span class="line">+ if ([String](git --version 2&gt; <span class="formula">$null) -match '(?&lt;ver&gt;<span class="tag">\<span class="name">d</span></span>+(?:<span class="tag">\<span class="name">.</span></span><span class="tag">\<span class="name">d</span></span>+)+)')  ...</span></span><br><span class="line"><span class="formula">+              ~~~~~~~~~~~~~~~~~~~~~~.</span></span><br><span class="line"><span class="formula">At C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">&lt;</span></span>username&gt;<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">WindowsPowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">posh</span></span>-git<span class="tag">\</span>0.7.3<span class="tag">\<span class="name">CheckVersion</span></span>.ps1:10 char:5</span></span><br><span class="line"><span class="formula">+ if ([String](git --version 2&gt; $</span>null) -match '(?&lt;ver&gt;<span class="tag">\<span class="name">d</span></span>+(?:<span class="tag">\<span class="name">.</span></span><span class="tag">\<span class="name">d</span></span>+)+)')  ...</span><br><span class="line">+     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">    + CategoryInfo          : ResourceUnavailable: (:) [], ApplicationFailedException</span><br><span class="line">    + FullyQualifiedErrorId : NativeCommandFailed</span><br><span class="line"> </span><br><span class="line">WARNING: posh-git requires Git 1.7.2 or better. You have .</span><br><span class="line">Program 'ssh-agent.exe' failed to run: Valid values are between 0 and 65535, inclusive.</span><br><span class="line">Parameter name: codepageAt C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">&lt;</span></span>username&gt;<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">WindowsPowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">posh</span></span>-git<span class="tag">\</span>0.7.3<span class="tag">\<span class="name">GitUtils</span></span>.ps1:491 char:9</span><br><span class="line">+         &amp; <span class="formula">$sshAgent | ForEach-Object {</span></span><br><span class="line"><span class="formula">+         ~~~~~~~~~~~.</span></span><br><span class="line"><span class="formula">At C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">&lt;</span></span>username&gt;<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">WindowsPowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">posh</span></span>-git<span class="tag">\</span>0.7.3<span class="tag">\<span class="name">GitUtils</span></span>.ps1:491 char:9</span></span><br><span class="line"><span class="formula">+         &amp; $</span>sshAgent | ForEach-Object {</span><br><span class="line">+         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">    + CategoryInfo          : ResourceUnavailable: (:) [], ApplicationFailedException</span><br><span class="line">    + FullyQualifiedErrorId : NativeCommandFailed</span><br></pre></td></tr></tbody></table></figure>

<p>实际上，如果确定配置好了但是PowerShell控制台就是没反应或报错，重启就完事儿了，不行再另说。在Fluent Terminal设置-&gt;终端中更改字体为Source Code Pro for Powerline。然后以Fira Code Retina字体为例，注册表：计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\FontLink\SystemLink下新建项名Fira Code Retina，数据为：</p>
<figure class="highlight css"><table><tbody><tr><td class="code"><pre><span class="line"><span class="selector-tag">MICROSS</span><span class="selector-class">.TTF</span>,<span class="selector-tag">Microsoft</span> <span class="selector-tag">Sans</span> <span class="selector-tag">Serif</span>,108,122</span><br><span class="line"><span class="selector-tag">MICROSS</span><span class="selector-class">.TTF</span>,<span class="selector-tag">Microsoft</span> <span class="selector-tag">Sans</span> <span class="selector-tag">Serif</span></span><br><span class="line"><span class="selector-tag">MINGLIU</span><span class="selector-class">.TTC</span>,<span class="selector-tag">PMingLiU</span></span><br><span class="line"><span class="selector-tag">MSMINCHO</span><span class="selector-class">.TTC</span>,<span class="selector-tag">MS</span> <span class="selector-tag">PMincho</span></span><br><span class="line"><span class="selector-tag">BATANG</span><span class="selector-class">.TTC</span>,<span class="selector-tag">Batang</span></span><br><span class="line"><span class="selector-tag">MSYH</span><span class="selector-class">.TTC</span>,<span class="selector-tag">Microsoft</span> <span class="selector-tag">YaHei</span> <span class="selector-tag">UI</span></span><br><span class="line"><span class="selector-tag">MSJH</span><span class="selector-class">.TTC</span>,<span class="selector-tag">Microsoft</span> <span class="selector-tag">JhengHei</span> <span class="selector-tag">UI</span></span><br><span class="line"><span class="selector-tag">YUGOTHM</span><span class="selector-class">.TTC</span>,<span class="selector-tag">Yu</span> <span class="selector-tag">Gothic</span> <span class="selector-tag">UI</span></span><br><span class="line"><span class="selector-tag">MALGUN</span><span class="selector-class">.TTF</span>,<span class="selector-tag">Malgun</span> <span class="selector-tag">Gothic</span></span><br><span class="line"><span class="selector-tag">SEGUISYM</span><span class="selector-class">.TTF</span>,<span class="selector-tag">Segoe</span> <span class="selector-tag">UI</span> <span class="selector-tag">Symbol</span></span><br></pre></td></tr></tbody></table></figure>

<p>检查计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Fonts是否已有安装好的字体，若没有则参照我的另一篇博文<a href="https://blog.csdn.net/yihuajack/article/details/104384983">Windows 10 ttf字体文件右键菜单没有安装选项导致MATLAB预设无法识别使用已安装字体的问题的解决方法</a>手动补加注册表。</p>
<p>注意：以上所有配置均针对于C:\WINDOWS\System32\WindowsPowerShell\v1.0\powershell.exe，另外一个PowerShell在C:\WINDOWS\SysWOW64\WindowsPowerShell\v1.0\powershell.exe则保持原样未被修改。修改过程中，原来PowerShell的快捷方式会失效，<strong>即使新建快捷方式，所使用的代码页与字体与powershell.exe控制台程序不同，仍会使用系统默认，所以全程调试PowerShell控制台应该直接打开C:\WINDOWS\System32\WindowsPowerShell\v1.0\powershell.exe或使用Win+R运行powershell或任务管理器新建任务powershell的界面</strong>。</p>
<p>为避免可能的中文字符问题，可执行：</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">Install</span>-<span class="keyword">Module</span> -<span class="keyword">Name</span> PowerShellGet -<span class="keyword">Force</span></span><br><span class="line"><span class="keyword">Install</span>-<span class="keyword">Module</span> -<span class="keyword">Name</span> PSReadLine -<span class="keyword">Force</span></span><br></pre></td></tr></tbody></table></figure>

<p>此外，你还可以尝试<a href="https://github.com/Davlind/PSColor">PSColor</a>、<a href="https://github.com/joonro/Get-ChildItemColor">Get-ChildItemColor</a>。如果嫌加载个人及系统配置文件时间过长，可以在ps1文件中删掉screenfetch语句。</p>
<p>以上的配置实际上不仅美化了Fluent Terminal，而且直接美化了powershell.exe Console。贴张PowerShell控制台的效果图：</p>
<p><img src="/posts/28219/Documents\Programming\HexoBlog\source\_posts\CSDN补档-10\20200229110336383.png" alt="img"></p>
<p>Fluent Terminal效果图：</p>
<p><img src="/posts/28219/Documents\Programming\HexoBlog\source\_posts\CSDN补档-10\20200229110323177.png" alt="img"></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>powershell</tag>
      </tags>
  </entry>
  <entry>
    <title>SQL Server 2014完全卸载与SQL Server 2019安装全记录</title>
    <url>/posts/51259.html</url>
    <content><![CDATA[<ol>
<li><p>在服务中停止所有SQL Server相关服务。</p>
</li>
<li><p>打开Visual Studio Installer，取消勾选SQL Server Express 2016 LocalDB、SQL ADAL运行时、SQL Server Data Tools、SQL Server ODBC Driver、SQL Server 命令行实用工具、SQL Server 支持的数据源、SQL Server 的 CLR 数据类型等，当然包括其连带的一大堆组件包括使用C++的桌面开发、C++核心桌面功能、体系结构和分析工具、Windows Communication Foundation、通用Windows平台开发、.NET桌面开发、通用Windows平台工具、.NET桌面开发工具，然后安装（卸载）。</p>
</li>
<li><p>打开控制面板中的卸载程序，将Microsoft SQL Server 2012 Native Client、Microsoft SQL Server 2008 Setup Support Files及其安装程序、主程序、LocalDB、Microsoft SQL Server Compact 3.5 SP2及其x64版本、Microsoft System CLR Types for SQL Server、Microsoft VSS Writer for SQL Server、Microsoft OLE DB Driver for SQL Server等尽数删去，其中先卸载主程序，按步骤卸载掉实例后虽然还在列表中，但是卸载完其他项目后再卸载主程序会显示已卸载。注意如果有SQL Server Management Studio (SSMS)还要卸载SSMS。</p>
</li>
<li><p>打开Windows Installer Clean Up，将上述各程序及其他SQL Server相关程序尽数删去。</p>
</li>
<li><p>打开注册表管理器，在HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft下删除：Microsoft ODBC Driver 11 for SQL Server、Microsoft ODBC Driver 17 for SQL Server、Microsoft OLE DB Driver for SQL Server、Microsoft OLE DB Driver Redist、Microsoft SQL Server 2012 Redist、Microsoft SQL Server 2014 Redist、Microsoft SQL Server 2017 RC0 Redist、Microsoft SQL Server 2019 CTP2.2 Redist、Microsoft SQL Server Compact Edition、Microsoft SQL Server Native Client 11.0、Microsoft SQL Server、MSODBCSQL11、MSODBCSQL17、MSOLEDBSQL、MSSQLServer、SQLNCLI11等；在HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Control\Session Manager下删除PendingFileRenameOperations；在HKEY_CLASSES_ROOT下删除MSOLEDBSQL.1、MSOLEDBSQL.AdvancedPage.1、MSOLEDBSQL.AdvancedPage、MSOLEDBSQL.AdvancedPage、MSOLEDBSQL.ConnectionPage.1、MSOLEDBSQL.ConnectionPage、MSOLEDBSQL.Enumerator.1、MSOLEDBSQL.Enumerator、MSOLEDBSQL.ErrorLookup.1、MSOLEDBSQL.ErrorLookup、MSOLEDBSQL、MSSQL.VDI.Client.2、MSSQL.VDI.Client、MSSQL.VDI.Server.2、MSSQL.VDI.Server、SQLNCLI11.1、SQLNCLI11.AdvancedPage.1、SQLNCLI11.AdvancedPage、SQLNCLI11.ConnectionPage.1、SQLNCLI11.ConnectionPage、SQLNCLI11.Enumerator.1、SQLNCLI11.Enumerator、SQLNCLI11.ErrorLookup.1、SQLNCLI11.ErrorLookup、SQLNCLI11、SQLOLEDB Enumerator.1、SQLOLEDB Enumerator、SQLOLEDB ErrorLookup.1、SQLOLEDB ErrorLookup、SQLOLEDB.1、SQLOLEDB、SQLServerProfilerTraceData、SQLServerProfilerTraceDef、SQLXMLX.1、SQLXMLX等；在HKEY_USERS\S-1-5-21-xxxxxxxxxx-xxxxxxxx-xxxxxxxxxx-xxxx\Software\Microsoft下删除Microsoft SQL Server；在HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft下删除Microsoft ODBC Driver 11 for SQL Server、Microsoft ODBC Driver 17 for SQL Server、Microsoft OLE DB Driver for SQL Server、Microsoft SQL Server Compact Edition、Microsoft SQL Server Native Client 11.0、Microsoft SQL Server、MSODBCSQL11、MSODBCSQL17、MSOLEDBSQL、MSSQLServer、SQLNCLI11；HKEY_USERS\S-1-5-18到S-1-5-8-21-…及S-1-5-80-…\Software下SQL Server相关注册表项。</p>
</li>
<li><p>删除C:\Program Files和Program Files (x86)\Common Files\System\Ole DB中的sqloledb.dll、sqloledb.rll、sqlxmlx.dll、sqlxmlx.rll、msdasql.dll、msdasqlr.dll以及en-US、ja-JP、zh-CN\sqloledb.rll.mui、msdasqlr.dll.mui、sqlxmlx.rll.mui；删除C:\WINDOWS\system32\sqlcecompact40.dll、sqlceoledb40、sqlceqp40.dll、sqlcese40.dll、sqlncli11.dll、SQLServerManager12.msc、SqlServerSpatial120.dll、SqlServerSpatial130.dll、SqlServerSpatial150.dll、sqlsrv32.dll、sqlsrv32.rll；删除C:\WINDOWS\SysWOW64\sqlcecompact40.dll、sqlceoledb40、sqlceqp40.dll、sqlcese40.dll、sqlsrv32.dll、sqlsrv32.rll、sqlunirl.dll、sqlwid.dll、sqlwoa.dll等。</p>
</li>
<li><p>使用Registrar Registry Manager搜索C:\Program Files\Microsoft SQL Server及C:\Program Files (x86)\Microsoft SQL Server，只选择数据，并选定全字匹配，搜索结果全部删除。</p>
</li>
<li><p>删除C:\Program Files\Microsoft SQL Server、C:\Program Files (x86)\Microsoft SQL Server、C:\Program Files (x86)\Microsoft Analysis Services、C:\Users&lt;username&gt;\AppData\Roaming\Microsoft\Microsoft SQL Server、C:\Users&lt;username&gt;\AppData\Local\Microsoft\Microsoft SQL Server（把C:\Program Files\Microsoft SQL Server\150\Setup Bootstrap\Log留下）。</p>
</li>
<li><p>打开SQL Server 2019安装程序，选择全新SQL Server独立安装或向现有安装添加功能，然后选择执行全新安装，指定可用版本为Developer，选择实例功能：数据库引擎服务、SQL Server复制、全文和语义提取搜索、Data Quality Services、Analysis Services和共享功能：Data Quality Client、客户端工具连接、客户端工具向后兼容性、客户端工具SDK、SQL Server客户端连接SDK（至此我们终于可以为实例功能、共享功能、共享功能（x86）都选择自己的安装目录，并且所有功能都没有变成灰色不可选或已选择的状态），选择命名实例为MSSQLSERVER，数据库引擎配置-&gt;服务器配置-&gt;身份验证模式为混合模式】设定密码并添加当前用户，再添加Administrators检查名称后的结果。</p>
</li>
<li><p>第一次报错：注册表权限问题，将提示的注册表十六进制代码在注册表中搜索定位到所在上一级Components（我的在HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Installer\UserData\S-1-5-18\Components）设置权限所有者为Administrators，启用继承，设置权限为Administrators和Users都可完全控制（记得之后改回原样，该注册表权限与Windows搜索结果菜单和开始菜单图标右键菜单高度相关）。</p>
</li>
<li><p>第二次报错：服务没有及时响应启动或控制请求。查询C:\Program Files\Microsoft SQL Server\150\Setup Bootstrap\Log下相应文件夹里的Details.txt找到这条报错信息向上溯源，发现很多feature都failed in result Result或ValidateResult，向上查找到最早的报错Result为E:\Program Files\Microsoft SQL Server\MSAS15.MSSQLSERVER\OLAP\和E:\Program Files\Microsoft SQL Server\MSAS15.MSSQLSERVER\OLAP\bin\，发现服务中的MSSQLServerOLAPService启动后迅速停止。再向上寻找发现报错信息：Slp: Sco: File ‘G:\x64\setup\x64\RsFx.msi’ does not exist、Slp: Sco: File ‘G:\2052_CHS_LP\x64\setup\x64\sql_as_loc.msi’ does not exist等，由于此时尚未安装MSSQLSERVER服务所以不能在服务上做文章，多次重试无用后取消，最后安装失败，共享功能全部成功安装，实例功能全部安装失败，最终错误代码为0x80004005。于是将ISO镜像文件解压并将其从移动硬盘复制到本地硬盘。试图使用修复但是现实修复程序没有作出更改，因为数据库引擎服务本就没有配置好，好在我们之前的安装是按照安装程序一步步安装的，我们可以在卸载程序中右键Microsoft SQL Server (64位)卸载/更改然后选择卸载所有实例功能。同时，安装还试图重装IIS，但是需要重启而未重启，总之没能解决该错误。试图通过命令行启动SQL Server返回错误信息服务没有响应控制功能。搜索报错信息Configuration action failed for feature SQL_Engine_Core_Inst during timing Startup and scenario Startup也没有得到解决办法。重启后通过本地硬盘中的安装程序重新安装。</p>
</li>
<li><p>第三次报错：服务没有及时响应启动或控制请求。这次更奇怪的是与第二次不同，没有文件does not exist，也没有Result和ValidateResult的报错信息，安装顿时陷入最艰难的情形。不过这次MSSQLSERVER已安装好，打开计算机管理（本地）-&gt;系统工具-&gt;事件查看器-&gt;Windows 日志-&gt;系统大量报错：等待……服务的连接超时(60000 毫秒)、由于下列错误，——服务启动失败: 服务没有及时响应启动或控制请求，更改MSSQLSERVER为本地系统登录后事件信息是SQL Server (MSSQLSERVER) 服务由于下列服务特定错误而终止: %%945。更改E:\Program Files\Microsoft SQL Server\MSSQL15.MSSQLSERVER\MSSQL\Log的权限后进入该目录打开ERRORLOG及ERRORLOG.x查看报错physical file “d:\dbs\sh\s19s\0924_133725\cmd\2\obj\x64retail\sql\mkmastr\databases\mkmastr.proj\MSDBData.mdf、model.mdf”. Operating system error 3: “3(系统找不到指定的路径。)”、MSDBLog.ldf不正确以及spid23s   SQL Server failed to communicate with filter daemon launch service  (OS error: 服务没有及时响应启动或控制请求等，搜索错误代码9954也没有结果。结束本次安装，发现Analysis Service成功安装。</p>
</li>
<li><p>受<a href="https://www.cnblogs.com/woxpp/p/5607908.html">SqlServer 错误1053：服务并未及时响应启动或控制请求</a>启发，在安装到最后正在注册服务将要报错时在服务中依次将注册的SQL Server Full-text Filter Daemon Launcher (MSSQLSERVER)、SQL Server (MSSQLSERVER)、SQL Server Analysis Services (MSSQLSERVER)、SQL Server Analysis Services CEIP (MSSQLSERVER)、SQL Server Browser、SQL Server CEIP 服务 (MSSQLSERVER)、SQL Server VSS Writer、SQL Server 代理 (MSSQLSERVER)改为本地系统账户登录。安装成功。</p>
</li>
<li><p>另外一种更靠谱的方法：在安装失败后，SQL Server各服务都已经被添加好，只是无法启动而已，在计算机管理（本地）-&gt;系统工具-&gt;本地用户和组-&gt;组-&gt;Administrators-&gt;添加到组-&gt;添加NT Service\MSSQLSERVER、NT Service\MSSQLServerOLAPService、NT Service\MSSQLFDLauncher、NT Service\SQLSERVERAGENT，然后搜索本地安全策略-&gt;安全设置-&gt;本地策略-&gt;用户权限分配-&gt;允许本地登录-&gt;属性-&gt;添加用户或组中添加上述四项，然后卸载数据库引擎服务、SQL Server复制、全文和语义提取搜索、Data Quality Services、Analysis Services，然后重新安装时在数据库引擎配置-&gt;服务器配置-&gt;指定SQL Server管理员添加当前用户和Administrators，在下一步Analysis Services配置-&gt;指定哪些用户具有对Analysis Services的管理权限中也同样如此指定。顺利安装，并且服务登录为NT Service...。</p>
</li>
<li><p>为解决SQL Server配置管理器中SQL Server网络配置和SQL Native Client 11.0配置只有32位的问题重新安装，这次清理了所有SQL Server、SQLServer、MSSQL、Microsoft ODBC、Microsoft OLE DB、MSODBCSQL、SQLOLEDB、SQLNCLI、SQLXMLX、sqlboot、SqlDumper、sqlmgmprovider、svrenumapi、instapi150等注册表，教训是搜索注册表时尽量不要勾选搜索数据，只需要勾选项和值即可，否则必然会导致误删，如Autorecover MOFs、环境变量、AppCompatCache等。</p>
</li>
<li><p>第一次报错：已添加了具有相同键的项。解决方法：删除C:\Users&lt;username&gt;\AppData\Local\Microsoft_Corporation\LandingPage.exe*文件夹。</p>
</li>
<li><p>第二次报错：注册表权限问题，参考<a href="https://blog.csdn.net/yihuajack/article/details/104395132">Windows 10无法打开注册表 由于某个错误无法打开该密钥(详细信息:拒绝访问)且无法在注册表上设置新的所有者拒绝访问的解决方案</a>更改计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Installer\UserData\S-1-5-18\Components权限。</p>
</li>
<li><p>第三次卡在SqlEngineDBStartConfigAction_install_configrc_Cpu64报错（SQLEngine: –SqlServerServiceSCM: Waiting for nt event ‘Global\sqlserverRecComplete’ to be created、SQLEngine: –SqlServerServiceSCM: Wait for creation of event handle ‘Global\sqlserverRecComplete’ has timed out）：AS或SQLEngine: –SqlEngineSetupPrivate: Failed to set register with Software Usage Metrics: System.IO.FileNotFoundException: 系统找不到指定的文件。 (异常来自 HRESULT:0x80070002)、SQLEngine: –SqlServerServiceSCM: Exception happens at start SQL Engine attempt 1. Exception: 找不到数据库引擎启动句柄之解决方法：安装时在服务器配置-&gt;服务账户-&gt;SQL Server数据库引擎-&gt;账户名称修改为NT AUTHORITY\SYSTEM，注意不用查找账户直接输入该名称确定。然后顺利安装。安装后MSSQLSERVER采用的是本地系统登录。</p>
</li>
<li><p>第四次发现SQL Server主服务启动不了，修复又报错找不到数据库引擎启动句柄，发现SQL Server服务的登录方式被改回了NT Service\MSSQLSERVER并且无法启动，报错启动失败或请求失败或服务未及时响应，解决方法是在服务中将其登录的登录身份改为本地系统账户即可。</p>
</li>
<li><p>打开SSMS，注意输入的是计算机名称，而不是MSSQLSERVER等乱七八糟的名称，否则会报错：</p>
<figure class="highlight asciidoc"><table><tbody><tr><td class="code"><pre><span class="line">===================================</span><br><span class="line"><span class="code"> </span></span><br><span class="line">无法连接到 MSSQLSERVER。</span><br><span class="line"><span class="code"> </span></span><br><span class="line">===================================</span><br><span class="line"><span class="code"> </span></span><br><span class="line">在与 SQL Server 建立连接时出现与网络相关的或特定于实例的错误。未找到或无法访问服务器。请验证实例名称是否正确并且 SQL Server 已配置为允许远程连接。 (provider: Named Pipes Provider, error: 40 - 无法打开到 SQL Server 的连接) (.Net SqlClient Data Provider)</span><br><span class="line"><span class="code"> </span></span><br><span class="line">------------------------------</span><br><span class="line">有关帮助信息，请单击: http://go.microsoft.com/fwlink?ProdName=Microsoft%20SQL%20Server&amp;EvtSrc=MSSQLServer&amp;EvtID=53&amp;LinkId=20476</span><br><span class="line"><span class="code"> </span></span><br><span class="line">------------------------------</span><br><span class="line">错误号: 53</span><br><span class="line">严重性: 20</span><br><span class="line">状态: 0</span><br><span class="line"><span class="code"> </span></span><br><span class="line"><span class="code"> </span></span><br><span class="line">------------------------------</span><br><span class="line">程序位置:</span><br><span class="line"><span class="code"> </span></span><br><span class="line"><span class="code">   在 System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, DbConnectionPool pool, String accessToken, Boolean applyTransientFaultHandling, SqlAuthenticationProviderManager sqlAuthProviderManager)</span></span><br><span class="line"><span class="code">   在 System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)</span></span><br><span class="line"><span class="code">   在 System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup, DbConnectionOptions userOptions)</span></span><br><span class="line"><span class="code">   在 System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal&amp; connection)</span></span><br><span class="line"><span class="code">   在 System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)</span></span><br><span class="line"><span class="code">   在 System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)</span></span><br><span class="line"><span class="code">   在 System.Data.SqlClient.SqlConnection.TryOpenInner(TaskCompletionSource`1 retry)</span></span><br><span class="line"><span class="code">   在 System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)</span></span><br><span class="line"><span class="code">   在 System.Data.SqlClient.SqlConnection.Open()</span></span><br><span class="line"><span class="code">   在 Microsoft.SqlServer.Management.SqlStudio.Explorer.ObjectExplorerService.ValidateConnection(UIConnectionInfo ci, IServerType server)</span></span><br><span class="line"><span class="code">   在 Microsoft.SqlServer.Management.UI.ConnectionDlg.Connector.ConnectionThreadUser()</span></span><br><span class="line">===================================</span><br><span class="line">找不到网络路径。</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>在SQL Server配置管理器仍然没有64位的节点的情况下，可尝试修改计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\150和计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\MSSQL15.MSSQLSERVER下的注册表，例如TCP/IP是在计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\MSSQL15.MSSQLSERVER\MSSQLServer\SuperSocketNetLib\Tcp。将其Enabled值设为1，查看其子项IP列表，如IP14的IpAddress为127.0.0.1，TcpPort为1433，那么就可以通过服务器名称为127.0.0.1,1433登录，注意如果通过Windows身份验证会报错：</p>
<figure class="highlight asciidoc"><table><tbody><tr><td class="code"><pre><span class="line">===================================</span><br><span class="line"><span class="code"> </span></span><br><span class="line">无法连接到 127.0.0.1,1433。</span><br><span class="line"><span class="code"> </span></span><br><span class="line">===================================</span><br><span class="line"><span class="code"> </span></span><br><span class="line">登录失败。该登录名来自不受信任的域，不能与集成身份验证一起使用。 (.Net SqlClient Data Provider)</span><br><span class="line"><span class="code"> </span></span><br><span class="line">------------------------------</span><br><span class="line">有关帮助信息，请单击: http://go.microsoft.com/fwlink?ProdName=Microsoft%20SQL%20Server&amp;EvtSrc=MSSQLServer&amp;EvtID=18452&amp;LinkId=20476</span><br><span class="line"><span class="code"> </span></span><br><span class="line">------------------------------</span><br><span class="line">服务器名称: 127.0.0.1,1433</span><br><span class="line">错误号: 18452</span><br><span class="line">严重性: 14</span><br><span class="line">状态: 1</span><br><span class="line">行号: 65536</span><br><span class="line"><span class="code"> </span></span><br><span class="line"><span class="code"> </span></span><br><span class="line">------------------------------</span><br><span class="line">程序位置:</span><br><span class="line"><span class="code"> </span></span><br><span class="line"><span class="code">   在 System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, DbConnectionPool pool, String accessToken, Boolean applyTransientFaultHandling, SqlAuthenticationProviderManager sqlAuthProviderManager)</span></span><br><span class="line"><span class="code">   在 System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)</span></span><br><span class="line"><span class="code">   在 System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup, DbConnectionOptions userOptions)</span></span><br><span class="line"><span class="code">   在 System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal&amp; connection)</span></span><br><span class="line"><span class="code">   在 System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)</span></span><br><span class="line"><span class="code">   在 System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)</span></span><br><span class="line"><span class="code">   在 System.Data.SqlClient.SqlConnection.TryOpenInner(TaskCompletionSource`1 retry)</span></span><br><span class="line"><span class="code">   在 System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)</span></span><br><span class="line"><span class="code">   在 System.Data.SqlClient.SqlConnection.Open()</span></span><br><span class="line"><span class="code">   在 Microsoft.SqlServer.Management.SqlStudio.Explorer.ObjectExplorerService.ValidateConnection(UIConnectionInfo ci, IServerType server)</span></span><br><span class="line"><span class="code">   在 Microsoft.SqlServer.Management.UI.ConnectionDlg.Connector.ConnectionThreadUser()</span></span><br></pre></td></tr></tbody></table></figure>

<p>改为通过SQL Server身份验证登录即可。</p>
</li>
</ol>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>sqlserver</tag>
      </tags>
  </entry>
  <entry>
    <title>PowerShell Core 7配置与美化（结合Fluent Terminal/Windows Terminal）</title>
    <url>/posts/58057.html</url>
    <content><![CDATA[<p>【本篇是在<a href="https://blog.csdn.net/yihuajack/article/details/104565634">美化Windows PowerShell以及Fluent Terminal配置Posh-git、Oh-my-posh、DirColors方法</a>基础上针对PowerShell Core 7部分配置与美化的更新，推荐先通过本文的方法配置PowerShell Core 7，再配置Fluent Terminal或Windows Terminal等，其中<a href="https://github.com/felixse/FluentTerminal">Fluent Terminal</a>从<a href="https://github.com/felixse/FluentTerminal/releases%E4%B8%8B%E8%BD%BDzip%E6%96%87%E4%BB%B6%EF%BC%8C%E7%84%B6%E5%90%8E%E5%8F%8C%E5%87%BB*.appxbundle%E6%96%87%E4%BB%B6%E5%AE%89%E8%A3%85%EF%BC%8C%E4%B9%9F%E5%8F%AF%E4%BD%BF%E7%94%A8scoop%E5%AE%89%E8%A3%85%EF%BC%9A">https://github.com/felixse/FluentTerminal/releases下载zip文件，然后双击*.appxbundle文件安装，也可使用scoop安装：</a></p>
<figure class="highlight mipsasm"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">scoop </span><span class="keyword">install </span><span class="number">7</span>zip git</span><br><span class="line"><span class="keyword">scoop </span><span class="keyword">bucket </span><span class="keyword">add </span>nonportable</span><br><span class="line"><span class="keyword">scoop </span><span class="keyword">install </span>fluent-terminal-np</span><br></pre></td></tr></tbody></table></figure>

<p>或使用chocolatey安装：</p>
<figure class="highlight cmake"><table><tbody><tr><td class="code"><pre><span class="line">choco <span class="keyword">install</span> fluent-terminal</span><br></pre></td></tr></tbody></table></figure>

<p>而<a href="https://github.com/microsoft/terminal">Windows Terminal</a>可从<a href="https://github.com/microsoft/terminal/releases%E4%B8%8B%E8%BD%BDmsixbundle%E6%96%87%E4%BB%B6%E5%AE%89%E8%A3%85%EF%BC%8C%E4%B9%9F%E5%8F%AF%E5%9C%A8Microsoft">https://github.com/microsoft/terminal/releases下载msixbundle文件安装，也可在Microsoft</a> Store中搜索Terminal安装，也可使用chocolatey安装：</p>
<figure class="highlight cmake"><table><tbody><tr><td class="code"><pre><span class="line">choco <span class="keyword">install</span> microsoft-windows-terminal</span><br></pre></td></tr></tbody></table></figure>

<p>配置文件可参考我的配置[<a href="https://github.com/yihuajack/Beautifier_Configuration/blob/master/Windows%20Terminal/profiles.json]">https://github.com/yihuajack/Beautifier_Configuration/blob/master/Windows%20Terminal/profiles.json]</a>(<a href="https://github.com/yihuajack/Beautifier_Configuration/blob/master/Windows">https://github.com/yihuajack/Beautifier_Configuration/blob/master/Windows</a> Terminal/profiles.json)。建议使用PowerShell Core 7完全代替PowerShell 5，无需再对PowerShell 5配置。】</p>
<p>1.安装<a href="https://github.com/PowerShell/PowerShell">PowerShell</a>。在GitHub的<a href="https://github.com/PowerShell/PowerShell/releases">release</a>页面下载Latest release或Pre-release并安装。</p>
<p>2.以管理员身份运行PowerShell 7 (x64)，执行</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser</span><br><span class="line"><span class="variable">$env</span>:SCOOP=<span class="string">'D:\Program_Files\scoop'</span></span><br><span class="line">[environment]::setEnvironmentVariable(<span class="string">'SCOOP'</span>,<span class="variable">$env</span>:SCOOP,<span class="string">'User'</span>)</span><br><span class="line"><span class="variable">$env</span>:SCOOP_GLOBAL=<span class="string">'D:\Program_Files\scoop\apps'</span></span><br><span class="line">[Environment]::SetEnvironmentVariable(<span class="string">'SCOOP_GLOBAL'</span>, <span class="variable">$env</span>:SCOOP_GLOBAL, <span class="string">'Machine'</span>)</span><br><span class="line">iwr -useb get.scoop.sh | iex</span><br></pre></td></tr></tbody></table></figure>

<p>安装<a href="https://github.com/lukesampson/scoop">scoop</a>。这里手动设置了scoop的安装目录和scoop的global programs的安装目录。</p>
<p>3.执行</p>
<figure class="highlight gams"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">Set</span>-ExecutionPolicy <span class="comment">Bypass -Scope Process -Force</span>; [<span class="keyword">System</span>.Net.ServicePointManager]::SecurityProtocol = [<span class="keyword">System</span>.Net.ServicePointManager]::SecurityProtocol -bor <span class="number">3072</span>; iex ((New-Object <span class="keyword">System</span>.Net.WebClient).DownloadString(<span class="string">'https://chocolatey.org/install.ps1'</span>))</span><br></pre></td></tr></tbody></table></figure>

<p>安装chocolatey。</p>
<p>4.执行</p>
<figure class="highlight pgsql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">Set</span>-PSRepository -<span class="type">Name</span> PSGallery -InstallationPolicy <span class="keyword">Trusted</span></span><br></pre></td></tr></tbody></table></figure>

<p>信任来自PSGallery的所有模块（执行过程不会是想象的那么快）。</p>
<p>5.安装<a href="https://github.com/dahlbyk/posh-git">posh-git</a>：【注意：现有教程所说明的命令</p>
<figure class="highlight mathematica"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">Install</span>-<span class="keyword">Module</span> posh-git</span><br></pre></td></tr></tbody></table></figure>

<p>会安装一个过时的版本0.7.3，这个版本对于Windows有一个bug出现在源码的/src/GitUtils.ps1的“Get-SshAgent()”、“Start-SshAgent()”、“Stop-SshAgent()”等函数中，由于开发者没有意识到Windows环境中SSH_AGENT_PID与实际上的Windows的ssh-agent.exe进程的Process ID（PID）是不同的，导致在Windows中这几个SSH Agent函数从未起作用。不仅如此，它还有一个原因不明的bug，即启动时会有乱码，在Fluent Terminal显示为输入光标与左边tab edge之间有一段空白，乱码或空白会在执行完第一个任意命令后消失，见oh-my-posh Issue #220：<a href="https://github.com/JanDeDobbeleer/oh-my-posh/issues/220">PowerShell with oh-my-posh shows unreadable marks at startup</a>。开发者很晚才意识到这一点，该bug在0.7.3.1版本中也没有被修复，自1.0.0 Beta 1版本起，posh-git将不再支持SSH Agent功能，这部分功能被分出一个新项目<a href="https://github.com/dahlbyk/posh-sshell">posh-sshell</a>，在这个项目中开发者采用Windows Native SSH Agent取代原先的调用（见源码的/src/Agent.ps1（包含原先的和Get-SshAgent()、Start-SshAgent()、Stop-SshAgent()等函数）和/src/Win32-OpenSSH.ps1文件（包含Get-NativeSshAgent和Start-NativeSshAgent函数，它们被Agent.ps1文件中的函数所调用））。】</p>
<p>执行</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">PowerShellGet\<span class="keyword">Install</span>-<span class="keyword">Module</span> posh-git -<span class="keyword">Scope</span> CurrentUser -AllowPrerelease -<span class="keyword">Force</span></span><br></pre></td></tr></tbody></table></figure>

<p>或通过chocolatey安装：</p>
<figure class="highlight cmake"><table><tbody><tr><td class="code"><pre><span class="line">choco <span class="keyword">install</span> poshgit</span><br></pre></td></tr></tbody></table></figure>

<p>或通过scoop安装：</p>
<figure class="highlight dockerfile"><table><tbody><tr><td class="code"><pre><span class="line">scoop install posh-git</span><br><span class="line"><span class="keyword">Add</span><span class="bash">-PoshGitToProfile</span></span><br></pre></td></tr></tbody></table></figure>

<p>6.安装<a href="https://github.com/dahlbyk/posh-sshell">posh-sshell</a>：</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">PowerShellGet\<span class="keyword">Install</span>-<span class="keyword">Module</span> posh-sshell -<span class="keyword">Scope</span> CurrentUser</span><br></pre></td></tr></tbody></table></figure>

<p>7.安装<a href="https://github.com/JanDeDobbeleer/oh-my-posh">oh-my-posh</a>：</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">Install</span>-<span class="keyword">Module</span> oh-my-posh -<span class="keyword">Scope</span> CurrentUser</span><br></pre></td></tr></tbody></table></figure>

<p>8.安装<a href="https://github.com/PowerShell/PSReadLine">PSReadLine</a>（PowerShell Core中自带该模块，但其版本往往落后于最新版本）：</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">Install</span>-<span class="keyword">Module</span> -<span class="keyword">Name</span> PSReadLine -AllowPrerelease -<span class="keyword">Scope</span> CurrentUser -<span class="keyword">Force</span> -SkipPublisherCheck</span><br></pre></td></tr></tbody></table></figure>

<p>9.安装<a href="https://github.com/dfinke/InstallModuleFromGitHub">InstallModuleFromGithub</a>（虽然该模块的README很久没有更新，但是其GitHub仓库和版本仍在不断更新）：</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">Install</span>-<span class="keyword">Module</span> -<span class="keyword">Name</span> InstallModuleFromGitHub</span><br></pre></td></tr></tbody></table></figure>

<p>可参考模块开发者dfinke在2016年11月21日发布的GitHub博文：<a href="https://dfinke.github.io/powershell/2016/11/21/Quickly-Install-PowerShell-Modules-from-GitHub.html">Quickly Install PowerShell Modules from GitHub</a>。</p>
<p>10.安装<a href="https://github.com/JulianChow94/Windows-screenFetch">windows-screenfetch</a>：</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">Install</span>-<span class="keyword">Module</span> -<span class="keyword">Name</span> windows-screenfetch</span><br></pre></td></tr></tbody></table></figure>

<p>注意：该模块仅限于在PowerShell 5中安装，若在PowerShell Core中安装会报错：</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">Install</span>-<span class="keyword">Package</span>: D:\program files\powershell\<span class="number">7</span>\Modules\PowerShellGet\PSModule.psm1:<span class="number">9709</span>                                 Line |                                                                                                                  <span class="number">9709</span> |  … talledPackages = PackageManagement\<span class="keyword">Install</span>-<span class="keyword">Package</span> @PSBoundParameters                                             |                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~                                              | The <span class="keyword">following</span> commands <span class="keyword">are</span> already available <span class="keyword">on</span> this <span class="keyword">system</span>:<span class="string">'Get-Uptime'</span>. This <span class="keyword">module</span>                                 | <span class="string">'windows-screenfetch'</span> may override the existing commands. <span class="keyword">If</span> you still want <span class="keyword">to</span> <span class="keyword">install</span> this <span class="keyword">module</span></span><br><span class="line">     | <span class="string">'windows-screenfetch'</span>, <span class="keyword">use</span> -AllowClobber parameter. </span><br></pre></td></tr></tbody></table></figure>

<p>如果添加了-AllowClobber参数会进一步报错，参考<a href="https://blog.csdn.net/yihuajack/article/details/104868474">为PowerShell和PowerShell Core 7设置不同的profile配置文件路径</a>与Windows-screenFetch Issue #19：<a href="https://github.com/JulianChow94/Windows-screenFetch/issues/19">Doesn’t support PowerShell Core</a>。考虑到PowerShell Gallery中的<a href="https://www.powershellgallery.com/packages/windows-screenfetch/1.0.2">windows-screenfetch</a>模块最新版本为1.0.2，上次更新已是2018年2月20日，根据Windows-screenFetch Issue #33：<a href="https://github.com/JulianChow94/Windows-screenFetch/issues/33">how to get latest version of this?</a>，通过InstallModuleFromGithub：</p>
<figure class="highlight mathematica"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">Find</span>-<span class="keyword">Module</span> windows-screenfetch | <span class="keyword">Install</span>-ModuleFromGitHub</span><br></pre></td></tr></tbody></table></figure>

<p>报错：</p>
<figure class="highlight latex"><table><tbody><tr><td class="code"><pre><span class="line">Invoke-RestMethod: C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">Yihua</span></span><span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">PowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">InstallModuleFromGitHub</span></span><span class="tag">\</span>1.3.0<span class="tag">\<span class="name">InstallModuleFromGitHub</span></span>.psm1:47                                                                                                                    Line |                                                                                                                    47 |  …             Invoke-RestMethod <span class="formula">$url -OutFile $</span>OutFile -Headers <span class="formula">$header …                                          |                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~                                              | {"message":"Not Found","documentation_url":"https://developer.github.com/v3"}                                                                                                                                                            Unblock-File: C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">Yihua</span></span><span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">PowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">InstallModuleFromGitHub</span></span><span class="tag">\</span>1.3.0<span class="tag">\<span class="name">InstallModuleFromGitHub</span></span>.psm1:49 Line |                                                                                                                    49 |                    Unblock-File $</span>OutFile                                                                              |                    ~~~~~~~~~~~~~~~~~~~~~                                                                              | Cannot find path 'C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">Yihua</span></span><span class="tag">\<span class="name">AppData</span></span><span class="tag">\<span class="name">Local</span></span><span class="tag">\<span class="name">Temp</span></span><span class="tag">\<span class="name">Windows</span></span>-screenFetch.zip' because it does not exist.                                                                                                                                  Get-FileHash: C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">Yihua</span></span><span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">PowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">InstallModuleFromGitHub</span></span><span class="tag">\</span>1.3.0<span class="tag">\<span class="name">InstallModuleFromGitHub</span></span>.psm1:52 Line |                                                                                                                    52 |                  <span class="formula">$fileHash = $</span>(Get-FileHash -Path <span class="formula">$OutFile).hash                                                      |                                ~~~~~~~~~~~~~~~~~~~~~~~~~~~                                                            | Cannot find path 'C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">Yihua</span></span><span class="tag">\<span class="name">AppData</span></span><span class="tag">\<span class="name">Local</span></span><span class="tag">\<span class="name">Temp</span></span><span class="tag">\<span class="name">Windows</span></span>-screenFetch.zip' because it does not exist.                                                                                                                                  Expand-Archive: C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">Yihua</span></span><span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">PowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">InstallModuleFromGitHub</span></span><span class="tag">\</span>1.3.0<span class="tag">\<span class="name">InstallModuleFromGitHub</span></span>.psm1:55                                                                                                                       Line |                                                                                                                    55 |  …             Expand-Archive -Path $</span>OutFile -DestinationPath <span class="formula">$tmpDir -F …                                          |                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~                                              | The path 'C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">Yihua</span></span><span class="tag">\<span class="name">AppData</span></span><span class="tag">\<span class="name">Local</span></span><span class="tag">\<span class="name">Temp</span></span><span class="tag">\<span class="name">Windows</span></span>-screenFetch.zip' either does not exist or is not a                | valid file system path.</span></span><br><span class="line"><span class="formula"> </span></span><br><span class="line"><span class="formula">Join-Path: C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">Yihua</span></span><span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">PowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">InstallModuleFromGitHub</span></span><span class="tag">\</span>1.3.0<span class="tag">\<span class="name">InstallModuleFromGitHub</span></span>.psm1:73</span></span><br><span class="line"><span class="formula">Line |</span></span><br><span class="line"><span class="formula">  73 |  … hildItem (Join-Path -Path $</span>tmpDir -ChildPath <span class="formula">$unzippedArchive) -Inclu …</span></span><br><span class="line"><span class="formula">     |                                                 ~~~~~~~~~~~~~~~~</span></span><br><span class="line"><span class="formula">     | Cannot convert 'System.Object[]' to the type 'System.String' required by parameter 'ChildPath'.</span></span><br><span class="line"><span class="formula">     | Specified method is not supported.</span></span><br><span class="line"><span class="formula"> </span></span><br><span class="line"><span class="formula">Join-Path: C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">Yihua</span></span><span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">PowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">InstallModuleFromGitHub</span></span><span class="tag">\</span>1.3.0<span class="tag">\<span class="name">InstallModuleFromGitHub</span></span>.psm1:81</span></span><br><span class="line"><span class="formula">Line |</span></span><br><span class="line"><span class="formula">  81 |  … y-Item "$</span>(Join-Path -Path <span class="formula">$tmpDir -ChildPath $</span>unzippedArchive)" <span class="formula">$dest …</span></span><br><span class="line"><span class="formula">     |                                                 ~~~~~~~~~~~~~~~~</span></span><br><span class="line"><span class="formula">     | Cannot convert 'System.Object[]' to the type 'System.String' required by parameter 'ChildPath'.</span></span><br><span class="line"><span class="formula">     | Specified method is not supported.</span></span><br><span class="line"><span class="formula"> </span></span><br><span class="line"><span class="formula">Copy-Item: C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">Yihua</span></span><span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">PowerShell</span></span><span class="tag">\<span class="name">Modules</span></span><span class="tag">\<span class="name">InstallModuleFromGitHub</span></span><span class="tag">\</span>1.3.0<span class="tag">\<span class="name">InstallModuleFromGitHub</span></span>.psm1:81</span></span><br><span class="line"><span class="formula">Line |</span></span><br><span class="line"><span class="formula">  81 |  … = Copy-Item "$</span>(Join-Path -Path <span class="formula">$tmpDir -ChildPath $</span>unzippedArchive)"  …</span><br><span class="line">     |                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">     | Cannot bind argument to parameter 'Path' because it is an empty string.</span><br></pre></td></tr></tbody></table></figure>

<p>见InstallModuleFromGithub Issue #17：<a href="https://github.com/dfinke/InstallModuleFromGitHub/issues/17">Invoke-RestMethod errors</a>与Windows-screenFetch Issue #37：<a href="https://github.com/JulianChow94/Windows-screenFetch/issues/37">Command conflict ‘Get-Uptime’</a>。</p>
<p>11.安装<a href="https://github.com/powerline/fonts">powerline fonts</a>，并将console的字体改为安装的Powerline字体。详见开头引用的博文。</p>
<p>12.更改PowerShell console代码页为UTF-8：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">chcp 65001</span><br></pre></td></tr></tbody></table></figure>

<p>13.创建$PROFILE文件（可手动在C:\Users&lt;username&gt;\Documents\PowerShell下创建Microsoft.PowerShell_profile.ps1文件）：</p>
<figure class="highlight coq"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (!(<span class="keyword">Test</span>-<span class="keyword">Path</span> -<span class="keyword">Path</span> $PROFILE )) { New-Item -<span class="keyword">Type</span> <span class="keyword">File</span> -<span class="keyword">Path</span> $PROFILE -Force }</span><br><span class="line">notepad $PROFILE</span><br></pre></td></tr></tbody></table></figure>

<p>14.安装<a href="https://github.com/joonro/Get-ChildItemColor">Get-ChildItemColor</a>（该项目目前处于活跃开发状态）：</p>
<figure class="highlight mathematica"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">Install</span>-<span class="keyword">Module</span> -AllowClobber <span class="keyword">Get</span>-ChildItemColor</span><br></pre></td></tr></tbody></table></figure>

<p>若不使用-AllowClobber参数会报错：</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">Install</span>-<span class="keyword">Package</span>: D:\program files\powershell\<span class="number">7</span>\Modules\PowerShellGet\PSModule.psm1:<span class="number">9709</span></span><br><span class="line">Line |</span><br><span class="line"><span class="number">9709</span> |  … talledPackages = PackageManagement\<span class="keyword">Install</span>-<span class="keyword">Package</span> @PSBoundParameters</span><br><span class="line">     |                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">     | The <span class="keyword">following</span> commands <span class="keyword">are</span> already available <span class="keyword">on</span> this <span class="keyword">system</span>:<span class="string">'Out-Default'</span>. This <span class="keyword">module</span></span><br><span class="line">     | <span class="string">'Get-ChildItemColor'</span> may override the existing commands. <span class="keyword">If</span> you still want <span class="keyword">to</span> <span class="keyword">install</span> this <span class="keyword">module</span></span><br><span class="line">     | <span class="string">'Get-ChildItemColor'</span>, <span class="keyword">use</span> -AllowClobber parameter.</span><br></pre></td></tr></tbody></table></figure>

<p>关于Out-Default的信息：</p>
<figure class="highlight css"><table><tbody><tr><td class="code"><pre><span class="line"><span class="selector-tag">CommandType</span>     <span class="selector-tag">Name</span>                                               <span class="selector-tag">Version</span>    <span class="selector-tag">Source</span></span><br><span class="line"><span class="selector-tag">-----------</span>     <span class="selector-tag">----</span>                                               <span class="selector-tag">-------</span>    <span class="selector-tag">------</span></span><br><span class="line"><span class="selector-tag">Cmdlet</span>          <span class="selector-tag">Out-Default</span>                                        7<span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-class">.0</span>    <span class="selector-tag">Microsoft</span><span class="selector-class">.PowerShell</span><span class="selector-class">.Core</span></span><br></pre></td></tr></tbody></table></figure>

<p>或先git clone项目仓库，然后在$ENV:UserProfile\Documents\PowerShell\Modules即PSModulePath下新建文件夹Get-ChildItemColor，将源码中的/src目录复制到该文件夹中。</p>
<p>或使用chocolatey安装：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">choco install get-childitemcolor</span><br></pre></td></tr></tbody></table></figure>

<p>对于中文单引号、双引号、星号（★，※，☆）、省略号、破折号、箭头（↑↓←→）、对勾（√）、形状符号（○，△，□）执行ls命令会报错：</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line">Sort-Object: C:\Users\Yihua\Documents\PowerShell\Modules\Get-ChildItemColor\2.2.0\Get-ChildItemColor.psm1:60</span><br><span class="line">Line |</span><br><span class="line">  60 |  … ject Name | Sort-Object { LengthInBufferCells(<span class="string">"<span class="variable">$_</span>"</span>) } -Descending | S …</span><br><span class="line">     |                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">     | Cannot convert value <span class="string">"-2171"</span> <span class="keyword">to</span><span class="built_in"> type </span><span class="string">"System.UInt32"</span>. Error: <span class="string">"Value was either too large or too small</span></span><br><span class="line"><span class="string">     | for a UInt32."</span></span><br></pre></td></tr></tbody></table></figure>

<p>value重复”-2171”、”-3684”和”-3692”多次以及</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line">InvalidArgument: C:\Users\Yihua\Documents\PowerShell\Modules\Get-ChildItemColor\2.2.0\PSColorHelper.ps1:39</span><br><span class="line">Line |</span><br><span class="line">  39 |      [bool]<span class="variable">$isWide</span> = <span class="variable">$Char</span> -ge 0x1100 -and</span><br><span class="line">     |      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">     | Cannot convert value <span class="string">"-2171"</span> <span class="keyword">to</span><span class="built_in"> type </span><span class="string">"System.UInt32"</span>. Error: <span class="string">"Value was either too large or too small</span></span><br><span class="line"><span class="string">     | for a UInt32."</span></span><br></pre></td></tr></tbody></table></figure>

<p>value重复”-3684”、”-2171”、”-3683”、”-3692”、”-3688”和”-3687”多次，参考Get-ChildItemColor Issue #38：<a href="https://github.com/joonro/Get-ChildItemColor/issues/38">ls command failed for special marks: Sort-Object and InvalidArgument errors</a>。</p>
<p> **不推荐安装<a href="https://github.com/DHowett/DirColors">DirColors</a>**（请使用Get-ChildItemColor替代）：</p>
<figure class="highlight mipsasm"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">Install-Module </span><span class="keyword">DirColors </span>-<span class="keyword">Scope </span>CurrentUser</span><br></pre></td></tr></tbody></table></figure>

<p>该模块在PowerShell Gallery上的最近版本<a href="https://www.powershellgallery.com/packages/DirColors/1.1.2">1.1.2</a>上次发布在2018年8月13日，也是其GitHub仓库最后一次commit的日期，而开发者在GitHub issue最后一次活动为2018年1月10日，而<a href="https://github.com/seebi/dircolors-solarized">dircolors-solarized</a>仍处于活跃状态。开发者对该项目的描述是：</p>
<blockquote>
<p>DirColors leverages Powershell’s custom formatter support to provide an implementation of GNU coreutils’ <code>ls --color=always</code> anywhere FileInfo/DirectoryInfo objects are left to self-format.</p>
</blockquote>
<p>该模块用于使文件列表彩色化，能够使用dircolors-solarized等颜色配置。若还要更改Windows命令提示符的颜色，参考<a href="https://github.com/neilpa/cmd-colors-solarized">cmd-colors-solarized</a>。</p>
<p>使用前效果：</p>
<p><img src="/posts/58057/Documents\Programming\HexoBlog\source_posts\CSDN补档-32\20200520175303384.png" alt="img"></p>
<p>使用后效果：</p>
<p><img src="/posts/58057/Documents\Programming\HexoBlog\source_posts\CSDN补档-32\2020052017562382.png" alt="img"></p>
<p><img src="/posts/58057/Documents\Programming\HexoBlog\source_posts\CSDN补档-32\2020052017570390.png" alt="img"></p>
<p>**不推荐安装<a href="https://github.com/Davlind/PSColor">PSColor</a>**（请使用Get-ChildItemColor替代）：</p>
<figure class="highlight mathematica"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">Install</span>-<span class="keyword">Module</span> PSColor</span><br></pre></td></tr></tbody></table></figure>

<p>该模块在PowerShell Gallery上的最近版本<a href="https://www.powershellgallery.com/packages/PSColor/1.0.0.0">1.0.0.0</a>上次发布在2016年3月2日，其GitHub仓库最后一次commit在2018年3月2日，而开发者在GitHub issue最后一次活动为2018年6月27日。开发者对该项目的描述是：</p>
<blockquote>
<p>Provides color highlighting for some basic PowerShell output. It currently rewrites “Out-Default” to colorize:</p>
<ul>
<li>FileInfo &amp; DirectoryInfo objects (Get-ChildItem, dir, ls etc.)</li>
<li>ServiceController objects (Get-Service)</li>
<li>MatchInfo objects (Select-String etc.)</li>
</ul>
</blockquote>
<p>15.（可选/Optional）安装<a href="https://github.com/starship/starship">starship</a>（注意：该模块会覆盖posh-git/oh-my-posh的效果），其官方页面为<a href="https://starship.rs/%E3%80%82">https://starship.rs/。</a></p>
<p>scoop下载较慢需要较长时间甚至出现RPC failed等git clone错误，所以先安装aria2实现多连接下载：</p>
<figure class="highlight mipsasm"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">scoop </span><span class="keyword">install </span>aria2</span><br></pre></td></tr></tbody></table></figure>

<p>安装程序前会自动update scoop。aria2-enabled属性的默认值即为true。重要的是它还能显示下载文件的信息、已下载的size和百分比进度等，例如</p>
<figure class="highlight angelscript"><table><tbody><tr><td class="code"><pre><span class="line">Download:  *** Download Progress Summary as of Wed May <span class="number">20</span> <span class="number">22</span>:<span class="number">16</span>:<span class="number">08</span> <span class="number">2020</span> ***</span><br><span class="line">Download: ===============================================================================</span><br><span class="line">Download: [#d7df86 <span class="number">880</span>KiB/<span class="number">1.8</span>MiB(<span class="number">47</span>%) CN:<span class="number">1</span> DL:<span class="number">0</span>B]</span><br><span class="line">Download: FILE: D:/Program_Files/scoop/cache/starship#<span class="number">0.41</span><span class="number">.3</span>#https_github.com_starship_starship_releases_download_v0<span class="number">.41</span><span class="number">.3</span>_starship-x86_64-pc-windows-msvc.zip</span><br><span class="line">Download: -------------------------------------------------------------------------------</span><br><span class="line">Download: [#d7df86 <span class="number">880</span>KiB/<span class="number">1.8</span>MiB(<span class="number">47</span>%) CN:<span class="number">1</span> DL:<span class="number">0</span>B]</span><br></pre></td></tr></tbody></table></figure>

<p>执行</p>
<figure class="highlight mipsasm"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">scoop </span><span class="keyword">install </span>starship</span><br></pre></td></tr></tbody></table></figure>

<p>若报错“Couldn’t find manifest for ‘starship’.”则执行</p>
<figure class="highlight mipsasm"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">scoop </span><span class="keyword">bucket </span><span class="keyword">add </span><span class="keyword">extras</span></span><br></pre></td></tr></tbody></table></figure>

<p>添加bucket（可通过scoop bucket list查看bucket列表，默认只有“main”，实际上正常情况下是不需要添加的，出现这种情况可能是之前install或者添加bucket异常，如果一直处于Checking repo… ok的状态那么需要重新安装scoop）。</p>
<p>16.在C:\Users&lt;username&gt;\Documents\PowerShell下新建Windows PowerShell脚本Microsoft.PowerShell_profile.ps1，将其内容编辑为：</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">Import-Module posh-git</span><br><span class="line">Import-Module oh-my-posh</span><br><span class="line"><span class="keyword">Set</span>-Theme PowerLine</span><br><span class="line">$ChocolateyProfile = <span class="string">"$env:ChocolateyInstall\helpers\chocolateyProfile.psm1"</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">Test</span>-<span class="keyword">Path</span>($ChocolateyProfile)) {</span><br><span class="line">  <span class="keyword">Import</span>-<span class="keyword">Module</span> <span class="string">"$ChocolateyProfile"</span></span><br><span class="line">}</span><br><span class="line"><span class="keyword">Import</span>-<span class="keyword">Module</span> posh-sshell</span><br><span class="line"><span class="keyword">If</span> (-<span class="keyword">Not</span> (<span class="keyword">Test</span>-<span class="keyword">Path</span> <span class="keyword">Variable</span>:PSise)) {  <span class="comment"># Only run this in the console and not in the ISE</span></span><br><span class="line">    <span class="keyword">Import</span>-<span class="keyword">Module</span> <span class="keyword">Get</span>-ChildItemColor</span><br><span class="line">    <span class="keyword">Set</span>-<span class="keyword">Alias</span> l <span class="keyword">Get</span>-ChildItem -<span class="keyword">option</span> AllScope</span><br><span class="line">    <span class="keyword">Set</span>-<span class="keyword">Alias</span> ls <span class="keyword">Get</span>-ChildItemColorFormatWide -<span class="keyword">option</span> AllScope</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>其中Set-Theme可以设置你喜欢的主题。若要启用starship，添加</p>
<figure class="highlight lisp"><table><tbody><tr><td class="code"><pre><span class="line">Invoke-Expression (<span class="name">&amp;starship</span> init powershell)</span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CSDN补档</category>
      </categories>
      <tags>
        <tag>powershell</tag>
        <tag>scoop</tag>
        <tag>terminal</tag>
      </tags>
  </entry>
  <entry>
    <title>从零开始的hexo与next主题配置github.io博客（入门篇）</title>
    <url>/posts/36835.html</url>
    <content><![CDATA[<ol>
<li><p>新建GitHub仓库名为<username>.github.io。</username></p>
</li>
<li><p>安装Node.js及Git。</p>
</li>
<li><p>安装hexo：</p>
<figure class="highlight avrasm"><table><tbody><tr><td class="code"><pre><span class="line">npm install -g hexo-<span class="keyword">cli</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>切换到要保存hexo博客的目录<blog>，执行</blog></p>
<figure class="highlight csharp"><table><tbody><tr><td class="code"><pre><span class="line">hexo <span class="keyword">init</span></span><br></pre></td></tr></tbody></table></figure>

<p>或直接执行</p>
<figure class="highlight vim"><table><tbody><tr><td class="code"><pre><span class="line">hexo init <span class="symbol">&lt;folder&gt;</span></span><br><span class="line"><span class="keyword">cd</span> <span class="symbol">&lt;folder&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>然后执行</p>
<figure class="highlight cmake"><table><tbody><tr><td class="code"><pre><span class="line">npm <span class="keyword">install</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>安装主题，以Next为例：切换到博客文件夹下后执行</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/hexo-theme-next themes/next</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>编辑<blog>/_config.yml，填写title、subtitle、description、keywords、author、language。将url填写为http://<username>.github.io。如果之前使用的是旧版hexo需要参考<a href="https://whjkm.github.io/2018/07/17/Hexo%E7%89%88%E6%9C%AC%E5%8D%87%E7%BA%A7%E5%92%8CNext%E4%B8%BB%E9%A2%98%E5%8D%87%E7%BA%A7%E4%B9%8B%E5%9D%91/">Hexo版本升级和Next主题升级之坑</a>更新后在time_format后添加update_option: ‘mtime’。将theme改为next。添加plugin：</username></blog></p>
<figure class="highlight yaml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">plugin:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">hexo-generator-feed</span></span><br><span class="line"><span class="attr">feed:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">atom</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">atom.xml</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">20</span></span><br><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span></span><br><span class="line">  <span class="attr">format:</span> <span class="string">html</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">10000</span></span><br></pre></td></tr></tbody></table></figure>

<p>添加Deployment配置：</p>
<figure class="highlight less"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">deploy</span>:</span><br><span class="line">  <span class="attribute">type</span>: git</span><br><span class="line">  <span class="attribute">repository</span>: <span class="attribute">https</span>:<span class="comment">//github.com/&lt;username&gt;/&lt;username&gt;.github.io.git</span></span><br><span class="line">  <span class="attribute">branch</span>: master</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>编辑<blog>/themes/next。更改scheme: Pisces。启用Dark Mode：将darkmode设置为true。启用commonweal等目录，将相应句子前的注释井号删掉。修改social配置，其中Google一栏plus.google已停用。links: Title:可添加其他地址。follow_me配置会在每篇文章末尾添加一个图标指向各个网站的链接，没必要。calendar配置将calendar_id改为Google邮箱，api_key需要在<a href="https://console.developers.google.com/">Google API Console</a>，新建项目，然后在“API和服务”一栏下的“信息中心”一栏的页面中选择“ENABLE APIS AND SERVISES”如图：<img src="https://img-blog.csdnimg.cn/20200927172709621.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lpaHVhamFjaw==,size_16,color_FFFFFF,t_70" alt="img"><br>搜索API和服务：<img src="https://img-blog.csdnimg.cn/20200927172858560.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lpaHVhamFjaw==,size_16,color_FFFFFF,t_70" alt="img"><br>搜索Google Calendar：<img src="https://img-blog.csdnimg.cn/20200927173001814.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lpaHVhamFjaw==,size_16,color_FFFFFF,t_70" alt="img"><br>点击Google Calendar API后点击“启用”，然后“创建凭据”：<img src="https://img-blog.csdnimg.cn/2020092717313054.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lpaHVhamFjaw==,size_16,color_FFFFFF,t_70" alt="img"><br>点击“选择”选择Google Calendar API，然后点击“API密钥”创建。<br>github_banner配置中将enable设置为true，permalink设置为<a href="https://github.com/">https://github.com/</a><username>。将pjax设置为true。</username></blog></p>
</li>
<li><p>新建博文：执行</p>
<figure class="highlight haxe"><table><tbody><tr><td class="code"><pre><span class="line">hexo <span class="keyword">new</span> <span class="type">CSDN</span>-<span class="number">1</span></span><br></pre></td></tr></tbody></table></figure>

<p>会显示</p>
<figure class="highlight latex"><table><tbody><tr><td class="code"><pre><span class="line">INFO  Created: D:<span class="tag">\<span class="name">Documents</span></span><span class="tag">\<span class="name">Programming</span></span><span class="tag">\<span class="name">Aykablog</span></span><span class="tag">\<span class="name">source</span></span><span class="tag">\<span class="name">_</span></span>posts<span class="tag">\<span class="name">CSDN</span></span>-1.md</span><br></pre></td></tr></tbody></table></figure>

<p>其中标准命令为</p>
<figure class="highlight gauss"><table><tbody><tr><td class="code"><pre><span class="line">hexo <span class="keyword">new</span> [layout] &lt;<span class="built_in">title</span>&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>[layout]可选项默认为post。</p>
</li>
<li><p>执行</p>
<figure class="highlight verilog"><table><tbody><tr><td class="code"><pre><span class="line">hexo <span class="keyword">generate</span></span><br></pre></td></tr></tbody></table></figure>

<p>或</p>
<figure class="highlight ebnf"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">hexo g</span></span><br></pre></td></tr></tbody></table></figure>

<p>显示</p>
<figure class="highlight crystal"><table><tbody><tr><td class="code"><pre><span class="line">INFO  Start processing</span><br><span class="line">INFO  Files loaded in <span class="number">370</span> ms</span><br><span class="line">INFO  <span class="symbol">Deleted:</span> images/arrow-right-<span class="number">32</span>x32-<span class="keyword">next</span>.png</span><br><span class="line">INFO  <span class="symbol">Deleted:</span> images/arrow-right-<span class="number">16</span>x16-<span class="keyword">next</span>.png</span><br><span class="line">INFO  <span class="symbol">Deleted:</span> images/arrow-right.eps</span><br><span class="line">INFO  <span class="symbol">Deleted:</span> images/arrow-right.png</span><br><span class="line">INFO  <span class="symbol">Deleted:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">font</span>-<span class="title">awesome</span>/<span class="title">HELP</span>-<span class="title">US</span>-<span class="title">OUT</span>.<span class="title">txt</span></span></span><br><span class="line">INFO  <span class="symbol">Deleted:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">font</span>-<span class="title">awesome</span>/<span class="title">css</span>/<span class="title">font</span>-<span class="title">awesome</span>.<span class="title">css</span>.<span class="title">map</span></span></span><br><span class="line">INFO  <span class="symbol">Deleted:</span> images/arrow-right.svg</span><br><span class="line">INFO  <span class="symbol">Deleted:</span> images/quote-l.svg</span><br><span class="line">INFO  <span class="symbol">Deleted:</span> images/quote-r.svg</span><br><span class="line">INFO  <span class="symbol">Deleted:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">font</span>-<span class="title">awesome</span>/<span class="title">bower</span>.<span class="title">json</span></span></span><br><span class="line">INFO  <span class="symbol">Deleted:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">font</span>-<span class="title">awesome</span>/<span class="title">fonts</span>/<span class="title">fontawesome</span>-<span class="title">webfont</span>.<span class="title">woff</span></span></span><br><span class="line">INFO  <span class="symbol">Deleted:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">font</span>-<span class="title">awesome</span>/<span class="title">fonts</span>/<span class="title">fontawesome</span>-<span class="title">webfont</span>.<span class="title">woff2</span></span></span><br><span class="line">INFO  <span class="symbol">Deleted:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">font</span>-<span class="title">awesome</span>/<span class="title">css</span>/<span class="title">font</span>-<span class="title">awesome</span>.<span class="title">css</span></span></span><br><span class="line">INFO  <span class="symbol">Deleted:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">font</span>-<span class="title">awesome</span>/<span class="title">css</span>/<span class="title">font</span>-<span class="title">awesome</span>.<span class="title">min</span>.<span class="title">css</span></span></span><br><span class="line">INFO  <span class="symbol">Deleted:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">font</span>-<span class="title">awesome</span>/<span class="title">fonts</span>/<span class="title">fontawesome</span>-<span class="title">webfont</span>.<span class="title">eot</span></span></span><br><span class="line">INFO  <span class="symbol">Deleted:</span> images/arrow-right.ico</span><br><span class="line">INFO  <span class="symbol">Deleted:</span> images/<span class="number">41254968094E73320</span>D03EFF9B33277C03C1168186.jpg</span><br><span class="line">INFO  <span class="symbol">Generated:</span> content.json</span><br><span class="line">INFO  <span class="symbol">Generated:</span> board/index.html</span><br><span class="line">INFO  <span class="symbol">Generated:</span> about/index.html</span><br><span class="line">INFO  <span class="symbol">Generated:</span> tags/index.html</span><br><span class="line">INFO  <span class="symbol">Generated:</span> categories/index.html</span><br><span class="line">INFO  <span class="symbol">Generated:</span> archives/index.html</span><br><span class="line">INFO  <span class="symbol">Generated:</span> archives/<span class="number">2020</span>/index.html</span><br><span class="line">INFO  <span class="symbol">Generated:</span> archives/<span class="number">2020</span>/<span class="number">0</span>3/index.html</span><br><span class="line">INFO  <span class="symbol">Generated:</span> tags/tutorial/index.html</span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="number">2020</span>/<span class="number">0</span>3/<span class="number">18</span>/hello-world/index.html</span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="number">2020</span>/<span class="number">0</span>3/<span class="number">19</span>/paper/index.html</span><br><span class="line">INFO  <span class="symbol">Generated:</span> index.html</span><br><span class="line">INFO  <span class="symbol">Generated:</span> js/algolia-search.js</span><br><span class="line">INFO  <span class="symbol">Generated:</span> js/schemes/muse.js</span><br><span class="line">INFO  <span class="symbol">Generated:</span> js/<span class="keyword">next</span>-boot.js</span><br><span class="line">INFO  <span class="symbol">Generated:</span> js/bookmark.js</span><br><span class="line">INFO  <span class="symbol">Generated:</span> js/local-search.js</span><br><span class="line">INFO  <span class="symbol">Generated:</span> css/main.css</span><br><span class="line">INFO  <span class="symbol">Generated:</span> js/schemes/pisces.js</span><br><span class="line">INFO  <span class="symbol">Generated:</span> js/utils.js</span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">index</span>.<span class="title">d</span>.<span class="title">ts</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">font</span>-<span class="title">awesome</span>/<span class="title">webfonts</span>/<span class="title">fa</span>-<span class="title">regular</span>-400.<span class="title">woff2</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">LICENSE</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">lib</span>/<span class="title">abort</span>-<span class="title">request</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">example</span>/<span class="title">example</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">lib</span>/<span class="title">execute</span>-<span class="title">scripts</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">package</span>.<span class="title">json</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">lib</span>/<span class="title">is</span>-<span class="title">supported</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">font</span>-<span class="title">awesome</span>/<span class="title">css</span>/<span class="title">all</span>.<span class="title">min</span>.<span class="title">css</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">index</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">lib</span>/<span class="title">foreach</span>-<span class="title">selectors</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">lib</span>/<span class="title">foreach</span>-<span class="title">els</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">CHANGELOG</span>.<span class="title">html</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">lib</span>/<span class="title">parse</span>-<span class="title">options</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">lib</span>/<span class="title">eval</span>-<span class="title">script</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">example</span>/<span class="title">page2</span>.<span class="title">html</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">lib</span>/<span class="title">send</span>-<span class="title">request</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">example</span>/<span class="title">page3</span>.<span class="title">html</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">example</span>/<span class="title">forms</span>.<span class="title">html</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">pjax</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">font</span>-<span class="title">awesome</span>/<span class="title">webfonts</span>/<span class="title">fa</span>-<span class="title">brands</span>-400.<span class="title">woff2</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">example</span>/<span class="title">index</span>.<span class="title">html</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">README</span>.<span class="title">html</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">font</span>-<span class="title">awesome</span>/<span class="title">webfonts</span>/<span class="title">fa</span>-<span class="title">solid</span>-900.<span class="title">woff2</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">pjax</span>.<span class="title">min</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">tests</span>/<span class="title">setup</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">lib</span>/<span class="title">switches</span>-<span class="title">selectors</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">lib</span>/<span class="title">uniqueid</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">lib</span>/<span class="title">events</span>/<span class="title">trigger</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">lib</span>/<span class="title">switches</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">tests</span>/<span class="title">test</span>.<span class="title">ts</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">lib</span>/<span class="title">events</span>/<span class="title">on</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">lib</span>/<span class="title">proto</span>/<span class="title">parse</span>-<span class="title">element</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">lib</span>/<span class="title">events</span>/<span class="title">off</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">lib</span>/<span class="title">proto</span>/<span class="title">log</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">lib</span>/<span class="title">proto</span>/<span class="title">attach</span>-<span class="title">form</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">lib</span>/<span class="title">util</span>/<span class="title">extend</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">lib</span>/<span class="title">proto</span>/<span class="title">attach</span>-<span class="title">link</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">lib</span>/<span class="title">proto</span>/<span class="title">handle</span>-<span class="title">response</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">lib</span>/<span class="title">util</span>/<span class="title">contains</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">lib</span>/<span class="title">util</span>/<span class="title">clone</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">lib</span>/<span class="title">util</span>/<span class="title">update</span>-<span class="title">query</span>-<span class="title">string</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">lib</span>/<span class="title">util</span>/<span class="title">noop</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">tests</span>/<span class="title">lib</span>/<span class="title">proto</span>/<span class="title">attach</span>-<span class="title">form</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">tests</span>/<span class="title">lib</span>/<span class="title">util</span>/<span class="title">clone</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">tests</span>/<span class="title">lib</span>/<span class="title">eval</span>-<span class="title">scripts</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">tests</span>/<span class="title">lib</span>/<span class="title">abort</span>-<span class="title">request</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">tests</span>/<span class="title">lib</span>/<span class="title">is</span>-<span class="title">supported</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">tests</span>/<span class="title">lib</span>/<span class="title">execute</span>-<span class="title">scripts</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">tests</span>/<span class="title">lib</span>/<span class="title">foreach</span>-<span class="title">els</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">tests</span>/<span class="title">lib</span>/<span class="title">foreach</span>-<span class="title">selectors</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">tests</span>/<span class="title">lib</span>/<span class="title">parse</span>-<span class="title">options</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">tests</span>/<span class="title">lib</span>/<span class="title">events</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">tests</span>/<span class="title">lib</span>/<span class="title">switches</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">tests</span>/<span class="title">lib</span>/<span class="title">util</span>/<span class="title">contains</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">tests</span>/<span class="title">lib</span>/<span class="title">switch</span>-<span class="title">selectors</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">tests</span>/<span class="title">lib</span>/<span class="title">uniqueid</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">tests</span>/<span class="title">lib</span>/<span class="title">send</span>-<span class="title">request</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">tests</span>/<span class="title">lib</span>/<span class="title">util</span>/<span class="title">noop</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">tests</span>/<span class="title">lib</span>/<span class="title">util</span>/<span class="title">extend</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">tests</span>/<span class="title">lib</span>/<span class="title">proto</span>/<span class="title">attach</span>-<span class="title">link</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">tests</span>/<span class="title">lib</span>/<span class="title">proto</span>/<span class="title">parse</span>-<span class="title">element</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">tests</span>/<span class="title">lib</span>/<span class="title">util</span>/<span class="title">update</span>-<span class="title">query</span>-<span class="title">string</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="symbol">Generated:</span> <span class="class"><span class="keyword">lib</span>/<span class="title">pjax</span>/<span class="title">tests</span>/<span class="title">lib</span>/<span class="title">proto</span>/<span class="title">handle</span>-<span class="title">response</span>.<span class="title">js</span></span></span><br><span class="line">INFO  <span class="number">84</span> files generated in <span class="number">932</span> ms</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>执行</p>
<figure class="highlight axapta"><table><tbody><tr><td class="code"><pre><span class="line">hexo <span class="keyword">server</span></span><br></pre></td></tr></tbody></table></figure>

<p>或</p>
<figure class="highlight ebnf"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">hexo s</span></span><br></pre></td></tr></tbody></table></figure>

<p>显示</p>
<figure class="highlight pgsql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">INFO</span>  <span class="keyword">Start</span> processing</span><br><span class="line"><span class="keyword">INFO</span>  Hexo <span class="keyword">is</span> running at http://localhost:<span class="number">4000</span> . Press Ctrl+C <span class="keyword">to</span> stop.</span><br></pre></td></tr></tbody></table></figure>

<p>打开浏览器打开该网址即可预览。</p>
</li>
<li><p>如果没有更新，则需要执行</p>
<figure class="highlight ebnf"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">hexo clean</span></span><br></pre></td></tr></tbody></table></figure>

<p>后重新生成并启动服务器。</p>
</li>
<li><p>执行</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">npm <span class="keyword">install</span> hexo-deployer-git <span class="comment">--save</span></span><br></pre></td></tr></tbody></table></figure>

<p>注意此处必须为–save选项，全局安装无效报错：</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line"><span class="builtin-name">INFO</span>  Validating config</span><br><span class="line"><span class="builtin-name">ERROR</span> Deployer <span class="keyword">not</span> found: git</span><br></pre></td></tr></tbody></table></figure>

<p>执行</p>
<figure class="highlight ebnf"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">hexo deploy</span></span><br></pre></td></tr></tbody></table></figure>

<p>或</p>
<figure class="highlight ebnf"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">hexo d</span></span><br></pre></td></tr></tbody></table></figure>

<p>将博客部署到GitHub上：</p>
<figure class="highlight vim"><table><tbody><tr><td class="code"><pre><span class="line">INFO  Validating config</span><br><span class="line">INFO  Deployin<span class="variable">g:</span> git</span><br><span class="line">INFO  Setting <span class="keyword">up</span> Git deployment...</span><br><span class="line">Initialized <span class="built_in">empty</span> Git repository in D:/Documents/Programming/HexoBlog/.deploy_git/.git/</span><br><span class="line">[master (root-commit) <span class="number">9</span>cfa1ad] First commit</span><br><span class="line"> <span class="number">1</span> <span class="keyword">file</span> changed, <span class="number">0</span> insertions(+), <span class="number">0</span> deletions(-)</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> placeholder</span><br><span class="line">INFO  Clearing .deploy_git folder...</span><br><span class="line">INFO  Copying <span class="keyword">files</span> from public folder...</span><br><span class="line">INFO  Copying <span class="keyword">files</span> from <span class="built_in">extend</span> dirs...</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in <span class="number">2019</span>/<span class="number">07</span>/<span class="number">27</span>/CSDN-<span class="number">1</span>/<span class="built_in">index</span>.html.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in <span class="number">2020</span>/<span class="number">03</span>/<span class="number">19</span>/paper/<span class="built_in">index</span>.html.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in <span class="number">2020</span>/<span class="number">09</span>/<span class="number">27</span>/CSDN-<span class="number">2</span>/<span class="built_in">index</span>.html.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in <span class="number">2020</span>/<span class="number">09</span>/<span class="number">28</span>/hello-world/<span class="built_in">index</span>.html.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in about/<span class="built_in">index</span>.html.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in archives/<span class="number">2019</span>/<span class="number">07</span>/<span class="built_in">index</span>.html.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in archives/<span class="number">2019</span>/<span class="built_in">index</span>.html.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in archives/<span class="number">2020</span>/<span class="number">03</span>/<span class="built_in">index</span>.html.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in archives/<span class="number">2020</span>/<span class="number">09</span>/<span class="built_in">index</span>.html.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in archives/<span class="number">2020</span>/<span class="built_in">index</span>.html.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in archives/<span class="built_in">index</span>.html.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in board/<span class="built_in">index</span>.html.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in categories/CSDN/<span class="built_in">index</span>.html.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in categories/<span class="built_in">index</span>.html.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in css/main.css.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in <span class="built_in">index</span>.html.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in js/algolia-<span class="built_in">search</span>.js.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in js/bookmark.js.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in js/local-<span class="built_in">search</span>.js.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in js/motion.js.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in js/<span class="keyword">next</span>-boot.js.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in js/schemes/muse.js.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in js/schemes/pisces.js.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in js/utils.js.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in lib/anime.<span class="built_in">min</span>.js.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in lib/font-awesome/css/<span class="keyword">all</span>.<span class="built_in">min</span>.css.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in lib/velocity/velocity.<span class="built_in">min</span>.js.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in lib/velocity/velocity.ui.<span class="built_in">min</span>.js.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in <span class="keyword">tags</span>/Adobe/<span class="built_in">index</span>.html.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in <span class="keyword">tags</span>/Adobe安装错误/<span class="built_in">index</span>.html.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in <span class="keyword">tags</span>/Visual-Studio-Installer-Error/<span class="built_in">index</span>.html.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in <span class="keyword">tags</span>/<span class="built_in">index</span>.html.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">warnin<span class="variable">g:</span> LF will <span class="keyword">be</span> replaced by CRLF in <span class="keyword">tags</span>/tutorial/<span class="built_in">index</span>.html.</span><br><span class="line">The <span class="keyword">file</span> will have its original <span class="built_in">line</span> endings in your working directory</span><br><span class="line">[master <span class="number">1</span>d6cbde] Site updated: <span class="number">2020</span>-<span class="number">09</span>-<span class="number">28</span> <span class="number">00</span>:<span class="number">53</span>:<span class="number">37</span></span><br><span class="line"> <span class="number">50</span> <span class="keyword">files</span> changed, <span class="number">15669</span> insertions(+)</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> <span class="number">2019</span>/<span class="number">07</span>/<span class="number">27</span>/CSDN-<span class="number">1</span>/<span class="built_in">index</span>.html</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> <span class="number">2020</span>/<span class="number">03</span>/<span class="number">19</span>/paper/<span class="built_in">index</span>.html</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> <span class="number">2020</span>/<span class="number">09</span>/<span class="number">27</span>/CSDN-<span class="number">2</span>/<span class="built_in">index</span>.html</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> <span class="number">2020</span>/<span class="number">09</span>/<span class="number">28</span>/hello-world/<span class="built_in">index</span>.html</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> about/<span class="built_in">index</span>.html</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> archives/<span class="number">2019</span>/<span class="number">07</span>/<span class="built_in">index</span>.html</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> archives/<span class="number">2019</span>/<span class="built_in">index</span>.html</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> archives/<span class="number">2020</span>/<span class="number">03</span>/<span class="built_in">index</span>.html</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> archives/<span class="number">2020</span>/<span class="number">09</span>/<span class="built_in">index</span>.html</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> archives/<span class="number">2020</span>/<span class="built_in">index</span>.html</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> archives/<span class="built_in">index</span>.html</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> board/<span class="built_in">index</span>.html</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> categories/CSDN/<span class="built_in">index</span>.html</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> categories/<span class="built_in">index</span>.html</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> css/main.css</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> images/algolia_logo.svg</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> images/apple-touch-icon-<span class="keyword">next</span>.png</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> images/avatar.gif</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> images/<span class="keyword">cc</span>-by-nc-nd.svg</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> images/<span class="keyword">cc</span>-by-nc-<span class="keyword">sa</span>.svg</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> images/<span class="keyword">cc</span>-by-nc.svg</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> images/<span class="keyword">cc</span>-by-nd.svg</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> images/<span class="keyword">cc</span>-by-<span class="keyword">sa</span>.svg</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> images/<span class="keyword">cc</span>-by.svg</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> images/<span class="keyword">cc</span>-zero.svg</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> images/favicon-<span class="number">16</span>x16-<span class="keyword">next</span>.png</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> images/favicon-<span class="number">32</span>x32-<span class="keyword">next</span>.png</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> images/logo.svg</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> <span class="built_in">index</span>.html</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> js/algolia-<span class="built_in">search</span>.js</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> js/bookmark.js</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> js/local-<span class="built_in">search</span>.js</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> js/motion.js</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> js/<span class="keyword">next</span>-boot.js</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> js/schemes/muse.js</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> js/schemes/pisces.js</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> js/utils.js</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> lib/anime.<span class="built_in">min</span>.js</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> lib/font-awesome/css/<span class="keyword">all</span>.<span class="built_in">min</span>.css</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> lib/font-awesome/webfonts/fa-brands-<span class="number">400</span>.woff2</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> lib/font-awesome/webfonts/fa-regular-<span class="number">400</span>.woff2</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> lib/font-awesome/webfonts/fa-solid-<span class="number">900</span>.woff2</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> lib/velocity/velocity.<span class="built_in">min</span>.js</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> lib/velocity/velocity.ui.<span class="built_in">min</span>.js</span><br><span class="line"> <span class="keyword">delete</span> <span class="keyword">mode</span> <span class="number">100644</span> placeholder</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> <span class="keyword">tags</span>/Adobe/<span class="built_in">index</span>.html</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> <span class="string">"tags/Adobe\345\256\211\350\243\205\351\224\231\350\257\257/index.html"</span></span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> <span class="keyword">tags</span>/Visual-Studio-Installer-Error/<span class="built_in">index</span>.html</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> <span class="keyword">tags</span>/<span class="built_in">index</span>.html</span><br><span class="line"> create <span class="keyword">mode</span> <span class="number">100644</span> <span class="keyword">tags</span>/tutorial/<span class="built_in">index</span>.html</span><br><span class="line">Enumerating object<span class="variable">s:</span> <span class="number">91</span>, done.</span><br><span class="line">Counting object<span class="variable">s:</span> <span class="number">100</span>% (<span class="number">91</span>/<span class="number">91</span>), done.</span><br><span class="line">Compressing object<span class="variable">s:</span> <span class="number">100</span>% (<span class="number">66</span>/<span class="number">66</span>), done.</span><br><span class="line">Writing object<span class="variable">s:</span> <span class="number">100</span>% (<span class="number">91</span>/<span class="number">91</span>), <span class="number">260.02</span> KiB | <span class="number">6.84</span> MiB/s, done.</span><br><span class="line">Total <span class="number">91</span> (delta <span class="number">24</span>), reused <span class="number">0</span> (delta <span class="number">0</span>), pack-reused <span class="number">0</span></span><br><span class="line">remote: Resolving delta<span class="variable">s:</span> <span class="number">100</span>% (<span class="number">24</span>/<span class="number">24</span>), done.</span><br><span class="line">To http<span class="variable">s:</span>//github.<span class="keyword">com</span>/yihuajack/yihuajack.github.io.git</span><br><span class="line"> + dd9b4c5...<span class="number">1</span>d6cbde HEAD -&gt; master (forced <span class="keyword">update</span>)</span><br><span class="line">Branch <span class="string">'master'</span> <span class="keyword">set</span> <span class="keyword">up</span> <span class="keyword">to</span> track remote branch <span class="string">'master'</span> from <span class="string">'https://github.com/yihuajack/yihuajack.github.io.git'</span>.</span><br><span class="line">INFO  Deploy done: git</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>编辑<blog>/source/about/index.md即为“关于”页面。</blog></p>
</li>
<li><p>编辑<blog>/source/_posts下的相应Markdown文件即可编辑博文。在开头的Front-matter部分可以通过title编辑标题、date编辑日期、tags编辑标签、categories编辑分类。如果多条tags或categories使用语法：</blog></p>
<figure class="highlight subunit"><table><tbody><tr><td class="code"><pre><span class="line">categories:</span><br><span class="line">- Diary</span><br><span class="line"><span class="keyword">tags:</span></span><br><span class="line">- PS3</span><br><span class="line">- Games</span><br></pre></td></tr></tbody></table></figure>

<p>参考官方文档：<a href="https://hexo.io/zh-cn/docs/%E3%80%82">https://hexo.io/zh-cn/docs/。</a></p>
</li>
</ol>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>FrontEnd</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
</search>
